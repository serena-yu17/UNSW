!function(){var $="object"==typeof this.global?this.global:this;$.JS=$.JS||{},JS.ENV=$}(),JS.Package=function(loader){var Set=JS.Package.OrderedSet;JS.Package._index(this),this._loader=loader,this._names=new Set,this._deps=new Set,this._uses=new Set,this._styles=new Set,this._observers={},this._events={}},function(klass){klass.displayName="Package",klass.toString=function(){return klass.displayName},klass.log=function(message){"undefined"!=typeof window&&("object"==typeof window.runtime&&window.runtime.trace(message),window.console&&console.info&&console.info(message))};var Set=klass.OrderedSet=function(list){if(this._members=this.list=[],this._index={},list)for(var i=0,n=list.length;n>i;i++)this.push(list[i])};Set.prototype.push=function(item){var key=void 0!==item.id?item.id:item,index=this._index;index.hasOwnProperty(key)||(index[key]=this._members.length,this._members.push(item))};var Deferred=klass.Deferred=function(){this._status="deferred",this._value=null,this._callbacks=[]};Deferred.prototype.callback=function(callback,context){"succeeded"===this._status?callback.call(context,this._value):this._callbacks.push([callback,context])},Deferred.prototype.succeed=function(value){this._status="succeeded",this._value=value;for(var callback;callback=this._callbacks.shift();)callback[0].call(callback[1],value)},klass.ENV=JS.ENV,klass.onerror=function(e){throw e},klass._throw=function(message){klass.onerror(new Error(message))};for(var instance=klass.prototype,methods=[["requires","_deps"],["uses","_uses"],["styling","_styles"]],i=methods.length;i--;)(function(pair){var method=pair[0],list=pair[1];instance[method]=function(){var i,n=arguments.length;for(i=0;n>i;i++)this[list].push(arguments[i]);return this}})(methods[i]);instance.provides=function(){var i,n=arguments.length;for(i=0;n>i;i++)this._names.push(arguments[i]),klass._getFromCache(arguments[i]).pkg=this;return this},instance.setup=function(block){return this._onload=block,this},instance._on=function(eventType,block,context){if(this._events[eventType])return block.call(context);var list=this._observers[eventType]=this._observers[eventType]||[];list.push([block,context]),this._load()},instance._fire=function(eventType){if(this._events[eventType])return!1;this._events[eventType]=!0;var list=this._observers[eventType];if(!list)return!0;delete this._observers[eventType];for(var i=0,n=list.length;n>i;i++)list[i][0].call(list[i][1]);return!0},instance._isLoaded=function(withExceptions){if(!withExceptions&&void 0!==this.__isLoaded)return this.__isLoaded;for(var name,object,names=this._names.list,i=names.length;i--;)if(name=names[i],object=klass._getObject(name,this._exports),void 0===object)return withExceptions?klass._throw("Expected package at "+this._loader+" to define "+name):this.__isLoaded=!1;return this.__isLoaded=!0},instance._load=function(){if(this._fire("request")){this._prefetch();var allDeps=this._deps.list.concat(this._uses.list),source=this._source||[],n=(this._loader||{}).length,self=this;klass.when({load:allDeps}),klass.when({complete:this._deps.list},function(){klass.when({complete:allDeps,load:[this]},function(){this._fire("complete")},this);var loadNext=function(exports){if(0===n)return fireOnLoad(exports);n-=1;var index=self._loader.length-n-1;klass.Loader.loadFile(self._loader[index],loadNext,source[index])},fireOnLoad=function(exports){self._exports=exports,self._onload&&self._onload(),self._isLoaded(!0),self._fire("load")};if(this._isLoaded())return this._fire("download"),this._fire("load");if(void 0===this._loader)return klass._throw("No load path found for "+this._names.list[0]);if("function"==typeof this._loader?this._loader(fireOnLoad):loadNext(),klass.Loader.loadStyle){for(var styles=this._styles.list,i=styles.length;i--;)klass.Loader.loadStyle(styles[i]);this._fire("download")}},this)}},instance._prefetch=function(){if(!this._source&&this._loader instanceof Array&&klass.Loader.fetch){this._source=[];for(var i=0,n=this._loader.length;n>i;i++)this._source[i]=klass.Loader.fetch(this._loader[i])}},instance.toString=function(){return"Package:"+this._names.list.join(",")},klass.when=function(eventTable,block,context){var event,packages,i,eventList=[],objects={};for(event in eventTable)if(eventTable.hasOwnProperty(event))for(objects[event]=[],packages=new klass.OrderedSet(eventTable[event]),i=packages.list.length;i--;)eventList.push([event,packages.list[i],i]);var waiting=i=eventList.length;if(0===waiting)return block&&block.call(context,objects);for(;i--;)(function(event){var pkg=klass._getByName(event[1]);pkg._on(event[0],function(){objects[event[0]][event[2]]=klass._getObject(event[1],pkg._exports),waiting-=1,0===waiting&&block&&block.call(context,objects)})})(eventList[i])},klass._autoIncrement=1,klass._indexByPath={},klass._indexByName={},klass._autoloaders=[],klass._index=function(pkg){pkg.id=this._autoIncrement,this._autoIncrement+=1},klass._getByPath=function(loader){var path=loader.toString(),pkg=this._indexByPath[path];return pkg?pkg:("string"==typeof loader&&(loader=[].slice.call(arguments)),pkg=this._indexByPath[path]=new this(loader))},klass._getByName=function(name){if("string"!=typeof name)return name;var cached=this._getFromCache(name);if(cached.pkg)return cached.pkg;var autoloaded=this._manufacture(name);if(autoloaded)return autoloaded;var placeholder=new this;return placeholder.provides(name),placeholder},klass.remove=function(name){var pkg=this._getByName(name);delete this._indexByName[name],delete this._indexByPath[pkg._loader]},klass._autoload=function(pattern,options){this._autoloaders.push([pattern,options])},klass._manufacture=function(name){var i,autoloader,path,autoloaders=this._autoloaders,n=autoloaders.length;for(i=0;n>i;i++)if(autoloader=autoloaders[i],autoloader[0].test(name)){path=autoloader[1].from+"/"+name.replace(/([a-z])([A-Z])/g,function(m,a,b){return a+"_"+b}).replace(/\./g,"/").toLowerCase()+".js";var pkg=new this([path]);return pkg.provides(name),(path=autoloader[1].require)&&pkg.requires(name.replace(autoloader[0],path)),pkg}return null},klass._getFromCache=function(name){return this._indexByName[name]=this._indexByName[name]||{}},klass._getObject=function(name,rootObject){if("string"!=typeof name)return void 0;var cached=rootObject?{}:this._getFromCache(name);if(void 0!==cached.obj)return cached.obj;for(var part,object=rootObject||this.ENV,parts=name.split(".");part=parts.shift();)object=object&&object[part];return rootObject&&void 0===object?this._getObject(name):cached.obj=object}}(JS.Package),JS.Package.CommonJSLoader={usable:function(){return"function"==typeof require&&"object"==typeof exports},__FILE__:function(){return this._currentPath},loadFile:function(path,fireCallbacks){var module=(process.cwd(),path.replace(/\.[^\.]+$/g,"")),path=require("path"),file=path.resolve(module);this._currentPath=file+".js",fireCallbacks(require(file))}},JS.Package.DomLoader={HOST_REGEX:/^https?\:\/\/[^\/]+/i,usable:function(){return!!JS.Package._getObject("window.document.getElementsByTagName")},__FILE__:function(){var scripts=document.getElementsByTagName("script");return src=scripts[scripts.length-1].src,url=window.location.href,/^\w+\:\/+/.test(src)?src:/^\//.test(src)?window.location.origin+src:url.replace(/[^\/]*$/g,"")+src},cacheBust:function(path){var token=(new Date).getTime();return path+(/\?/.test(path)?"&":"?")+token},fetch:function(path){var originalPath=path;JS.cacheBust&&(path=this.cacheBust(path)),this.HOST=this.HOST||this.HOST_REGEX.exec(window.location.href);var host=this.HOST_REGEX.exec(path);if(!this.HOST||host&&host[0]!==this.HOST[0])return null;JS.Package.log("Loading "+path);var source=new JS.Package.Deferred,self=this,xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;return xhr.open("GET",path,!0),xhr.onreadystatechange=function(){4===xhr.readyState&&(xhr.onreadystatechange=self._K,source.succeed(xhr.responseText+"\n//@ sourceURL="+originalPath),xhr=null)},xhr.send(null),source},loadFile:function(path,fireCallbacks,source){JS.cacheBust&&!source&&(path=this.cacheBust(path));var self=this,head=document.getElementsByTagName("head")[0],script=document.createElement("script");return script.type="text/javascript",source?source.callback(function(code){JS.Package.log("Executing "+path),eval(code),fireCallbacks()}):(JS.Package.log("Loading and executing "+path),script.src=path,script.onload=script.onreadystatechange=function(){var state=script.readyState,status=script.status;(!state||"loaded"===state||"complete"===state||4===state&&200===status)&&(fireCallbacks(),script.onload=script.onreadystatechange=self._K,head=null,script=null)},void head.appendChild(script))},loadStyle:function(path){var link=document.createElement("link");link.rel="stylesheet",link.type="text/css",link.href=path,document.getElementsByTagName("head")[0].appendChild(link)},_K:function(){}},JS.Package.RhinoLoader={usable:function(){return"object"==typeof java&&"function"==typeof require},__FILE__:function(){return this._currentPath},loadFile:function(path,fireCallbacks){var cwd=java.lang.System.getProperty("user.dir"),module=path.replace(/\.[^\.]+$/g,""),requirePath=new java.io.File(cwd,module).toString();this._currentPath=requirePath+".js",fireCallbacks(require(requirePath))}},JS.Package.ServerLoader={usable:function(){return"function"==typeof JS.Package._getObject("load")&&"function"==typeof JS.Package._getObject("version")},__FILE__:function(){return this._currentPath},loadFile:function(path,fireCallbacks){this._currentPath=path,load(path),fireCallbacks()}},JS.Package.WshLoader={usable:function(){return!!JS.Package._getObject("ActiveXObject")&&!!JS.Package._getObject("WScript")},__FILE__:function(){return this._currentPath},loadFile:function(path,fireCallbacks){this._currentPath=path;var fso=new ActiveXObject("Scripting.FileSystemObject"),file,runner;try{file=fso.OpenTextFile(path),runner=function(){eval(file.ReadAll())},runner(),fireCallbacks()}finally{try{file&&file.Close()}catch(e){}}}},JS.Package.XULRunnerLoader={jsloader:"@mozilla.org/moz/jssubscript-loader;1",cssservice:"@mozilla.org/content/style-sheet-service;1",ioservice:"@mozilla.org/network/io-service;1",usable:function(){try{var CC=(Components||{}).classes;return!!(CC&&CC[this.jsloader]&&CC[this.jsloader].getService)}catch(e){return!1}},setup:function(){var Cc=Components.classes,Ci=Components.interfaces;this.ssl=Cc[this.jsloader].getService(Ci.mozIJSSubScriptLoader),this.sss=Cc[this.cssservice].getService(Ci.nsIStyleSheetService),this.ios=Cc[this.ioservice].getService(Ci.nsIIOService)},loadFile:function(path,fireCallbacks){window.console&&console.info&&console.info("Loading "+path),this.ssl.loadSubScript(path),fireCallbacks()},loadStyle:function(path){var uri=this.ios.newURI(path,null,null);this.sss.loadAndRegisterSheet(uri,this.sss.USER_SHEET)}},function(){var i,candidate,candidates=[JS.Package.XULRunnerLoader,JS.Package.DomLoader,JS.Package.RhinoLoader,JS.Package.CommonJSLoader,JS.Package.ServerLoader,JS.Package.WshLoader],n=candidates.length;for(i=0;n>i;i++)if(candidate=candidates[i],candidate.usable()){JS.Package.Loader=candidate,candidate.setup&&candidate.setup();break}}(),JS.Package.DSL={__FILE__:function(){return JS.Package.Loader.__FILE__()},pkg:function(name,path){var pkg=path?JS.Package._getByPath(path):JS.Package._getByName(name);return pkg.provides(name),pkg},file:function(){return JS.Package._getByPath.apply(JS.Package,arguments)},load:function(path,fireCallbacks){JS.Package.Loader.loadFile(path,fireCallbacks)},autoload:function(pattern,options){JS.Package._autoload(pattern,options)}},JS.Package.DSL.files=JS.Package.DSL.file,JS.Package.DSL.loader=JS.Package.DSL.file,JS.Packages=function(declaration){declaration.call(JS.Package.DSL)},JS.cacheBust=!1,JS.load=function(url,callback){return JS.Package.Loader.loadFile(url,function(){"function"==typeof callback&&callback()}),this},JS.require=function(){for(var requirements=[],i=0;"string"==typeof arguments[i];)requirements.push(arguments[i]),i+=1;var callback=arguments[i],context=arguments[i+1];return JS.Package.when({complete:requirements},function(objects){callback&&callback.apply(context||null,objects&&objects.complete)}),this};var EditorComponent=new JS.Class({initialize:function(){this.editor=null},setEditor:function(editor){this.editor=editor},saveComponent:function(init,success,error){this.editor.saveComponent(this,init,success,error)},onSaveSuccess:function(){},onSaveError:function(){}});JS.require("jQuery",function($){$('<style type="text/css"></style>').appendTo("head")});var UIEditLock=new JS.Class({initialize:function(selector){this.expireTime=parseInt($(selector).attr("data-expireTime")),this.loadTime=parseInt($(selector).attr("data-loadTime")),this.haveLock="true"==$(selector).attr("data-haveLock"),this.lockOwnerLink=$(selector).attr("data-lockOwnerLink"),this.selector=$(selector),this.startTime=Math.floor((new Date).getTime()/1e3),this.updateLock(),setInterval(this.method("updateLock"),15e3)},updateLock:function(){var content=$('<div class="alert alert-block"></div>'),lockDuration=this.expireTime-this.loadTime,localNow=Math.floor((new Date).getTime()/1e3),localLockEnd=(this.startTime,this.startTime+lockDuration),localTimeLeft=localLockEnd-localNow;if(this.haveLock)this.selector.parent().hide();else if(localTimeLeft>0){content.addClass("alert-warning"),content.html(this.lockOwnerLink+" has a lock on this page for <b></b>. Saving the page may create a conflict with their changes.");var timeLeft=content.find("b");timeLeft.html(this.durationAsText(localTimeLeft))}else content.addClass("alert-warning"),content.html(this.lockOwnerLink+" may still have a lock on this page. Saving the page may create a conflict with their changes.");this.selector.html(""),this.selector.append(content)},durationAsText:function(seconds){var hours,days,months,years,minutes=Math.round(seconds/60),text=minutes+" minutes";return minutes>=60&&(hours=Math.round(minutes/60),text=hours+" hours"),hours>=24&&(days=Math.round(hours/24),text=days+" days"),days>=365/12&&(months=Math.round(days/(365/12)),text=months+" months"),days>365&&(years=Math.round(days/365),text=years+" years"),0==minutes&&(text="moments"),text}}),PageEditor=new JS.Class({initialize:function(editorContainer,isEmbeddedPage){this.container=$(editorContainer),this.components=[],this.isEmbeddedPage=isEmbeddedPage,this.saveButtonText=$(".editor-save-button").val(),this.isEmbeddedPage?($(".editor-save-button").click(this.method("pageSaveClicked")),$(".editor-save-submit-button").click(this.method("pageSaveSubmitClicked"))):this.container.find(".editor-save-button").click(this.method("pageSaveClicked")),$("#pageLock").length>0&&(this.editLock=new UIEditLock("#pageLock",{}))},addComponent:function(component){this.components.push(component),component.setEditor(this)},savePage:function(submit){var data={};data.submit=submit,data.commitMessage=this.container.find("#commitMessage").val(),data.notifySubscribers=this.container.find("#notifySubscribers").prop("checked"),data.submissionGroup=this.container.find("#submissionGroup").val();var subscriberCount=this.container.find("#subscriberCount").text();if(!data.notifySubscribers||confirm("Are you sure you want to notify "+subscriberCount+" subscribers")){for(var i=0,len=this.components.length;len>i;i++){var chunk=this.components[i].getSaveData();if(chunk===!1)return;data=$.extend(data,chunk)}return this.doSavePage(data,null,null,null)}},saveComponent:function(component,init,success,error){return this.doSavePage(component.getSaveData(),init,success,error)},doSavePage:function(componentData,init,success,error){var that=this;if(null==init&&(init=this.method("savePageInit")),null==success){var postSaveCallback=$(".editor-save-button").data("onPostSave");success=function(e){that.savePageSuccess.call(that,e,componentData),postSaveCallback&&postSaveCallback()}}null==error&&(error=this.method("savePageError"));var editorFormAction=$("#editor-form").attr("action");0===editorFormAction.indexOf("?")&&(editorFormAction=document.location.search);var queryParams=this.getQueryParams();init.call(),$.ajax(editorFormAction,{type:"POST",data:{method:"saveComponents",_new:queryParams._new,componentData:JSON.stringify(componentData)},success:success,error:error})},savePageInit:function(){this.isEmbeddedPage||(this.container.find(".editor-save-button").attr("disabled","disabled"),this.container.find(".editor-save-button").val("Saving..."))},savePageSuccess:function(res,data){$.each(this.components,function(){this.onSaveSuccess(res)});var that=this;this.isEmbeddedPage||(this.container.find(".editor-save-button").removeAttr("disabled"),this.container.find(".editor-save-button").val("Saved!"),setTimeout(function(){that.container.find(".editor-save-button").val(that.saveButtonText)},3e3));var extraData;data.submit&&(extraData={submit:!0}),$(window).trigger("savePageSuccess",extraData),window.self!==window.parent?window.parent.postMessage(JSON.stringify(data),location.protocol+"//"+location.host):this.isEmbeddedPage||(location.href=location.pathname)},savePageError:function(error){$.each(this.components,function(){this.onSaveError(error)}),this.isEmbeddedPage?($(".editor-save-button").removeAttr("disabled"),$(".editor-save-watcher").val("Error.")):(this.container.find(".editor-save-button").removeAttr("disabled"),this.container.find(".editor-save-watcher").html("Error."))},pageSaveClicked:function(){this.savePage()},pageSaveSubmitClicked:function(){this.savePage(!0)},getQueryParams:function(){var queryParams={},queryStr=window.location.search;return queryStr.replace(/\\?([^?=&]+)(=([^&#]*))?/g,function($0,$1,$2,$3){"string"==typeof $3&&(queryParams[$1]=decodeURIComponent($3))}),queryParams}}),HTMLComponent=new JS.Class(EditorComponent,{initialize:function(selector){var element=$(selector);this.editorID=element.attr("id")||element.attr("name")},getSaveData:function(){return{HTMLData:{pageHTML:CKEDITOR.instances[this.editorID]?CKEDITOR.instances[this.editorID].getData():"",title:$("#title").val(),descr:$("#descr").val()}}},onSaveSuccess:function(){CKEDITOR.instances[this.editorID]&&CKEDITOR.instances[this.editorID].fire("save")}});!function($){$.fn.markItUp=function(settings,extraSettings){var options,ctrlKey,shiftKey,altKey;return ctrlKey=shiftKey=altKey=!1,options={id:"",nameSpace:"",root:"",previewInWindow:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]},$.extend(options,settings,extraSettings),options.root||$("script").each(function(a,tag){miuScript=$(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),null!==miuScript&&(options.root=miuScript[1])}),this.each(function(){function localize(data,inText){return inText?data.replace(/("|')~\//g,"$1"+options.root):data.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),options.resizeHandle===!0&&$.browser.safari!==!0&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown",function(e){var mouseMove,mouseUp,h=$$.height(),y=e.clientY;mouseMove=function(e){return $$.css("height",Math.max(20,e.clientY+h-y)+"px"),!1},mouseUp=function(){return $("html").unbind("mousemove",mouseMove).unbind("mouseup",mouseUp),!1},$("html").bind("mousemove",mouseMove).bind("mouseup",mouseUp)}),footer.append(resizeHandle)),$$.keydown(keyPressed).keyup(keyPressed),$$.bind("insertion",function(e,settings){settings.target!==!1&&get(),textarea===$.markItUp.focused&&markup(settings)}),$$.focus(function(){$.markItUp.focused=this})}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;if(title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"",button.separator)li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);else{for(i++,j=levels.length-1;j>=0;j--)t+=levels[j]+"-";li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu",function(){return!1}).click(function(){return!1}).bind("focusin",function(){$$.focus()}).mouseup(function(){return button.call&&eval(button.call)(),setTimeout(function(){markup(button)},1),!1}).hover(function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})},function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul}function magicMarkups(string){return string?(string=string.toString(),string=string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(x,a){var b=a.split("|!|");return altKey===!0?void 0!==b[1]?b[1]:b[0]:void 0===b[1]?"":b[0]}),string=string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(x,a){var b=a.split(":!:");return abort===!0?!1:(value=prompt(b[0],b[1]?b[1]:""),null===value&&(abort=!0),value)})):""}function prepare(action){return $.isFunction(action)&&(action=action(hash)),magicMarkups(action)}function build(string){{var openWith=prepare(clicked.openWith),placeHolder=prepare(clicked.placeHolder),replaceWith=prepare(clicked.replaceWith),closeWith=prepare(clicked.closeWith),openBlockWith=prepare(clicked.openBlockWith),closeBlockWith=prepare(clicked.closeBlockWith);clicked.multiline}if(""!==replaceWith)block=openWith+replaceWith+closeWith;else if(""===selection&&""!==placeHolder)block=openWith+placeHolder+closeWith;else{string=string||selection;for(var lines=selection.split(/\r?\n/),blocks=[],l=0;l<lines.length;l++){line=lines[l];var trailingSpaces;blocks.push((trailingSpaces=line.match(/ *$/))?openWith+line.replace(/ *$/g,"")+closeWith+trailingSpaces:openWith+line+closeWith)}block=blocks.join("\n")}return block=openBlockWith+block+closeBlockWith,{block:block,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith}}function markup(button){var len,j,n,i;if(hash=clicked=button,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(ctrlKey===!0&&shiftKey===!0||button.multiline===!0)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1}),ctrlKey===!0&&shiftKey===!0){for(lines=selection.split(/\r?\n/),j=0,n=lines.length,i=0;n>i;i++)""!==$.trim(lines[i])?($.extend(hash,{line:++j,selection:lines[i]}),lines[i]=build(lines[i]).block):lines[i]="";string={block:lines.join("\n")},start=caretPosition,len=string.block.length+($.browser.opera?n-1:0)}else ctrlKey===!0?(string=build(selection),start=caretPosition+string.openWith.length,len=string.block.length-string.openWith.length-string.closeWith.length,len-=string.block.match(/ $/)?1:0,len-=fixIeBug(string.block)):shiftKey===!0?(string=build(selection),start=caretPosition,len=string.block.length,len-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,len=0,start-=fixIeBug(string.block));""===selection&&""===string.replaceWith&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openWith.length,len=string.block.length-string.openWith.length-string.closeWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&abort===!1?(insert(string.block),set(start,len)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(ctrlKey===!0&&shiftKey===!0||button.multiline===!0)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1}function fixOperaBug(string){return $.browser.opera?string.length-string.replace(/\n*/g,"").length:0}function fixIeBug(string){return $.browser.msie?string.length-string.replace(/\r*/g,"").length:0}function insert(block){if(document.selection){var newSelection=document.selection.createRange();newSelection.text=block}else textarea.value=textarea.value.substring(0,caretPosition)+block+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}function set(start,len){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&0==len)return!1;range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",start),range.moveEnd("character",len),range.select()}else textarea.setSelectionRange&&textarea.setSelectionRange(start,start+len);textarea.scrollTop=scrollPosition,textarea.focus()}function get(){if(textarea.focus(),scrollPosition=textarea.scrollTop,document.selection)if(selection=document.selection.createRange().text,$.browser.msie){var range=document.selection.createRange(),rangeCopy=range.duplicate();for(rangeCopy.moveToElementText(textarea),caretPosition=-1;rangeCopy.inRange(range);)rangeCopy.moveStart("character"),caretPosition++}else caretPosition=textarea.selectionStart;else caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd);return selection}function preview(){!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload(function(){previewWindow.close()})):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),"after"==options.previewPosition?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):altKey===!0&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()}function refreshPreview(){renderPreview()}function renderPreview(){if(options.previewParser&&"function"==typeof options.previewParser){var data=options.previewParser($$.val());writeInPreview(localize(data,1))}else""!==options.previewParserPath?$.ajax({type:"POST",dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(data){writeInPreview(localize(data,1))}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(data){writeInPreview(localize(data,1).replace(/<!-- content -->/g,$$.val()))}});return!1}function writeInPreview(data){if(previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}previewWindow.document.open(),previewWindow.document.write(data),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp}}function keyPressed(e){if(shiftKey=e.shiftKey,altKey=e.altKey,ctrlKey=e.altKey&&e.ctrlKey?!1:e.ctrlKey||e.metaKey,"keydown"===e.type){if(ctrlKey===!0&&(li=$('a[accesskey="'+String.fromCharCode(e.keyCode)+'"]',header).parent("li"),0!==li.length))return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mouseup")},1),!1;if(13===e.keyCode||10===e.keyCode)return ctrlKey===!0?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):shiftKey===!0?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault);if(9===e.keyCode)return 1==shiftKey||1==ctrlKey||1==altKey?!1:-1!==caretOffset?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault)}}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath),init()})},$.fn.markItUpRemove=function(){return this.each(function(){var $$=$(this).unbind().removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$)})},$.markItUp=function(settings){var options={target:!1};return $.extend(options,settings),options.target?$(options.target).each(function(){$(this).focus(),$(this).trigger("insertion",[options])}):void $("textarea").trigger("insertion",[options])}}(jQuery);var CreoleComponent=new JS.Class(EditorComponent,{initialize:function(){0==$("#markItUpStyle").length&&$("head").append('<link rel="stylesheet" href="'+baseMedia+'css/markitup.css" type="text/css" />');for(var settings={previewParserPath:"",onShiftEnter:{keepDefault:!1,replaceWith:"\n\n"},markupSet:[{name:"Heading 1",key:"1",openWith:"= ",closeWith:" =",placeHolder:"Your title here..."},{name:"Heading 2",key:"2",openWith:"== ",closeWith:" ==",placeHolder:"Your title here..."},{name:"Heading 3",key:"3",openWith:"=== ",closeWith:" ===",placeHolder:"Your title here..."},{name:"Heading 4",key:"4",openWith:"==== ",closeWith:" ====",placeHolder:"Your title here..."},{name:"Heading 5",key:"5",openWith:"===== ",closeWith:" =====",placeHolder:"Your title here..."},{name:"Heading 6",key:"6",openWith:"====== ",closeWith:" ======",placeHolder:"Your title here..."},{separator:"---------------"},{name:"Bold",key:"B",openWith:"**",closeWith:"**"},{name:"Italic",key:"I",openWith:"//",closeWith:"//"},{name:"Underline",key:"U",openWith:"__",closeWith:"__"},{name:"Strikethrough",key:"S",openWith:"-/-",closeWith:"-/-"},{separator:"---------------"},{name:"Subscript",key:",",openWith:",,",closeWith:",,"},{name:"Superscript",key:"^",openWith:"^^",closeWith:"^^"},{name:"Monospace",key:"M",openWith:"##",closeWith:"##"},{separator:"---------------"},{name:"Bulleted list",openWith:"(!(* |!|*)!)"},{name:"Numeric list",openWith:"(!(# |!|#)!)"},{separator:"---------------"},{name:"Picture",key:"P",replaceWith:"{{[![Page Name or URL:!:./]!]|[![Alternate Text]!]}}"},{name:"Link",key:"L",openWith:"[[[![Link]!]|",closeWith:"]]",placeHolder:"Your text to link here..."},{separator:"---------------"},{name:"Code",openWith:"{{{\n#!code\n",closeWith:"\n}}}"}]},iconNames=["h1","h2","h3","h4","h5","h6","bold","italic","underline","stroke","subscript","superscript","monospace","list-bullet","list-numeric","picture","link","code"],i=0;i<iconNames.length;i++)this.giveButtonIcon(i+1,iconNames[i]);$("#creole").markItUp(settings),$("#dummyPageShift").remove()},giveButtonIcon:function(iconNumber,iconName){var style="<style>.markItUp .markItUpButton"+iconNumber+" a { background-image:url("+baseMedia+"/lib/markitup/creole_icons/"+iconName+".png); }</style>";$("head").append(style)},getSaveData:function(){return{Creole:{content:$("#creole").val(),title:$("#title").val()}}}}),TagComponent=new JS.Class(EditorComponent,{initialize:function(selector,allowNew){this.element=$(selector);var that=this,options={width:"resolve",minimumInputLength:2,multiple:!0,initSelection:function($element,callback){callback($.map($element.val().split(/[,\s]/),function(value){return value?{id:value,text:value}:null}))},ajax:{url:"/json/search/lookup/suggestTag/",dataType:"json",data:function(term){return{types:"tag",query:term}},results:function(data){return data=data.result.results,{more:!1,results:$.map(data,function(value){var title=Utilities.escape(value.title);

return{id:title,text:title}})}}},tags:[]};allowNew&&(options.createSearchChoice=function(term){return{id:term.toLowerCase(),text:term}},options.tokenSeparators=[","," "]),that.element.select2(options)},getSaveData:function(){return{tags:$.map(this.element.val().split(/[,\s]/),function(value){return value?value:null})}}}),AccessControlComponent=new JS.Class(EditorComponent,{initialize:function(selector,rules){this.$access=$(selector),this.users={};var that=this;$.each(JSON.parse(rules),function(i,user){that.users[user.id]=user});var users={},$custom=$('<div class="modal hide fade"> 				<div class="modal-header"> 					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> 					<h3>Custom Access Control</h3> 				</div> 				<div class="modal-body"> 					<input name="search" type="hidden" class="input-xxlarge" /> 					<div id="userList"></div> 				</div> 				<div class="modal-footer"> 					<a href="#" class="btn btn-primary">Done</a> 				</div> 			</div>').appendTo(this.$access.parent());this.$userList=$custom.find("#userList");var $search=$custom.find('input[name="search"]').select2({placeholder:"Search for a user or group...",minimumInputLength:3,ajax:{url:"/json/search/lookup/suggestUserOrGroup/",dataType:"json",quietMillis:250,data:function(term,page){return{query:term,start:6*(page-1),types:"user,group"}},results:function(data,page){return data=data.result,{results:$.map(data.results,function(user){return users.hasOwnProperty(user.id)&&(user=null),user}),more:6*page<data.total}}},formatResult:function(result){return'<div class="userProfileItem"><img src="'+result.icon+'" width="24" height="24" align="left"> 				<div class="name">'+result.title+' <span class="profile">'+result.id+'</span></div> 				<div style="clear: both;"></div></div>'},formatSelection:function(result){return result.title}}).change(function(e){var user=e.added;user&&(user.access="read",users[user.id]=user,that.updateUserList(users))});this.$userList.on("change",'input[type="radio"]',function(){var $this=$(this),userID=$this.attr("name"),access=$this.val();users[userID].access=access}),this.$userList.on("click",".remove-user",function(){var userID=$(this).data("id");delete users[userID],$search.select2("data",null),that.updateUserList(users)}),$custom.on("show",function(){users=$.extend(!0,{},that.users),$search.select2("data",null),that.updateUserList(users)}),$custom.find("div.modal-footer a.btn-primary").click(function(e){e.preventDefault(),that.users=users,$custom.modal("hide")});var showPolicyWithIcon=function(policy){var $element=policy.element?$(policy.element):this.element.find('option[value="'+policy.id+'"]'),icon=$element.data("icon");return'<img src="'+baseMedia+"images/icons/16x16/"+icon+'.png" alt="'+icon+'" /> '+policy.text},deferred=$.Deferred();this.$access.select2({formatResult:showPolicyWithIcon,formatSelection:showPolicyWithIcon,escapeMarkup:function(markup){return markup},width:"resolve"}).on("select2-selecting",function(e){"custom"===e.val&&deferred.done(function(){$custom.modal()})}),$.ajaxSetup({cache:!0}),$.getScript(baseMedia+"lib/dust/compiled_templates/misc.dust").done(function(){deferred.resolve()})},updateUserList:function(users){var $userList=this.$userList,templateData={accessLevels:[{name:"Read",value:"read"},{name:"Write",value:"write"},{name:"Admin",value:"admin"}],users:$.map(users,function(user){return user})};dust.render("userList",templateData,function(err,html){var $contents=$userList.contents();$contents.length?$contents.replaceWith(html):$userList.append(html)})},getSaveData:function(){return{AccessControl:{policy:this.$access.val(),rules:JSON.stringify($.map(this.users,function(user){return user}))}}}}),CommunityComponent=new JS.Class(EditorComponent,{initialize:function(containerSelector,communityData){this.container=$(containerSelector),this.disabledOption=$('<label for="disableCommunity" class="checkbox"> <input type="checkbox" id="disableCommunity" value="1">Disable commenting on this page</label>').appendTo(this.container),this.collapsedOption=$('<label for="collapseCommunity" class="checkbox"> <input type="checkbox" id="collapseCommunity" value="1">Collapse comments on this page by default</label>').appendTo(this.container),this.restrictedTopicsOption=$('<label for="restrictTopicsCommunity" class="checkbox"> <input type="checkbox" id="restrictTopicsCommunity" value="1">Only allow users with write access to post top level comment threads</label>').appendTo(this.container),this.relatedPagesOption=$('<label for="relatedPagesCommunity" class="checkbox"> <input type="checkbox" id="relatedPagesCommunity" value="1">Show related content next to this page</label>').appendTo(this.container),this.commentsHeadingInput=$('<div class="span4"><label for="commentsHeading" style="display: inline; font-weight: normal;">Comments heading: </label><br/><input type="text" id="commentsHeading" value="Comments"><br/>'),this.commentPlaceholderInput=$('<div class="span4"><label for="commentPlaceholderText" style="display: inline; font-weight: normal;">Comment placeholder text: </label><br/><input type="text" id="commentPlaceholderText" value="Write a comment..."></div>');var data=jQuery.parseJSON(communityData)||{};if(data.paidCourse){var commentsRow=$('<div class="row"></div>');this.commentsHeadingInput.appendTo(commentsRow),data.commentsHeading&&this.commentsHeadingInput.find("input").val(data.commentsHeading),this.commentPlaceholderInput.appendTo(commentsRow),data.commentPlaceholderText&&this.commentPlaceholderInput.find("input").val(data.commentPlaceholderText),$("<br/>").appendTo(this.container),commentsRow.appendTo(this.container)}data.disabled&&this.disabledOption.find("input").prop("checked",!0),data.collapsed&&this.collapsedOption.find("input").prop("checked",!0),data.relatedPages&&this.relatedPagesOption.find("input").prop("checked",!0),data.restrictedTopics&&this.restrictedTopicsOption.find("input").prop("checked",!0)},getSaveData:function(){var communityObject={disabled:this.disabledOption.find("input:checked").val(),collapsed:this.collapsedOption.find("input:checked").val(),restrictedTopics:this.restrictedTopicsOption.find("input:checked").val(),commentsHeading:this.commentsHeadingInput.find("input").val(),commentPlaceholderText:this.commentPlaceholderInput.find("input").val(),relatedPages:this.relatedPagesOption.find("input:checked").val()};return{Community:communityObject}}}),FileUploadComponent=new JS.Class(EditorComponent,{initialize:function(titleSelector,fileSelector,isEmbeddedPage){this.titleSelector=titleSelector,this.isEmbeddedPage=isEmbeddedPage,this.fileSelector=$(fileSelector),this.fileSelector.after('<iframe id="tmp_upload_target" name="tmp_upload_target" style="display: none;"></iframe>');var editorFormAction=$("#editor-form").attr("action");0===editorFormAction.indexOf("?")&&(editorFormAction=document.location.search),-1===editorFormAction.indexOf("&method=savePrelim")&&(editorFormAction+="&method=savePrelim"),this.fileSelector.closest("form").attr("enctype","multipart/form-data").attr("method","POST").attr("action",editorFormAction).attr("target","tmp_upload_target"),this.fileUploaded=!1},getSaveData:function(){if(this.fileUploaded)return{FileUpload:{title:$(this.titleSelector).val()}};this.isEmbeddedPage||$(".editor-save-watcher").html("Uploading...");var that=this;return $(window).on("message.fileupload",function(e){e=e.originalEvent,(e.origin===siteURL||Utilities.sameOrigin(e.origin,location.href))&&("prelim save successful"===e.data&&that.handleSubmitComplete(),$(window).off("message.fileupload"))}),this.fileSelector.closest("form").unbind("submit").removeAttr("onsubmit").submit(),!1},handleSubmitComplete:function(){this.fileUploaded=!0,this.editor.savePage()}}),SummaryIconComponent=new JS.Class(EditorComponent,{initialize:function(iconSelector){this.iconField=$(iconSelector)},getSaveData:function(){return{SummaryIcon:{summary:"",icon:this.iconField.val()}}}}),ActivitySetupComponent=new JS.Class(EditorComponent,{initialize:function(activitySetupTabSelector){this.activitySetupTab=$(activitySetupTabSelector)},getSaveData:function(){var setup={scoring:this.activitySetupTab.find('input[name="activity-scoring"]:checked').val(),submissionType:this.activitySetupTab.find('input[name="submission-type"]:checked').val(),submissionGroupCategories:this.activitySetupTab.find('input[name="submissionGroupCategory"]:checked').map(function(){return $(this).val()}).toArray(),allowAllSubmissionGroups:this.activitySetupTab.find('input[name="allowAllSubmissionGroups"]:checked').length>0,maxMarks:this.activitySetupTab.find("#activity-maxMarks").val(),duration:this.activitySetupTab.find("#activity-duration").val(),durationType:this.activitySetupTab.find("#activity-durationType").val(),workflow:this.activitySetupTab.find('input[name="activity-workflow"]:checked').val(),submissionPageType:this.activitySetupTab.find("#activitySelectionInput").val(),submissionPrivacy:this.activitySetupTab.find('input[name="submission-privacy"]:checked').val(),templateText:this.activitySetupTab.find("#template-text").val(),canBeViewedEarly:this.activitySetupTab.find("#activity-canBeViewedEarly").is(":checked"),allowEarlySubmissions:this.activitySetupTab.find("#activity-allowEarlySubmissions").is(":checked"),allowLateSubmissions:this.activitySetupTab.find("#activity-allowLateSubmissions").is(":checked"),appId:this.activitySetupTab.find("#appId").val(),activityCommenting:this.activitySetupTab.find('input[name="activity-commenting"]:checked').val()};return{ActivitySetup:setup}},_handleSetActivityConfig:function(){this.editor.savePage()}}),AppSetupComponent=new JS.Class(EditorComponent,{initialize:function(appSetupSelector){this.appSetup=$(appSetupSelector),this._config=null},getSaveData:function(){var setup={appId:this.appSetup.find("#appId").val(),hasConfig:this.appSetup.find("#hasConfig:checked").length?"1":"0"};return{AppSetup:setup}}}),VideoUploadComponent=new JS.Class(EditorComponent,{initialize:function(titleSelector,urlSelector,uploadVideoIdSelector){this.titleField=$(titleSelector),this.urlField=$(urlSelector),this.uploadVideoId=$(uploadVideoIdSelector)},getSaveData:function(){var response={Video:{title:this.titleField.val(),url:this.urlField.val()}};return this.uploadVideoId&&this.uploadVideoId.length&&(response.Video.uploadVideoId=this.uploadVideoId.val(),response.Video.type=this.uploadVideoId.is(":visible")?"upload":"url"),response}}),GroupEditorComponent=new JS.Class(EditorComponent,{initialize:function(titleSelector,groupAreaSelector,groupDescriptionSelector,groupMembers,cohortPath){this.titleField=$(titleSelector),this.groupArea=$(groupAreaSelector),this.description=$(groupDescriptionSelector),this.cohortPath=cohortPath,this.users={};var that=this;$.each(JSON.parse(groupMembers)||[],function(i,user){that.users[user.id]=user}),this.$userList=this.groupArea.find("#memberList");var $search=this.groupArea.find('input[name="search"]').select2({placeholder:"Search for a user...",minimumInputLength:3,ajax:{url:"/json/search/lookup/suggestUser/",dataType:"json",quietMillis:250,data:function(term,page){return{query:term,start:6*(page-1),types:"user",cohortPaths:JSON.stringify([that.cohortPath])}},results:function(data,page){return data=data.result,{results:$.map(data.results,function(user){return that.users.hasOwnProperty(user.id)&&(user=null),user}),more:6*page<data.total}}},formatResult:function(result){return'<div class="userProfileItem"><img src="'+result.icon+'" width="24" height="24" align="left"> 				<div class="name">'+result.title+' <span class="profile">'+result.id+'</span></div> 				<div style="clear: both;"></div></div>'},formatSelection:function(result){return result.title}}).change(function(e){var user=e.added;user&&(user.access="member",that.users[user.id]=user,that.updateUserList())});this.$userList.on("change",'input[type="radio"]',function(){var $this=$(this),userID=$this.attr("name"),access=$this.val();that.users[userID].access=access}),this.$userList.on("click",".remove-user",function(){var userID=$(this).data("id");delete that.users[userID],$search.select2("data",null),that.updateUserList()}),$.ajaxSetup({cache:!0}),$.getScript(baseMedia+"lib/dust/compiled_templates/misc.dust").done(function(){that.updateUserList()})},updateUserList:function(){var $userList=this.$userList,templateData={accessLevels:[{name:"Member",value:"member"},{name:"Group Admin",value:"admin"}],users:$.map(this.users,function(user){return user})};dust.render("userList",templateData,function(err,html){var $contents=$userList.contents();$contents.length?$contents.replaceWith(html):$userList.append(html)})},getSaveData:function(){return{Group:{joinPermission:$("input[name=joinPermission]:checked").val(),title:this.titleField.val(),memberJson:JSON.stringify($.map(this.users,function(user){return user})),description:this.description.val()}}}}),MultiFileUploadComponent=new JS.Class(EditorComponent,{initialize:function(titleSelector,fileSelector,isEmbeddedPage){this.titleSelector=titleSelector,this.isEmbeddedPage=isEmbeddedPage},getSaveData:function(){var removedFiles=getRemovedFiles();return{MultiFileUpload:{title:$(this.titleSelector).val(),removedFiles:JSON.stringify(removedFiles)}}},handleSubmitComplete:function(){this.filesUploaded=!0,this.editor.savePage()}}),VideoEditorComponent=new JS.Class(EditorComponent,{initialize:function(videoEditorDataSelector){this.videoEditorDataSelector=videoEditorDataSelector},getSaveData:function(){var videoEditorData=$(this.videoEditorDataSelector).val();return{VideoEditor:videoEditorData}}}),ViewableSelectorComponent=new JS.Class(EditorComponent,{initialize:function(selector){this.$selector=$(selector),this.$selector.length&&this.$selector.is("select")&&this.$selector.select2({width:"resolve"})},getSaveData:function(){var $blogNonCoursePermissions=$("#blog-non-course-permissions"),$blogCoursePermissions=$("#blog-course-permissions"),courseAssociation=($("#toggle-course-permissions"),$("#toggle-non-course-permissions"),this.$selector.val()),viewableBy=""==courseAssociation?$blogNonCoursePermissions.val():$blogCoursePermissions.val(),cohort=courseAssociation,policy="custom",rules=[];switch(viewableBy){case"private":policy="private";break;case"everyone":policy="world-read";break;case"course":rules.push({type:"cohort",cohort:cohort,access:"read"})}var data={AccessControl:{policy:policy,rules:rules},cohort:cohort};return data}});!function(a){function e(b){return b[0]&&a.isPlainObject(b[0])?this.data=b[0]:this.el=b,this.isCoords=!0,this.coords={},this.init(),this}var f=e.prototype;f.init=function(){this.set(),this.original_coords=this.get()},f.set=function(a,b){var c=this.el;if(c&&!a&&(this.data=c.offset(),this.data.width=c.width(),this.data.height=c.height()),c&&a&&!b){var d=c.offset();this.data.top=d.top,this.data.left=d.left}var e=this.data;return this.coords.x1=e.left,this.coords.y1=e.top,this.coords.x2=e.left+e.width,this.coords.y2=e.top+e.height,this.coords.cx=e.left+e.width/2,this.coords.cy=e.top+e.height/2,this.coords.width=e.width,this.coords.height=e.height,this.coords.el=c||!1,this},f.update=function(b){if(!b&&!this.el)return this;if(b){var c=a.extend({},this.data,b);return this.data=c,this.set(!0,!0)}return this.set(!0),this},f.get=function(){return this.coords},a.fn.coords=function(){if(this.data("coords"))return this.data("coords");var a=new e(this,arguments[0]);return this.data("coords",a),a}}(jQuery,window,document),function(a,b,c){function f(b,c,d){this.options=a.extend(e,d),this.$element=b,this.last_colliders=[],this.last_colliders_coords=[],"string"==typeof c||c instanceof jQuery?this.$colliders=a(c,this.options.colliders_context).not(this.$element):this.colliders=a(c),this.init()}var e={colliders_context:c.body},g=f.prototype;g.init=function(){this.find_collisions()},g.overlaps=function(a,b){var c=!1,d=!1;return(b.x1>=a.x1&&b.x1<=a.x2||b.x2>=a.x1&&b.x2<=a.x2||a.x1>=b.x1&&a.x2<=b.x2)&&(c=!0),(b.y1>=a.y1&&b.y1<=a.y2||b.y2>=a.y1&&b.y2<=a.y2||a.y1>=b.y1&&a.y2<=b.y2)&&(d=!0),c&&d},g.detect_overlapping_region=function(a,b){var c="",d="";return a.y1>b.cy&&a.y1<b.y2&&(c="N"),a.y2>b.y1&&a.y2<b.cy&&(c="S"),a.x1>b.cx&&a.x1<b.x2&&(d="W"),a.x2>b.x1&&a.x2<b.cx&&(d="E"),c+d||"C"},g.calculate_overlapped_area_coords=function(b,c){var d=Math.max(b.x1,c.x1),e=Math.max(b.y1,c.y1),f=Math.min(b.x2,c.x2),g=Math.min(b.y2,c.y2);return a({left:d,top:e,width:f-d,height:g-e}).coords().get()},g.calculate_overlapped_area=function(a){return a.width*a.height},g.manage_colliders_start_stop=function(b,c,d){for(var e=this.last_colliders_coords,f=0,g=e.length;g>f;f++)-1===a.inArray(e[f],b)&&c.call(this,e[f]);for(var h=0,i=b.length;i>h;h++)-1===a.inArray(b[h],e)&&d.call(this,b[h])},g.find_collisions=function(b){for(var c=this,d=[],e=[],f=this.colliders||this.$colliders,g=f.length,h=c.$element.coords().update(b||!1).get();g--;){var i=c.$colliders?a(f[g]):f[g],j=i.isCoords?i:i.coords(),k=j.get(),l=c.overlaps(h,k);if(l){var m=c.detect_overlapping_region(h,k);if("C"===m){var n=c.calculate_overlapped_area_coords(h,k),o=c.calculate_overlapped_area(n),p={area:o,area_coords:n,region:m,coords:k,player_coords:h,el:i};c.options.on_overlap&&c.options.on_overlap.call(this,p),d.push(j),e.push(p)}}}return(c.options.on_overlap_stop||c.options.on_overlap_start)&&this.manage_colliders_start_stop(d,c.options.on_overlap_stop,c.options.on_overlap_start),this.last_colliders_coords=d,e},g.get_closest_colliders=function(a){var b=this.find_collisions(a);return b.sort(function(a,b){return"C"===a.region&&"C"===b.region?a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1?-1:1:(a.area<b.area,1)}),b},a.fn.collision=function(a,b){return new f(this,a,b)}}(jQuery,window,document),function(a){a.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},a.throttle=function(a,b){var c,d,e,f,g,h,i=debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}}}(window),function(a,b,c){function i(b,d){this.options=a.extend({},e,d),this.$body=a(c.body),this.$container=a(b),this.$dragitems=a(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.init()}var e={items:".gs_w",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null},f=a(b),g="ontouchstart"in b,h={start:g?"touchstart":"mousedown.draggable",move:g?"touchmove":"mousemove.draggable",end:g?"touchend":"mouseup.draggable"},j=i.prototype;j.init=function(){this.calculate_positions(),this.$container.css("position","relative"),this.disabled=!1,this.events(),a(b).bind("resize",throttle(a.proxy(this.calculate_positions,this),200))},j.events=function(){this.$container.on("selectstart",a.proxy(this.on_select_start,this)),this.$container.on(h.start,this.options.items,a.proxy(this.drag_handler,this)),this.$body.on(h.end,a.proxy(function(a){this.is_dragging=!1,this.disabled||(this.$body.off(h.move),this.drag_start&&this.on_dragstop(a))},this))},j.get_actual_pos=function(a){var b=a.position();return b},j.get_mouse_pos=function(a){if(g){var b=a.originalEvent;a=b.touches.length?b.touches[0]:b.changedTouches[0]}return{left:a.clientX,top:a.clientY}},j.get_offset=function(a){a.preventDefault();var b=this.get_mouse_pos(a),c=Math.round(b.left-this.mouse_init_pos.left),d=Math.round(b.top-this.mouse_init_pos.top),e=Math.round(this.el_init_offset.left+c-this.baseX),f=Math.round(this.el_init_offset.top+d-this.baseY+this.scrollOffset);return this.options.limit&&(e>this.player_max_left?e=this.player_max_left:e<this.player_min_left&&(e=this.player_min_left)),{left:e,top:f,mouse_left:b.left,mouse_top:b.top}},j.manage_scroll=function(a){var b,c=f.scrollTop(),d=c,e=d+this.window_height,g=e-50,h=d+50,j=(a.mouse_left,d+a.mouse_top),k=this.doc_height-this.window_height+this.player_height;j>=g&&(b=c+30,k>b&&(f.scrollTop(b),this.scrollOffset=this.scrollOffset+30)),h>=j&&(b=c-30,b>0&&(f.scrollTop(b),this.scrollOffset=this.scrollOffset-30))},j.calculate_positions=function(){this.window_height=f.height()},j.drag_handler=function(b){b.target.nodeName;if(!this.disabled&&(1===b.which||g)&&!this.ignore_drag(b)){var d=this,e=!0;return this.$player=a(b.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(b),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$body.on(h.move,function(a){var b=d.get_mouse_pos(a),c=Math.abs(b.left-d.mouse_init_pos.left),f=Math.abs(b.top-d.mouse_init_pos.top);return c>d.options.distance||f>d.options.distance?e?(e=!1,d.on_dragstart.call(d,a),!1):(d.is_dragging===!0&&d.on_dragmove.call(d,a),!1):!1}),!1}},j.on_dragstart=function(b){b.preventDefault(),this.drag_start=!0,this.is_dragging=!0;var d=this.$container.offset();return this.baseX=Math.round(d.left),this.baseY=Math.round(d.top),this.doc_height=a(c).height(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scrollOffset=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.player_max_left=this.$container.width()-this.player_width+this.options.offset_left,this.options.start&&this.options.start.call(this.$player,b,{helper:this.helper?this.$helper:this.$player}),!1},j.on_dragmove=function(a){var b=this.get_offset(a);this.options.autoscroll&&this.manage_scroll(b),(this.helper?this.$helper:this.$player).css({position:"absolute",left:b.left,top:b.top});var c={position:{left:b.left,top:b.top}};return this.options.drag&&this.options.drag.call(this.$player,a,c),!1},j.on_dragstop=function(a){var b=this.get_offset(a);this.drag_start=!1;var c={position:{left:b.left,top:b.top}};return this.options.stop&&this.options.stop.call(this.$player,a,c),this.helper&&this.$helper.remove(),!1},j.on_select_start=function(a){return this.disabled||this.ignore_drag(a)?void 0:!1},j.enable=function(){this.disabled=!1},j.disable=function(){this.disabled=!0},j.destroy=function(){this.disable(),a.removeData(this.$container,"drag")},j.ignore_drag=function(b){return this.options.handle?!a(b.target).is(this.options.handle):a.inArray(b.target.nodeName,this.options.ignore_dragging)>=0},a.fn.drag=function(b){return this.each(function(){a.data(this,"drag")||a.data(this,"drag",new i(this,b))})}}(jQuery,window,document),function(a,b,c){function f(b,c){this.options=a.extend(!0,e,c),this.$el=a(b),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs_w"),this.widgets=[],this.$changed=a([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.init()}var e={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,min_rows:15,max_size_x:6,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,serialize_params:function(a,b){return{col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},collision:{},draggable:{distance:4}};f.generated_stylesheets=[];var g=f.prototype;g.init=function(){this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.$wrapper.addClass("ready"),this.draggable(),a(b).bind("resize",throttle(a.proxy(this.recalculate_faux_grid,this),200))},g.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},g.enable=function(){return this.drag_api.enable(),this},g.add_widget=function(b,c,d,e,f){var g;c||(c=1),d||(d=1),!e&!f?g=this.next_position(c,d):(g={col:e,row:f},this.empty_cells(e,f,c,d));var h=a(b).attr({"data-col":g.col,"data-row":g.row,"data-sizex":c,"data-sizey":d}).addClass("gs_w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(h),this.register_widget(h),this.add_faux_rows(g.size_y),this.set_dom_grid_height(),h.fadeIn()},g.resize_widget=function(b,c,d){var e=b.coords().grid;c||(c=e.size_x),d||(d=e.size_y),c>this.cols&&(c=this.cols);var f=this.get_cells_occupied(e),g=e.size_x,h=e.size_y,i=e.col,j=i;if(i+c-1>this.cols){var m=i+(c-1)-this.cols,n=i-m;j=Math.max(1,n)}var o={col:j,row:e.row,size_x:c,size_y:d},p=this.get_cells_occupied(o),q=[];a.each(f.cols,function(b,c){-1===a.inArray(c,p.cols)&&q.push(c)});var r=[];a.each(p.cols,function(b,c){-1===a.inArray(c,f.cols)&&r.push(c)});var s=[];a.each(f.rows,function(b,c){-1===a.inArray(c,p.rows)&&s.push(c)});var t=[];if(a.each(p.rows,function(b,c){-1===a.inArray(c,f.rows)&&t.push(c)}),this.remove_from_gridmap(e),r.length){var u=[j,e.row,c,Math.min(h,d),b];this.empty_cells.apply(this,u)}if(t.length){var v=[j,e.row,c,d,b];this.empty_cells.apply(this,v)}if(e.col=j,e.size_x=c,e.size_y=d,this.add_to_gridmap(o,b),b.data("coords").update({width:c*this.options.widget_base_dimensions[0]+(c-1)*this.options.widget_margins[0]*2,height:d*this.options.widget_base_dimensions[1]+(d-1)*this.options.widget_margins[1]*2}),d>h&&this.add_faux_rows(d-h),c>g&&this.add_faux_cols(c-g),b.attr({"data-col":j,"data-sizex":c,"data-sizey":d}),q.length){var w=[q[0],e.row,q.length,Math.min(h,d),b];this.remove_empty_cells.apply(this,w)}if(s.length){var x=[j,e.row,c,d,b];this.remove_empty_cells.apply(this,x)}return b},g.empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c-e,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,d){var f=a(d).coords().grid;if(f.row<=c+e-1){var g=c+e-f.row;this.move_widget_down(a(d),g)}},this)),this.set_dom_grid_height(),this},g.remove_empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,c){this.move_widget_up(a(c),e)},this)),this.set_dom_grid_height(),this},g.next_position=function(a,b){a||(a=1),b||(b=1);for(var f,c=this.gridmap,d=c.length,e=[],g=1;d>g;g++){f=c[g].length;for(var h=1;f>=h;h++){var i=this.can_move_to({size_x:a,size_y:b},g,h);i&&e.push({col:g,row:h,size_y:b,size_x:a})}}return e.length?this.sort_by_row_and_col_asc(e)[0]:!1},g.remove_widget=function(b,c,d){var e=b instanceof jQuery?b:a(b),f=e.coords().grid;a.isFunction(c)&&(d=c,c=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(e);var g=this.widgets_below(e);this.remove_from_gridmap(f),e.fadeOut(a.proxy(function(){e.remove(),c||g.each(a.proxy(function(b,c){this.move_widget_up(a(c),f.size_y)},this)),this.set_dom_grid_height(),d&&d.call(this,b)},this))},g.remove_all_widgets=function(b){return this.$widgets.each(a.proxy(function(a,c){this.remove_widget(c,!0,b)},this)),this},g.serialize=function(b){b||(b=this.$widgets);var c=[];return b.each(a.proxy(function(b,d){c.push(this.options.serialize_params(a(d),a(d).coords().grid))},this)),c},g.serialize_changed=function(){return this.serialize(this.$changed)},g.register_widget=function(a){var b={col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),10),size_y:parseInt(a.attr("data-sizey"),10),el:a};return this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:b.size_x,size_y:b.size_y},b.col,b.row)&&(b=this.next_position(b.size_x,b.size_y),b.el=a,a.attr({"data-col":b.col,"data-row":b.row,"data-sizex":b.size_x,"data-sizey":b.size_y})),a.data("coords",a.coords()),a.data("coords").grid=b,this.add_to_gridmap(b,a),this},g.update_widget_position=function(a,b){return this.for_each_cell_occupied(a,function(a,c){return this.gridmap[a]?void(this.gridmap[a][c]=b):this}),this},g.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)},g.add_to_gridmap=function(b,c){if(this.update_widget_position(b,c||b.el),b.el){var d=this.widgets_below(b.el);d.each(a.proxy(function(b,c){this.move_widget_up(a(c))},this))}},g.draggable=function(){var b=this,c=a.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],start:function(c,d){b.$widgets.filter(".player-revert").removeClass("player-revert"),b.$player=a(this),b.$helper="clone"===b.options.draggable.helper?a(d.helper):b.$player,b.helper=!b.$helper.is(b.$player),b.on_start_drag.call(b,c,d),b.$el.trigger("gridster:dragstart")},stop:function(a,c){b.on_stop_drag.call(b,a,c),b.$el.trigger("gridster:dragstop")},drag:throttle(function(a,c){b.on_drag.call(b,a,c),b.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(c).data("drag"),this},g.on_start_drag=function(b,c){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=a.extend({},this.player_grid_data),this.$el.css("height",this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);var d=this.faux_grid,e=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(d,this.options.collision),this.$preview_holder=a("<li />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:e.width,height:e.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,b,c)},g.on_drag=function(a,b){if(null===this.$player)return!1;var c={left:b.position.left+this.baseX,top:b.position.top+this.baseY};this.colliders_data=this.collision_api.get_closest_colliders(c),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:b.position.left,top:b.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,a,b)},g.on_stop_drag=function(a,b){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),b.position.left=b.position.left+this.baseX,b.position.top=b.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(b.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,a,b),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height()},g.on_overlapped_column_change=function(b,c){if(this.colliders_data.length){var g,d=this.get_targeted_columns(this.colliders_data[0].el.data.col),e=this.last_cols.length,f=d.length;for(g=0;f>g;g++)-1===a.inArray(d[g],this.last_cols)&&(b||a.noop).call(this,d[g]);for(g=0;e>g;g++)-1===a.inArray(this.last_cols[g],d)&&(c||a.noop).call(this,this.last_cols[g]);return this.last_cols=d,this}},g.on_overlapped_row_change=function(b,c){if(this.colliders_data.length){var g,d=this.get_targeted_rows(this.colliders_data[0].el.data.row),e=this.last_rows.length,f=d.length;for(g=0;f>g;g++)-1===a.inArray(d[g],this.last_rows)&&(b||a.noop).call(this,d[g]);for(g=0;e>g;g++)-1===a.inArray(this.last_rows[g],d)&&(c||a.noop).call(this,this.last_rows[g]);

this.last_rows=d}},g.set_player=function(a,b,c){var d=this;c||this.empty_cells_player_occupies();var e=c?{col:a}:d.colliders_data[0].el.data,f=e.col,g=b||e.row;this.player_grid_data={col:f,row:g,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var h=this.get_widgets_overlapped(this.player_grid_data),i=this.widgets_constraints(h);if(this.manage_movements(i.can_go_up,f,g),this.manage_movements(i.can_not_go_up,f,g),!h.length){var j=this.can_go_player_up(this.player_grid_data);j!==!1&&(g=j),this.set_placeholder(f,g)}return{col:f,row:g}},g.widgets_constraints=function(b){var d,c=a([]),e=[],f=[];return b.each(a.proxy(function(b,d){var g=a(d),h=g.coords().grid;this.can_go_widget_up(h)?(c=c.add(g),e.push(h)):f.push(h)},this)),d=b.not(c),{can_go_up:this.sort_by_row_asc(e),can_not_go_up:this.sort_by_row_desc(f)}},g.sort_by_row_asc=function(b){return b=b.sort(function(b,c){return b.row||(b=a(b).coords().grid,c=a(c).coords().grid),b.row>c.row?1:-1})},g.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>b.row||a.row===b.row&&a.col>b.col?1:-1})},g.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})},g.sort_by_row_desc=function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})},g.manage_movements=function(b,c,d){return a.each(b,a.proxy(function(a,b){var e=b,f=e.el,g=this.can_go_widget_up(e);if(g)this.move_widget_to(f,g),this.set_placeholder(c,g+e.size_y);else{var h=this.can_go_player_up(this.player_grid_data);if(!h){var i=d+this.player_grid_data.size_y-e.row;this.move_widget_down(f,i),this.set_placeholder(c,d)}}},this)),this},g.is_player=function(a,b){if(b&&!this.gridmap[a])return!1;var c=b?this.gridmap[a][b]:a;return c&&(c.is(this.$player)||c.is(this.$helper))},g.is_player_in=function(b,c){var d=this.cells_occupied_by_player||{};return a.inArray(b,d.cols)>=0&&a.inArray(c,d.rows)>=0},g.is_placeholder_in=function(b,c){var d=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(b)&&a.inArray(c,d.rows)>=0},g.is_placeholder_in_col=function(b){var c=this.cells_occupied_by_placeholder||[];return a.inArray(b,c.cols)>=0},g.is_empty=function(a,b){return"undefined"!=typeof this.gridmap[a]&&"undefined"!=typeof this.gridmap[a][b]&&this.gridmap[a][b]===!1?!0:!1},g.is_occupied=function(a,b){return this.gridmap[a]&&this.gridmap[a][b]?!0:!1},g.is_widget=function(a,b){var c=this.gridmap[a];return c?(c=c[b],c?c:!1):!1},g.is_widget_under_player=function(a,b){return this.is_widget(a,b)?this.is_player_in(a,b):!1},g.get_widgets_under_player=function(b){b||(b=this.cells_occupied_by_player||{cols:[],rows:[]});var c=a([]);return a.each(b.cols,a.proxy(function(d,e){a.each(b.rows,a.proxy(function(a,b){this.is_widget(e,b)&&(c=c.add(this.gridmap[e][b]))},this))},this)),c},g.set_placeholder=function(b,c){var d=a.extend({},this.placeholder_grid_data),e=this.widgets_below({col:d.col,row:d.row,size_y:d.size_y,size_x:d.size_x}),f=b+d.size_x-1;f>this.cols&&(b-=f-b);var g=this.placeholder_grid_data.row<c,h=this.placeholder_grid_data.col!==b;this.placeholder_grid_data.col=b,this.placeholder_grid_data.row=c,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":c,"data-col":b}),(g||h)&&e.each(a.proxy(function(c,e){this.move_widget_up(a(e),this.placeholder_grid_data.col-b+d.size_y)},this));var i=this.get_widgets_under_player(this.cells_occupied_by_placeholder);i.length&&i.each(a.proxy(function(b,e){var f=a(e);this.move_widget_down(f,c+d.size_y-f.data("coords").grid.row)},this))},g.can_go_player_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4,f=this.get_widgets_under_player();return this.for_each_column_occupied(a,function(a){var g=this.gridmap[a],h=b+1;for(d[a]=[];--h>0&&(this.is_empty(a,h)||this.is_player(a,h)||this.is_widget(a,h)&&g[h].is(f));)d[a].push(h),e=e>h?h:e;return 0===d[a].length?(c=!1,!0):void d[a].sort()}),c?this.get_valid_rows(a,d,e):!1},g.can_go_widget_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4;return this.for_each_column_occupied(a,function(f){var g=this.gridmap[f];d[f]=[];for(var h=b+1;--h>0&&(!this.is_widget(f,h)||this.is_player_in(f,h)||g[h].is(a.el));)!this.is_player(f,h)&&!this.is_placeholder_in(f,h)&&!this.is_player_in(f,h)&&d[f].push(h),e>h&&(e=h);return 0===d[f].length?(c=!1,!0):void d[f].sort()}),c?this.get_valid_rows(a,d,e):!1},g.get_valid_rows=function(b,c,d){for(var e=b.row,f=b.row+b.size_y-1,g=b.size_y,h=d-1,i=[];++h<=f;){var j=!0;if(a.each(c,function(b,c){a.isArray(c)&&-1===a.inArray(h,c)&&(j=!1)}),j===!0&&(i.push(h),i.length===g))break}var k=!1;return 1===g?i[0]!==e&&(k=i[0]||!1):i[0]!==e&&(k=this.get_consecutive_numbers_index(i,g)),k},g.get_consecutive_numbers_index=function(a,b){for(var c=a.length,d=[],e=!0,f=-1,g=0;c>g;g++){if(e||a[g]===f+1){if(d.push(g),d.length===b)break;e=!1}else d=[],e=!0;f=a[g]}return d.length>=b?a[d[0]]:!1},g.get_widgets_overlapped=function(){var c=a([]),d=[],e=this.cells_occupied_by_player.rows.slice(0);return e.reverse(),a.each(this.cells_occupied_by_player.cols,a.proxy(function(b,f){a.each(e,a.proxy(function(b,e){if(!this.gridmap[f])return!0;var g=this.gridmap[f][e];this.is_occupied(f,e)&&!this.is_player(g)&&-1===a.inArray(g,d)&&(c=c.add(g),d.push(g))},this))},this)),c},g.on_start_overlapping_column=function(a){this.set_player(a,!1)},g.on_start_overlapping_row=function(a){this.set_player(!1,a)},g.on_stop_overlapping_column=function(a){this.set_player(a,!1);var b=this;this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(){b.move_widget_up(this,b.player_grid_data.size_y)})},g.on_stop_overlapping_row=function(a){this.set_player(!1,a);for(var b=this,c=this.cells_occupied_by_player.cols,d=0,e=c.length;e>d;d++)this.for_each_widget_below(c[d],a,function(){b.move_widget_up(this,b.player_grid_data.size_y)})},g.move_widget_to=function(b,c){var d=this,e=b.coords().grid,g=(c-e.row,this.widgets_below(b)),h=this.can_move_to(e,e.col,c,b);return h===!1?!1:(this.remove_from_gridmap(e),e.row=c,this.add_to_gridmap(e),b.attr("data-row",c),this.$changed=this.$changed.add(b),g.each(function(b,c){var e=a(c),f=e.coords().grid,g=d.can_go_widget_up(f);g&&g!==f.row&&d.move_widget_to(e,g)}),this)},g.move_widget_up=function(b,c){var d=b.coords().grid,e=d.row,f=[];return c||(c=1),this.can_go_up(b)?void this.for_each_column_occupied(d,function(d){if(-1===a.inArray(b,f)){var g=b.coords().grid,h=e-c;if(h=this.can_go_up_to_row(g,d,h),!h)return!0;var i=this.widgets_below(b);this.remove_from_gridmap(g),g.row=h,this.add_to_gridmap(g),b.attr("data-row",g.row),this.$changed=this.$changed.add(b),f.push(b),i.each(a.proxy(function(b,d){this.move_widget_up(a(d),c)},this))}}):!1},g.move_widget_down=function(b,c){var d=b.coords().grid,e=d.row,f=[],g=c;if(!b)return!1;if(-1===a.inArray(b,f)){var h=b.coords().grid,i=e+c,j=this.widgets_below(b);this.remove_from_gridmap(h),j.each(a.proxy(function(b,c){var d=a(c),e=d.coords().grid,f=this.displacement_diff(e,h,g);f>0&&this.move_widget_down(d,f)},this)),h.row=i,this.update_widget_position(h,b),b.attr("data-row",h.row),this.$changed=this.$changed.add(b),f.push(b)}},g.can_go_up_to_row=function(b,c,d){var i,e=this.gridmap,f=!0,g=[],h=b.row;if(this.for_each_column_occupied(b,function(a){e[a];for(g[a]=[],i=h;i--&&this.is_empty(a,i)&&!this.is_placeholder_in(a,i);)g[a].push(i);return g[a].length?void 0:(f=!1,!0)}),!f)return!1;for(i=d,i=1;h>i;i++){for(var j=!0,k=0,l=g.length;l>k;k++)g[k]&&-1===a.inArray(i,g[k])&&(j=!1);if(j===!0){f=i;break}}return f},g.displacement_diff=function(a,b,c){var d=a.row,e=[],f=b.row+b.size_y;this.for_each_column_occupied(a,function(a){for(var b=0,c=f;d>c;c++)this.is_empty(a,c)&&(b+=1);e.push(b)});var g=Math.max.apply(Math,e);return c-=g,c>0?c:0},g.widgets_below=function(b){var c=a.isPlainObject(b)?b:b.coords().grid,d=this,f=(this.gridmap,c.row+c.size_y-1),g=a([]);return this.for_each_column_occupied(c,function(b){d.for_each_widget_below(b,f,function(){return d.is_player(this)||-1!==a.inArray(this,g)?void 0:(g=g.add(this),!0)})}),this.sort_by_row_asc(g)},g.set_cells_player_occupies=function(a,b){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=a,this.placeholder_grid_data.row=b,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},g.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},g.can_go_up=function(a){var b=a.coords().grid,c=b.row,d=c-1,g=(this.gridmap,!0);return 1===c?!1:(this.for_each_column_occupied(b,function(a){this.is_widget(a,d);return this.is_occupied(a,d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d)?(g=!1,!0):void 0}),g)},g.can_move_to=function(a,b,c,d){var f=(this.gridmap,a.el),g={size_y:a.size_y,size_x:a.size_x,col:b,row:c},h=!0,i=b+a.size_x-1;return i>this.cols?!1:d&&d<c+a.size_y-1?!1:(this.for_each_cell_occupied(g,function(b,c){var d=this.is_widget(b,c);d&&(!a.el||d.is(f))&&(h=!1)}),h)},g.get_targeted_columns=function(a){for(var b=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),c=[],d=a;b>=d;d++)c.push(d);return c},g.get_targeted_rows=function(a){for(var b=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),c=[],d=a;b>=d;d++)c.push(d);return c},g.get_cells_occupied=function(a){var c,b={cols:[],rows:[]};for(arguments[1]instanceof jQuery&&(a=arguments[1].coords().grid),c=0;c<a.size_x;c++){var d=a.col+c;b.cols.push(d)}for(c=0;c<a.size_y;c++){var e=a.row+c;b.rows.push(e)}return b},g.for_each_cell_occupied=function(a,b){return this.for_each_column_occupied(a,function(c){this.for_each_row_occupied(a,function(a){b.call(this,c,a)})}),this},g.for_each_column_occupied=function(a,b){for(var c=0;c<a.size_x;c++){var d=a.col+c;b.call(this,d,a)}},g.for_each_row_occupied=function(a,b){for(var c=0;c<a.size_y;c++){var d=a.row+c;b.call(this,d,a)}},g._traversing_widgets=function(b,c,d,e,f){var g=this.gridmap;if(g[d]){var h,i,j=b+"/"+c;if(arguments[2]instanceof jQuery){var k=arguments[2].coords().grid;d=k.col,e=k.row,f=arguments[3]}var l=[],m=e,n={"for_each/above":function(){for(;m--&&!(m>0&&this.is_widget(d,m)&&-1===a.inArray(g[d][m],l)&&(h=f.call(g[d][m],d,m),l.push(g[d][m]),h)););},"for_each/below":function(){for(m=e+1,i=g[d].length;i>m&&(!this.is_widget(d,m)||-1!==a.inArray(g[d][m],l)||(h=f.call(g[d][m],d,m),l.push(g[d][m]),!h));m++);}};n[j]&&n[j].call(this)}},g.for_each_widget_above=function(a,b,c){return this._traversing_widgets("for_each","above",a,b,c),this},g.for_each_widget_below=function(a,b,c){return this._traversing_widgets("for_each","below",a,b,c),this},g.get_highest_occupied_cell=function(){for(var a,b=this.gridmap,c=[],d=[],e=b.length-1;e>=1;e--)for(a=b[e].length-1;a>=1;a--)if(this.is_widget(e,a)){c.push(a),d[a]=e;break}var f=Math.max.apply(Math,c);return this.highest_occupied_cell={col:d[f],row:f},this.highest_occupied_cell},g.get_widgets_from=function(b,c){var e=(this.gridmap,a());return b&&(e=e.add(this.$widgets.filter(function(){var c=a(this).attr("data-col");return c===b||c>b}))),c&&(e=e.add(this.$widgets.filter(function(){var b=a(this).attr("data-row");return b===c||b>c}))),e},g.set_dom_grid_height=function(){var a=this.get_highest_occupied_cell().row;return this.$el.css("height",a*this.min_widget_height),this},g.generate_stylesheet=function(b){var h,c="",d=this.options.max_size_x;b||(b={}),b.cols||(b.cols=this.cols),b.rows||(b.rows=this.rows),b.namespace||(b.namespace=this.options.namespace),b.widget_base_dimensions||(b.widget_base_dimensions=this.options.widget_base_dimensions),b.widget_margins||(b.widget_margins=this.options.widget_margins),b.min_widget_width=2*b.widget_margins[0]+b.widget_base_dimensions[0],b.min_widget_height=2*b.widget_margins[1]+b.widget_base_dimensions[1];var j=a.param(b);if(a.inArray(j,f.generated_stylesheets)>=0)return!1;for(f.generated_stylesheets.push(j),h=b.cols;h>=0;h--)c+=b.namespace+' [data-col="'+(h+1)+'"] { left:'+(h*b.widget_base_dimensions[0]+h*b.widget_margins[0]+(h+1)*b.widget_margins[0])+"px;} ";for(h=b.rows;h>=0;h--)c+=b.namespace+' [data-row="'+(h+1)+'"] { top:'+(h*b.widget_base_dimensions[1]+h*b.widget_margins[1]+(h+1)*b.widget_margins[1])+"px;} ";for(var k=1;k<=b.rows;k++)c+=b.namespace+' [data-sizey="'+k+'"] { height:'+(k*b.widget_base_dimensions[1]+(k-1)*b.widget_margins[1]*2)+"px;}";for(var l=1;d>=l;l++)c+=b.namespace+' [data-sizex="'+l+'"] { width:'+(l*b.widget_base_dimensions[0]+(l-1)*b.widget_margins[0]*2)+"px;}";return this.add_style_tag(c)},g.add_style_tag=function(a){var b=c,d=b.createElement("style");return b.getElementsByTagName("head")[0].appendChild(d),d.setAttribute("type","text/css"),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(c.createTextNode(a)),this},g.generate_faux_grid=function(a,b){this.faux_grid=[],this.gridmap=[];var c,d;for(c=b;c>0;c--)for(this.gridmap[c]=[],d=a;d>0;d--)this.add_faux_cell(d,c);return this},g.add_faux_cell=function(b,c){var d=a({left:this.baseX+(c-1)*this.min_widget_width,top:this.baseY+(b-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:c,row:b,original_col:c,original_row:b}).coords();return a.isArray(this.gridmap[c])||(this.gridmap[c]=[]),this.gridmap[c][b]=!1,this.faux_grid.push(d),this},g.add_faux_rows=function(a){for(var b=this.rows,c=b+(a||1),d=c;d>b;d--)for(var e=this.cols;e>=1;e--)this.add_faux_cell(d,e);return this.rows=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},g.add_faux_cols=function(a){for(var b=this.cols,c=b+(a||1),d=b;c>d;d++)for(var e=this.rows;e>=1;e--)this.add_faux_cell(e,d);return this.cols=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},g.recalculate_faux_grid=function(){var c=this.$wrapper.width();return this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,a.each(this.faux_grid,a.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this)),this},g.get_widgets_from_DOM=function(){return this.$widgets.each(a.proxy(function(b,c){this.register_widget(a(c))},this)),this},g.generate_grid_and_stylesheet=function(){var c=this.$wrapper.width(),e=(this.$wrapper.height(),Math.floor(c/this.min_widget_width)+this.options.extra_cols),f=this.$widgets.map(function(){return a(this).attr("data-col")});f=Array.prototype.slice.call(f,0),f.length||(f=[0]);var g=Math.max.apply(Math,f),h=this.options.extra_rows;return this.$widgets.each(function(b,c){h+=+a(c).attr("data-sizey")}),this.cols=Math.max(g,e,this.options.min_cols),this.rows=Math.max(h,this.options.min_rows),this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},a.fn.gridster=function(b){return this.each(function(){a(this).data("gridster")||a(this).data("gridster",new f(this,b))})},a.Gridster=g}(jQuery,window,document),!function($){var Color=function(val){this.value={h:1,s:1,b:1,a:1},this.setColor(val)};Color.prototype={constructor:Color,setColor:function(val){val=val.toLowerCase();var that=this;$.each(CPGlobal.stringParsers,function(i,parser){var match=parser.re.exec(val),values=match&&parser.parse(match),space=parser.space||"rgba";return values?(that.value="hsla"==space?CPGlobal.RGBtoHSB.apply(null,CPGlobal.HSLtoRGB.apply(null,values)):CPGlobal.RGBtoHSB.apply(null,values),!1):void 0})},setHue:function(h){this.value.h=1-h},setSaturation:function(s){this.value.s=s},setLightness:function(b){this.value.b=1-b},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(h,s,b,a){h||(h=this.value.h,s=this.value.s,b=this.value.b),h*=360;var R,G,B,X,C;return h=h%360/60,C=b*s,X=C*(1-Math.abs(h%2-1)),R=G=B=b-C,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],{r:Math.round(255*R),g:Math.round(255*G),b:Math.round(255*B),a:a||this.value.a}},toHex:function(h,s,b,a){var rgb=this.toRGB(h,s,b,a);return"#"+(1<<24|parseInt(rgb.r)<<16|parseInt(rgb.g)<<8|parseInt(rgb.b)).toString(16).substr(1)},toHSL:function(h,s,b,a){h||(h=this.value.h,s=this.value.s,b=this.value.b);var H=h,L=(2-s)*b,S=s*b;return S/=L>0&&1>=L?L:2-L,L/=2,S>1&&(S=1),{h:H,s:S,l:L,a:a||this.value.a}}};var Colorpicker=function(element,options){this.element=$(element);var format=options.format||this.element.data("color-format")||"hex";this.format=CPGlobal.translateFormats[format],this.isInput=this.element.is("input"),this.component=this.element.is(".color")?this.element.find(".add-on"):!1,this.picker=$(CPGlobal.template).appendTo("body").on("mousedown",$.proxy(this.mousedown,this)).on("keyup",$.proxy(this.keyup,this)),this.isInput?this.element.on({focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this)}):this.component?this.component.on({click:$.proxy(this.show,this)}):this.element.on({click:$.proxy(this.show,this)}),("rgba"==format||"hsla"==format)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update()};Colorpicker.prototype={constructor:Colorpicker,show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),$(window).on("resize",$.proxy(this.place,this)),this.isInput||e&&(e.stopPropagation(),e.preventDefault()),$(document).on({mousedown:$.proxy(this.hide,this)}),this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new Color(this.isInput?this.element.prop("value"):this.element.data("color")),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.picker.find(".colorpicker-hex-input").val(this.color.toHex())},hide:function(){this.picker.hide(),$(window).off("resize",this.place),this.isInput?this.element.prop("value",this.format.call(this)):($(document).off({mousedown:this.hide}),this.component&&this.element.find("input").prop("value",this.format.call(this)),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hide",color:this.color})},place:function(){var offset=this.component?this.component.offset():this.element.offset();this.picker.css({top:offset.top+this.height,left:offset.left})},previewColor:function(){this.preview.backgroundColor=this.format.call(this),this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(e){e.stopPropagation(),e.preventDefault();var target=$(e.target),zone=target.closest("div"),textZone=target.closest("span");if(zone.is(".colorpicker")){if(textZone.is(".colorpicker-hex")){var hexInput=textZone.find(".colorpicker-hex-input");hexInput.focus()}}else{zone.is(".colorpicker-saturation")?this.slider=$.extend({},CPGlobal.sliders.saturation):zone.is(".colorpicker-hue")?this.slider=$.extend({},CPGlobal.sliders.hue):zone.is(".colorpicker-alpha")&&(this.slider=$.extend({},CPGlobal.sliders.alpha));var offset=zone.offset();this.slider.knob=zone.find("i")[0].style,this.slider.left=e.pageX-offset.left,this.slider.top=e.pageY-offset.top,this.pointer={left:e.pageX,top:e.pageY},$(document).on({mousemove:$.proxy(this.mousemove,this),mouseup:$.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.stopPropagation(),e.preventDefault();var left=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((e.pageX||this.pointer.left)-this.pointer.left))),top=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((e.pageY||this.pointer.top)-this.pointer.top)));return this.slider.knob.left=left+"px",this.slider.knob.top=top+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,left/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,top/100),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color}),this.picker.find(".colorpicker-hex-input").val(this.color.toHex()),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),$(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1},keyup:function(e){var target=$(e.target);if(target.is(".colorpicker-hex-input")){var hexColor=target.val();/#[A-Fa-f0-9]{6}/.test(hexColor)&&(this.color.setColor(hexColor),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color}))}}},$.fn.colorpicker=function(option){return this.each(function(){var $this=$(this),data=$this.data("colorpicker"),options="object"==typeof option&&option;data||$this.data("colorpicker",data=new Colorpicker(this,$.extend({},$.fn.colorpicker.defaults,options))),"string"==typeof option&&data[option]()})},$.fn.colorpicker.defaults={},$.fn.colorpicker.Constructor=Colorpicker;var CPGlobal={translateFormats:{rgb:function(){var rgb=this.color.toRGB();return"rgb("+rgb.r+","+rgb.g+","+rgb.b+")"},rgba:function(){var rgb=this.color.toRGB();return"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")"},hsl:function(){var hsl=this.color.toHSL();return"hsl("+Math.round(360*hsl.h)+","+Math.round(100*hsl.s)+"%,"+Math.round(100*hsl.l)+"%)"},hsla:function(){var hsl=this.color.toHSL();return"hsla("+Math.round(360*hsl.h)+","+Math.round(100*hsl.s)+"%,"+Math.round(100*hsl.l)+"%,"+hsl.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(r,g,b,a){r/=255,g/=255,b/=255;var H,S,V,C;return V=Math.max(r,g,b),C=V-Math.min(r,g,b),H=0==C?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,S=0==C?0:C/V,{h:H||1,s:S,b:V,a:a||1}},HueToRGB:function(p,q,h){return 0>h?h+=1:h>1&&(h-=1),1>6*h?p+(q-p)*h*6:1>2*h?q:2>3*h?p+(q-p)*(2/3-h)*6:p},HSLtoRGB:function(h,s,l,a){if(0>s&&(s=0),.5>=l)var q=l*(1+s);else var q=l+s-l*s;var p=2*l-q,tr=h+1/3,tg=h,tb=h-1/3,r=Math.round(255*CPGlobal.HueToRGB(p,q,tr)),g=Math.round(255*CPGlobal.HueToRGB(p,q,tg)),b=Math.round(255*CPGlobal.HueToRGB(p,q,tb));return[r,g,b,a||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><span class="colorpicker-hex"><input type="text" maxlength="7" class="colorpicker-hex-input" value="#000000"></span></div>'}}(window.jQuery);var gridster,showcaseEditor=function(options){var grid_height,resizable_conf,resizable_conf_modal,cell_init,grid_width,modalX,modalY,modal_min_width,selected_cell,orig_width,orig_height,orig_z,edit_callback,loadCell,grid_size=140,grid_margin=2,block_params={max_width:7,max_height:5},last_color="#ffffff";$(function(){function resizeBlock(elmObj){for(var elmObj=$(elmObj),w=elmObj.width()-grid_size,h=elmObj.height()-grid_size,grid_w=1;w>0;w-=grid_size+2*grid_margin)grid_w++;for(var grid_h=1;h>0;h-=grid_size+2*grid_margin)grid_h++;gridster.resize_widget(elmObj,grid_w,grid_h),gridster.set_dom_grid_height()}if(modal_min_width=2*grid_size+2*grid_margin,$("#new-modal").css({width:modal_min_width+"px",height:grid_size+"px",top:"-1000px",left:"-1000px"}),grid_width=grid_size*(block_params.max_width-1)+2*grid_margin*(block_params.max_width-1),$(".gridster").css({width:grid_width+"px"}),$(".tools").css({width:grid_width+"px"}),$(".showcase-title").css({width:grid_width-116+"px"}),resizable_conf_modal={grid:[grid_size+2*grid_margin,grid_size+2*grid_margin],animate:!1,minWidth:2*grid_size,minHeight:grid_size,maxWidth:block_params.max_width*grid_size,maxHeight:block_params.max_height*grid_size,autoHide:!1},resizable_conf={grid:[grid_size+2*grid_margin,grid_size+2*grid_margin],animate:!1,minWidth:grid_size,minHeight:grid_size,maxWidth:block_params.max_width*grid_size,maxHeight:block_params.max_height*grid_size,autoHide:!0,start:function(){grid_height=gridster.$el.height()},resize:function(event){var delta=grid_size+2*grid_margin;if(event.offsetY>gridster.$el.height()){var extra=Math.floor((event.offsetY-grid_height)/delta+1),new_height=grid_height+extra*delta;gridster.$el.css("height",new_height)}},stop:function(){var resized=$(this);setTimeout(function(){resizeBlock(resized),options.save&&options.save(gridster.serialize())},300)}},loadCell=function($cell,url){$cell=$($cell),options.loadCell&&options.loadCell(url,$cell.children(".cell-contents"))},edit_callback=function(evt){if(!$(evt.target).hasClass("remove-cell")){var $elt=$(this);orig_width=$elt.width(),orig_height=$elt.height(),orig_z=$elt.css("z-index"),selected_cell=$elt,$("#url").val(selected_cell.attr("data-url")?selected_cell.attr("data-url"):""),$("#search").select2("val",""),$("#new-modal").modal("show").css("background-color","transparent").css("z-index",1998).css("width",Math.max($elt.width(),modal_min_width)+"px").css("height",$elt.height()+"px").css("top",$elt.offset().top+"px").css("left",$elt.offset().left+"px").draggable({disabled:!0}).resizable({disabled:!0}),$elt.css({width:$("#new-modal").width()+"px",height:$("#new-modal").height()+"px","z-index":999}),$("#new-submit").text($("#new-submit").attr("data-save-text"))}},cell_init=function($cell){var clearTimer=function(){clearTimeout($(this).data("pressTimer"))};if(options.editable){var $remove=$('<button class="remove-cell">&times;</button>');$cell.prepend($remove),$remove.hide(),$cell.mouseover(function(){$(this).children(".remove-cell").show()}).mouseout(function(){$(this).children(".remove-cell").hide()}),$cell.resizable(resizable_conf),$cell.find(".ui-resizable-handle").hover(function(){gridster.disable()},function(){gridster.enable()}),$cell.mousedown(function(evt){var self=this;$(this).data("pressTimer",window.setTimeout(function(){$(self).trigger("mouseup"),edit_callback.call(self,evt)},600))}),$cell.mouseup(clearTimer).mouseout(clearTimer).mousemove(clearTimer)}else{var $overlayLink=$("<a>");$overlayLink.addClass("link-overlay").attr("href",$cell.attr("data-url")),$cell.append($overlayLink)}},gridster=$(".gridster ul").gridster({avoid_overlapped_widgets:!0,widget_margins:[grid_margin,grid_margin],widget_base_dimensions:[grid_size,grid_size],serialize_params:function($w,wgd){return{x:wgd.col,y:wgd.row,width:wgd.size_x,height:wgd.size_y,id:$($w).attr("data-id"),bgcolor:$($w).css("background-color"),url:$($w).attr("data-url")}},min_rows:block_params.max_height,max_size_x:block_params.max_width-1,draggable:{stop:function(){gridster&&options.save&&options.save(gridster.serialize())}}}).data("gridster"),options.editable&&$(".gridster").on("click",".remove-cell",function(){var $elt=$(this).parent("li");gridster.remove_widget($elt),options.save&&options.save(gridster.serialize())}),options.background&&$(".showcase").css("background-color",options.background),options.editable){$("#add-button").click(function(){selected_cell=null,$("#new-modal").modal("show").css("background-color",last_color).css("z-index",1999).css("top",modalY+"px").css("left",modalX+"px").draggable({disabled:!1}).resizable({disabled:!1}),$("#new-submit").text($("#new-submit").attr("data-add-text"))}).tooltip({title:"Add",placement:"bottom"}),$("#new-modal").resizable(resizable_conf_modal),$("#new-modal").draggable(),$("#new-submit").click(function(){var url;if(selected_cell)url=selected_cell.attr("data-url"),null!=url&&(loadCell(selected_cell,url),$("#new-modal").modal("hide"));else{modalX=$("#new-modal").offset().left,modalY=$("#new-modal").offset().top;var w,h,$new_cell=$('<li><span class="cell-contents"></span></li>');w=Math.round($("#new-modal").width()/(grid_size+grid_margin)),h=Math.round($("#new-modal").height()/(grid_size+grid_margin)),gridster.add_widget($new_cell,w,h),gridster.set_dom_grid_height(),cell_init($new_cell),last_color=$("#new-modal").css("background-color"),$new_cell.css("background-color",last_color),url=$("#url").val(),$new_cell.attr("data-url",url),loadCell($new_cell,url);var offset=$new_cell.offset();$("#new-modal").animate({left:offset.left+"px",top:offset.top+"px"},function(){$("#new-modal").modal("hide")})}});var color=$(".showcase").css("background-color");$("#bg-button").attr("data-color",color).colorpicker().on("changeColor",function(ev){$(".showcase").css("background-color","#"+ev.color.toHex())}).tooltip({title:"Change Background",placement:"bottom"}),$("#bg-button").colorpicker().on("hide",function(){options.saveBackground&&options.saveBackground($(".showcase").css("background-color"))}),$("#new-modal").on("hide",function(evt){"new-modal"===$(evt.target).attr("id")&&selected_cell?selected_cell.css({width:orig_width+"px",height:orig_height+"px","z-index":orig_z}):"cell-color"===$(evt.target).attr("id")&&selected_cell&&$(".modal-backdrop").fadeIn(),options.save&&options.save(gridster.serialize())}),$("#showcase-title").on("focus",function(){$("#title-color").css({position:"absolute",left:$("#showcase-title").offset().left+$("#showcase-title").width()-32+"px",top:$("#showcase-title").offset().top+"px","background-color":$("#showcase-title").css("color")}).attr("data-color",$("#showcase-title").css("color")),$("#title-color").show()}).on("blur",function(){options.saveTitle&&options.saveTitle($("#showcase-title").val(),$("#showcase-title").css("color"))}),$(document).on("click",function(evt){var id=$(evt.target).attr("id");"showcase-title"!==id&&"title-color"!==id&&$("#title-color").hide()}),options.titleColor&&$("#showcase-title").css("color",options.titleColor),options.title&&$("#showcase-title").val(options.title),$("#title-color").colorpicker().on("changeColor",function(ev){$("#showcase-title").css("color","#"+ev.color.toHex()),$("#title-color").css("background-color","#"+ev.color.toHex())}).tooltip({title:"Change Title",placement:"bottom"}),$("#title-color").colorpicker().on("hide",function(){options.saveTitle&&options.saveTitle($("#showcase-title").val(),$("#showcase-title").css("color"))}),$("#search").change(function(evt){var url=options.siteRoot+"/"+evt.val;$("#url").val(url),selected_cell&&selected_cell.attr("data-url",url)}),$("#url").on("blur",function(){var url=$(this).val();selected_cell&&selected_cell.attr("data-url",url)}),$(".gridster").on("dblclick","li",edit_callback)}else gridster.disable();$(".gridster li").each(function(){var url;cell_init($(this)),url=$(this).attr("data-url"),url&&loadCell($(this),url)}),$(".showcase-content").show(),modalY=$(".gridster").offset().top+grid_margin,modalX=$(".gridster").offset().left+grid_margin})},CourseContentWidget=new JS.Class({
extend:{apply:function(selector,options){return new this(selector,options)}},options:{constants:{MEDIA_URL:""},event:"click"},cache:{},initialize:function(selector,options){$.extend(this.options,options);var widget=this;$.ajaxSetup({cache:!1}),$.getScript(widget.options.constants.MEDIA_URL+"lib/dust/compiled_templates/courseContentWidget.dust").done(function(){var $initButton;$initButton=selector instanceof jQuery?selector:$(selector),$initButton.length?$initButton.on(widget.options.event,widget.openWidget):$("body").on(widget.options.event,selector,widget.openWidget),dust.render("courseContentWidget",{},function(error,html){$("body").append(html)})})},openWidget:function(){$("#courseContentModal").modal("show")}});!function($){function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function padLeft(s,l,c){return l<s.length?s:Array(l-s.length+1).join(c||" ")+s}function getTemplate(timeIcon,pickDate,pickTime,is12Hours,showSeconds,collapse){return pickDate&&pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(collapse?' class="collapse in"':"")+'><div class="datepicker">'+DPGlobal.template+'</div></li><li class="picker-switch accordion-toggle"><a><i class="'+timeIcon+'"></i></a></li><li'+(collapse?' class="collapse"':"")+'><div class="timepicker">'+TPGlobal.getTemplate(is12Hours,showSeconds)+"</div></li></ul></div>":pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+TPGlobal.getTemplate(is12Hours,showSeconds)+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+DPGlobal.template+"</div></div>"}var DateTimePicker=(void 0!=window.orientation,function(element,options){this.id=dpgId++,this.init(element,options)});DateTimePicker.prototype={constructor:DateTimePicker,init:function(element,options){var icon;if(!options.pickTime&&!options.pickDate)throw new Error("Must choose at least one picker");if(this.options=options,this.$element=$(element),this.language=options.language in dates?options.language:"en",this.pickDate=options.pickDate,this.pickTime=options.pickTime,this.isInput=this.$element.is("input"),this.component=!1,this.component=this.$element.is(".input-append")||this.$element.is(".input-prepend")?this.$element.find(".add-on"):this.$element,this.format=options.format,this.format||(this.format=this.isInput?this.$element.data("format"):this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this.isISOFormat=null!==this.format.match(/^ISO(-?8601)?$/i),this._compileFormat(),this.component&&(icon=this.component.find("i")),this.pickTime&&(icon&&icon.length&&(this.timeIcon=icon.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),icon.addClass(this.timeIcon)),this.pickDate&&(icon&&icon.length&&(this.dateIcon=icon.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),icon.removeClass(this.timeIcon),icon.addClass(this.dateIcon)),this.widget=$(getTemplate(this.timeIcon,options.pickDate,options.pickTime,options.pick12HourFormat,options.pickSeconds,options.collapse)).appendTo("body"),this.minViewMode=options.minViewMode||this.$element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=options.viewMode||this.$element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=options.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.setStartDate(options.startDate||this.$element.data("date-startdate")),this.setEndDate(options.endDate||this.$element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.fillHours(),this.fillMinutes(),this.fillSeconds(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(e){this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(),e&&(e.stopPropagation(),e.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(){for(var collapse=this.widget.find(".collapse"),i=0;i<collapse.length;i++){var collapseData=collapse.eq(i).data("collapse");if(collapseData&&collapseData.transitioning)return}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.set(),this.$element.trigger({type:"hide",date:this._date}),this._detachDatePickerGlobalEvents()},set:function(){var formatted="";if(this._unset||(formatted=this.formatDate(this._date)),this.isInput)this.$element.val(formatted),this._resetMaskPos(this.$element);else{if(this.component){var input=this.$element.find("input");input.val(formatted),this._resetMaskPos(input)}this.$element.data("date",formatted)}},setValue:function(newDate){this._unset=newDate?!1:!0,"string"==typeof newDate?this._date=this.parseDate(newDate):newDate&&(this._date=new Date(newDate)),this.set(),this.viewDate=new Date(this._date.getFullYear(),this._date.getMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(date){this.setValue(date?date.valueOf():null)},setStartDate:function(date){date instanceof Date?this.startDate=date:"string"==typeof date?(this.startDate=new Date(date),this.startDate.getFullYear()||(this.startDate=-(1/0))):this.startDate=-(1/0),this.viewDate&&this.update()},setEndDate:function(date){date instanceof Date?this.endDate=date:"string"==typeof date?(this.endDate=new Date(date),this.endDate.getFullYear()||(this.endDate=1/0)):this.endDate=1/0,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var d=this._date;return new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds())},setLocalDate:function(localDate){this.setValue(localDate?new Date(localDate.getFullYear(),localDate.getMonth(),localDate.getDate(),localDate.getHours(),localDate.getMinutes(),localDate.getSeconds(),localDate.getMilliseconds()):null)},place:function(){var position="absolute",offset=this.component?this.component.offset():this.$element.offset();if(offset.top=offset.top+this.height,this._isInFixed()){var $window=$(window);position="fixed",offset.top-=$window.scrollTop(),offset.left-=$window.scrollLeft()}this.widget.css({position:position,top:offset.top,left:offset.left})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(newDate){var dateStr=newDate;if(!dateStr)if(this.isInput)if(dateStr=this.$element.attr("data-value"))this._date=Utilities.parseISODate(dateStr);else{var tmp=new Date;this._date=new Date(tmp.getFullYear(),tmp.getMonth(),tmp.getDate(),0,0,0,0)}else if(dateStr=this.$element.find("input").val())this._date=this.parseDate(dateStr);else{var tmp=new Date;this._date=new Date(tmp.getFullYear(),tmp.getMonth(),tmp.getDate(),tmp.getHours(),tmp.getMinutes(),tmp.getSeconds(),tmp.getMilliseconds())}this.viewDate=new Date(this._date.getFullYear(),this._date.getMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){for(var dowCnt=this.weekStart,html="<tr>";dowCnt<this.weekStart+7;)html+='<th class="dow">'+dates[this.language].daysMin[dowCnt++%7]+"</th>";html+="</tr>",this.widget.find(".datepicker-days thead").append(html)},fillMonths:function(){for(var html="",i=0;12>i;)html+='<span class="month">'+dates[this.language].monthsShort[i++]+"</span>";this.widget.find(".datepicker-months td").append(html)},fillDate:function(){var year=this.viewDate.getFullYear(),month=this.viewDate.getMonth(),currentDate=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate(),0,0,0,0),startYear="object"==typeof this.startDate?this.startDate.getFullYear():-(1/0),startMonth="object"==typeof this.startDate?this.startDate.getMonth():-1,endYear="object"==typeof this.endDate?this.endDate.getFullYear():1/0,endMonth="object"==typeof this.endDate?this.endDate.getMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(dates[this.language].months[month]+" "+year);var prevMonth=new Date(year,month-1,28,0,0,0,0),day=DPGlobal.getDaysInMonth(prevMonth.getFullYear(),prevMonth.getMonth());prevMonth.setDate(day),prevMonth.setDate(day-(prevMonth.getDay()-this.weekStart+7)%7),(year==startYear&&startMonth>=month||startYear>year)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(year==endYear&&month>=endMonth||year>endYear)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var nextMonth=new Date(prevMonth.valueOf());nextMonth.setDate(nextMonth.getDate()+42),nextMonth=nextMonth.valueOf();for(var clsName,html=[];prevMonth.valueOf()<nextMonth;)prevMonth.getDay()===this.weekStart&&html.push("<tr>"),clsName="",prevMonth.getFullYear()<year||prevMonth.getFullYear()==year&&prevMonth.getMonth()<month?clsName+=" old":(prevMonth.getFullYear()>year||prevMonth.getFullYear()==year&&prevMonth.getMonth()>month)&&(clsName+=" new"),prevMonth.valueOf()===currentDate.valueOf()&&(clsName+=" active"),prevMonth.valueOf()+864e5<=this.startDate&&(clsName+=" disabled"),prevMonth.valueOf()>this.endDate&&(clsName+=" disabled"),html.push('<td class="day'+clsName+'">'+prevMonth.getDate()+"</td>"),prevMonth.getDay()===this.weekEnd&&html.push("</tr>"),prevMonth.setDate(prevMonth.getDate()+1);this.widget.find(".datepicker-days tbody").empty().append(html.join(""));var currentYear=this._date.getFullYear(),months=this.widget.find(".datepicker-months").find("th:eq(1)").text(year).end().find("span").removeClass("active");currentYear===year&&months.eq(this._date.getMonth()).addClass("active"),startYear>currentYear-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),currentYear+1>endYear&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var i=0;12>i;i++)year==startYear&&startMonth>i||startYear>year?$(months[i]).addClass("disabled"):(year==endYear&&i>endMonth||year>endYear)&&$(months[i]).addClass("disabled");html="",year=10*parseInt(year/10,10);var yearCont=this.widget.find(".datepicker-years").find("th:eq(1)").text(year+"-"+(year+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),startYear>year&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),year+9>endYear&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),year-=1;for(var i=-1;11>i;i++)html+='<span class="year'+(-1===i||10===i?" old":"")+(currentYear===year?" active":"")+(startYear>year||year>endYear?" disabled":"")+'">'+year+"</span>",year+=1;yearCont.html(html)},fillHours:function(){var table=this.widget.find(".timepicker .timepicker-hours table");table.parent().hide();var html="";if(this.options.pick12HourFormat)for(var current=1,i=0;3>i;i+=1){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="hour">'+padLeft(c,2,"0")+"</td>",current++}html+="</tr>"}else for(var current=0,i=0;6>i;i+=1){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="hour">'+padLeft(c,2,"0")+"</td>",current++}html+="</tr>"}table.html(html)},fillMinutes:function(){var table=this.widget.find(".timepicker .timepicker-minutes table");table.parent().hide();for(var html="",current=0,i=0;5>i;i++){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="minute">'+padLeft(c,2,"0")+"</td>",current+=3}html+="</tr>"}table.html(html)},fillSeconds:function(){var table=this.widget.find(".timepicker .timepicker-seconds table");table.parent().hide();for(var html="",current=0,i=0;5>i;i++){html+="<tr>";for(var j=0;4>j;j+=1){var c=current.toString();html+='<td class="second">'+padLeft(c,2,"0")+"</td>",current+=3}html+="</tr>"}table.html(html)},fillTime:function(){if(this._date){var timeComponents=this.widget.find(".timepicker span[data-time-component]"),is12HourFormat=(timeComponents.closest("table"),this.options.pick12HourFormat),hour=this._date.getHours(),period="AM";is12HourFormat&&(hour>=12&&(period="PM"),0===hour?hour=12:12!=hour&&(hour%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(period)),hour=padLeft(hour.toString(),2,"0");var minute=padLeft(this._date.getMinutes().toString(),2,"0"),second=padLeft(this._date.getSeconds().toString(),2,"0");timeComponents.filter("[data-time-component=hours]").text(hour),timeComponents.filter("[data-time-component=minutes]").text(minute),timeComponents.filter("[data-time-component=seconds]").text(second)}},click:function(e){e.stopPropagation(),e.preventDefault(),this._unset=!1;var target=$(e.target).closest("span, td, th");if(1===target.length&&!target.is(".disabled"))switch(target[0].nodeName.toLowerCase()){case"th":switch(target[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var vd=this.viewDate,navFnc=DPGlobal.modes[this.viewMode].navFnc,step=DPGlobal.modes[this.viewMode].navStep;"prev"===target[0].className&&(step=-1*step),vd["set"+navFnc](vd["get"+navFnc]()+step),this.fillDate(),this.set()}break;case"span":if(target.is(".month")){var month=target.parent().find("span").index(target);this.viewDate.setMonth(month)}else{var year=parseInt(target.text(),10)||0;this.viewDate.setFullYear(year)}0!==this.viewMode&&(this._date=new Date(this.viewDate.getFullYear(),this.viewDate.getMonth(),this.viewDate.getDate(),this._date.getHours(),this._date.getMinutes(),this._date.getSeconds(),this._date.getMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set();break;case"td":if(target.is(".day")){var day=parseInt(target.text(),10)||1,month=this.viewDate.getMonth(),year=this.viewDate.getFullYear();target.is(".old")?0===month?(month=11,year-=1):month-=1:target.is(".new")&&(11==month?(month=0,year+=1):month+=1),this._date=new Date(year,month,day,this._date.getHours(),this._date.getMinutes(),this._date.getSeconds(),this._date.getMilliseconds()),this.viewDate=new Date(year,month,Math.min(28,day),0,0,0,0),this.fillDate(),this.set(),this.notifyChange()}}},actions:{incrementHours:function(){this._date.setHours(this._date.getHours()+1)},incrementMinutes:function(){this._date.setMinutes(this._date.getMinutes()+1)},incrementSeconds:function(){this._date.setSeconds(this._date.getSeconds()+1)},decrementHours:function(){this._date.setHours(this._date.getHours()-1)},decrementMinutes:function(){this._date.setMinutes(this._date.getMinutes()-1)},decrementSeconds:function(){this._date.setSeconds(this._date.getSeconds()-1)},togglePeriod:function(){var hour=this._date.getHours();hour>=12?hour-=12:hour+=12,this._date.setHours(hour)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var tgt=$(e.target),value=parseInt(tgt.text(),10);if(this.options.pick12HourFormat){var current=this._date.getHours();current>=12?12!=value&&(value=(value+12)%24):12===value?value=0:value%=12}this._date.setHours(value),this.actions.showPicker.call(this)},selectMinute:function(e){var tgt=$(e.target),value=parseInt(tgt.text(),10);this._date.setMinutes(value),this.actions.showPicker.call(this)},selectSecond:function(e){var tgt=$(e.target),value=parseInt(tgt.text(),10);this._date.setSeconds(value),this.actions.showPicker.call(this)}},doAction:function(e){e.stopPropagation(),e.preventDefault(),this._date||(this._date=new Date(1970,0,0,0,0,0,0));var action=$(e.currentTarget).data("action"),rv=this.actions[action].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),rv},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},keydown:function(e){var self=this,k=e.which,input=$(e.target);(8==k||46==k)&&setTimeout(function(){self._resetMaskPos(input)})},keypress:function(e){var k=e.which;if(8!=k&&46!=k){var input=$(e.target),c=String.fromCharCode(k),val=input.val()||"";val+=c;var mask=this._mask[this._maskPos];if(!mask)return!1;if(mask.end==val.length){if(!mask.pattern.test(val.slice(mask.start))){for(val=val.slice(0,val.length-1);(mask=this._mask[this._maskPos])&&mask.character;)val+=mask.character,this._maskPos++;return val+=c,mask.end!=val.length?(input.val(val),!1):mask.pattern.test(val.slice(mask.start))?(input.val(val),this._maskPos++,!1):(input.val(val.slice(0,mask.start)),!1)}this._maskPos++}}},change:function(e){var input=$(e.target),val=input.val();this._formatPattern.test(val)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):val&&val.trim()?(this.setValue(this._date.getTime()),this._date?this.set():input.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0),this._resetMaskPos(input)},showMode:function(dir){dir&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+dir))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+DPGlobal.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(d){return this.isISOFormat?d.toISOString():this.format.replace(formatReplacer,function(match){var methodName,property,rv,len=match.length;if("ms"===match&&(len=1),property=dateFormatComponents[match].property,"Hours12"===property)rv=d.getHours(),0===rv?rv=12:12!==rv&&(rv%=12);else{if("Period12"===property)return d.getHours()>=12?"PM":"AM";methodName="get"+property,rv=d[methodName]()}return"getMonth"===methodName&&(rv+=1),"getYear"===methodName&&(rv=rv+1900-2e3),padLeft(rv.toString(),len,"0")})},parseDate:function(str){if(this.isISOFormat)return Utilities.parseISODate(str);var match,i,property,value,parsed={};if(!(match=this._formatPattern.exec(str)))return null;for(i=1;i<match.length;i++)property=this._propertiesByIndex[i],property&&(value=match[i],/^\d+$/.test(value)&&(value=parseInt(value,10)),parsed[property]=value);return this._finishParsingDate(parsed)},_resetMaskPos:function(input){for(var val=input.val(),i=0;i<this._mask.length;i++){if(this._mask[i].end>val.length){this._maskPos=i;break}if(this._mask[i].end===val.length){this._maskPos=i+1;break}}},_finishParsingDate:function(parsed){var year,month,date,hours,minutes,seconds,milliseconds;return year=parsed.FullYear,parsed.Year&&(year=2e3+parsed.Year),year||(year=1970),month=parsed.Month?parsed.Month-1:0,date=parsed.Date||1,hours=parsed.Hours||0,minutes=parsed.Minutes||0,seconds=parsed.Seconds||0,milliseconds=parsed.Milliseconds||0,parsed.Hours12&&(hours=parsed.Hours12),parsed.Period12&&(/pm/i.test(parsed.Period12)?12!=hours&&(hours=(hours+12)%24):hours%=12),Date(year,month,date,hours,minutes,seconds,milliseconds)},_compileFormat:function(){for(var match,component,components=[],mask=[],str=this.format,propertiesByIndex={},i=0,pos=0;match=formatComponent.exec(str);)component=match[0],component in dateFormatComponents?(i++,propertiesByIndex[i]=dateFormatComponents[component].property,components.push("\\s*"+dateFormatComponents[component].getPattern(this)+"\\s*"),mask.push({pattern:new RegExp(dateFormatComponents[component].getPattern(this)),property:dateFormatComponents[component].property,start:pos,end:pos+=component.length})):(components.push(escapeRegExp(component)),mask.push({pattern:new RegExp(escapeRegExp(component)),character:component,start:pos,end:++pos})),str=str.slice(component.length);this._mask=mask,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+components.join("")+"\\s*$"),this._propertiesByIndex=propertiesByIndex},_attachDatePickerEvents:function(){var self=this;this.widget.on("click",".datepicker *",$.proxy(this.click,this)),this.widget.on("click","[data-action]",$.proxy(this.doAction,this)),this.widget.on("mousedown",$.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(e){e.stopPropagation();var $this=$(this),$parent=$this.closest("ul"),expanded=$parent.find(".collapse.in"),closed=$parent.find(".collapse:not(.in)");if(expanded&&expanded.length){var collapseData=expanded.data("collapse");if(collapseData&&collapseData.transitioning)return;expanded.collapse("hide"),closed.collapse("show"),$this.find("i").toggleClass(self.timeIcon+" "+self.dateIcon),self.$element.find(".add-on i").toggleClass(self.timeIcon+" "+self.dateIcon)}}),this.isInput?(this.$element.on({focus:$.proxy(this.show,this),change:$.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:$.proxy(this.keydown,this),keypress:$.proxy(this.keypress,this)})):(this.$element.on({change:$.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:$.proxy(this.keydown,this),keypress:$.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",$.proxy(this.show,this)):this.$element.on("click",$.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(){$(window).on("resize.datetimepicker"+this.id,$.proxy(this.place,this)),$(document).on("mousedown.datetimepicker"+this.id,$.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){$(window).off("resize.datetimepicker"+this.id),this.isInput||$(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){for(var parents=this.$element.parents(),inFixed=!1,i=0;i<parents.length;i++)if("fixed"==$(parents[i]).css("position")){inFixed=!0;break}return inFixed}return!1}},$.fn.datetimepicker=function(option,val){return this.each(function(){var $this=$(this),data=$this.data("datetimepicker"),options="object"==typeof option&&option;data||$this.data("datetimepicker",data=new DateTimePicker(this,$.extend({},$.fn.datetimepicker.defaults,options))),"string"==typeof option&&data[option](val)})},$.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-(1/0),endDate:1/0,collapse:!0},$.fn.datetimepicker.Constructor=DateTimePicker;var dpgId=0,dates=$.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},dateFormatComponents={dd:{property:"Date",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"Month",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"Year",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"FullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"Hours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"Minutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"Seconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"Milliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},keys=[];for(var k in dateFormatComponents)keys.push(k);keys[keys.length-1]+="\\b",keys.push(".");var formatComponent=new RegExp(keys.join("\\b|"));keys.pop();var formatReplacer=new RegExp(keys.join("\\b|"),"g"),DPGlobal={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(year){return year%4===0&&year%100!==0||year%400===0},getDaysInMonth:function(year,month){return[31,DPGlobal.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};DPGlobal.template='<div class="datepicker-days"><table class="table-condensed">'+DPGlobal.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table></div>";var TPGlobal={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};TPGlobal.getTemplate=function(is12Hours,showSeconds){return'<div class="timepicker-picker"><table class="table-condensed"'+(is12Hours?' data-hour-format="12"':"")+'><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"></i></a></td>'+(showSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"></i></a></td>':"")+(is12Hours?'<td class="separator"></td>':"")+"</tr><tr><td>"+TPGlobal.hourTemplate+'</td> <td class="separator">:</td><td>'+TPGlobal.minuteTemplate+"</td> "+(showSeconds?'<td class="separator">:</td><td>'+TPGlobal.secondTemplate+"</td>":"")+(is12Hours?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"></i></a></td>'+(showSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"></i></a></td>':"")+(is12Hours?'<td class="separator"></td>':"")+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(showSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")}}(window.jQuery),window.CKEDITOR_BASEPATH=baseMedia+"lib/ckeditor/",function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var b={timestamp:"D8AD",version:"4.2.1",revision:"5010dd4",rnd:Math.floor(900*Math.random())+100,_:{pending:[]},status:"unloaded",basePath:function(){var a=window.CKEDITOR_BASEPATH||"";if(!a)for(var b=document.getElementsByTagName("script"),e=0;e<b.length;e++){var c=b[e].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(c){a=c[1];break}}if(-1==a.indexOf(":/")&&(a=0===a.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:location.href.match(/^[^\?]*\/(?:)/)[0]+a),!a)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return a}(),getUrl:function(a){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(e){}}function b(){for(var a;a=e.shift();)a()}var e=[];return function(b){if(e.push(b),"complete"===document.readyState&&setTimeout(a,1),1==e.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a),b=!1;try{b=!window.frameElement}catch(d){}if(document.documentElement.doScroll&&b){var c=function(){try{document.documentElement.doScroll("left")}catch(b){return void setTimeout(c,1)}a()};c()}}}}()},c=window.CKEDITOR_GETURL;if(c){var a=b.getUrl;b.getUrl=function(f){return c.call(b,f)||a.call(b,f)}}return b}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(b){var a,c=CKEDITOR.event.prototype;for(a in c)void 0==b[a]&&(b[a]=c[a])},CKEDITOR.event.prototype=function(){function b(f){var b=c(this);return b[f]||(b[f]=new a(f))}var c=function(a){return a=a.getPrivate&&a.getPrivate()||a._||(a._={}),a.events||(a.events={})},a=function(a){this.name=a,this.listeners=[]};return a.prototype={getListenerIndex:function(a){for(var b=0,e=this.listeners;b<e.length;b++)if(e[b].fn==a)return b;return-1}},{define:function(a,d){var e=b.call(this,a);CKEDITOR.tools.extend(e,d,!0)},on:function(a,d,e,c,j){function i(b,g,m,q){return b={name:a,sender:this,editor:b,data:g,listenerData:c,stop:m,cancel:q,removeListener:k},d.call(e,b)===!1?!1:b.data}function k(){q.removeListener(a,d)}var m=b.call(this,a);if(m.getListenerIndex(d)<0){m=m.listeners,e||(e=this),isNaN(j)&&(j=10);var q=this;i.fn=d,i.priority=j;for(var r=m.length-1;r>=0;r--)if(m[r].priority<=j)return m.splice(r+1,0,i),{removeListener:k};m.unshift(i)}return{removeListener:k}},once:function(){var a=arguments[1];return arguments[1]=function(b){return b.removeListener(),a.apply(this,arguments)},this.on.apply(this,arguments)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:function(){var a=0,b=function(){a=1},e=0,h=function(){e=1};return function(j,i,k){var m=c(this)[j],j=a,q=e;if(a=e=0,m){var r=m.listeners;if(r.length)for(var l,r=r.slice(0),g=0;g<r.length;g++){if(m.errorProof)try{l=r[g].call(this,k,i,b,h)}catch(p){}else l=r[g].call(this,k,i,b,h);if(l===!1?e=1:"undefined"!=typeof l&&(i=l),a||e)break}}return i=e?!1:"undefined"==typeof i?!0:i,a=j,e=q,i}}(),fireOnce:function(a,b,e){return b=this.fire(a,b,e),delete c(this)[a],b},removeListener:function(a,b){var e=c(this)[a];if(e){var h=e.getListenerIndex(b);h>=0&&e.listeners.splice(h,1)}},removeAllListeners:function(){var b,a=c(this);for(b in a)delete a[b]},hasListeners:function(a){return(a=c(this)[a])&&a.listeners.length>0}
}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(b,c){return b in{instanceReady:1,loaded:1}&&(this[b]=!0),CKEDITOR.event.prototype.fire.call(this,b,c,this)},CKEDITOR.editor.prototype.fireOnce=function(b,c){return b in{instanceReady:1,loaded:1}&&(this[b]=!0),CKEDITOR.event.prototype.fireOnce.call(this,b,c,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var b=navigator.userAgent.toLowerCase(),c=window.opera,a={ie:eval("/*@cc_on!@*/false"),opera:!!c&&c.version,webkit:b.indexOf(" applewebkit/")>-1,air:b.indexOf(" adobeair/")>-1,mac:b.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode,mobile:b.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(b),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,f=window.location.hostname;return a!=f&&a!="["+f+"]"},secure:"https:"==location.protocol};a.gecko="Gecko"==navigator.product&&!a.webkit&&!a.opera,a.webkit&&(b.indexOf("chrome")>-1?a.chrome=!0:a.safari=!0);var f=0;if(a.ie&&(f=a.quirks||!document.documentMode?parseFloat(b.match(/msie (\d+)/)[1]):document.documentMode,a.ie9Compat=9==f,a.ie8Compat=8==f,a.ie7Compat=7==f,a.ie6Compat=7>f||a.quirks&&10>f),a.gecko){var d=b.match(/rv:([\d\.]+)/);d&&(d=d[1].split("."),f=1e4*d[0]+100*(d[1]||0)+1*(d[2]||0))}return a.opera&&(f=parseFloat(c.version())),a.air&&(f=parseFloat(b.match(/ adobeair\/(\d+)/)[1])),a.webkit&&(f=parseFloat(b.match(/ applewebkit\/(\d+)/)[1])),a.version=f,a.isCompatible=a.iOS&&f>=534||!a.mobile&&(a.ie&&f>6||a.gecko&&f>=10801||a.opera&&f>=9.5||a.air&&f>=1||a.webkit&&f>=522||!1),a.hidpi=window.devicePixelRatio>=2,a.cssClass="cke_browser_"+(a.ie?"ie":a.gecko?"gecko":a.opera?"opera":a.webkit?"webkit":"unknown"),a.quirks&&(a.cssClass=a.cssClass+" cke_browser_quirks"),a.ie&&(a.cssClass=a.cssClass+(" cke_browser_ie"+(a.quirks||a.version<7?"6":a.version)),a.quirks&&(a.cssClass=a.cssClass+" cke_browser_iequirks")),a.gecko&&(10900>f?a.cssClass=a.cssClass+" cke_browser_gecko18":11e3>=f&&(a.cssClass=a.cssClass+" cke_browser_gecko19")),a.air&&(a.cssClass=a.cssClass+" cke_browser_air"),a.iOS&&(a.cssClass=a.cssClass+" cke_browser_ios"),a.hidpi&&(a.cssClass=a.cssClass+" cke_hidpi"),a}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var b=document.createElement("script");b.type="text/javascript",b.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(b)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(b){(this._.pending||(this._.pending=[])).push(b)},function(){CKEDITOR.domReady(function(){var b=CKEDITOR.loadFullCore,c=CKEDITOR.loadFullCoreTimeout;b&&(CKEDITOR.status="basic_ready",b&&b._load?b():c&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*c))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.dom={},function(){var b=[],c=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.opera?"-o-":CKEDITOR.env.ie?"-ms-":"";CKEDITOR.on("reset",function(){b=[]}),CKEDITOR.tools={arrayCompare:function(a,f){if(!a&&!f)return!0;if(!a||!f||a.length!=f.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!=f[b])return!1;return!0},clone:function(a){var f;if(a&&a instanceof Array){f=[];for(var b=0;b<a.length;b++)f[b]=CKEDITOR.tools.clone(a[b]);return f}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp)return a;f=new a.constructor;for(b in a)f[b]=CKEDITOR.tools.clone(a[b]);return f},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},extend:function(a){var b,e,f=arguments.length;"boolean"==typeof(b=arguments[f-1])?f--:"boolean"==typeof(b=arguments[f-2])&&(e=arguments[f-1],f-=2);for(var c=1;f>c;c++){var i,j=arguments[c];for(i in j)(b===!0||void 0==a[i])&&(!e||i in e)&&(a[i]=j[i])}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},copy:function(a){var d,b={};for(d in a)b[d]=a[d];return b},isArray:function(a){return!!a&&a instanceof Array},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},cssVendorPrefix:function(a,b,d){return d?c+a+":"+b+";"+a+":"+b:(d={},d[a]=b,d[c+a]=b,d)},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){for(var b,a=[].concat(a),d=[],c=0;c<a.length;c++)(b=a[c])&&d.push(/@import|[{}]/.test(b)?"<style>"+b+"</style>":'<link type="text/css" rel=stylesheet href="'+b+'">');return d.join("")},htmlEncode:function(a){return(""+a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},htmlEncodeAttr:function(a){return a.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(a,b){var d=b(a);return d.prototype=a.prototype,d},setTimeout:function(a,b,d,c,h){return h||(h=window),d||(d=h),h.setTimeout(function(){c?a.apply(d,[].concat(c)):a.apply(d)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b.replace(a,"")}}(),indexOf:function(a,b){if("function"==typeof b){for(var d=0,c=a.length;c>d;d++)if(b(a[d]))return d}else{if(a.indexOf)return a.indexOf(b);for(d=0,c=a.length;c>d;d++)if(a[d]===b)return d}return-1},search:function(a,b){var d=CKEDITOR.tools.indexOf(a,b);return d>=0?a[d]:null},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(a){var b=a.$,d=a.base,c=a.privates||a._,h=a.proto,a=a.statics;if(!b&&(b=function(){d&&this.base.apply(this,arguments)}),c)var j=b,b=function(){var b,a=this._||(this._={});for(b in c){var f=c[b];a[b]="function"==typeof f?CKEDITOR.tools.bind(f,this):f}j.apply(this,arguments)};return d&&(b.prototype=this.prototypedCopy(d.prototype),b.prototype.constructor=b,b.base=d,b.baseProto=d.prototype,b.prototype.base=function(){this.base=d.prototype.base,d.apply(this,arguments),this.base=arguments.callee}),h&&this.extend(b.prototype,h,!0),a&&this.extend(b,a,!0),b},addFunction:function(a,f){return b.push(function(){return a.apply(f||this,arguments)})-1},removeFunction:function(a){b[a]=null},callFunction:function(a){var f=b[a];return f&&f.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var b,a=/^-?\d+\.?\d*px$/;return function(d){return b=CKEDITOR.tools.trim(d+"")+"px",a.test(b)?b:d||""}}(),convertToPx:function(){var a;return function(b){return a||(a=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(a)),/%$/.test(b)?b:(a.setStyle("width",b),a.$.clientWidth)}}(),repeat:function(a,b){return Array(b+1).join(a)},tryThese:function(){for(var a,b=0,d=arguments.length;d>b;b++){var c=arguments[b];try{a=c();break}catch(h){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var b=arguments,d=this;window.setTimeout(function(){a.apply(d,b)},0)}},normalizeCssText:function(a,b){var c,d=[],h=CKEDITOR.tools.parseCssText(a,!0,b);for(c in h)d.push(c+":"+h[c]);return d.sort(),d.length?d.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,h){for(a=[b,c,h],b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);return"#"+a.join("")})},parseCssText:function(a,b,d){var c={};return d&&(d=new CKEDITOR.dom.element("span"),d.setAttribute("style",a),a=CKEDITOR.tools.convertRgbToHex(d.getAttribute("style")||"")),a&&";"!=a?(a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,d,i){b&&(d=d.toLowerCase(),"font-family"==d&&(i=i.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),i=CKEDITOR.tools.trim(i)),c[d]=i}),c):c},writeCssText:function(a,b){var d,c=[];for(d in a)c.push(d+":"+a[d]);return b&&c.sort(),c.join("; ")},objectCompare:function(a,b,d){var c;if(!a&&!b)return!0;if(!a||!b)return!1;for(c in a)if(a[c]!=b[c])return!1;if(!d)for(c in b)if(a[c]!=b[c])return!1;return!0},objectKeys:function(a){var d,b=[];for(d in a)b.push(d);return b},convertArrayToObject:function(a,b){var d={};1==arguments.length&&(b=!0);for(var c=0,h=a.length;h>c;++c)d[a[c]]=b;return d},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(b){if(a=a?a.replace(/.+?(?:\.|$)/,""):document.domain,!a)break;document.domain=a}return!!a},eventsBuffer:function(a,b){function d(){h=(new Date).getTime(),c=!1,b()}var c,h=0;return{input:function(){if(!c){var b=(new Date).getTime()-h;a>b?c=setTimeout(d,a-b):d()}},reset:function(){c&&clearTimeout(c),c=h=0}}}}}(),CKEDITOR.dtd=function(){var b=CKEDITOR.tools.extend,c=function(a,b){for(var f=CKEDITOR.tools.clone(a),d=1;d<arguments.length;d++){var c,b=arguments[d];for(c in b)delete f[c]}return f},a={},f={},d={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},e={command:1,link:1,meta:1,noscript:1,script:1,style:1},h={},j={"#":1},i={center:1,dir:1,noframes:1};return b(a,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},j,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),b(f,d,a,i),c={a:c(a,{a:1,button:1}),abbr:a,address:f,area:h,article:b({style:1},f),aside:b({style:1},f),audio:b({source:1,track:1},f),b:a,base:h,bdi:a,bdo:a,blockquote:f,body:f,br:h,button:c(a,{a:1,button:1}),canvas:a,caption:f,cite:a,code:a,col:h,colgroup:{col:1},command:h,datalist:b({option:1},a),dd:f,del:a,details:b({summary:1},f),dfn:a,div:b({style:1},f),dl:{dt:1,dd:1},dt:f,em:a,embed:h,fieldset:b({legend:1},f),figcaption:f,figure:b({figcaption:1},f),footer:f,form:f,h1:a,h2:a,h3:a,h4:a,h5:a,h6:a,head:b({title:1,base:1},e),header:f,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:h,html:b({head:1,body:1},f,e),i:a,iframe:j,img:h,input:h,ins:a,kbd:a,keygen:h,label:a,legend:a,li:f,link:h,map:f,mark:a,menu:b({li:1},f),meta:h,meter:c(a,{meter:1}),nav:f,noscript:b({link:1,meta:1,style:1},a),object:b({param:1},a),ol:{li:1},optgroup:{option:1},option:j,output:a,p:a,param:h,pre:a,progress:c(a,{progress:1}),q:a,rp:a,rt:a,ruby:b({rp:1,rt:1},a),s:a,samp:a,script:j,section:b({style:1},f),select:{optgroup:1,option:1},small:a,source:h,span:a,strong:a,style:j,sub:a,summary:a,sup:a,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:f,textarea:j,tfoot:{tr:1},th:f,thead:{tr:1},time:c(a,{time:1}),title:j,tr:{th:1,td:1},track:h,u:a,ul:{li:1},"var":a,video:b({source:1,track:1},f),wbr:h,acronym:a,applet:b({param:1},f),basefont:h,big:a,center:f,dialog:h,dir:{li:1},font:a,isindex:h,noframes:f,strike:a,tt:a},b(c,{$block:b({audio:1,dd:1,dt:1,li:1,video:1},d,i),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:a,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:b({body:1,head:1,html:1},c.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),c}(),CKEDITOR.dom.event=function(b){this.$=b},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var b=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(b+=CKEDITOR.CTRL),this.$.shiftKey&&(b+=CKEDITOR.SHIFT),this.$.altKey&&(b+=CKEDITOR.ALT),b},preventDefault:function(b){var c=this.$;c.preventDefault?c.preventDefault():c.returnValue=!1,b&&this.stopPropagation()},stopPropagation:function(){var b=this.$;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},getTarget:function(){var b=this.$.target||this.$.srcElement;return b?new CKEDITOR.dom.node(b):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var b=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(b.documentElement.scrollLeft||b.body.scrollLeft),y:this.$.pageY||this.$.clientY+(b.documentElement.scrollTop||b.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(b){b&&(this.$=b)},CKEDITOR.dom.domObject.prototype=function(){var b=function(b,a){return function(f){"undefined"!=typeof CKEDITOR&&b.fire(a,new CKEDITOR.dom.event(f))}};return{getPrivate:function(){var b;return(b=this.getCustomData("_"))||this.setCustomData("_",b={}),b},on:function(c){var a=this.getCustomData("_cke_nativeListeners");return a||(a={},this.setCustomData("_cke_nativeListeners",a)),a[c]||(a=a[c]=b(this,c),this.$.addEventListener?this.$.addEventListener(c,a,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+c,a)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(b){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(b)){var a=this.getCustomData("_cke_nativeListeners"),f=a&&a[b];f&&(this.$.removeEventListener?this.$.removeEventListener(b,f,!1):this.$.detachEvent&&this.$.detachEvent("on"+b,f),delete a[b])}},removeAllListeners:function(){var a,b=this.getCustomData("_cke_nativeListeners");for(a in b){var f=b[a];this.$.detachEvent?this.$.detachEvent("on"+a,f):this.$.removeEventListener&&this.$.removeEventListener(a,f,!1),delete b[a]}}}}(),function(b){var c={};CKEDITOR.on("reset",function(){c={}}),b.equals=function(a){try{return a&&a.$===this.$}catch(b){return!1}},b.setCustomData=function(a,b){var d=this.getUniqueId();return(c[d]||(c[d]={}))[a]=b,this},b.getCustomData=function(a){var b=this.$["data-cke-expando"];return(b=b&&c[b])&&a in b?b[a]:null},b.removeCustomData=function(a){var d,e,b=this.$["data-cke-expando"],b=b&&c[b];return b&&(d=b[a],e=a in b,delete b[a]),e?d:null},b.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete c[a]},b.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(b)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(b){return b?new CKEDITOR.dom[b.nodeType==CKEDITOR.NODE_DOCUMENT?"document":b.nodeType==CKEDITOR.NODE_ELEMENT?"element":b.nodeType==CKEDITOR.NODE_TEXT?"text":b.nodeType==CKEDITOR.NODE_COMMENT?"comment":b.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](b):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(b,c){return b.append(this,c),b},clone:function(b,c){var a=this.$.cloneNode(b),f=function(a){if(a["data-cke-expando"]&&(a["data-cke-expando"]=!1),a.nodeType==CKEDITOR.NODE_ELEMENT&&(c||a.removeAttribute("id",!1),b))for(var a=a.childNodes,e=0;e<a.length;e++)f(a[e])};return f(a),new CKEDITOR.dom.node(a)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(b){return b.$.parentNode.insertBefore(this.$,b.$.nextSibling),b},insertBefore:function(b){return b.$.parentNode.insertBefore(this.$,b.$),b},insertBeforeMe:function(b){return this.$.parentNode.insertBefore(b.$,this.$),b},getAddress:function(b){for(var c=[],a=this.getDocument().$.documentElement,f=this.$;f&&f!=a;){var d=f.parentNode;d&&c.unshift(this.getIndex.call({$:f},b)),f=d}return c},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(b){var f,c=this.$,a=-1;if(!this.$.parentNode)return a;do(!b||c==this.$||c.nodeType!=CKEDITOR.NODE_TEXT||!f&&c.nodeValue)&&(a++,f=c.nodeType==CKEDITOR.NODE_TEXT);while(c=c.previousSibling);return a},getNextSourceNode:function(b,c,a){if(a&&!a.call)var f=a,a=function(a){return!a.equals(f)};var d,b=!b&&this.getFirst&&this.getFirst();if(!b){if(this.type==CKEDITOR.NODE_ELEMENT&&a&&a(this,!0)===!1)return null;b=this.getNext()}for(;!b&&(d=(d||this).getParent());){if(a&&a(d,!0)===!1)return null;b=d.getNext()}return!b||a&&a(b)===!1?null:c&&c!=b.type?b.getNextSourceNode(!1,c,a):b},getPreviousSourceNode:function(b,c,a){if(a&&!a.call)var f=a,a=function(a){return!a.equals(f)};var d,b=!b&&this.getLast&&this.getLast();if(!b){if(this.type==CKEDITOR.NODE_ELEMENT&&a&&a(this,!0)===!1)return null;b=this.getPrevious()}for(;!b&&(d=(d||this).getParent());){if(a&&a(d,!0)===!1)return null;b=d.getPrevious()}return!b||a&&a(b)===!1?null:c&&b.type!=c?b.getPreviousSourceNode(!1,c,a):b},getPrevious:function(b){var a,c=this.$;do a=(c=c.previousSibling)&&10!=c.nodeType&&new CKEDITOR.dom.node(c);while(a&&b&&!b(a));return a},getNext:function(b){var a,c=this.$;do a=(c=c.nextSibling)&&new CKEDITOR.dom.node(c);while(a&&b&&!b(a));return a},getParent:function(b){var c=this.$.parentNode;return c&&(c.nodeType==CKEDITOR.NODE_ELEMENT||b&&c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(c):null},getParents:function(b){var c=this,a=[];do a[b?"push":"unshift"](c);while(c=c.getParent());return a},getCommonAncestor:function(b){if(b.equals(this))return this;if(b.contains&&b.contains(this))return b;var c=this.contains?this:this.getParent();do if(c.contains(b))return c;while(c=c.getParent());return null},getPosition:function(b){var c=this.$,a=b.$;if(c.compareDocumentPosition)return c.compareDocumentPosition(a);if(c==a)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&b.type==CKEDITOR.NODE_ELEMENT){if(c.contains){if(c.contains(a))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(a.contains(c))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in c)return c.sourceIndex<0||a.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:c.sourceIndex<a.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}for(var c=this.getAddress(),b=b.getAddress(),a=Math.min(c.length,b.length),f=0;a-1>=f;f++)if(c[f]!=b[f]){if(a>f)return c[f]<b[f]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return c.length<b.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(b,c){var f,a=this.$;for(c||(a=a.parentNode);a;){if(a.nodeName&&(f=a.nodeName.toLowerCase(),"string"==typeof b?f==b:f in b))return new CKEDITOR.dom.node(a);try{a=a.parentNode}catch(d){a=null}}return null},hasAscendant:function(b,c){var a=this.$;for(c||(a=a.parentNode);a;){if(a.nodeName&&a.nodeName.toLowerCase()==b)return!0;a=a.parentNode}return!1},move:function(b,c){b.append(this.remove(),c)},remove:function(b){var c=this.$,a=c.parentNode;if(a){if(b)for(;b=c.firstChild;)a.insertBefore(c.removeChild(b),c);a.removeChild(c)}return this},replace:function(b){this.insertBefore(b),b.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var b;this.getFirst&&(b=this.getFirst());){if(b.type==CKEDITOR.NODE_TEXT){var c=CKEDITOR.tools.ltrim(b.getText()),a=b.getLength();if(!c){b.remove();continue}c.length<a&&(b.split(a-c.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var b;this.getLast&&(b=this.getLast());){if(b.type==CKEDITOR.NODE_TEXT){var c=CKEDITOR.tools.rtrim(b.getText()),a=b.getLength();if(!c){b.remove();continue}c.length<a&&(b.split(c.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.ie||CKEDITOR.env.opera||(b=this.$.lastChild)&&1==b.type&&"br"==b.nodeName.toLowerCase()&&b.parentNode.removeChild(b)},isReadOnly:function(){var b=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(b=this.getParent()),b&&"undefined"!=typeof b.$.isContentEditable)return!(b.$.isContentEditable||b.data("cke-editable"));for(;b&&!b.data("cke-editable");){if("false"==b.getAttribute("contentEditable"))return!0;if("true"==b.getAttribute("contentEditable"))break;b=b.getParent()}return!b}}),CKEDITOR.dom.window=function(b){CKEDITOR.dom.domObject.call(this,b)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var b=this.$.document,c="CSS1Compat"==b.compatMode;return{width:(c?b.documentElement.clientWidth:b.body.clientWidth)||0,height:(c?b.documentElement.clientHeight:b.body.clientHeight)||0}},getScrollPosition:function(){var b=this.$;return"pageXOffset"in b?{x:b.pageXOffset||0,y:b.pageYOffset||0}:(b=b.document,{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0})},getFrame:function(){var b=this.$.frameElement;return b?new CKEDITOR.dom.element.get(b):null}}),CKEDITOR.dom.document=function(b){CKEDITOR.dom.domObject.call(this,b)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(b){if(this.$.createStyleSheet)this.$.createStyleSheet(b);else{var c=new CKEDITOR.dom.element("link");c.setAttributes({rel:"stylesheet",type:"text/css",href:b}),this.getHead().append(c)}},appendStyleText:function(b){if(this.$.createStyleSheet){var c=this.$.createStyleSheet("");c.cssText=b}else{var a=new CKEDITOR.dom.element("style",this);a.append(new CKEDITOR.dom.text(b,this)),this.getHead().append(a)}return c||a.$.sheet},createElement:function(b,c){var a=new CKEDITOR.dom.element(b,this);return c&&(c.attributes&&a.setAttributes(c.attributes),c.styles&&a.setStyles(c.styles)),a},createText:function(b){return new CKEDITOR.dom.text(b,this)},focus:function(){this.getWindow().focus()},getActive:function(){return new CKEDITOR.dom.element(this.$.activeElement)},getById:function(b){return(b=this.$.getElementById(b))?new CKEDITOR.dom.element(b):null},getByAddress:function(b,c){for(var a=this.$.documentElement,f=0;a&&f<b.length;f++){var d=b[f];if(c)for(var e=-1,h=0;h<a.childNodes.length;h++){var j=a.childNodes[h];if((c!==!0||3!=j.nodeType||!j.previousSibling||3!=j.previousSibling.nodeType)&&(e++,e==d)){a=j;break}}else a=a.childNodes[d]}return a?new CKEDITOR.dom.node(a):null},getElementsByTag:function(b,c){return(!CKEDITOR.env.ie||document.documentMode>8)&&c&&(b=c+":"+b),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(b))},getHead:function(){var b=this.$.getElementsByTagName("head")[0];return b=b?new CKEDITOR.dom.element(b):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(b){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(b=b.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(b),this.$.close()}}),CKEDITOR.dom.nodeList=function(b){this.$=b},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(b){return 0>b||b>=this.$.length?null:(b=this.$[b])?new CKEDITOR.dom.node(b):null}},CKEDITOR.dom.element=function(b,c){"string"==typeof b&&(b=(c?c.$:document).createElement(b)),CKEDITOR.dom.domObject.call(this,b)},CKEDITOR.dom.element.get=function(b){return(b="string"==typeof b?document.getElementById(b)||document.getElementsByName(b)[0]:b)&&(b.$?b:new CKEDITOR.dom.element(b))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(b,c){var a=new CKEDITOR.dom.element("div",c);return a.setHtml(b),a.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(b,c,a,f){var d=c.getCustomData("list_marker_id")||c.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),e=c.getCustomData("list_marker_names")||c.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return b[d]=c,e[a]=1,c.setCustomData(a,f)},CKEDITOR.dom.element.clearAllMarkers=function(b){for(var c in b)CKEDITOR.dom.element.clearMarkers(b,b[c],1)},CKEDITOR.dom.element.clearMarkers=function(b,c,a){var e,f=c.getCustomData("list_marker_names"),d=c.getCustomData("list_marker_id");for(e in f)c.removeCustomData(e);c.removeCustomData("list_marker_names"),a&&(c.removeCustomData("list_marker_id"),delete b[d])},function(){function b(a){for(var b=0,d=0,e=c[a].length;e>d;d++)b+=parseInt(this.getComputedStyle(c[a][d])||0,10)||0;return b}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(a){var b=this.$.className;b&&(RegExp("(?:^|\\s)"+a+"(?:\\s|$)","").test(b)||(b+=" "+a)),this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");return b&&(a=RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i"),a.test(b)&&((b=b.replace(a,"").replace(/^\s+/,""))?this.setAttribute("class",b):this.removeAttribute("class"))),this},hasClass:function(a){return RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(a,b){return"string"==typeof a&&(a=this.getDocument().createElement(a)),b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$),a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a),b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){void 0!=this.$.text?this.$.text=this.$.text+a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(){for(var a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))},breakParent:function(a){var b=new CKEDITOR.dom.range(this.getDocument());b.setStartAfter(this),b.setEndAfter(a),a=b.extractContents(),b.insertNode(this.remove()),a.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(16&this.$.compareDocumentPosition(a.$))},focus:function(){function a(){try{this.$.focus()}catch(a){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");return a.appendChild(this.$.cloneNode(!0)),a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!a.width&&(a.width=a.right-a.left),!a.height&&(a.height=a.bottom-a.top),a},setHtml:function(){var a=function(a){return this.$.innerHTML=a};return CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(a){try{return this.$.innerHTML=a}catch(b){this.$.innerHTML="";var c=new CKEDITOR.dom.element("body",this.getDocument());for(c.$.innerHTML=a,c=c.getChildren();c.count();)this.append(c.getItem(0));return a}}:a}(),setText:function(a){return CKEDITOR.dom.element.prototype.setText=void 0!=this.$.innerText?function(a){return this.$.innerText=a}:function(a){return this.$.textContent=a},this.setText(a)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(a){switch(a){case"class":a="className";break;case"http-equiv":a="httpEquiv";break;case"name":return this.$.name;case"tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case"checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[a];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:a}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var a=this.$.tabIndex;return 0===a&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(a=-1),a}:CKEDITOR.env.webkit?function(){var a=this.$.tabIndex;return void 0==a&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1)),a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a)),b},getLast:function(a){var b=this.$.lastChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a)),b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();

return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:a!==!1?(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var b=this.clone(0,1),a=a.clone(0,1);if(b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);if(b=b.getOuterHtml(),a=a.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var d=this.getParent();d.type==CKEDITOR.NODE_ELEMENT&&(d=d.clone(),d.setHtml(b),b=d.getHtml(),d.setHtml(a),a=d.getHtml())}return b==a},isVisible:function(){var b,d,a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return a&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(b=this.getWindow(),!b.equals(CKEDITOR.document.getWindow())&&(d=b.$.frameElement)&&(a=new CKEDITOR.dom.element(d).isVisible())),!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),b=0,d=a.count();d>b;b++){var c=a.getItem(b);if((c.type!=CKEDITOR.NODE_ELEMENT||!c.data("cke-bookmark"))&&(c.type==CKEDITOR.NODE_ELEMENT&&!c.isEmptyInlineRemoveable()||c.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(c.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var d=a[b];switch(d.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(d.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,d={"data-cke-expando":1,_moz_dirty:1};return b>0&&(b>2||!d[a[0].nodeName]||2==b&&!d[a[1].nodeName])},hasAttribute:function(){function a(a){return a=this.$.attributes.getNamedItem(a),!(!a||!a.specified)}return CKEDITOR.env.ie&&CKEDITOR.env.version<8?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var d=this.$,a=a.$;if(d!=a){var c;if(b)for(;c=d.lastChild;)a.insertBefore(d.removeChild(c),a.firstChild);else for(;c=d.firstChild;)a.appendChild(d.removeChild(c))}},mergeSiblings:function(){function a(a,b,c){if(b&&b.type==CKEDITOR.NODE_ELEMENT){for(var h=[];b.data("cke-bookmark")||b.isEmptyInlineRemoveable();)if(h.push(b),b=c?b.getNext():b.getPrevious(),!b||b.type!=CKEDITOR.NODE_ELEMENT)return;if(a.isIdentical(b)){for(var j=c?a.getLast():a.getFirst();h.length;)h.shift().move(a,!c);b.moveChildren(a,!c),b.remove(),j&&j.type==CKEDITOR.NODE_ELEMENT&&j.mergeSiblings()}}}return function(b){(b===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(a(this,this.getNext(),!0),a(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b,c){return"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(e){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable"),this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var e,c=["top","left","right","bottom"];"border"==a&&(e=["color","style","width"]);for(var b=[],h=0;h<c.length;h++)if(e)for(var j=0;j<e.length;j++)b.push([a,c[h],e[j]].join("-"));else b.push([a,c[h]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},setStyle:function(a,b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(a=Math.round(100*a),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie||CKEDITOR.env.opera){this.setAttribute("unselectable","on");for(var a,b=this.getElementsByTag("*"),c=0,e=b.count();e>c;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,e=this.getDocument(),h=e.getBody(),j="BackCompat"==e.$.compatMode;if(document.documentElement.getBoundingClientRect){var i=this.$.getBoundingClientRect(),k=e.$.documentElement,m=k.clientTop||h.$.clientTop||0,q=k.clientLeft||h.$.clientLeft||0,r=!0;CKEDITOR.env.ie&&(r=e.getDocumentElement().contains(this),e=e.getBody().contains(this),r=j&&e||!j&&r),r&&(b=i.left+(!j&&k.scrollLeft||h.$.scrollLeft),b-=q,c=i.top+(!j&&k.scrollTop||h.$.scrollTop),c-=m)}else for(h=this,e=null;h&&"body"!=h.getName()&&"html"!=h.getName();){for(b+=h.$.offsetLeft-h.$.scrollLeft,c+=h.$.offsetTop-h.$.scrollTop,h.equals(this)||(b+=h.$.clientLeft||0,c+=h.$.clientTop||0);e&&!e.equals(h);)b-=e.$.scrollLeft,c-=e.$.scrollTop,e=e.getParent();e=h,h=(i=h.$.offsetParent)?new CKEDITOR.dom.element(i):null}return a&&(h=this.getWindow(),e=a.getWindow(),!h.equals(e)&&h.$.frameElement&&(a=new CKEDITOR.dom.element(h.$.frameElement).getDocumentPosition(a),b+=a.x,c+=a.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||j||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0),{x:b,y:c}},scrollIntoView:function(a){var b=this.getParent();if(b)do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var e=c.$.frameElement;e&&(b=new CKEDITOR.dom.element(e))}catch(h){}}while(b=b.getParent())},scrollIntoParent:function(a,b,c){function k(b,g){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,g):(a.$.scrollLeft=a.$.scrollLeft+b,a.$.scrollTop=a.$.scrollTop+g)}function m(a,b){var g={x:0,y:0};if(!a.is(r?"body":"html")){var c=a.$.getBoundingClientRect();g.x=c.left,g.y=c.top}return c=a.getWindow(),c.equals(b)||(c=m(CKEDITOR.dom.element.get(c.$.frameElement),b),g.x=g.x+c.x,g.y=g.y+c.y),g}function q(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}var e,h,j,i;!a&&(a=this.getWindow()),j=a.getDocument();var r="BackCompat"==j.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=r?j.getBody():j.getDocumentElement()),j=a.getWindow(),h=m(this,j);var l=m(a,j),g=this.$.offsetHeight;e=this.$.offsetWidth;var p=a.$.clientHeight,v=a.$.clientWidth;j=h.x-q(this,"left")-l.x||0,i=h.y-q(this,"top")-l.y||0,e=h.x+e+q(this,"right")-(l.x+v)||0,h=h.y+g+q(this,"bottom")-(l.y+p)||0,(0>i||h>0)&&k(0,b===!0?i:b===!1?h:0>i?i:h),c&&(0>j||e>0)&&k(0>j?j:e,0)},setState:function(a,b,c){switch(b=b||"cke",a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on"),this.removeClass(b+"_off"),this.removeClass(b+"_disabled"),c&&this.setAttribute("aria-pressed",!0),c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled"),this.removeClass(b+"_off"),this.removeClass(b+"_on"),c&&this.setAttribute("aria-disabled",!0),c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){for(var c=this.$.attributes,b=b||{},e=0;e<c.length;e++){var i,h=c[e],j=h.nodeName.toLowerCase();j in b||("checked"==j&&(i=this.getAttribute(j))?a.setAttribute(j,i):(h.specified||CKEDITOR.env.ie&&h.nodeValue&&"value"==j)&&(i=this.getAttribute(j),null===i&&(i=h.nodeValue),a.setAttribute(j,i)))}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument(),a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a),this.moveChildren(a),this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$),a.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=a.$}},getChild:function(){function a(a,b){var c=a.childNodes;return b>=0&&b<c.length?c[b]:void 0}return function(b){var c=this.$;if(b.slice)for(;b.length>0&&c;)c=a(c,b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(b===!1?this.removeAttribute(a):this.setAttribute(a,b),null)},getEditor:function(){var b,c,a=CKEDITOR.instances;for(b in a)if(c=a[b],c.element.equals(this)&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return c;return null}});var c={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,c,d){"number"==typeof c&&(!d||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(c-=b.call(this,a)),this.setStyle(a,c+"px"))},CKEDITOR.dom.element.prototype.getSize=function(a,c){var d=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;return c&&(d-=b.call(this,a)),d}}(),CKEDITOR.dom.documentFragment=function(b){b=b||CKEDITOR.document,this.$=b.type==CKEDITOR.NODE_DOCUMENT?b.$.createDocumentFragment():b},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(b){b=b.$,b.parentNode.insertBefore(this.$,b.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function b(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,c.collapsed)return this.end(),null;c.optimize()}var d,m=c.startContainer;d=c.endContainer;var l,q=c.startOffset,f=c.endOffset,g=this.guard,p=this.type,e=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var u=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),o=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(f):d.getNext();this._.guardLTR=function(a,b){return!(b&&u.equals(a)||o&&a.equals(o)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}if(a&&!this._.guardRTL){var F=m.type==CKEDITOR.NODE_ELEMENT?m:m.getParent(),A=m.type==CKEDITOR.NODE_ELEMENT?q?m.getChild(q-1):null:m.getPrevious();this._.guardRTL=function(a,b){return!(b&&F.equals(a)||A&&a.equals(A)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}var s=a?this._.guardRTL:this._.guardLTR;for(l=g?function(a,b){return s(a,b)===!1?!1:g(a,b)}:s,this.current?d=this.current[e](!1,p,l):(a?d.type==CKEDITOR.NODE_ELEMENT&&(d=f>0?d.getChild(f-1):l(d,!0)===!1?null:d.getPreviousSourceNode(!0,p,l)):(d=m,d.type!=CKEDITOR.NODE_ELEMENT||(d=d.getChild(q))||(d=l(m,!0)===!1?null:m.getNextSourceNode(!0,p,l))),d&&l(d)===!1&&(d=null));d&&!this._.end;){if(this.current=d,this.evaluator&&this.evaluator(d)===!1){if(b&&this.evaluator)return!1}else if(!b)return d;d=d[e](!1,p,l)}return this.end(),this.current=null}function c(a){for(var c,d=null;c=b.call(this,a);)d=c;return d}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return b.call(this)},previous:function(){return b.call(this,1)},checkForward:function(){return b.call(this,0,1)!==!1},checkBackward:function(){return b.call(this,1,1)!==!1},lastForward:function(){return c.call(this)},lastBackward:function(){return c.call(this,1)},reset:function(){delete this.current,this._={}}}});var a={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(b){return b=b?CKEDITOR.tools.extend({},CKEDITOR.dtd.$block,b||{}):CKEDITOR.dtd.$block,"none"==this.getComputedStyle("float")&&a[this.getComputedStyle("display")]||b[this.getName()]},CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(d){var m,q;return m=d&&d.type!=CKEDITOR.NODE_ELEMENT&&(q=d.getParent())&&c(q),m=a?m:m||c(d),!!(b^m)}},CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;return b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&""==b.getText()),!!(a^c)}},CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces();return function(c){return b(c)?c=1:(c.type==CKEDITOR.NODE_TEXT&&(c=c.getParent()),c=!c.$.offsetHeight),!!(a^c)}},CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}},CKEDITOR.dom.walker.bogus=function(a){function b(a){return!d(a)&&!e(a)}return function(c){var d=CKEDITOR.env.ie?c.getText&&f.test(c.getText()):c.is&&c.is("br");return d&&(d=c.getParent(),c=c.getNext(b),d=d.isBlockBoundary()&&(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary())),!!(a^d)}};var f=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,d=CKEDITOR.dom.walker.whitespaces(),e=CKEDITOR.dom.walker.bookmark();CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(e(a)||d(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty));return a&&(CKEDITOR.env.ie?a.getText&&f.test(a.getText()):a.is&&a.is("br"))?a:!1}}(),CKEDITOR.dom.range=function(b){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var c=b instanceof CKEDITOR.dom.document;this.document=c?b:b.getDocument(),this.root=c?b.getBody():b},function(){function b(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!0),l=CKEDITOR.dom.walker.bogus();return function(g){return c(g)||b(g)?!0:l(g)&&!a?a=!0:g.type==CKEDITOR.NODE_TEXT&&(g.hasAscendant("pre")||CKEDITOR.tools.trim(g.getText()).length)||g.type==CKEDITOR.NODE_ELEMENT&&!g.is(e)?!1:!0}}function c(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(l){return c(l)||b(l)?!0:!a&&h(l)||l.type==CKEDITOR.NODE_ELEMENT&&l.is(CKEDITOR.dtd.$removeEmpty)}}function a(a){return!j(a)&&!i(a)}var f=function(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset},d=function(a,b,c,l){a.optimizeBookmark();var h,i,g=a.startContainer,d=a.endContainer,f=a.startOffset,e=a.endOffset;d.type==CKEDITOR.NODE_TEXT?d=d.split(e):d.getChildCount()>0&&(e>=d.getChildCount()?(d=d.append(a.document.createText("")),i=!0):d=d.getChild(e)),g.type==CKEDITOR.NODE_TEXT?(g.split(f),g.equals(d)&&(d=g.getNext())):f?f>=g.getChildCount()?(g=g.append(a.document.createText("")),h=!0):g=g.getChild(f).getPrevious():(g=g.append(a.document.createText(""),1),h=!0);var j,s,x,f=g.getParents(),e=d.getParents();for(j=0;j<f.length&&(s=f[j],x=e[j],s.equals(x));j++);for(var t,C,y,k=c,n=j;n<f.length;n++){for(t=f[n],k&&!t.equals(g)&&(C=k.append(t.clone())),t=t.getNext();t&&(!t.equals(e[n])&&!t.equals(d));)y=t.getNext(),2==b?k.append(t.clone(!0)):(t.remove(),1==b&&k.append(t)),t=y;k&&(k=C)}for(k=c,c=j;c<e.length;c++){if(t=e[c],b>0&&!t.equals(d)&&(C=k.append(t.clone())),!f[c]||t.$.parentNode!=f[c].$.parentNode)for(t=t.getPrevious();t&&(!t.equals(f[c])&&!t.equals(g));)y=t.getPrevious(),2==b?k.$.insertBefore(t.$.cloneNode(!0),k.$.firstChild):(t.remove(),1==b&&k.$.insertBefore(t.$,k.$.firstChild)),t=y;k&&(k=C)}2==b?(s=a.startContainer,s.type==CKEDITOR.NODE_TEXT&&(s.$.data=s.$.data+s.$.nextSibling.data,s.$.parentNode.removeChild(s.$.nextSibling)),a=a.endContainer,a.type==CKEDITOR.NODE_TEXT&&a.$.nextSibling&&(a.$.data=a.$.data+a.$.nextSibling.data,a.$.parentNode.removeChild(a.$.nextSibling))):(s&&x&&(g.$.parentNode!=s.$.parentNode||d.$.parentNode!=x.$.parentNode)&&(b=x.getIndex(),h&&x.$.parentNode==g.$.parentNode&&b--,l&&s.type==CKEDITOR.NODE_ELEMENT?(l=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document),l.insertAfter(s),s.mergeSiblings(!1),a.moveToBookmark({startNode:l})):a.setStart(x.getParent(),b)),a.collapse(!0)),h&&g.remove(),i&&d.$.parentNode&&d.remove()},e={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},h=CKEDITOR.dom.walker.bogus(),j=new CKEDITOR.dom.walker.whitespaces,i=new CKEDITOR.dom.walker.bookmark,k=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/;CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);return a.startContainer=this.startContainer,a.startOffset=this.startOffset,a.endContainer=this.endContainer,a.endOffset=this.endOffset,a.collapsed=this.collapsed,a},collapse:function(a){a?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(){var a=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||d(this,2,a),a},deleteContents:function(a){this.collapsed||d(this,0,null,a)},extractContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||d(this,1,b,a),b},createBookmark:function(a){var b,c,d,g,p=this.collapsed;return b=this.document.createElement("span"),b.data("cke-bookmark",1),b.setStyle("display","none"),b.setHtml("&nbsp;"),a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(p?"C":"S"))),p||(c=b.clone(),c.setHtml("&nbsp;"),a&&c.setAttribute("id",d+"E"),g=this.clone(),g.collapse(),g.insertNode(c)),g=this.clone(),g.collapse(!0),g.insertNode(b),c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END),{startNode:a?d+(p?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:p}},createBookmark2:function(){function a(b,c){return c>0&&b&&b.type==CKEDITOR.NODE_TEXT&&b.getPrevious()&&b.getPrevious().type==CKEDITOR.NODE_TEXT}function b(c){var d,g,p=c.container,q=c.offset;for(p.type==CKEDITOR.NODE_ELEMENT&&((d=p.getChild(q))?a(d,q)&&(p=d,q=0):(d=p.getLast(),a(d,q)&&(p=d,q=d.getLength())),d&&d.type==CKEDITOR.NODE_ELEMENT&&(q=d.getIndex(1)));p.type==CKEDITOR.NODE_TEXT&&(g=p.getPrevious())&&g.type==CKEDITOR.NODE_TEXT;)p=g,q+=g.getLength();c.container=p,c.offset=q}return function(a){var c=this.collapsed,g={container:this.startContainer,offset:this.startOffset},d={container:this.endContainer,offset:this.endOffset};return g.container&&d.container?(a&&(b(g),c||b(d)),{start:g.container.getAddress(a),end:c?null:d.container.getAddress(a),startOffset:g.offset,endOffset:d.offset,normalized:a,collapsed:c,is2:!0}):{start:0,end:0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized),a=a.endOffset;this.setStart(b,c),d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var g,a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset;if(a.type==CKEDITOR.NODE_ELEMENT)if(g=a.getChildCount(),g>c)a=a.getChild(c);else if(1>g)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a),a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(g=b.getChildCount(),g>d)b=b.getChild(d).getPreviousSourceNode(!0);else if(1>g)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b)}return a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b),{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a)),a=this.endContainer,b=this.endOffset,a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,g=this.collapsed;if((!a||g)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var p=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(p,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else d=c.getIndex(),c=c.getParent();if(this.setStart(c,d),g)return void this.collapse(!0)}c=this.endContainer,d=this.endOffset,b||g||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){switch(a){case CKEDITOR.ENLARGE_INLINE:var c=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var p,f,e,h,i,s,x,d=this.getCommonAncestor(),g=this.root,j=!1;for(s=this.startContainer,x=this.startOffset,s.type==CKEDITOR.NODE_TEXT?(x&&(s=!CKEDITOR.tools.trim(s.substring(0,x)).length&&s,j=!!s),s&&!(h=s.getPrevious())&&(e=s.getParent())):(x&&(h=s.getChild(x-1)||s.getLast()),h||(e=s));e||h;){if(e&&!h){if(!i&&e.equals(d)&&(i=!0),c?e.isBlockBoundary():!g.contains(e))break;j&&"inline"==e.getComputedStyle("display")||(j=!1,i?p=e:this.setStartBefore(e)),h=e.getPrevious()}for(;h;)if(s=!1,h.type==CKEDITOR.NODE_COMMENT)h=h.getPrevious();else{if(h.type==CKEDITOR.NODE_TEXT)x=h.getText(),/[^\s\ufeff]/.test(x)&&(h=null),s=/[\s\ufeff]$/.test(x);else if((h.$.offsetWidth>0||b&&h.is("br"))&&!h.data("cke-bookmark"))if(j&&CKEDITOR.dtd.$removeEmpty[h.getName()]){if(x=h.getText(),/[^\s\ufeff]/.test(x))h=null;else for(var C,k=h.$.getElementsByTagName("*"),t=0;C=k[t++];)if(!CKEDITOR.dtd.$removeEmpty[C.nodeName.toLowerCase()]){h=null;break}h&&(s=!!x.length)}else h=null;if(s&&(j?i?p=e:e&&this.setStartBefore(e):j=!0),h){if(s=h.getPrevious(),!e&&!s){e=h,h=null;break}h=s}else e=null}e&&(e=e.getParent())}for(s=this.endContainer,x=this.endOffset,e=h=null,i=j=!1,s.type==CKEDITOR.NODE_TEXT?(s=!CKEDITOR.tools.trim(s.substring(x)).length&&s,j=!(s&&s.getLength()),s&&!(h=s.getNext())&&(e=s.getParent())):(h=s.getChild(x))||(e=s);e||h;){if(e&&!h){if(!i&&e.equals(d)&&(i=!0),c?e.isBlockBoundary():!g.contains(e))break;j&&"inline"==e.getComputedStyle("display")||(j=!1,i?f=e:e&&this.setEndAfter(e)),h=e.getNext()}for(;h;){if(s=!1,h.type==CKEDITOR.NODE_TEXT)x=h.getText(),/[^\s\ufeff]/.test(x)&&(h=null),s=/^[\s\ufeff]/.test(x);else if(h.type==CKEDITOR.NODE_ELEMENT){if((h.$.offsetWidth>0||b&&h.is("br"))&&!h.data("cke-bookmark"))if(j&&CKEDITOR.dtd.$removeEmpty[h.getName()]){if(x=h.getText(),/[^\s\ufeff]/.test(x))h=null;else for(k=h.$.getElementsByTagName("*"),t=0;C=k[t++];)if(!CKEDITOR.dtd.$removeEmpty[C.nodeName.toLowerCase()]){h=null;break}h&&(s=!!x.length)}else h=null}else s=1;if(s&&j&&(i?f=e:this.setEndAfter(e)),h){if(s=h.getNext(),!e&&!s){e=h,h=null;break}h=s}else e=null}e&&(e=e.getParent())}p&&f&&(d=p.contains(f)?f:p,this.setStartBefore(d),this.setEndAfter(d));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:e=new CKEDITOR.dom.range(this.root),g=this.root,e.setStartAt(g,CKEDITOR.POSITION_AFTER_START),e.setEnd(this.startContainer,this.startOffset),e=new CKEDITOR.dom.walker(e);var y,n,w=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),I=function(a){var b=w(a);return b||(y=a),b},c=function(a){var b=I(a);return!b&&a.is&&a.is("br")&&(n=a),b};if(e.guard=I,e=e.lastBackward(),y=y||g,this.setStartAt(y,!y.is("br")&&(!e&&this.checkStartOfBlock()||e&&y.contains(e))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){e=this.clone(),e=new CKEDITOR.dom.walker(e);var G=CKEDITOR.dom.walker.whitespaces(),D=CKEDITOR.dom.walker.bookmark();if(e.evaluator=function(a){return!G(a)&&!D(a)},(e=e.previous())&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("br"))break}e=this.clone(),e.collapse(),e.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?c:I,y=null,e=e.lastForward(),y=y||g,this.setEndAt(y,!e&&this.checkEndOfBlock()||e&&y.contains(e)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),n&&this.setEndAfter(n)}},shrink:function(a,b,c){if(!this.collapsed){var a=a||CKEDITOR.SHRINK_TEXT,d=this.clone(),g=this.startContainer,e=this.endContainer,f=this.startOffset,h=this.endOffset,i=1,j=1;g&&g.type==CKEDITOR.NODE_TEXT&&(f?f>=g.getLength()?d.setStartAfter(g):(d.setStartBefore(g),i=0):d.setStartBefore(g)),e&&e.type==CKEDITOR.NODE_TEXT&&(h?h>=e.getLength()?d.setEndAfter(e):(d.setEndAfter(e),j=0):d.setEndBefore(e));var d=new CKEDITOR.dom.walker(d),k=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var s;return d.guard=function(b,g){return k(b)?!0:a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||g&&b.equals(s)||c===!1&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()?!1:(!g&&b.type==CKEDITOR.NODE_ELEMENT&&(s=b),!0)},i&&(g=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(g,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),j&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!i&&!j)}},insertNode:function(a){this.optimizeBookmark(),this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a),a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset),this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(a,b){a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]&&(b=a.getIndex(),a=a.getParent()),this.startContainer=a,this.startOffset=b,this.endContainer||(this.endContainer=a,this.endOffset=b),f(this)},setEnd:function(a,b){a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]&&(b=a.getIndex()+1,a=a.getParent()),this.endContainer=a,this.endOffset=b,this.startContainer||(this.startContainer=a,this.startOffset=b),f(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setStart(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setStart(a,a.getLength()):this.setStart(a,a.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(a)}f(this)},setEndAt:function(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setEnd(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setEnd(a,a.getLength()):this.setEnd(a,a.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(a)}f(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);return this.collapse(a),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(d),d.trim(),CKEDITOR.env.ie||d.appendBogus(),this.insertNode(d),this.moveToBookmark(c),d},splitBlock:function(a){var b=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=new CKEDITOR.dom.elementPath(this.endContainer,this.root),d=b.block,g=c.block,e=null;return b.blockLimit.equals(c.blockLimit)?("br"!=a&&(d||(d=this.fixBlock(!0,a),g=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),g||(g=this.fixBlock(!1,a))),a=d&&this.checkStartOfBlock(),b=g&&this.checkEndOfBlock(),this.deleteContents(),d&&d.equals(g)&&(b?(e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(g,CKEDITOR.POSITION_AFTER_END),g=null):a?(e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d=null):(g=this.splitElement(d),!CKEDITOR.env.ie&&!d.is("ul","ol")&&d.appendBogus())),{previousBlock:d,nextBlock:g,wasStartOfBlock:a,wasEndOfBlock:b,elementPath:e}):null},splitElement:function(a){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var b=this.extractContents(),c=a.clone(!1);return b.appendTo(c),c.insertAfter(a),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),c},removeEmptyBlocksAtEnd:function(){function a(d){return function(a){return b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||d.is("table")&&a.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var f,c=this.createBookmark(),d=this[b?"endPath":"startPath"](),e=d.block||d.blockLimit;e&&!e.equals(d.root)&&!e.getFirst(a(e));)f=e.getParent(),this[b?"setEndAt":"setStartAt"](e,CKEDITOR.POSITION_AFTER_END),e.remove(1),e=f;this.moveToBookmark(c)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root);

},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,e=this.clone();return e.collapse(d),e[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.evaluator=c(d),e[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,c=this.startOffset;return CKEDITOR.env.ie&&c&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,c)),k.test(a)&&this.trim(0,1)),this.trim(),a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=this.clone(),c.collapse(!0),c.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(c),a.evaluator=b(),a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,c=this.endOffset;return CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(c)),k.test(a)&&this.trim(1,0)),this.trim(),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root),c=this.clone(),c.collapse(!1),c.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END),a=new CKEDITOR.dom.walker(c),a.evaluator=b(),a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();return d.collapse(1),d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.previous()},getNextNode:function(a,b,c){var d=this.clone();return d.collapse(),d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.next()},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(b,c){if(b.type==CKEDITOR.NODE_ELEMENT&&!b.isEditable(!1))return this.moveToPosition(b,c?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var d=0;b;){if(b.type==CKEDITOR.NODE_TEXT){c&&this.checkEndOfBlock()&&k.test(b.getText())?this.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(b,c?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),d=1;break}b.type==CKEDITOR.NODE_ELEMENT&&(b.isEditable()?(this.moveToPosition(b,c?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),d=1):c&&b.is("br")&&this.checkEndOfBlock()&&this.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START));var e=b,g=d,f=void 0;e.type==CKEDITOR.NODE_ELEMENT&&e.isEditable(!1)&&(f=e[c?"getLast":"getFirst"](a)),!g&&!f&&(f=e[c?"getPrevious":"getNext"](a)),b=f}return!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();if(a.optimize(),a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();return a.reset(),d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},scrollIntoView:function(){var b,c,d,a=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),g=this.clone();g.optimize(),(d=g.startContainer.type==CKEDITOR.NODE_TEXT)?(c=g.startContainer.getText(),b=g.startContainer.split(g.startOffset),a.insertAfter(g.startContainer)):g.insertNode(a),a.scrollIntoView(),d&&(g.startContainer.setText(c),b.remove()),a.remove()}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function b(a){arguments.length<1||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function c(a,b,c){for(a=a.getNextSourceNode(b,null,c);!f(a);)a=a.getNextSourceNode(b,null,c);return a}var a=/^[\r\n\t ]+$/,f=CKEDITOR.dom.walker.bookmark(!1,!0),d=CKEDITOR.dom.walker.whitespaces(!0),e=function(a){return f(a)&&d(a)};b.prototype={getNextParagraph:function(b){if(b=b||"p",!CKEDITOR.dtd[this.range.root.getName()][b])return null;var d,i,k,m,q,r;if(!this._.started){if(i=this.range.clone(),i.shrink(CKEDITOR.NODE_ELEMENT,!0),m=i.endContainer.hasAscendant("pre",!0)||i.startContainer.hasAscendant("pre",!0),i.enlarge(this.forceBrBreak&&!m||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),!i.collapsed){m=new CKEDITOR.dom.walker(i.clone());var l=CKEDITOR.dom.walker.bookmark(!0,!0);m.evaluator=l,this._.nextNode=m.next(),m=new CKEDITOR.dom.walker(i.clone()),m.evaluator=l,m=m.previous(),this._.lastNode=m.getNextSourceNode(!0),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(l=this.range.clone(),l.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),l.checkEndOfBlock()&&(l=new CKEDITOR.dom.elementPath(l.endContainer,l.root),this._.lastNode=(l.block||l.blockLimit).getNextSourceNode(!0))),this._.lastNode||(this._.lastNode=this._.docEndMarker=i.document.createText(""),this._.lastNode.insertAfter(m)),i=null}this._.started=1}for(l=this._.nextNode,m=this._.lastNode,this._.nextNode=null;l;){var g=0,p=l.hasAscendant("pre"),v=l.type!=CKEDITOR.NODE_ELEMENT,u=0;if(v)l.type==CKEDITOR.NODE_TEXT&&a.test(l.getText())&&(v=0);else{var o=l.getName();if(l.isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){if("br"==o)v=1;else if(!i&&!l.getChildCount()&&"hr"!=o){d=l,k=l.equals(m);break}i&&(i.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),"br"!=o&&(this._.nextNode=l)),g=1}else{if(l.getFirst()){i||(i=this.range.clone(),i.setStartAt(l,CKEDITOR.POSITION_BEFORE_START)),l=l.getFirst();continue}v=1}}if(v&&!i&&(i=this.range.clone(),i.setStartAt(l,CKEDITOR.POSITION_BEFORE_START)),k=(!g||v)&&l.equals(m),i&&!g)for(;!l.getNext(e)&&!k;){if(o=l.getParent(),o.isBlockBoundary(this.forceBrBreak&&!p&&{br:1})){g=1,v=0,k||o.equals(m),i.setEndAt(o,CKEDITOR.POSITION_BEFORE_END);break}l=o,v=1,k=l.equals(m),u=1}if(v&&i.setEndAt(l,CKEDITOR.POSITION_AFTER_END),l=c(l,u,m),(k=!l)||g&&i)break}if(!d){if(!i)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;d=new CKEDITOR.dom.elementPath(i.startContainer,i.root),l=d.blockLimit,g={div:1,th:1,td:1},d=d.block,!d&&l&&!this.enforceRealBlocks&&g[l.getName()]&&i.checkStartOfBlock()&&i.checkEndOfBlock()&&!l.equals(i.root)?d=l:!d||this.enforceRealBlocks&&"li"==d.getName()?(d=this.range.document.createElement(b),i.extractContents().appendTo(d),d.trim(),i.insertNode(d),q=r=!0):"li"!=d.getName()?i.checkStartOfBlock()&&i.checkEndOfBlock()||(d=d.clone(!1),i.extractContents().appendTo(d),d.trim(),r=i.splitBlock(),q=!r.wasStartOfBlock,r=!r.wasEndOfBlock,i.insertNode(d)):k||(this._.nextNode=d.equals(m)?null:c(i.getBoundaryNodes().endNode,1,m))}return q&&(i=d.getPrevious())&&i.type==CKEDITOR.NODE_ELEMENT&&("br"==i.getName()?i.remove():i.getLast()&&"br"==i.getLast().$.nodeName.toLowerCase()&&i.getLast().remove()),r&&(i=d.getLast())&&i.type==CKEDITOR.NODE_ELEMENT&&"br"==i.getName()&&(CKEDITOR.env.ie||i.getPrevious(f)||i.getNext(f))&&i.remove(),this._.nextNode||(this._.nextNode=k||d.equals(m)||!m?null:c(d,1,m)),d}},CKEDITOR.dom.range.prototype.createIterator=function(){return new b(this)}}(),CKEDITOR.command=function(b,c){this.uiItems=[],this.exec=function(a){return this.state!=CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()?(this.editorFocus&&b.focus(),this.fire("exec")===!1?!0:c.exec.call(this,b,a)!==!1):!1},this.refresh=function(a,b){return!this.readOnly&&a.readOnly?!0:this.context&&!b.isContextFor(this.context)?(this.disable(),!0):(this.enable(),this.fire("refresh",{editor:a,path:b})===!1?!0:c.refresh&&c.refresh.apply(this,arguments)!==!1)};var a;this.checkAllowed=function(){return"boolean"==typeof a?a:a=b.filter.checkFeature(this)},CKEDITOR.tools.extend(this,c,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!c.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(b){return this.state!=b&&this.checkAllowed()?(this.previousState=this.state,this.state=b,this.fire("state"),!0):!1},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function b(a,b,g,e,f){var p=b.name;if((e||"function"!=typeof a.elements||a.elements(p))&&(!a.match||a.match(b))){if(e=!f){a:if(a.nothingRequired)e=!0;else{if(f=a.requiredClasses)for(p=b.classes,e=0;e<f.length;++e)if(-1==CKEDITOR.tools.indexOf(p,f[e])){e=!1;break a}e=d(b.styles,a.requiredStyles)&&d(b.attributes,a.requiredAttributes)}e=!e}if(!e&&(a.propertiesOnly||(g.valid=!0),g.allAttributes||(g.allAttributes=c(a.attributes,b.attributes,g.validAttributes)),g.allStyles||(g.allStyles=c(a.styles,b.styles,g.validStyles)),!g.allClasses)){if(a=a.classes,b=b.classes,e=g.validClasses,a)if(a===!0)b=!0;else{for(var h,f=0,p=b.length;p>f;++f)h=b[f],e[h]||(e[h]=a(h));b=!1}else b=!1;g.allClasses=b}}}function c(a,b,c){if(!a)return!1;if(a===!0)return!0;for(var d in b)c[d]||(c[d]=a(d,b[d]));return!1}function a(a,b){if(!a)return!1;if(a===!0)return a;if("string"==typeof a)return a=x(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var g,c={},d=0;for(g in a)c[g]=a[g],d++;return d?c:!1}function f(a){if(a._.filterFunction)return a._.filterFunction;var c=/^cke:(object|embed|param)$/,d=/^(object|embed|param)$/;return a._.filterFunction=function(g,e,f,h,l,q,n){var v,o=g.name,j=!1;if(l&&(g.name=o=o.replace(c,"$1")),f=f&&f[o]){for(i(g),o=0;o<f.length;++o)p(a,g,f[o]);k(g)}if(e){var o=g.name,f=e.elements[o],u=e.generic,e={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1};if(!f&&!u)return h.push(g),!0;if(i(g),f)for(o=0,v=f.length;v>o;++o)b(f[o],g,e,!0,q);if(u)for(o=0,v=u.length;v>o;++o)b(u[o],g,e,!1,q);if(!e.valid)return h.push(g),!0;q=e.validAttributes,o=e.validStyles,f=e.validClasses,v=g.attributes;var r,x,u=g.styles,s=v["class"],w=v.style,A=[],t=[],F=/^data-cke-/,z=!1;if(delete v.style,delete v["class"],!e.allAttributes)for(r in v)q[r]||(F.test(r)?r==(x=r.replace(/^data-cke-saved-/,""))||q[x]||(delete v[r],z=!0):(delete v[r],z=!0));if(e.allStyles)w&&(v.style=w);else{for(r in u)o[r]?A.push(r+":"+u[r]):z=!0;A.length&&(v.style=A.sort().join("; "))}if(e.allClasses)s&&(v["class"]=s);else{for(r in f)f[r]&&t.push(r);t.length&&(v["class"]=t.sort().join(" ")),s&&t.length<s.split(/\s+/).length&&(z=!0)}if(z&&(j=!0),!n&&!m(g))return h.push(g),!0}return l&&(g.name=g.name.replace(d,"cke:$1")),j}}function d(a,b){if(!b)return!0;for(var c=0;c<b.length;++c)if(!(b[c]in a))return!1;return!0}function e(a){if(!a)return{};for(var a=a.split(/\s*,\s*/).sort(),b={};a.length;)b[a.shift()]=z;return b}function h(a){for(var b,c,g,d,e={},f=1,a=x(a);b=a.match(y);)(c=b[2])?(g=j(c,"styles"),d=j(c,"attrs"),c=j(c,"classes")):g=d=c=null,e["$"+f++]={elements:b[1],classes:c,styles:g,attributes:d},a=a.slice(b[0].length);return e}function j(a,b){var c=a.match(n[b]);return c?x(c[1]):null}function i(a){a.styles||(a.styles=CKEDITOR.tools.parseCssText(a.attributes.style||"",1)),a.classes||(a.classes=a.attributes["class"]?a.attributes["class"].split(/\s+/):[])}function k(a){var c,b=a.attributes;delete b.style,delete b["class"],(c=CKEDITOR.tools.writeCssText(a.styles,!0))&&(b.style=c),a.classes.length&&(b["class"]=a.classes.sort().join(" "))}function m(a){switch(a.name){case"a":if(!a.children.length&&!a.attributes.name)return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function q(a){return a?a===!0?!0:function(b){return b in a}:!1}function r(){return new CKEDITOR.htmlParser.element("br")}function l(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||A.$block[a.name])}function g(a,b,c){var g=a.name;if(A.$empty[g]||!a.children.length)"hr"==g&&"br"==b?a.replaceWith(r()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(A.$block[g]||"tr"==g)if("br"==b)a.previous&&!l(a.previous)&&(b=r(),b.insertBefore(a)),a.next&&!l(a.next)&&(b=r(),b.insertAfter(a)),a.replaceWithChildren();else{var d,g=a.children;b:{d=A[b];for(var p,e=0,f=g.length;f>e;++e)if(p=g[e],p.type==CKEDITOR.NODE_ELEMENT&&!d[p.name]){d=!1;break b}d=!0}if(d)a.name=b,a.attributes={},c.push({check:"parent-down",el:a});else{d=a.parent;for(var h,e=d.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==d.name,f=g.length;f>0;)p=g[--f],e&&(p.type==CKEDITOR.NODE_TEXT||p.type==CKEDITOR.NODE_ELEMENT&&A.$inline[p.name])?(h||(h=new CKEDITOR.htmlParser.element(b),h.insertAfter(a),c.push({check:"parent-down",el:h})),h.add(p,0)):(h=null,p.insertAfter(a),d.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&p.type==CKEDITOR.NODE_ELEMENT&&!A[d.name][p.name]&&c.push({check:"el-up",el:p}));a.remove()}}else"style"==g?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function p(a,b,c){var g,d;for(g=0;g<c.length;++g)if(d=c[g],!(d.check&&!a.check(d.check,!1)||d.left&&!d.left(b))){d.right(b,w);break}}function v(a,b){var e,f,p,h,c=b.getDefinition(),g=c.attributes,d=c.styles;if(a.name!=c.element)return!1;for(e in g)if("class"==e){for(c=g[e].split(/\s+/),p=a.classes.join("|");h=c.pop();)if(-1==p.indexOf(h))return!1}else if(a.attributes[e]!=g[e])return!1;for(f in d)if(a.styles[f]!=d[f])return!1;return!0}function u(a,b){var c,g;return"string"==typeof a?c=a:a instanceof CKEDITOR.style?g=a:(c=a[0],g=a[1]),[{element:c,left:g,right:function(a,c){c.transform(a,b)}}]}function o(a){return function(b){return v(b,a)}}function F(a){return function(b,c){c[a](b)}}var A=CKEDITOR.dtd,s=CKEDITOR.tools.copy,x=CKEDITOR.tools.trim,z="cke-test";CKEDITOR.filter=function(a){if(this.allowedContent=[],this.disabled=!1,this.editor=null,this.enterMode=CKEDITOR.ENTER_P,this._={rules:{},transformations:{},cachedTests:{}},a instanceof CKEDITOR.editor){var b=this.editor=a;this.customConfig=!0;var c,a=b.config.allowedContent;if(a===!0)this.disabled=!0;else{a||(this.customConfig=!1),this.enterMode=c=b.blockless?CKEDITOR.ENTER_BR:b.config.enterMode;var g=["br"],d=b.blockless?CKEDITOR.ENTER_BR:b.config.shiftEnterMode;(c==CKEDITOR.ENTER_P||d==CKEDITOR.ENTER_P)&&g.push("p"),(c==CKEDITOR.ENTER_DIV||d==CKEDITOR.ENTER_DIV)&&g.push("div"),this.allow(g.join(" "),"default",1),this.allow(a,"config",1),this.allow(b.config.extraAllowedContent,"extra",1),this._.toHtmlListener=b.on("toHtml",function(a){this.applyTo(a.data.dataValue,!0,a.data.dontFilter)&&b.fire("dataFiltered")},this,null,6),this._.toDataFormatListener=b.on("toDataFormat",function(a){this.applyTo(a.data.dataValue,!1,!0)},this,null,11)}}else this.customConfig=!1,this.allow(a,"default",1)},CKEDITOR.filter.prototype={allow:function(b,c,g){if(this.disabled||this.customConfig&&!g||!b)return!1;this._.cachedChecks={};var d,e;if("string"==typeof b)b=h(b);else if(b instanceof CKEDITOR.style)e=b.getDefinition(),g={},b=e.attributes,g[e.element]=e={styles:e.styles,requiredStyles:e.styles&&CKEDITOR.tools.objectKeys(e.styles)},b&&(b=s(b),e.classes=b["class"]?b["class"].split(/\s+/):null,e.requiredClasses=e.classes,delete b["class"],e.attributes=b,e.requiredAttributes=b&&CKEDITOR.tools.objectKeys(b)),b=g;else if(CKEDITOR.tools.isArray(b)){for(d=0;d<b.length;++d)e=this.allow(b[d],c,g);return e}var f,g=[];for(f in b){e=b[f],e="boolean"==typeof e?{}:"function"==typeof e?{match:e}:s(e),"$"!=f.charAt(0)&&(e.elements=f),c&&(e.featureName=c.toLowerCase());var p=e;p.elements=a(p.elements,/\s+/)||null,p.propertiesOnly=p.propertiesOnly||p.elements===!0;var l=/\s*,\s*/,n=void 0;for(n in t){p[n]=a(p[n],l)||null;var o=p,v=C[n],i=a(p[C[n]],l),j=p[n],u=[],r=!0,w=void 0;i?r=!1:i={};for(w in j)"!"==w.charAt(0)&&(w=w.slice(1),u.push(w),i[w]=!0,r=!1);for(;w=u.pop();)j[w]=j["!"+w],delete j["!"+w];o[v]=(r?!1:i)||null}p.match=p.match||null,this.allowedContent.push(e),g.push(e)}for(c=this._.rules,f=c.elements||{},b=c.generic||[],e=0,p=g.length;p>e;++e){l=s(g[e]),n=l.classes===!0||l.styles===!0||l.attributes===!0,o=l,v=void 0;for(v in t)o[v]=q(o[v]);i=!0;for(v in C)v=C[v],o[v]=CKEDITOR.tools.objectKeys(o[v]),o[v]&&(i=!1);if(o.nothingRequired=i,l.elements===!0||null===l.elements)l.elements=q(l.elements),b[n?"unshift":"push"](l);else{o=l.elements,delete l.elements;for(d in o)f[d]?f[d][n?"unshift":"push"](l):f[d]=[l]}}return c.elements=f,c.generic=b.length?b:null,!0},applyTo:function(a,b,c){var d=[],e=!c&&this._.rules,p=this._.transformations,h=f(this),l=this.editor&&this.editor.config.protectedSource,q=!1;a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT)b&&"span"==a.name&&~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-")||h(a,e,p,d,b)&&(q=!0);else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var g=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var f,n,o;if(l)for(n=0;n<l.length;++n)if((o=g.match(l[n]))&&o[0].length==g.length){c=!0;break a}g=CKEDITOR.htmlParser.fragment.fromHtml(g),1==g.children.length&&(f=g.children[0]).type==CKEDITOR.NODE_ELEMENT&&h(f,e,p,c,b),c=!c.length}c||d.push(a)}},null,!0),d.length&&(q=!0);for(var n,o,a=[],c=["p","br","div"][this.enterMode-1];n=d.pop();)n.type==CKEDITOR.NODE_ELEMENT?g(n,c,a):n.remove();for(;o=a.pop();)if(n=o.el,n.parent)switch(o.check){case"it":A.$removeEmpty[n.name]&&!n.children.length?g(n,c,a):m(n)||g(n,c,a);break;case"el-up":n.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!A[n.parent.name][n.name]&&g(n,c,a);break;case"parent-down":n.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!A[n.parent.name][n.name]&&g(n.parent,c,a)}return q},checkFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),!a.requiredContent||this.check(a.requiredContent))},disable:function(){this.disabled=!0,this._.toHtmlListener&&this._.toHtmlListener.removeListener(),this._.toDataFormatListener&&this._.toDataFormatListener.removeListener()},addContentForms:function(a){if(!this.disabled&&a){var b,c,d,g=[];for(b=0;b<a.length&&!d;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(d=c);if(d){for(b=0;b<a.length;++b)g.push(u(a[b],d));this.addTransformations(g)}}},addFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),this.allow(a.allowedContent,a.name),this.addTransformations(a.contentTransformations),this.addContentForms(a.contentForms),this.customConfig&&a.requiredContent?this.check(a.requiredContent):!0)},addTransformations:function(a){var b,c;if(!this.disabled&&a){var d,g=this._.transformations;for(d=0;d<a.length;++d){b=a[d];var e=void 0,f=void 0,p=void 0,h=void 0,l=void 0,n=void 0;for(c=[],f=0;f<b.length;++f)p=b[f],"string"==typeof p?(p=p.split(/\s*:\s*/),h=p[0],l=null,n=p[1]):(h=p.check,l=p.left,n=p.right),e||(e=p,e=e.element?e.element:h?h.match(/^([a-z0-9]+)/i)[0]:e.left.getDefinition().element),l instanceof CKEDITOR.style&&(l=o(l)),c.push({check:h==e?null:h,left:l,right:"string"==typeof n?F(n):n});b=e,g[b]||(g[b]=[]),g[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var g=a.length;g--;)if(this.check(a[g],b,c))return!0;return!1}var d,l;if("string"==typeof a){if(l=a+"<"+(b===!1?"0":"1")+(c?"1":"0")+">",l in this._.cachedChecks)return this._.cachedChecks[l];g=h(a).$1,d=g.styles;var n=g.classes;g.name=g.elements,g.classes=n=n?n.split(/\s*,\s*/):[],g.styles=e(d),g.attributes=e(g.attributes),g.children=[],n.length&&(g.attributes["class"]=n.join(" ")),d&&(g.attributes.style=CKEDITOR.tools.writeCssText(g.styles)),d=g}else g=a.getDefinition(),d=g.styles,n=g.attributes||{},d?(d=s(d),n.style=CKEDITOR.tools.writeCssText(d,!0)):d={},d={name:g.element,attributes:n,classes:n["class"]?n["class"].split(/\s+/):[],styles:d,children:[]};var o,n=CKEDITOR.tools.clone(d),q=[];if(b!==!1&&(o=this._.transformations[d.name])){for(g=0;g<o.length;++g)p(this,d,o[g]);k(d)}return f(this)(n,this._.rules,b===!1?!1:this._.transformations,q,!1,!c,!c),b=q.length>0?!1:CKEDITOR.tools.objectCompare(d.attributes,n.attributes,!0)?!0:!1,"string"==typeof a&&(this._.cachedChecks[l]=b),b}};var t={styles:1,attributes:1,classes:1},C={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},y=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,n={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},w=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width"),this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width"),this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){if(c=c||b,!(c in a.styles)){var g=a.attributes[b];g&&(/^\d+$/.test(g)&&(g+="px"),a.styles[c]=g)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){if(c=c||b,!(c in a.attributes)){var g=a.styles[b],d=g&&g.match(/^(\d+)(?:\.\d*)?px$/);d?a.attributes[c]=d[1]:g==z&&(a.attributes[c]=z)}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;("left"==b||"right"==b)&&(a.styles["float"]=b)}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];("left"==b||"right"==b)&&(a.attributes.align=b)}delete a.styles["float"]},matchesStyle:v,transform:function(a,b){if("string"==typeof b)a.name=b;else{var e,f,p,h,c=b.getDefinition(),g=c.styles,d=c.attributes;a.name=c.element;for(e in d)if("class"==e)for(c=a.classes.join("|"),p=d[e].split(/\s+/);h=p.pop();)-1==c.indexOf(h)&&a.classes.push(h);else a.attributes[e]=d[e];for(f in g)a.styles[f]=g[f]}}}}(),function(){CKEDITOR.focusManager=function(b){return b.focusManager?b.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:b},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(){if(this._.timer&&clearTimeout(this._.timer),!this.hasFocus&&!this._.locked){var b=CKEDITOR.currentInstance;b&&b.focusManager.blur(1),this.hasFocus=!0,(b=this._.editor.container)&&b.addClass("cke_focus"),this._.editor.fire("focus")}},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(b){function c(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var a=CKEDITOR.focusManager._.blurDelay;b||!a?c.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,c.call(this)},a,this)}},add:function(b,c){var a=b.getCustomData("focusmanager");if(!a||a!=this){a&&a.remove(b);var a="focus",f="blur";c&&(CKEDITOR.env.ie?(a="focusin",f="focusout"):CKEDITOR.event.useCapture=1);var d={blur:function(){b.equals(this.currentActive)&&this.blur()},focus:function(){this.currentActive=b,this.focus()}};b.on(a,d.focus,this),b.on(f,d.blur,this),c&&(CKEDITOR.event.useCapture=0),b.setCustomData("focusmanager",this),b.setCustomData("focusmanager_handlers",d)}},remove:function(b){b.removeCustomData("focusmanager");var c=b.removeCustomData("focusmanager_handlers");b.removeListener("blur",c.blur),b.removeListener("focus",c.focus)}}}(),CKEDITOR.keystrokeHandler=function(b){return b.keystrokeHandler?b.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:b},this)},function(){var b,c=function(a){var a=a.data,c=a.getKeystroke(),e=this.keystrokes[c],h=this._.editor;return b=h.fire("key",{keyCode:c})===!1,b||(e&&(b=h.execCommand(e,{from:"keystrokeHandler"})!==!1),b||(b=!!this.blockedKeystrokes[c])),b&&a.preventDefault(!0),!b},a=function(a){b&&(b=!1,a.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(b){b.on("keydown",c,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&b.on("keypress",a,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(b,c,a){b&&CKEDITOR.lang.languages[b]||(b=this.detect(c,b)),this[b]?a(b,this[b]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+b+".js"),function(){this[b].dir=this.rtl[b]?"rtl":"ltr",a(b,this[b])},this)},detect:function(b,c){var a=this.languages,c=c||navigator.userLanguage||navigator.language||b,f=c.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),d=f[1],f=f[2];return a[d+"-"+f]?d=d+"-"+f:a[d]||(d=null),CKEDITOR.lang.detect=d?function(){return d}:function(a){return a},d||b}}}(),CKEDITOR.scriptLoader=function(){var b={},c={};return{load:function(a,f,d,e){var h="string"==typeof a;h&&(a=[a]),d||(d=CKEDITOR);var j=a.length,i=[],k=[],m=function(a){f&&(h?f.call(d,a):f.call(d,i,k))};if(0===j)m(!0);else{var q=function(a,b){(b?i:k).push(a),--j<=0&&(e&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),m(b))},r=function(a,g){b[a]=1;var d=c[a];delete c[a];for(var e=0;e<d.length;e++)d[e](a,g)},l=function(a){if(b[a])q(a,!0);else{var g=c[a]||(c[a]=[]);if(g.push(q),!(g.length>1)){var d=new CKEDITOR.dom.element("script");d.setAttributes({type:"text/javascript",src:a}),f&&(CKEDITOR.env.ie?d.$.onreadystatechange=function(){("loaded"==d.$.readyState||"complete"==d.$.readyState)&&(d.$.onreadystatechange=null,r(a,!0))}:(d.$.onload=function(){setTimeout(function(){r(a,!0)},0)},d.$.onerror=function(){r(a,!1)})),d.appendTo(CKEDITOR.document.getHead())}}};e&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var g=0;j>g;g++)l(a[g])}},queue:function(){function a(){var a;(a=b[0])&&this.load(a.scriptUrl,a.callback,CKEDITOR,0)}var b=[];return function(c,e){var h=this;b.push({scriptUrl:c,callback:function(){e&&e.apply(this,arguments),b.shift(),a.call(h)}}),1==b.length&&a.call(this)}}()}}(),CKEDITOR.resourceManager=function(b,c){this.basePath=b,this.fileName=c,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(b,c){if(this.registered[b])throw'[CKEDITOR.resourceManager.add] The resource name "'+b+'" is already registered.';var a=this.registered[b]=c||{};return a.name=b,a.path=this.getPath(b),CKEDITOR.fire(b+CKEDITOR.tools.capitalize(this.fileName)+"Ready",a),this.get(b)},get:function(b){return this.registered[b]||null},getPath:function(b){var c=this.externals[b];return CKEDITOR.getUrl(c&&c.dir||this.basePath+b+"/")},getFilePath:function(b){var c=this.externals[b];return CKEDITOR.getUrl(this.getPath(b)+(c&&"string"==typeof c.file?c.file:this.fileName+".js"))},addExternal:function(b,c,a){for(var b=b.split(","),f=0;f<b.length;f++)this.externals[b[f]]={dir:c,file:a}},load:function(b,c,a){CKEDITOR.tools.isArray(b)||(b=b?[b]:[]);for(var f=this.loaded,d=this.registered,e=[],h={},j={},i=0;i<b.length;i++){var k=b[i];if(k)if(f[k]||d[k])j[k]=this.get(k);else{var m=this.getFilePath(k);e.push(m),m in h||(h[m]=[]),h[m].push(k)}}CKEDITOR.scriptLoader.load(e,function(b,d){if(d.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+h[d[0]].join(",")+'" was not found at "'+d[0]+'".';for(var e=0;e<b.length;e++)for(var g=h[b[e]],p=0;p<g.length;p++){var i=g[p];j[i]=this.get(i),f[i]=1}c.call(a,j)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(b){var c={};return function(a,f,d){var e={},h=function(a){b.call(this,a,function(a){CKEDITOR.tools.extend(e,a);var j,b=[];for(j in a){var q=a[j],r=q&&q.requires;if(!c[j]){if(q.icons)for(var l=q.icons.split(","),g=l.length;g--;)CKEDITOR.skin.addIcon(l[g],q.path+"icons/"+(CKEDITOR.env.hidpi&&q.hidpi?"hidpi/":"")+l[g]+".png");c[j]=1}if(r)for(r.split&&(r=r.split(",")),q=0;q<r.length;q++)e[r[q]]||b.push(r[q])}if(b.length)h.call(this,b);else{for(j in e)q=e[j],q.onLoad&&!q.onLoad._called&&(q.onLoad()===!1&&delete e[j],q.onLoad._called=1);f&&f.call(d||window,e)}},this)};h.call(this,a)}}),CKEDITOR.plugins.setLang=function(b,c,a){var f=this.get(b),b=f.langEntries||(f.langEntries={}),f=f.lang||(f.lang=[]);f.split&&(f=f.split(",")),-1==CKEDITOR.tools.indexOf(f,c)&&f.push(c),b[c]=a},CKEDITOR.ui=function(b){return b.ui?b.ui:(this.items={},this.instances={},this.editor=b,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(b,c,a){a.name=b.toLowerCase();var f=this.items[b]={type:c,command:a.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(f,a)},get:function(b){return this.instances[b]},create:function(b){var c=this.items[b],a=c&&this._.handlers[c.type],f=c&&c.command&&this.editor.getCommand(c.command),a=a&&a.create.apply(this,c.args);return this.instances[b]=a,f&&f.uiItems.push(a),a&&!a.type&&(a.type=c.type),a},addHandler:function(b,c){this._.handlers[b]=c},space:function(b){return CKEDITOR.document.getById(this.spaceId(b))},spaceId:function(b){return this.editor.id+"_"+b}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function b(b,e,f){if(CKEDITOR.event.call(this),b=b&&CKEDITOR.tools.clone(b),void 0!==e){if(!(e instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!f)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(f==CKEDITOR.ELEMENT_MODE_INLINE?e.is(CKEDITOR.dtd.$editable)||e.is("textarea"):f==CKEDITOR.ELEMENT_MODE_REPLACE?!e.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+e.getName()+'".');this.element=e,this.elementMode=f,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(e.getId()||e.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||c(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",a),this.on("selectionChange",d),this.on("mode",a),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){h(this,b)},0,this)}function c(){do var a="editor"+ ++r;while(CKEDITOR.instances[a]);return a}function a(){var b,a=this.commands;for(b in a)f(this,a[b])}
function f(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function d(a){var e,b=this.commands,c=a.editor,d=a.data.path;for(e in b)a=b[e],a.contextSensitive&&a.refresh(c,d)}function e(a){var b=a.config.customConfig;if(!b)return!1;var b=CKEDITOR.getUrl(b),c=l[b]||(l[b]={});return c.fn?(c.fn.call(a,a.config),(CKEDITOR.getUrl(a.config.customConfig)==b||!e(a))&&a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},e(a)}),!0}function h(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0),delete a.config.on}a.readOnly=!(!a.config.readOnly&&!(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&a.element.hasAttribute("disabled"))),a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1,a.tabIndex=a.config.tabIndex||a.element&&a.element.getAttribute("tabindex")||0,a.config.skin&&(CKEDITOR.skinName=a.config.skin),a.fireOnce("configLoaded"),a.dataProcessor=new CKEDITOR.htmlDataProcessor(a),a.filter=new CKEDITOR.filter(a),j(a)}),b&&void 0!=b.customConfig&&(a.config.customConfig=b.customConfig),e(a)||a.fireOnce("customConfigLoaded")}function j(a){CKEDITOR.skin.loadPart("editor",function(){i(a)})}function i(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){var d=a.config.title;a.langCode=b,a.lang=CKEDITOR.tools.prototypedCopy(c),a.title="string"==typeof d||d===!1?d:[a.lang.editor,a.name].join(", "),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&"rtl"==a.lang.dir&&(a.lang.dir="ltr"),a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir),a.fire("langLoaded"),k(a)})}function k(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1),m(a)})}function m(a){var b=a.config,c=b.plugins,d=b.extraPlugins,e=b.removePlugins;if(d)var f=RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(f,""),c=c+(","+d);if(e)var h=RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(h,"");CKEDITOR.env.air&&(c+=",adobeair"),CKEDITOR.plugins.load(c.split(","),function(c){var d=[],e=[],f=[];a.plugins=c;for(var l in c){var j,q=c[l],n=q.lang,o=null,i=q.requires;if(CKEDITOR.tools.isArray(i)&&(i=i.join(",")),i&&(j=i.match(h)))for(;i=j.pop();)CKEDITOR.tools.setTimeout(function(a,b){throw Error('Plugin "'+a.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+b+'" plugin.')},0,null,[i,l]);n&&!a.lang[l]&&(n.split&&(n=n.split(",")),CKEDITOR.tools.indexOf(n,a.langCode)>=0?o=a.langCode:(o=a.langCode.replace(/-.*/,""),o=o!=a.langCode&&CKEDITOR.tools.indexOf(n,o)>=0?o:CKEDITOR.tools.indexOf(n,"en")>=0?"en":n[0]),q.langEntries&&q.langEntries[o]?(a.lang[l]=q.langEntries[o],o=null):f.push(CKEDITOR.getUrl(q.path+"lang/"+o+".js"))),e.push(o),d.push(q)}CKEDITOR.scriptLoader.load(f,function(){for(var c=["beforeInit","init","afterInit"],f=0;f<c.length;f++)for(var h=0;h<d.length;h++){var l=d[h];0===f&&e[h]&&l.lang&&l.langEntries&&(a.lang[l.name]=l.langEntries[e[h]]),l[c[f]]&&l[c[f]](a)}for(a.fireOnce("pluginsLoaded"),b.keystrokes&&a.setKeystroke(a.config.keystrokes),h=0;h<a.config.blockedKeystrokes.length;h++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[h]]=1;a.status="loaded",a.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,a)})})}function q(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();return this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b)),a.is("textarea")?a.setValue(b):a.setHtml(b),!0}return!1}b.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=b;var r=0,l={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);return this.mode&&f(this,c),this.commands[a]=c},_attachToForm:function(){var a=this,b=a.element,c=new CKEDITOR.dom.element(b.$.form);if(b.is("textarea")&&c){var d=function(c){a.updateElement(),a._.required&&!b.getValue()&&a.fire("required")===!1&&c.data.preventDefault()};c.on("submit",d),c.$.submit&&c.$.submit.call&&c.$.submit.apply&&(c.$.submit=CKEDITOR.tools.override(c.$.submit,function(a){return function(){d(),a.apply?a.apply(this):a()}})),a.on("destroy",function(){c.removeListener("submit",d)})}},destroy:function(a){this.fire("beforeDestroy"),!a&&q.call(this),this.editable(null),this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){return(a=a||this.getSelection().getStartElement())?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",d)!==!0&&(d.returnValue=c.exec(d.commandData),!c.async&&this.fire("afterCommandExec",d)!==!0)?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;return"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():""),b={dataValue:b},!a&&this.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if("string"!=typeof a){var b=this.element;b&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a=b.is("textarea")?b.getValue():b.getHtml())}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){b&&this.on("dataReady",function(a){a.removeListener(),b.call(a.editor)}),a={dataValue:a},!c&&this.fire("setData",a),this._.data=a.dataValue,!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=void 0==a||a,this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b){this.fire("insertHtml",{dataValue:a,mode:b})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return q.call(this)},setKeystroke:function(){for(var c,d,a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],e=b.length;e--;)c=b[e],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},function(){var b=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,c={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(a){for(var f,d,h,e=0;f=this._.htmlPartsRegex.exec(a);)if(d=f.index,d>e&&(e=a.substring(e,d),h?h.push(e):this.onText(e)),e=this._.htmlPartsRegex.lastIndex,!(d=f[1])||(d=d.toLowerCase(),h&&CKEDITOR.dtd.$cdata[d]&&(this.onCDATA(h.join("")),h=null),h))if(h)h.push(f[0]);else if(d=f[3]){if(d=d.toLowerCase(),!/="/.test(d)){var i,j={};f=f[4];var k=!(!f||"/"!=f.charAt(f.length-1));if(f)for(;i=b.exec(f);){var m=i[1].toLowerCase();i=i[2]||i[3]||i[4]||"",j[m]=!i&&c[m]?m:i}this.onTagOpen(d,j,k),!h&&CKEDITOR.dtd.$cdata[d]&&(h=[])}}else(d=f[2])&&this.onComment(d);else this.onTagClose(d);a.length>e&&this.onText(a.substring(e,a.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(b){this._.output.push("<",b)},openTagClose:function(b,c){this._.output.push(c?" />":">")},attribute:function(b,c){"string"==typeof c&&(c=CKEDITOR.tools.htmlEncodeAttr(c)),this._.output.push(" ",b,'="',c,'"')},closeTag:function(b){this._.output.push("</",b,">")},text:function(b){this._.output.push(b)},comment:function(b){this._.output.push("<!--",b,"-->")},write:function(b){this._.output.push(b)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(b){var c=this._.output.join("");return b&&this.reset(),c}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var b=this.parent.children,c=CKEDITOR.tools.indexOf(b,this),a=this.previous,f=this.next;a&&(a.next=f),f&&(f.previous=a),b.splice(c,1),this.parent=null},replaceWith:function(b){var c=this.parent.children,a=CKEDITOR.tools.indexOf(c,this),f=b.previous=this.previous,d=b.next=this.next;f&&(f.next=b),d&&(d.previous=b),c[a]=b,b.parent=this.parent,this.parent=null},insertAfter:function(b){var c=b.parent.children,a=CKEDITOR.tools.indexOf(c,b),f=b.next;c.splice(a+1,0,this),this.next=b.next,this.previous=b,b.next=this,f&&(f.previous=this),this.parent=b.parent},insertBefore:function(b){var c=b.parent.children,a=CKEDITOR.tools.indexOf(c,b);c.splice(a,0,this),this.next=b,(this.previous=b.previous)&&(b.previous.next=this),b.previous=this,this.parent=b.parent}}}(),CKEDITOR.htmlParser.comment=function(b){this.value=b,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(b){var c=this.value;return(c=b.onComment(c,this))?"string"!=typeof c?(this.replaceWith(c),!1):(this.value=c,!0):(this.remove(),!1)},writeHtml:function(b,c){c&&this.filter(c),b.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(b){this.value=b,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(b){return(this.value=b.onText(this.value,this))?void 0:(this.remove(),!1)},writeHtml:function(b,c){c&&this.filter(c),b.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(b){this.value=b},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(b){b.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function b(a){return"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var c=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),a={ol:1,ul:1},f=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1});CKEDITOR.htmlParser.fragment.fromHtml=function(d,e,h){function j(a){var b;if(p.length>0)for(var c=0;c<p.length;c++){var d=p[c],e=d.name,g=CKEDITOR.dtd[e],f=u.name&&CKEDITOR.dtd[u.name];f&&!f[e]||a&&g&&!g[a]&&CKEDITOR.dtd[a]?e==u.name&&(m(u,u.parent,1),c--):(b||(i(),b=1),d=d.clone(),d.parent=u,u=d,p.splice(c,1),c--)}}function i(){for(;v.length;)m(v.shift(),u)}function k(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var d,b=a.children.length,c=a.children[b-1];c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?c.value=d:a.children.length=b-1)}}function m(a,c,d){var c=c||u||g,e=u;void 0===a.previous&&(q(c,a)&&(u=c,l.onTagOpen(h,{}),a.returnPoint=c=u),k(a),(!b(a)||a.children.length)&&c.add(a),"pre"==a.name&&(F=!1),"textarea"==a.name&&(o=!1)),a.returnPoint?(u=a.returnPoint,delete a.returnPoint):u=d?c:e}function q(a,b){if((a==g||"body"==a.name)&&h&&(!a.name||CKEDITOR.dtd[a.name][h])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function r(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var l=new CKEDITOR.htmlParser,g=e instanceof CKEDITOR.htmlParser.element?e:"string"==typeof e?new CKEDITOR.htmlParser.element(e):new CKEDITOR.htmlParser.fragment,p=[],v=[],u=g,o="textarea"==g.name,F="pre"==g.name;l.onTagOpen=function(d,e,g,h){if(e=new CKEDITOR.htmlParser.element(d,e),e.isUnknown&&g&&(e.isEmpty=!0),e.isOptionalClose=h,b(e))p.push(e);else{if("pre"==d)F=!0;else{if("br"==d&&F)return void u.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==d&&(o=!0)}if("br"==d)v.push(e);else{for(;h=(g=u.name)?CKEDITOR.dtd[g]||(u._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):f,!(e.isUnknown||u.isUnknown||h[d]);)if(u.isOptionalClose)l.onTagClose(g);else if(d in a&&g in a)g=u.children,(g=g[g.length-1])&&"li"==g.name||m(g=new CKEDITOR.htmlParser.element("li"),u),!e.returnPoint&&(e.returnPoint=u),u=g;else if(d in CKEDITOR.dtd.$listItem&&!r(d,g))l.onTagOpen("li"==d?"ul":"dl",{},0,1);else if(g in c&&!r(d,g))!e.returnPoint&&(e.returnPoint=u),u=u.parent;else{if(g in CKEDITOR.dtd.$inline&&p.unshift(u),!u.parent){e.isOrphan=1;break}m(u,u.parent,1)}j(d),i(),e.parent=u,e.isEmpty?m(e):u=e}}},l.onTagClose=function(a){for(var b=p.length-1;b>=0;b--)if(a==p[b].name)return void p.splice(b,1);for(var c=[],d=[],e=u;e!=g&&e.name!=a;)e._.isBlockLike||d.unshift(e),c.push(e),e=e.returnPoint||e.parent;if(e!=g){for(b=0;b<c.length;b++){var f=c[b];m(f,f.parent)}u=e,e._.isBlockLike&&i(),m(e,e.parent),e==u&&(u=u.parent),p=p.concat(d)}"body"==a&&(h=!1)},l.onText=function(b){if(u._.hasInlineStarted&&!v.length||F||o||(b=CKEDITOR.tools.ltrim(b),0!==b.length)){var d=u.name,e=d?CKEDITOR.dtd[d]||(u._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):f;!o&&!e["#"]&&d in c?(l.onTagOpen(d in a?"li":"dl"==d?"dd":"table"==d?"tr":"tr"==d?"td":""),l.onText(b)):(i(),j(),!F&&!o&&(b=b.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),b=new CKEDITOR.htmlParser.text(b),q(u,b)&&this.onTagOpen(h,{},0,1),u.add(b))}},l.onCDATA=function(a){u.add(new CKEDITOR.htmlParser.cdata(a))},l.onComment=function(a){i(),j(),u.add(new CKEDITOR.htmlParser.comment(a))},l.parse(d);for(i(!CKEDITOR.env.ie&&1);u!=g;)m(u,u.parent,1);return k(g),g},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=b>0?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length))return this.children.pop(),void this.add(a);c.next=a}a.previous=c,a.parent=this,this.children.splice(b,0,a),this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a){a.onRoot(this),this.filterChildren(a)},filterChildren:function(a,b){if(this.childrenFilteredBy!=a.id){b&&!this.parent&&a.onRoot(this),this.childrenFilteredBy=a.id;for(var c=0;c<this.children.length;c++)this.children[c].filter(a)===!1&&c--}},writeHtml:function(a,b){b&&this.filter(b),this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){c&&!this.parent&&b&&b.onRoot(this),b&&this.filterChildren(b);for(var b=0,c=this.children,f=c.length;f>b;b++)c[b].writeHtml(a)},forEach:function(a,b,c){!c&&(!b||this.type==b)&&a(this);for(var f,c=this.children,i=0,k=c.length;k>i;i++)f=c[i],f.type==CKEDITOR.NODE_ELEMENT?f.forEach(a,b):(!b||f.type==b)&&a(f)}}}(),function(){function b(a,b){for(var c=0;a&&c<b.length;c++)var d=b[c],a=a.replace(d[0],d[1]);return a}function c(a,b,c){"function"==typeof b&&(b=[b]);var d,f;f=a.length;var m=b&&b.length;if(m){for(d=0;f>d&&a[d].pri<=c;d++);for(f=m-1;f>=0;f--)(m=b[f])&&(m.pri=c,a.splice(d,0,m))}}function a(a,b,c){if(b)for(var d in b){var k=a[d];a[d]=f(k,b[d],c),k||a.$length++}}function f(a,b,f){return b?(b.pri=f,a?(a.splice?c(a,b,f):(a=a.pri>f?[b,a]:[a,b],a.filter=d),a):b.filter=b):void 0}function d(a){for(var b=a.type||a instanceof CKEDITOR.htmlParser.fragment,c=0;c<this.length;c++){if(b)var d=a.type,f=a.name;var m=this[c].apply(window,arguments);if(m===!1)return m;if(b){if(m&&(m.name!=f||m.type!=d))return m}else if("string"!=typeof m)return m;void 0!=m&&(a=m)}return a}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(a){this.id=CKEDITOR.tools.getNextNumber(),this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}},a&&this.addRules(a,10)},proto:{addRules:function(b,d){"number"!=typeof d&&(d=10),c(this._.elementNames,b.elementNames,d),c(this._.attributeNames,b.attributeNames,d),a(this._.elements,b.elements,d),a(this._.attributes,b.attributes,d),this._.text=f(this._.text,b.text,d)||this._.text,this._.comment=f(this._.comment,b.comment,d)||this._.comment,this._.root=f(this._.root,b.root,d)||this._.root},applyTo:function(a){a.filter(this)},onElementName:function(a){return b(a,this._.elementNames)},onAttributeName:function(a){return b(a,this._.attributeNames)},onText:function(a){var b=this._.text;return b?b.filter(a):a},onComment:function(a,b){var c=this._.comment;return c?c.filter(a,b):a},onRoot:function(a){var b=this._.root;return b?b.filter(a):a},onElement:function(a){for(var c,b=[this._.elements["^"],this._.elements[a.name],this._.elements.$],d=0;3>d;d++)if(c=b[d]){if(c=c.filter(a,this),c===!1)return null;if(c&&c!=a)return this.onNode(c);if(a.parent&&!a.name)break}return a},onNode:function(a){var b=a.type;return b==CKEDITOR.NODE_ELEMENT?this.onElement(a):b==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a.value)):b==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a.value)):null},onAttribute:function(a,b,c){if(b=this._.attributes[b]){if(a=b.filter(c,a,this),a===!1)return!1;if("undefined"!=typeof a)return a}return c}}})}(),function(){function b(b,c){function g(a){return a||CKEDITOR.env.ie?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(b,c){return function(d){if(d.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n,o,l=[],h=a(d);if(h)for(p(h,1)&&l.push(h);h;){if(e(h)&&(n=f(h))&&p(n))if((o=f(n))&&!e(o))l.push(n);else{var r=n,w=g(q),j=r.parent.children,B=CKEDITOR.tools.indexOf(j,r);j.splice(B+1,0,w),j=r.next,r.next=w,w.previous=r,w.parent=r.parent,w.next=j,i(n)}h=h.previous}for(h=0;h<l.length;h++)i(l[h]);(l=CKEDITOR.env.opera&&!b||("function"==typeof c?c(d)!==!1:c))&&(!q&&CKEDITOR.env.ie&&d.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT?l=!1:!q&&CKEDITOR.env.ie&&(document.documentMode>7||d.name in CKEDITOR.dtd.tr||d.name in CKEDITOR.dtd.$listItem)?l=!1:(l=a(d),l=!l||"form"==d.name&&"input"==l.name)),l&&d.add(g(b))}}}function p(a,b){if(!(q&&CKEDITOR.env.ie||a.type!=CKEDITOR.NODE_ELEMENT||"br"!=a.name||a.attributes["data-cke-eol"]))return!0;var c;if(a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(F))){if(c.index&&(h(a,new CKEDITOR.htmlParser.text(a.value.substring(0,c.index))),a.value=c[0]),CKEDITOR.env.ie&&q&&(!b||a.parent.name in o))return!0;if(!q&&((c=a.previous)&&"br"==c.name||!c||e(c)))return!0}return!1}var r,n={elements:{}},q="html"==c,o=CKEDITOR.tools.extend({},z);for(r in o)"#"in s[r]||delete o[r];for(r in o)n.elements[r]=l(q,b.config.fillEmptyBlocks!==!1);return n.root=l(q),n.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var c=b.attributes;if("data-cke-bogus"in c||"data-cke-eol"in c)delete c["data-cke-bogus"];else{for(c=b.next;c&&d(c);)c=c.next;var l=f(b);!c&&e(b.parent)?j(b.parent,g(a)):e(c)&&l&&!e(l)&&h(c,g(a))}}}}(q),n}function c(a){return a.enterMode!=CKEDITOR.ENTER_BR&&a.autoParagraph!==!1?a.enterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function a(a){for(a=a.children[a.children.length-1];a&&d(a);)a=a.previous;return a}function f(a){for(a=a.previous;a&&d(a);)a=a.previous;return a}function d(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function e(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in z||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function h(a,b){var c=a.parent.children,d=CKEDITOR.tools.indexOf(c,a);c.splice(d,0,b),c=a.previous,a.previous=b,b.next=a,b.parent=a.parent,c&&(b.previous=c,c.next=b)}function j(a,b){var c=a.children[a.children.length-1];a.children.push(b),b.parent=a,c&&(c.next=b,b.previous=c)}function i(a){var b=a.parent.children,c=CKEDITOR.tools.indexOf(b,a),d=a.previous,a=a.next;d&&(d.next=a),a&&(a.previous=d),b.splice(c,1)}function k(a){var b=a.parent;return b?CKEDITOR.tools.indexOf(b.children,a):-1}function m(a){a=a.attributes,"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1),a.contenteditable="false"}function q(a){switch(a=a.attributes,a["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable}}function r(a){return a.replace(n,function(a,b,c){return"<"+b+c.replace(w,function(a,b){return/^on/.test(b)||-1!=c.indexOf("data-cke-saved-"+b)?a:(a=a.slice(1)," data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a)})+">"})}function l(a,b){return a.replace(b,function(a,b,c){return 0===a.indexOf("<textarea")&&(a=b+v(c).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function g(a){return a.replace(D,function(a,b){return decodeURIComponent(b)})}function p(a){return a.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(a){return"<!--"+A+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"})}function v(a){return a.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)})}function u(a,b){var c=b._.dataStore;return a.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function o(a,b){for(var c=[],d=b.config.protectedSource,g=b._.dataStore||(b._.dataStore={id:1}),e=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,d=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(d),a=a.replace(/<\!--[\s\S]*?--\>/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"}),f=0;f<d.length;f++)a=a.replace(d[f],function(a){return a=a.replace(e,function(a,b,d){return c[d]}),/cke_temp(comment)?/.test(a)?a:"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(e,function(a,b,d){return"<!--"+A+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"-->"}),a.replace(/(['"]).*?\1/g,function(a){return a.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(a,b){return g[g.id]=decodeURIComponent(b),"{cke_protected_"+g.id++ +"}"})})}CKEDITOR.htmlDataProcessor=function(a){var d,e,f=this;this.editor=a,this.dataFilter=d=new CKEDITOR.htmlParser.filter,this.htmlFilter=e=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,d.addRules(t),d.addRules(b(a,"data")),e.addRules(C),e.addRules(b(a,"html")),a.on("toHtml",function(b){var f,b=b.data,d=b.dataValue,d=o(d,a),d=l(d,G),d=r(d),d=l(d,I),d=d.replace(Q,"$1cke:$2"),d=d.replace(E,"<cke:$1$2></cke:$1>"),d=CKEDITOR.env.opera?d:d.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),e=b.context||a.editable().getName();CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==e&&(e="div",d="<pre>"+d+"</pre>",f=1),e=a.document.createElement(e),e.setHtml("a"+d),d=e.getHtml().substr(1),d=d.replace(RegExp(" data-cke-"+CKEDITOR.rnd+"-","ig")," "),f&&(d=d.replace(/^<pre>|<\/pre>$/gi,"")),d=d.replace(L,"$1$2"),d=g(d),d=v(d),b.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(d,b.context,b.fixForBody===!1?!1:c(a.config))},null,null,5),a.on("toHtml",function(a){a.data.dataValue.filterChildren(f.dataFilter,!0)},null,null,10),a.on("toHtml",function(a){var a=a.data,b=a.dataValue,c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c),b=c.getHtml(!0),a.dataValue=p(b)},null,null,15),a.on("toDataFormat",function(b){b.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(b.data.dataValue,a.editable().getName(),c(a.config))},null,null,5),a.on("toDataFormat",function(a){a.data.dataValue.filterChildren(f.htmlFilter,!0)},null,null,10),a.on("toDataFormat",function(b){var c=b.data.dataValue,d=f.writer;d.reset(),c.writeChildrenHtml(d),c=d.getHtml(!0),c=v(c),c=u(c,a),b.data.dataValue=c},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var g=this.editor;return!b&&null!==b&&(b=g.editable().getName()),g.fire("toHtml",{dataValue:a,context:b,fixForBody:c,dontFilter:!!d}).dataValue},toDataFormat:function(a){return this.editor.fire("toDataFormat",{dataValue:a}).dataValue}};var F=/(?:&nbsp;|\xa0)$/,A="{cke_protected}",s=CKEDITOR.dtd,x=["caption","colgroup","col","thead","tfoot","tbody"],z=CKEDITOR.tools.extend({},s.$blockLimit,s.$block),t={elements:{},attributeNames:[[/^on/,"data-cke-pa-on"]]},C={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var d,c=["name","href","src"],g=0;g<c.length;g++)d="data-cke-saved-"+c[g],d in b&&delete b[c[g]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;return a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(x,a.name),d=CKEDITOR.tools.indexOf(x,b.name)),c>-1&&d>-1&&c!=d||(c=k(a),d=k(b)),c>d?1:-1})},embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c),b&&(a.attributes.height=b)}},param:function(a){return a.children=[],a.isEmpty=!0,a},a:function(a){return a.children.length||a.attributes.name||a.attributes["data-cke-saved-name"]?void 0:!1},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable,delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&j(a,b=new CKEDITOR.htmlParser.text),b.value=a.attributes["data-cke-title"]||""}},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(C.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});for(var y in{input:1,textarea:1})t.elements[y]=m,C.elements[y]=q;var n=/<(a|area|img|input|source)\b([^>]*)>/gi,w=/\s(on\w+|href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,I=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,G=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,D=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,Q=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,L=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,E=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(b,c){this.name=b,this.attributes=c||{},this.children=[];var a=b||"",f=a.match(/^cke:(.*)/);f&&(a=f[1]),a=!!(CKEDITOR.dtd.$nonBodyContent[a]||CKEDITOR.dtd.$block[a]||CKEDITOR.dtd.$listItem[a]||CKEDITOR.dtd.$tableContent[a]||CKEDITOR.dtd.$nonEditable[a]||"br"==a),this.isEmpty=!!CKEDITOR.dtd.$empty[b],this.isUnknown=!CKEDITOR.dtd[b],this._={isBlockLike:a,hasInlineStarted:this.isEmpty||!a}},CKEDITOR.htmlParser.cssStyle=function(b){var c={};return((b instanceof CKEDITOR.htmlParser.element?b.attributes.style:b)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,b,d){"font-family"==b&&(d=d.replace(/["']/g,"")),c[b.toLowerCase()]=d}),{rules:c,populate:function(a){var b=this.toString();b&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",b):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=b:a.style=b)},toString:function(){var b,a=[];for(b in c)c[b]&&a.push(b,":",c[b],";");return a.join("")}}},function(){var b=function(a,b){return a=a[0],b=b[0],b>a?-1:a>b?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a){var c,e,b=this;for(b.parent||a.onRoot(b);;){if(c=b.name,!(e=a.onElementName(c)))return this.remove(),!1;if(b.name=e,!(b=a.onElement(b)))return this.remove(),!1;if(b!==this)return this.replaceWith(b),!1;if(b.name==c)break;if(b.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(b),!1;if(!b.name)return this.replaceWithChildren(),!1}c=b.attributes;var h,j;for(h in c){for(j=h,e=c[h];;){if(!(j=a.onAttributeName(h))){delete c[h];break}if(j==h)break;delete c[h],h=j}j&&((e=a.onAttribute(b,j,e))===!1?delete c[j]:c[j]=e)}return b.isEmpty||this.filterChildren(a),!0},filterChildren:c.filterChildren,writeHtml:function(a,c){c&&this.filter(c);var j,i,d=this.name,e=[],h=this.attributes;a.openTag(d,h);for(j in h)e.push([j,h[j]]);for(a.sortAttributes&&e.sort(b),j=0,i=e.length;i>j;j++)h=e[j],a.attribute(h[0],h[1]);a.openTagClose(d,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(d)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);this.remove()},forEach:c.forEach})}(),function(){var b={};CKEDITOR.template=function(c){if(b[c])this.output=b[c];else{var a=c.replace(/'/g,"\\'").replace(/{([^}]+)}/g,function(a,b){return"',data['"+b+"']==undefined?'{"+b+"}':data['"+b+"'],'"});this.output=b[c]=Function("data","buffer","return buffer?buffer.push('"+a+"'):['"+a+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(b){CKEDITOR.instances[b.name]=b,b.on("focus",function(){CKEDITOR.currentInstance!=b&&(CKEDITOR.currentInstance=b,CKEDITOR.fire("currentInstance"))}),b.on("blur",function(){CKEDITOR.currentInstance==b&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,b)},CKEDITOR.remove=function(b){delete CKEDITOR.instances[b.name]},function(){var b={};CKEDITOR.addTemplate=function(c,a){var f=b[c];return f?f:(f={name:c,source:a},CKEDITOR.fire("template",f),b[c]=new CKEDITOR.template(f.source))},CKEDITOR.getTemplate=function(c){return b[c]}}(),function(){var b=[];CKEDITOR.addCss=function(c){b.push(c)},CKEDITOR.getCss=function(){return b.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(b,c){if(!CKEDITOR.env.isCompatible)return null;if(b=CKEDITOR.dom.element.get(b),b.getEditor())throw'The editor instance "'+b.getEditor().name+'" is already attached to the provided element.';var a=new CKEDITOR.editor(c,b,CKEDITOR.ELEMENT_MODE_INLINE),f=b.is("textarea")?b:null;return f?(a.setData(f.getValue(),null,!0),b=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!a.readOnly+'" class="cke_textarea_inline">'+f.getValue()+"</div>",CKEDITOR.document),b.insertAfter(f),f.hide(),f.$.form&&a._attachToForm()):a.setData(b.getHtml(),null,!0),a.on("loaded",function(){a.fire("uiReady"),a.editable(b),a.container=b,a.setData(a.getData(1)),a.resetDirty(),a.fire("contentDom"),a.mode="wysiwyg",a.fire("mode"),a.status="ready",a.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,a)},null,null,1e4),a.on("destroy",function(){f&&(a.container.clearCustomData(),a.container.remove(),f.show()),a.element.clearCustomData(),delete a.element}),a},CKEDITOR.inlineAll=function(){var b,c,a;for(a in CKEDITOR.dtd.$editable)for(var f=CKEDITOR.document.getElementsByTag(a),d=0,e=f.count();e>d;d++)b=f.getItem(d),
"true"==b.getAttribute("contenteditable")&&(c={element:b,config:{}},CKEDITOR.fire("inline",c)!==!1&&CKEDITOR.inline(b,c.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function b(b,e,f,j){if(!CKEDITOR.env.isCompatible)return null;if(b=CKEDITOR.dom.element.get(b),b.getEditor())throw'The editor instance "'+b.getEditor().name+'" is already attached to the provided element.';var i=new CKEDITOR.editor(e,b,j);return j==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.setStyle("visibility","hidden"),i._.required=b.hasAttribute("required"),b.removeAttribute("required")),f&&i.setData(f,null,!0),i.on("loaded",function(){a(i),j==CKEDITOR.ELEMENT_MODE_REPLACE&&i.config.autoUpdateElement&&b.$.form&&i._attachToForm(),i.setMode(i.config.startupMode,function(){i.resetDirty(),i.status="ready",i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)})}),i.on("destroy",c),i}function c(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove()),b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function a(a){var b=a.name,c=a.element,j=a.elementMode,i=a.fire("uiSpace",{space:"top",html:""}).html,k=a.fire("uiSpace",{space:"bottom",html:""}).html;f||(f=CKEDITOR.addTemplate("maincontainer",'<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>')),b=CKEDITOR.dom.element.createFromHtml(f.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:[a.lang.editor,a.name].join(", "),topHtml:i?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+i+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:k?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+k+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),j==CKEDITOR.ELEMENT_MODE_REPLACE?(c.hide(),b.insertAfter(c)):c.append(b),a.container=b,i&&a.ui.space("top").unselectable(),k&&a.ui.space("bottom").unselectable(),c=a.config.width,j=a.config.height,c&&b.setStyle("width",CKEDITOR.tools.cssLength(c)),j&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(j)),b.disableContextMenu(),CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()}),a.fireOnce("uiReady")}CKEDITOR.replace=function(a,c){return b(a,c,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(a,c,f){return b(a,c,f,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var c=null,f=a[b];if(f.name||f.id){if("string"==typeof arguments[0]){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(f.className))continue}else if("function"==typeof arguments[0]&&(c={},arguments[0](f,c)===!1))continue;this.replace(f,c)}}},CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes={}))[a]=b},CKEDITOR.editor.prototype.setMode=function(a,b){var c=this,f=this._.modes;if(a!=c.mode&&f&&f[a]){if(c.fire("beforeSetMode",a),c.mode){var i=c.checkDirty();c._.previousMode=c.mode,c.fire("beforeModeUnload"),c.editable(0),c.ui.space("contents").setHtml(""),c.mode=""}this._.modes[a](function(){c.mode=a,void 0!==i&&!i&&c.resetDirty(),setTimeout(function(){c.fire("mode"),b&&b.call(c)},0)})}},CKEDITOR.editor.prototype.resize=function(a,b,c,f){var i=this.container,k=this.ui.space("contents"),m=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,f=f?i.getChild(1):i;f.setSize("width",a,!0),m&&(m.style.width="1%"),k.setStyle("height",Math.max(b-(c?0:(f.$.offsetHeight||0)-(k.$.clientHeight||0)),0)+"px"),m&&(m.style.width="100%"),this.fire("resize")},CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container};var f;CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function b(b){var c=b.editor,d=c.editable(),g=b.data.path,e=g.blockLimit,f=b.data.selection.getRanges()[0],h=c.config.enterMode;if(CKEDITOR.env.gecko){var o=g.block||g.blockLimit||g.root,i=o&&o.getLast(a);o&&o.isBlockBoundary()&&(!i||!(i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()))&&!o.is("pre")&&!o.getBogus()&&o.appendBogus()}c.config.autoParagraph!==!1&&h!=CKEDITOR.ENTER_BR&&f.collapsed&&d.equals(e)&&!g.block&&(d=f.clone(),d.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),g=new CKEDITOR.dom.walker(d),g.guard=function(b){return!a(b)||b.type==CKEDITOR.NODE_COMMENT||b.isReadOnly()},(!g.checkForward()||d.checkStartOfBlock()&&d.checkEndOfBlock())&&(c=f.fixBlock(!0,c.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.ie&&(c=c.getFirst(a))&&c.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(c.getText()).match(/^(?:&nbsp;|\xa0)$/)&&c.remove(),f.select(),b.cancel()))}function c(a){var b=a.data.getTarget();b.is("input")&&(b=b.getAttribute("type"),("submit"==b||"reset"==b)&&a.data.preventDefault())}function a(a){return i(a)&&k(a)}function f(a,b){return function(c){var d=CKEDITOR.dom.element.get(c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget);(!d||!b.equals(d)&&!b.contains(d))&&a.call(this,c)}}function d(b){var c,d=b.getRanges()[0],b=b.root,g=d.startPath(),e={table:1,ul:1,ol:1,dl:1},f=CKEDITOR.dom.walker.bogus();if(g.contains(e)){var g=function(b){return function(d,g){return g&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(e)&&(c=d),g||!a(d)||b&&f(d)?void 0:!1}},h=d.clone();if(h.collapse(1),h.setStartAt(b,CKEDITOR.POSITION_AFTER_START),b=new CKEDITOR.dom.walker(h),b.guard=g(),b.checkBackward(),c)return h=d.clone(),h.collapse(),h.setEndAt(c,CKEDITOR.POSITION_AFTER_END),b=new CKEDITOR.dom.walker(h),b.guard=g(!0),c=!1,b.checkForward(),c}return null}function e(a){a.editor.focus(),a.editor.fire("saveSnapshot")}function h(a,b){var c=a.editor;!b&&c.getSelection().scrollIntoView(),setTimeout(function(){c.fire("saveSnapshot")},0)}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b),this.editor=a,this.hasFocus=!1,this.setup()},proto:{focus:function(){this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"](),CKEDITOR.env.safari&&!this.isInline()&&(CKEDITOR.document.getActive().equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,b){var c=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=f(b,this),c[0]=a,c[1]=b),CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var h=Array.prototype.slice.call(arguments,1);this._.listeners.push(a.on.apply(a,h))},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var b,c,a=this._.attrChanges;for(c in a)a.hasOwnProperty(c)&&(b=a[c],null!==b?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertHtml:function(a,b){e(this),m(this,b||"html",a)},insertText:function(a){e(this);var b=this.editor,c=b.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:b.config.enterMode,b=c==CKEDITOR.ENTER_BR,d=CKEDITOR.tools,a=d.htmlEncode(a.replace(/\r\n/g,"\n")),a=a.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),c=c==CKEDITOR.ENTER_P?"p":"div";if(!b){var f=/\n{2}/g;if(f.test(a))var h="<"+c+">",i="</"+c+">",a=h+a.replace(f,function(){return i+h})+i}a=a.replace(/\n/g,"<br>"),b||(a=a.replace(RegExp("<br>(?=</"+c+">)"),function(a){return d.repeat(a,2)})),a=a.replace(/^ | $/g,"&nbsp;"),a=a.replace(/(>|\s) /g,function(a,b){return b+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),m(this,"text",a)},insertElement:function(b){e(this);for(var o,m,k,c=this.editor,d=c.config.enterMode,g=c.getSelection(),f=g.getRanges(),i=b.getName(),j=CKEDITOR.dtd.$block[i],s=f.length-1;s>=0;s--)if(o=f[s],!o.checkReadOnly()){o.deleteContents(1),m=!s&&b||b.clone(1);var x,z;if(j)for(;(x=o.getCommonAncestor(0,1))&&(z=CKEDITOR.dtd[x.getName()])&&(!z||!z[i]);)x.getName()in CKEDITOR.dtd.span?o.splitElement(x):o.checkStartOfBlock()&&o.checkEndOfBlock()?(o.setStartBefore(x),o.collapse(!0),x.remove()):o.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());o.insertNode(m),k||(k=m)}k&&(o.moveToPosition(k,CKEDITOR.POSITION_AFTER_END),j&&((b=k.getNext(a))&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(CKEDITOR.dtd.$block)?b.getDtd()["#"]?o.moveToElementEditStart(b):o.moveToElementEditEnd(k):b||d==CKEDITOR.ENTER_BR||(b=o.fixBlock(!0,d==CKEDITOR.ENTER_DIV?"div":"p"),o.moveToElementEditStart(b)))),g.selectRanges([o]),h(this,CKEDITOR.env.opera)},setData:function(a,b){!b&&this.editor.dataProcessor&&(a=this.editor.dataProcessor.toHtml(a)),this.setHtml(a),this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();return!a&&this.editor.dataProcessor&&(b=this.editor.dataProcessor.toDataFormat(b)),b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable");var a=this.editor;this._.detach(),delete a.document,delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var a=this.editor;if(this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||a.config.ignoreEmptyParagraph!==!1&&(b=b.replace(j,function(a,b){return b})),a.setData(b,null,1)},this),this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this),this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1))},this),this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this),this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this),this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode)},this),this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this),this.attachListener(a,"insertText",function(a){this.insertText(a.data)},this),this.setReadOnly(a.readOnly),this.attachClass("cke_editable"),this.attachClass(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||a.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+a.config.contentsLangDirection),a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly,a.keystrokeHandler.attach(this),this.on("blur",function(a){CKEDITOR.env.opera&&CKEDITOR.document.getActive().equals(this.isInline()?this:this.getWindow().getFrame())?a.cancel():this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),a.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus()})),this.isInline()&&this.changeAttr("tabindex",a.tabIndex),!this.is("textarea")){a.document=this.getDocument(),a.window=this.getWindow();var b=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var e=a.config.contentsLangDirection;this.getDirection(1)!=e&&this.changeAttr("dir",e);var g=CKEDITOR.getCss();g&&(e=b.getHead(),e.getCustomData("stylesheet")||(g=b.appendStyleText(g),g=new CKEDITOR.dom.element(g.ownerNode||g.owningElement),e.setCustomData("stylesheet",g),g.data("cke-temp",1))),e=b.getCustomData("stylesheet_ref")||0,b.setCustomData("stylesheet_ref",e+1),this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling),this.attachListener(this,"click",function(a){var a=a.data,b=a.getTarget();b.is("a")&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()}),this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var g,c=b.data.keyCode;if(c in{8:1,46:1}){var l,h,j,e=a.getSelection(),b=e.getRanges()[0],f=b.startPath(),c=8==c;(e=d(e))?(a.fire("saveSnapshot"),b.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),b.select(),a.fire("saveSnapshot"),g=1):b.collapsed&&((l=f.block)&&b[c?"checkStartOfBlock":"checkEndOfBlock"]()&&(j=l[c?"getPrevious":"getNext"](i))&&j.is("table")?(a.fire("saveSnapshot"),b[c?"checkEndOfBlock":"checkStartOfBlock"]()&&l.remove(),b["moveToElementEdit"+(c?"End":"Start")](j),b.select(),a.fire("saveSnapshot"),g=1):f.blockLimit&&f.blockLimit.is("td")&&(h=f.blockLimit.getAscendant("table"))&&b.checkBoundaryOfElement(h,c?CKEDITOR.START:CKEDITOR.END)&&(j=h[c?"getPrevious":"getNext"](i))?(a.fire("saveSnapshot"),b["moveToElementEdit"+(c?"End":"Start")](j),b.checkStartOfBlock()&&b.checkEndOfBlock()?j.remove():b.select(),a.fire("saveSnapshot"),g=1):(h=f.contains(["td","th","caption"]))&&b.checkBoundaryOfElement(h,c?CKEDITOR.START:CKEDITOR.END)&&(g=1))}return!g}),CKEDITOR.env.ie&&this.attachListener(this,"click",c),!CKEDITOR.env.ie&&!CKEDITOR.env.opera&&this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(j,""))){var c=a.createRange();c.moveToElementEditStart(b),c.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}))}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;return b&&a?0:(arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null)),b)};var j=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,i=CKEDITOR.dom.walker.whitespaces(!0),k=CKEDITOR.dom.walker.bookmark(!1,!0);CKEDITOR.on("instanceLoaded",function(a){var c=a.editor;c.on("insertElement",function(a){a=a.data,a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))}),c.on("selectionChange",function(a){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),b(a),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;if(a.changeAttr("role","textbox"),a.changeAttr("aria-label",c),c&&a.changeAttr("title",c),c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var d=CKEDITOR.tools.getNextId(),e=CKEDITOR.dom.element.createFromHtml('<span id="'+d+'" class="cke_voice_label">'+this.lang.common.editorHelp+"</span>");c.append(e),a.changeAttr("aria-describedby",d)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var m=function(){function b(a){return a.type==CKEDITOR.NODE_ELEMENT}function c(a,d){var g,e,f,h,n=[],l=d.range.startContainer;g=d.range.startPath();for(var l=i[l.getName()],o=0,p=a.getChildren(),j=p.count(),m=-1,k=-1,v=0,F=g.contains(i.$list);j>o;++o)g=p.getItem(o),b(g)?(f=g.getName(),F&&f in CKEDITOR.dtd.$list?n=n.concat(c(g,d)):(h=!!l[f],"br"!=f||!g.data("cke-eol")||o&&o!=j-1||(v=(e=o?n[o-1].node:p.getItem(o+1))&&(!b(e)||!e.is("br")),e=e&&b(e)&&i.$block[e.getName()]),-1==m&&!h&&(m=o),h||(k=o),n.push({isElement:1,isLineBreak:v,isBlock:g.isBlockBoundary(),hasBlockSibling:e,node:g,name:f,allowed:h}),e=v=0)):n.push({isElement:0,node:g,allowed:1});return m>-1&&(n[m].firstNotAllowed=1),k>-1&&(n[k].lastNotAllowed=1),n}function d(a,c){var h,g=[],e=a.getChildren(),f=e.count(),n=0,o=i[c],p=!a.is(i.$inline)||a.is("br");for(p&&g.push(" ");f>n;n++)h=e.getItem(n),b(h)&&!h.is(o)?g=g.concat(d(h,c)):g.push(h);return p&&g.push(" "),g}function g(a){return a&&b(a)&&(a.is(i.$removeEmpty)||a.is("a")&&!a.isBlockBoundary())}function e(a,c,d,g){var h,n,f=a.clone();f.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),(h=new CKEDITOR.dom.walker(f).next())&&b(h)&&o[h.getName()]&&(n=h.getPrevious())&&b(n)&&!n.getParent().equals(a.startContainer)&&d.contains(n)&&g.contains(h)&&h.isIdentical(n)&&(h.moveChildren(n),h.remove(),e(a,c,d,g))}function f(a,c){function d(a,c){return c.isBlock&&c.isElement&&!c.node.is("br")&&b(a)&&a.is("br")?(a.remove(),1):void 0}var g=c.endContainer.getChild(c.endOffset),e=c.endContainer.getChild(c.endOffset-1);g&&d(g,a[a.length-1]),e&&d(e,a[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var i=CKEDITOR.dtd,o={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},j={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},m=CKEDITOR.tools.extend({},i.$inline);return delete m.br,function(o,k,z){var t=o.editor;o.getDocument();var C=t.getSelection().getRanges()[0],y=!1;if("unfiltered_html"==k&&(k="html",y=!0),!C.checkReadOnly()){var w,I,G,D,n=new CKEDITOR.dom.elementPath(C.startContainer,C.root).blockLimit||C.root,k={type:k,dontFilter:y,editable:o,editor:t,range:C,blockLimit:n,mergeCandidates:[],zombies:[]},t=k.range,y=k.mergeCandidates;if("text"==k.type&&t.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(w=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",t.document),t.insertNode(w),t.setStartAfter(w)),I=new CKEDITOR.dom.elementPath(t.startContainer),k.endPath=G=new CKEDITOR.dom.elementPath(t.endContainer),!t.collapsed){var n=G.block||G.blockLimit,Q=t.getCommonAncestor();n&&!n.equals(Q)&&!n.contains(Q)&&t.checkEndOfBlock()&&k.zombies.push(n),t.deleteContents()}for(;(D=b(t.startContainer)&&t.startContainer.getChild(t.startOffset-1))&&b(D)&&D.isBlockBoundary()&&I.contains(D);)t.moveToPosition(D,CKEDITOR.POSITION_BEFORE_END);for(e(t,k.blockLimit,I,G),w&&(t.setEndBefore(w),t.collapse(),w.remove()),w=t.startPath(),(n=w.contains(g,!1,1))&&(t.splitElement(n),k.inlineStylesRoot=n,k.inlineStylesPeak=w.lastElement),w=t.createBookmark(),(n=w.startNode.getPrevious(a))&&b(n)&&g(n)&&y.push(n),(n=w.startNode.getNext(a))&&b(n)&&g(n)&&y.push(n),n=w.startNode;(n=n.getParent())&&g(n);)y.push(n);if(t.moveToBookmark(w),w=z){if(w=k.range,"text"==k.type&&k.inlineStylesRoot){for(D=k.inlineStylesPeak,t=D.getDocument().createText("{cke-peak}"),y=k.inlineStylesRoot.getParent();!D.equals(y);)t=t.appendTo(D.clone()),D=D.getParent();z=t.getOuterHtml().split("{cke-peak}").join(z)}if(D=k.blockLimit.getName(),/^\s+|\s+$/.test(z)&&"span"in CKEDITOR.dtd[D])var L='<span data-cke-marker="1">&nbsp;</span>',z=L+z+L;if(z=k.editor.dataProcessor.toHtml(z,null,!1,k.dontFilter),D=w.document.createElement("body"),D.setHtml(z),L&&(D.getFirst().remove(),D.getLast().remove()),(L=w.startPath().block)&&(1!=L.getChildCount()||!L.getBogus()))a:{var E;if(1==D.getChildCount()&&b(E=D.getFirst())&&E.is(j)){for(L=E.getElementsByTag("*"),w=0,y=L.count();y>w;w++)if(t=L.getItem(w),!t.is(m))break a;E.moveChildren(E.getParent(1)),E.remove()}}k.dataWrapper=D,w=z}if(w){E=k.range;var B,L=E.document,z=k.blockLimit;w=0;var J;D=[];var H,N,K,O,y=t=0;I=E.startContainer;var P,n=k.endPath.elements[0];for(G=n.getPosition(I),Q=!(!n.getCommonAncestor(I)||G==CKEDITOR.POSITION_IDENTICAL||G&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),I=c(k.dataWrapper,k),f(I,E);w<I.length;w++){if(G=I[w],B=G.isLineBreak){B=E,K=z;var M=void 0,R=void 0;G.hasBlockSibling?B=1:(M=B.startContainer.getAscendant(i.$block,1),M&&M.is({div:1,p:1})?(R=M.getPosition(K),R==CKEDITOR.POSITION_IDENTICAL||R==CKEDITOR.POSITION_CONTAINS?B=0:(K=B.splitElement(M),B.moveToPosition(K,CKEDITOR.POSITION_AFTER_START),B=1)):B=0)}if(B)y=w>0;else{if(B=E.startPath(),!G.isBlock&&(N=k.editor.config.enterMode!=CKEDITOR.ENTER_BR&&k.editor.config.autoParagraph!==!1?k.editor.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)&&!B.block&&B.blockLimit&&B.blockLimit.equals(E.root)&&(N=L.createElement(N),!CKEDITOR.env.ie&&N.appendBogus(),E.insertNode(N),!CKEDITOR.env.ie&&(J=N.getBogus())&&J.remove(),E.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END)),(B=E.startPath().block)&&!B.equals(H)&&((J=B.getBogus())&&(J.remove(),D.push(B)),H=B),G.firstNotAllowed&&(t=1),t&&G.isElement){for(B=E.startContainer,K=null;B&&!i[B.getName()][G.name];){if(B.equals(z)){B=null;break}K=B,B=B.getParent()}if(B)K&&(O=E.splitElement(K),k.zombies.push(O),k.zombies.push(K));else{K=z.getName(),P=!w,B=w==I.length-1,K=d(G.node,K);for(var M=[],R=K.length,T=0,U=void 0,V=0,W=-1;R>T;T++)U=K[T]," "==U?(V||P&&!T||(M.push(new CKEDITOR.dom.text(" ")),W=M.length),V=1):(M.push(U),V=0);B&&W==M.length&&M.pop(),P=M}}if(P){for(;B=P.pop();)E.insertNode(B);P=0}else E.insertNode(G.node);G.lastNotAllowed&&w<I.length-1&&((O=Q?n:O)&&E.setEndAt(O,CKEDITOR.POSITION_AFTER_START),t=0),E.collapse()}}k.dontMoveCaret=y,k.bogusNeededBlocks=D}J=k.range;var S;for(O=k.bogusNeededBlocks,P=J.createBookmark();H=k.zombies.pop();)H.getParent()&&(N=J.clone(),N.moveToElementEditStart(H),N.removeEmptyBlocksAtEnd());if(O)for(;H=O.pop();)H.append(CKEDITOR.env.ie?J.document.createText(""):J.document.createElement("br"));for(;H=k.mergeCandidates.pop();)H.mergeSiblings();if(J.moveToBookmark(P),!k.dontMoveCaret){for(H=b(J.startContainer)&&J.startContainer.getChild(J.startOffset-1);H&&b(H)&&!H.is(i.$empty);){if(H.isBlockBoundary())J.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END);else{if(g(H)&&H.getHtml().match(/(\s|&nbsp;)$/g)){S=null;break}S=J.clone(),S.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END)}H=H.getLast(a)}S&&J.moveToRange(S)}C.select(),h(o)}}}()}(),function(){function b(){var a=this.getSelection(1);if(a.getType()!=CKEDITOR.SELECTION_NONE){this.fire("selectionCheck",a);var b=this.elementPath();b.compare(this._.selectionPreviousPath)||(this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:a,path:b}))}}function c(){k=!0,i||(a.call(this),i=CKEDITOR.tools.setTimeout(a,200,this))}function a(){i=null,k&&(CKEDITOR.tools.setTimeout(b,0,this),k=!1)}function f(a){function b(c,d){return c&&c.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(d?"End":"Start")](c):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var c=a.startContainer,d=a.getPreviousNode(m,null,c),e=a.getNextNode(m,null,c);return!b(d)&&!b(e,1)&&(d||e||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()&&c.getBogus())?!1:!0}function d(a){return a.getCustomData("cke-fillingChar")}function e(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(b!==!1){var d,e=a.getDocument().getSelection().getNative(),f=e&&"None"!=e.type&&e.getRangeAt(0);if(c.getLength()>1&&f&&f.intersectsNode(c.$)){d=[e.anchorOffset,e.focusOffset],f=e.focusNode==c.$&&e.focusOffset>0,e.anchorNode==c.$&&e.anchorOffset>0&&d[0]--,f&&d[1]--;var i;f=e,f.isCollapsed||(i=f.getRangeAt(0),i.setStart(f.anchorNode,f.anchorOffset),i.setEnd(f.focusNode,f.focusOffset),i=i.collapsed),i&&d.unshift(d.pop())}}c.setText(h(c.getText())),d&&(c=e.getRangeAt(0),c.setStart(c.startContainer,d[0]),c.setEnd(c.startContainer,d[1]),e.removeAllRanges(),e.addRange(c))}}function h(a){return a.replace(/\u200B( )?/g,function(a){return a[1]?"":""})}function j(a,b,c){var d=a.on("focus",function(a){a.cancel()},null,null,-100);if(CKEDITOR.env.ie)var e=a.getDocument().on("selectionchange",function(a){a.cancel()},null,null,-100);else{var f=new CKEDITOR.dom.range(a);f.moveToElementEditStart(a);var h=a.getDocument().$.createRange();h.setStart(f.startContainer.$,f.startOffset),h.collapse(1),b.removeAllRanges(),b.addRange(h)}c&&a.focus(),d.removeListener(),e&&e.removeListener()}var i,k,m=CKEDITOR.dom.walker.invisible(1);CKEDITOR.on("instanceCreated",function(a){function d(){var a=f.getSelection();a&&a.removeAllRanges()}var f=a.editor;f.define("selectionChange",{errorProof:1}),f.on("contentDom",function(){var k,a=f.document,d=CKEDITOR.document,g=f.editable(),h=a.getBody(),l=a.getDocumentElement(),i=g.isInline();if(CKEDITOR.env.gecko&&g.attachListener(g,"focus",function(a){a.removeListener(),0!==k&&(a=f.getSelection().getNative(),a.isCollapsed&&a.anchorNode==g.$&&(a=f.createRange(),a.moveToElementEditStart(g),a.select()))},null,null,-2),g.attachListener(g,"focus",function(){f.unlockSelection(k),k=0},null,null,-1),g.attachListener(g,"mousedown",function(){k=0}),CKEDITOR.env.ie||CKEDITOR.env.opera||i){var j,m=function(){j=f.getSelection(1),j.lock()};q?g.attachListener(g,"beforedeactivate",m,null,null,-1):g.attachListener(f,"selectionCheck",m,null,null,-1),g.attachListener(g,"blur",function(){f.lockSelection(j),k=1},null,null,-1)}if(CKEDITOR.env.ie&&!i){var r;if(g.attachListener(g,"mousedown",function(a){2==a.data.$.button&&"None"==f.document.$.selection.type&&(r=f.window.getScrollPosition())}),g.attachListener(g,"mouseup",function(a){2==a.data.$.button&&r&&(f.document.$.documentElement.scrollLeft=r.x,f.document.$.documentElement.scrollTop=r.y),r=null}),"BackCompat"!=a.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&l.on("mousedown",function(a){function b(a){if(a=a.data.$,g){var c=h.$.createTextRange();try{c.moveToPoint(a.x,a.y)}catch(d){}g.setEndPoint(f.compareEndPoints("StartToStart",c)<0?"EndToEnd":"StartToStart",c),g.select()}}function c(){l.removeListener("mousemove",b),d.removeListener("mouseup",c),l.removeListener("mouseup",c),g.select()}if(a=a.data,a.getTarget().is("html")&&a.$.y<l.$.clientHeight&&a.$.x<l.$.clientWidth){var g=h.$.createTextRange();try{g.moveToPoint(a.$.x,a.$.y)}catch(e){}var f=g.duplicate();l.on("mousemove",b),d.on("mouseup",c),l.on("mouseup",c)}}),CKEDITOR.env.version>7)){l.on("mousedown",function(a){a.data.getTarget().is("html")&&(d.on("mouseup",y),l.on("mouseup",y))});var y=function(){d.removeListener("mouseup",y),l.removeListener("mouseup",y);var b=CKEDITOR.document.$.selection,c=b.createRange();"None"!=b.type&&c.parentElement().ownerDocument==a.$&&c.select()}}}if(g.attachListener(g,"selectionchange",b,f),g.attachListener(g,"keyup",c,f),g.attachListener(g,"focus",function(){f.forceNextSelectionCheck(),f.selectionChange(1)}),i?CKEDITOR.env.webkit||CKEDITOR.env.gecko:CKEDITOR.env.opera){var n;g.attachListener(g,"mousedown",function(){n=1}),g.attachListener(a.getDocumentElement(),"mouseup",function(){n&&c.call(f),n=0})}else g.attachListener(CKEDITOR.env.ie?g:a.getDocumentElement(),"mouseup",c,f);CKEDITOR.env.webkit&&g.attachListener(a,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:e(g)}},null,null,-1)}),f.on("contentDomUnload",f.forceNextSelectionCheck,f),f.on("dataReady",function(){f.selectionChange(1)}),CKEDITOR.env.ie9Compat&&f.on("beforeDestroy",d,null,null,9),CKEDITOR.env.webkit&&f.on("setData",d),f.on("contentDomUnload",function(){f.unlockSelection()})}),CKEDITOR.on("instanceReady",function(a){var b=a.editor;if(CKEDITOR.env.webkit){b.on("selectionChange",function(){var a=b.editable(),c=d(a);c&&(c.getCustomData("ready")?e(a):c.setCustomData("ready",1))},null,null,-1),b.on("beforeSetMode",function(){e(b.editable())},null,null,-1);var c,f,a=function(){var a=b.editable();if(a&&(a=d(a))){var e=b.document.$.defaultView.getSelection();"Caret"==e.type&&e.anchorNode==a.$&&(f=1),c=a.getText(),a.setText(h(c))}},i=function(){var a=b.editable();a&&(a=d(a))&&(a.setText(c),f&&(b.document.$.defaultView.getSelection().setPosition(a.$,a.getLength()),f=0))};b.on("beforeUndoImage",a),b.on("afterUndoImage",i),b.on("beforeGetData",a,null,null,0),b.on("getData",i)}}),CKEDITOR.editor.prototype.selectionChange=function(a){(a?b:c).call(this)},CKEDITOR.editor.prototype.getSelection=function(a){return this._.savedSelection&&!a?this._.savedSelection:(a=this.editable())?new CKEDITOR.dom.selection(a):null},CKEDITOR.editor.prototype.lockSelection=function(a){return a=a||this.getSelection(1),a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&a.lock(),this._.savedSelection=a,!0):!1},CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return a.selectRanges([this]),a},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var q="function"!=typeof window.getSelection;CKEDITOR.dom.selection=function(a){var b=a instanceof CKEDITOR.dom.element;if(this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument(),this.root=a=b?a:this.document.getBody(),this.isLocked=0,this._={cache:{}},b=q?this.document.$.selection:this.document.getWindow().$.getSelection(),CKEDITOR.env.webkit)("None"==b.type&&this.document.getActive().equals(a)||"Caret"==b.type&&b.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&j(a,b);else if(CKEDITOR.env.gecko)b&&this.document.getActive().equals(a)&&b.anchorNode&&b.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT&&j(a,b,!0);else if(CKEDITOR.env.ie){var c;try{c=this.document.getActive()}catch(d){}q?"None"==b.type&&c&&c.equals(this.document.getDocumentElement())&&j(a,null,!0):((b=b&&b.anchorNode)&&(b=new CKEDITOR.dom.node(b)),c&&c.equals(this.document.getDocumentElement())&&b&&(a.equals(b)||a.contains(b))&&j(a,null,!0))}c=this.getNative();var e,f;if(c)if(c.getRangeAt)e=(f=c.rangeCount&&c.getRangeAt(0))&&new CKEDITOR.dom.node(f.commonAncestorContainer);else{try{f=c.createRange()}catch(h){}e=f&&CKEDITOR.dom.element.get(f.item&&f.item(0)||f.parentElement())}return e&&(a.equals(e)||a.contains(e))||(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var r={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=q?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:q?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT),"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT),c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,c=this.getNative();if(c&&c.rangeCount){if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&c.endOffset-c.startOffset==1&&r[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return a.type=b},getRanges:function(){var a=q?function(){function a(b){
return new CKEDITOR.dom.node(b).getIndex()}var b=function(b,c){b=b.duplicate(),b.collapse(c);var d=b.parentElement(),e=d.ownerDocument;if(!d.hasChildNodes())return{container:d,offset:0};for(var h,i,n,p,f=d.children,l=b.duplicate(),k=0,j=f.length-1,m=-1;j>=k;)if(m=Math.floor((k+j)/2),h=f[m],l.moveToElementText(h),n=l.compareEndPoints("StartToStart",b),n>0)j=m-1;else{if(!(0>n))return CKEDITOR.env.ie9Compat&&"BR"==h.tagName?(f=e.defaultView.getSelection(),{container:f[c?"anchorNode":"focusNode"],offset:f[c?"anchorOffset":"focusOffset"]}):{container:d,offset:a(h)};k=m+1}if(-1==m||m==f.length-1&&0>n){if(l.moveToElementText(d),l.setEndPoint("StartToStart",b),e=l.text.replace(/(\r\n|\r)/g,"\n").length,f=d.childNodes,!e)return h=f[f.length-1],h.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:f.length}:{container:h,offset:h.nodeValue.length};for(d=f.length;e>0&&d>0;)i=f[--d],i.nodeType==CKEDITOR.NODE_TEXT&&(p=i,e-=i.nodeValue.length);return{container:p,offset:-e}}if(l.collapse(n>0?!0:!1),l.setEndPoint(n>0?"StartToStart":"EndToStart",b),e=l.text.replace(/(\r\n|\r)/g,"\n").length,!e)return{container:d,offset:a(h)+(n>0?0:1)};for(;e>0;)try{i=h[n>0?"previousSibling":"nextSibling"],i.nodeType==CKEDITOR.NODE_TEXT&&(e-=i.nodeValue.length,p=i),h=i}catch(I){return{container:d,offset:a(h)}}return{container:p,offset:n>0?-e:p.nodeValue.length+e}};return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=c.item(e),g=f.parentNode,h=0,a=new CKEDITOR.dom.range(this.root);h<g.childNodes.length&&g.childNodes[h]!=f;h++);a.setStart(new CKEDITOR.dom.node(g),h),a.setEnd(new CKEDITOR.dom.node(g),h+1),d.push(a)}return d}return[]}}():function(){var b,a=[],c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root),b.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset),b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset),a.push(b)}return a};return function(b){var c=this._.cache;if(c.ranges&&!b)return c.ranges;if(c.ranges||(c.ranges=new CKEDITOR.dom.rangeList(a.call(this))),b)for(var d=c.ranges,e=0;e<d.length;e++){var f=d[e];if(f.getCommonAncestor().isReadOnly()&&d.splice(e,1),!f.collapsed){if(f.startContainer.isReadOnly())for(var h,b=f.startContainer;b&&!((h=b.type==CKEDITOR.NODE_ELEMENT)&&b.is("body")||!b.isReadOnly());)h&&"false"==b.getAttribute("contentEditable")&&f.setStartAfter(b),b=b.getParent();b=f.startContainer,h=f.endContainer;var i=f.startOffset,k=f.endOffset,j=f.clone();b&&b.type==CKEDITOR.NODE_TEXT&&(i>=b.getLength()?j.setStartAfter(b):j.setStartBefore(b)),h&&h.type==CKEDITOR.NODE_TEXT&&(k?j.setEndAfter(h):j.setEndBefore(h)),b=new CKEDITOR.dom.walker(j),b.evaluator=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&a.isReadOnly()){var b=f.clone();return f.setEndBefore(a),f.collapsed&&d.splice(e--,1),a.getPosition(j.endContainer)&CKEDITOR.POSITION_CONTAINS||(b.setStartAfter(a),b.collapsed||d.splice(e+1,0,b)),!0}return!1},b.next()}}return c.ranges}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);if(b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if(b=b.getChild(c.startOffset),b&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var c,d,a=b.getRanges()[0],e=2;!(!e||(c=a.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&r[c.getName()]&&(d=c));e--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=q?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges();this.isLocked=0,this.reset(),a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={}},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a),b.setEndAfter(a),this.selectRanges([b])},selectRanges:function(a){if(a.length)if(this.isLocked){var b=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(a),this.lock(),!b.equals(this.root)&&b.focus()}else{if(q){var c=CKEDITOR.dom.walker.whitespaces(!0),d=/\ufeff|\u00a0/,h={table:1,tbody:1,tr:1};a.length>1&&(b=a[a.length-1],a[0].setEnd(b.endContainer,b.endOffset));var i,k,j,b=a[0],a=b.collapsed,m=b.getEnclosedNode();if(m&&m.type==CKEDITOR.NODE_ELEMENT&&m.getName()in r&&(!m.is("a")||!m.getText()))try{return j=m.$.createControlRange(),j.addElement(m.$),void j.select()}catch(x){}(b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.getName()in h||b.endContainer.type==CKEDITOR.NODE_ELEMENT&&b.endContainer.getName()in h)&&b.shrink(CKEDITOR.NODE_ELEMENT,!0),j=b.createBookmark();var z,h=j.startNode;a||(z=j.endNode),j=b.document.$.body.createTextRange(),j.moveToElementText(h.$),j.moveStart("character",1),z?(d=b.document.$.body.createTextRange(),d.moveToElementText(z.$),j.setEndPoint("EndToEnd",d),j.moveEnd("character",-1)):(i=h.getNext(c),k=h.hasAscendant("pre"),i=!(i&&i.getText&&i.getText().match(d))&&(k||!h.hasPrevious()||h.getPrevious().is&&h.getPrevious().is("br")),k=b.document.createElement("span"),k.setHtml("&#65279;"),k.insertBefore(h),i&&b.document.createText("").insertBefore(h)),b.setStartBefore(h),h.remove(),a?(i?(j.moveStart("character",-1),j.select(),b.document.$.selection.clear()):j.select(),b.moveToPosition(k,CKEDITOR.POSITION_BEFORE_START),k.remove()):(b.setEndBefore(z),z.remove(),j.select())}else{if(z=this.getNative(),!z)return;for(CKEDITOR.env.opera&&(b=this.document.$.createRange(),b.selectNodeContents(this.root.$),z.addRange(b)),this.removeAllRanges(),d=0;d<a.length;d++)if(d<a.length-1&&(b=a[d],j=a[d+1],k=b.clone(),k.setStart(b.endContainer,b.endOffset),k.setEnd(j.startContainer,j.startOffset),!k.collapsed&&(k.shrink(CKEDITOR.NODE_ELEMENT,!0),i=k.getCommonAncestor(),k=k.getEnclosedNode(),i.isReadOnly()||k&&k.isReadOnly())))j.setStart(b.startContainer,b.startOffset),a.splice(d--,1);else{b=a[d],j=this.document.$.createRange(),i=b.startContainer,CKEDITOR.env.opera&&b.collapsed&&i.type==CKEDITOR.NODE_ELEMENT&&(k=i.getChild(b.startOffset-1),c=i.getChild(b.startOffset),(!k&&!c&&i.is(CKEDITOR.dtd.$removeEmpty)||k&&k.type==CKEDITOR.NODE_ELEMENT||c&&c.type==CKEDITOR.NODE_ELEMENT)&&(b.insertNode(this.document.createText("")),b.collapse(1))),b.collapsed&&CKEDITOR.env.webkit&&f(b)&&(i=this.root,e(i,!1),k=i.getDocument().createText(""),i.setCustomData("cke-fillingChar",k),b.insertNode(k),(i=k.getNext())&&!k.getPrevious()&&i.type==CKEDITOR.NODE_ELEMENT&&"br"==i.getName()?(e(this.root),b.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START)):b.moveToPosition(k,CKEDITOR.POSITION_AFTER_END)),j.setStart(b.startContainer.$,b.startOffset);try{j.setEnd(b.endContainer.$,b.endOffset)}catch(t){if(!(t.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw t;b.collapse(1),j.setEnd(b.endContainer.$,b.endOffset)}z.addRange(j)}}this.reset(),this.root.fire("selectionchange")}},createBookmarks:function(a){return this.getRanges().createBookmarks(a)},createBookmarks2:function(a){return this.getRanges().createBookmarks2(a)},selectBookmarks:function(a){for(var b=[],c=0;c<a.length;c++){var d=new CKEDITOR.dom.range(this.root);d.moveToBookmark(a[c]),b.push(d)}return this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges();return a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer)},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){var a=this.getNative();try{a&&a[q?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}(),CKEDITOR.editor.prototype.attachStyleStateChange=function(b,c){var a=this._.styleStateChangeCallbacks;a||(a=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(b){for(var c=0;c<a.length;c++){var e=a[c],h=e.style.checkActive(b.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;e.fn.call(this,h)}})),a.push({style:b,fn:c})},CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function b(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)}return c}function c(a){var c=a.document;if(a.collapsed)c=p(this,c),a.insertNode(c),a.moveToPosition(c,CKEDITOR.POSITION_BEFORE_END);else{var f,d=this.element,e=this._.definition,g=e.ignoreReadonly,h=g||e.includeReadonly;void 0==h&&(h=a.root.getCustomData("cke_includeReadonly"));var i=CKEDITOR.dtd[d]||(f=!0,CKEDITOR.dtd.span);a.enlarge(CKEDITOR.ENLARGE_INLINE,1),a.trim();var q,k=a.createBookmark(),j=k.startNode,l=k.endNode,m=j;if(!g){var o=a.getCommonAncestor(),g=b(j,o),o=b(l,o);g&&(m=g.getNextSourceNode(!0)),o&&(l=o)}for(m.getPosition(l)==CKEDITOR.POSITION_FOLLOWING&&(m=0);m;){if(g=!1,m.equals(l))m=null,g=!0;else{var s=m.type,t=s==CKEDITOR.NODE_ELEMENT?m.getName():null,o=t&&"false"==m.getAttribute("contentEditable"),u=t&&m.getAttribute("data-nostyle");if(t&&m.data("cke-bookmark")){m=m.getNextSourceNode(!0);continue}if(t&&(!i[t]||u||o&&!h||(m.getPosition(l)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)!=CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED||e.childRule&&!e.childRule(m)))g=!0;else{var v=m.getParent();if(!v||!(v.getDtd()||CKEDITOR.dtd.span)[d]&&!f||e.parentRule&&!e.parentRule(v))g=!0;else if(q||t&&CKEDITOR.dtd.$removeEmpty[t]&&(m.getPosition(l)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)!=CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED||(q=a.clone(),q.setStartBefore(m)),s==CKEDITOR.NODE_TEXT||o||s==CKEDITOR.NODE_ELEMENT&&!m.getChildCount()){for(var x,s=m;(g=!s.getNext(C))&&(x=s.getParent(),i[x.getName()])&&(x.getPosition(j)|CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_FOLLOWING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&(!e.childRule||e.childRule(x));)s=x;q.setEndAfter(s)}}m=m.getNextSourceNode(u||o&&!h)}if(g&&q&&!q.collapsed){for(var y,A,F,g=p(this,c),o=g.hasAttributes(),u=q.getCommonAncestor(),s={},t={},v={},z={};g&&u;){if(u.getName()==d){for(y in e.attributes)!z[y]&&(F=u.getAttribute(A))&&(g.getAttribute(y)==F?t[y]=1:z[y]=1);for(A in e.styles)!v[A]&&(F=u.getStyle(A))&&(g.getStyle(A)==F?s[A]=1:v[A]=1)}u=u.getParent()}for(y in t)g.removeAttribute(y);for(A in s)g.removeStyle(A);o&&!g.hasAttributes()&&(g=null),g?(q.extractContents().appendTo(g),r.call(this,g),q.insertNode(g),g.mergeSiblings(),CKEDITOR.env.ie||g.$.normalize()):(g=new CKEDITOR.dom.element("span"),q.extractContents().appendTo(g),q.insertNode(g),r.call(this,g),g.remove(!0)),q=null}}a.moveToBookmark(k),a.shrink(CKEDITOR.SHRINK_TEXT)}}function a(a){a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var b=a.createBookmark(),c=b.startNode;if(a.collapsed){for(var e,g,d=new CKEDITOR.dom.elementPath(c.getParent(),a.root),f=0;f<d.elements.length&&(g=d.elements[f])&&(g!=d.block&&g!=d.blockLimit);f++)if(this.checkElementRemovable(g)){var h;a.collapsed&&(a.checkBoundaryOfElement(g,CKEDITOR.END)||(h=a.checkBoundaryOfElement(g,CKEDITOR.START)))?(e=g,e.match=h?"start":"end"):(g.mergeSiblings(),g.getName()==this.element?q.call(this,g):l(g,o(this)[g.getName()]))}if(e){for(g=c,f=0;h=d.elements[f],!h.equals(e);f++)h.match||(h=h.clone(),h.append(g),g=h);g["start"==e.match?"insertBefore":"insertAfter"](e)}}else{var i=b.endNode,k=this,d=function(){for(var a=new CKEDITOR.dom.elementPath(c.getParent()),b=new CKEDITOR.dom.elementPath(i.getParent()),d=null,e=null,f=0;f<a.elements.length;f++){var g=a.elements[f];if(g==a.block||g==a.blockLimit)break;k.checkElementRemovable(g)&&(d=g)}for(f=0;f<b.elements.length&&(g=b.elements[f],g!=b.block&&g!=b.blockLimit);f++)k.checkElementRemovable(g)&&(e=g);e&&i.breakParent(e),d&&c.breakParent(d)};for(d(),e=c;!e.equals(i);)f=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)&&(e.getName()==this.element?q.call(this,e):l(e,o(this)[e.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(c)&&(d(),f=c.getNext())),e=f}a.moveToBookmark(b)}function f(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&v(a,this)}function d(a){var b=a.getCommonAncestor(!0,!0);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&a.removeStyle(e)}}function e(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e=a.document;d=c.getNextParagraph();)if(!d.isReadOnly()){var f=p(this,e,d);j(d,f)}a.moveToBookmark(b)}function h(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0,c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d;d=c.getNextParagraph();)if(this.checkElementRemovable(d))if(d.is("pre")){var e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div");e&&d.copyAttributes(e),j(d,e)}else q.call(this,d);a.moveToBookmark(b)}function j(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=!d&&e;if(d&&!e){if(e=b,(f=a.getBogus())&&f.remove(),f=a.getHtml(),f=k(f,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),f=f.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),f=f.replace(/([ \t\n\r]+|&nbsp;)/g," "),f=f.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var h=a.getDocument().createElement("div");h.append(e),e.$.outerHTML="<pre>"+f+"</pre>",e.copyAttributes(h.getFirst()),e=h.getFirst().remove()}else e.setHtml(f);b=e}else f?b=m(c?[a.getHtml()]:i(a),b):a.moveChildren(b);if(b.replace(a),d){var j,c=b;(j=c.getPrevious(y))&&j.is&&j.is("pre")&&(d=k(j.getHtml(),/\n$/,"")+"\n\n"+k(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="<pre>"+d+"</pre>":c.setHtml(d),j.remove())}else c&&g(b)}function i(a){a.getName();var b=[];return k(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"</pre>"+c+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)}),b}function k(a,b,c){var d="",e="",a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""});return d+a.replace(b,c)+e}function m(a,b){var c;a.length>1&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=k(e,/^[ \t]*\n/,""),e=k(e,/\n$/,""),e=k(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"<br>"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e),c.append(f)}else b.setHtml(e)}return c||b}function q(a){var f,b=this._.definition,c=b.attributes,b=b.styles,d=o(this)[a.getName()],e=CKEDITOR.tools.isEmpty(c)&&CKEDITOR.tools.isEmpty(b);for(f in c)("class"!=f&&!this._.definition.fullMatch||a.getAttribute(f)==F(f,c[f]))&&(e=a.hasAttribute(f),a.removeAttribute(f));for(var h in b)this._.definition.fullMatch&&a.getStyle(h)!=F(h,b[h],!0)||(e=e||!!a.getStyle(h),a.removeStyle(h));l(a,d,s[a.getName()]),e&&(this._.definition.alwaysRemoveElement?g(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?g(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function r(a){for(var b=o(this),c=a.getElementsByTag(this.element),d=c.count();--d>=0;)q.call(this,c.getItem(d));for(var e in b)if(e!=this.element)for(c=a.getElementsByTag(e),d=c.count()-1;d>=0;d--){var f=c.getItem(d);l(f,b[e])}}function l(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var f,e=b[d][0];if(f=a.getAttribute(e)){var h=b[d][1];(null===h||h.test&&h.test(f)||"string"==typeof h&&f==h)&&a.removeAttribute(e)}}c||g(a)}function g(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(y),d=a.getNext(y);c&&(c.type==CKEDITOR.NODE_TEXT||!c.isBlockBoundary({br:1}))&&a.append("br",1),d&&(d.type==CKEDITOR.NODE_TEXT||!d.isBlockBoundary({br:1}))&&a.append("br"),a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function p(a,b,c){var d;return d=a.element,"*"==d&&(d="span"),d=new CKEDITOR.dom.element(d,b),c&&c.copyAttributes(d),d=v(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function v(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);return c&&a.setAttribute("style",c),a}function u(a,b){for(var c in a)a[c]=a[c].replace(t,function(a,c){return b[c]})}function o(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var f,g,e=c[d];if("string"==typeof e?f=e.toLowerCase():(f=e.element?e.element.toLowerCase():a.element,g=e.attributes),e=b[f]||(b[f]={}),g){var h,e=e.attributes=e.attributes||[];for(h in g)e.push([h.toLowerCase(),g[h]])}}}return b}function F(a,b,c){var d=new CKEDITOR.dom.element("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function A(a,b){for(var f,c=a.document,d=a.getRanges(),e=b?this.removeFromRange:this.applyToRange,g=d.createIterator();f=g.getNextRange();)e.call(this,f);a.selectRanges(d),c.removeCustomData("doc_processing_style")}var s={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},x={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},z=/\s*(?:;\s*|$)/,t=/#\((.+?)\)/g,C=CKEDITOR.dom.walker.bookmark(0,1),y=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style),b&&(a=CKEDITOR.tools.clone(a),u(a.attributes,b),u(a.styles,b)),c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*",this.type=a.type||(s[c]?CKEDITOR.STYLE_BLOCK:x[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:a}},CKEDITOR.editor.prototype.applyStyle=function(a){A.call(a,this.getSelection())},CKEDITOR.editor.prototype.removeStyle=function(a){A.call(a,this.getSelection(),1)},CKEDITOR.style.prototype={apply:function(a){A.call(this,a.getSelection())},remove:function(a){A.call(this,a.getSelection(),1)},applyToRange:function(a){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?e:this.type==CKEDITOR.STYLE_OBJECT?f:null).call(this,a)},removeFromRange:function(b){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?a:this.type==CKEDITOR.STYLE_BLOCK?h:this.type==CKEDITOR.STYLE_OBJECT?d:null).call(this,b)},applyToObject:function(a){v(a,this)},checkActive:function(a){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var d,b=a.elements,c=0;c<b.length;c++)if(d=b[c],this.type!=CKEDITOR.STYLE_INLINE||d!=a.block&&d!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var e=d.getName();if(!("string"==typeof this.element?e==this.element:e in this.element))continue}if(this.checkElementRemovable(d,!0))return!0}}return!1},checkApplicable:function(a){switch(this.type){case CKEDITOR.STYLE_OBJECT:return a.contains(this.element)}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;if(f)for(var g in f)e++,d[g]=f[g];(g=CKEDITOR.style.getStyleText(c))&&(d.style||e++,d.style=g),d._length=e,c=c._AC=d}if(!c._length)return!0;for(var h in c)if("_length"!=h){if(e=a.getAttribute(h)||"","style"==h)a:{d=c[h],"string"==typeof d&&(d=CKEDITOR.tools.parseCssText(d)),"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0)),g=void 0;for(g in d)if(!(g in e)||e[g]!=d[g]&&"inherit"!=d[g]&&"inherit"!=e[g]){d=!1;break a}d=!0}else d=c[h]==e;if(d){if(!b)return!0}else if(b)return!1}if(b)return!0}return!1},checkElementRemovable:function(a,b){if(this.checkElementMatch(a,b))return!0;var c=o(this)[a.getName()];if(c){var d;if(!(c=c.attributes))return!0;for(var e=0;e<c.length;e++)if(d=c[e][0],d=a.getAttribute(d)){var f=c[e][1];if(null===f||"string"==typeof f&&d==f||f.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["<",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'="',e[f],'"');return(e=CKEDITOR.style.getStyleText(b))&&c.push(' style="',e,'"'),c.push(">",a||b.name,"</",d,">"),c.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(z,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(z,";");"inherit"==f?d+=g:c+=g}return c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0)),a._ST=c+d}}(),CKEDITOR.styleCommand=function(b,c){this.requiredContent=this.allowedContent=this.style=b,CKEDITOR.tools.extend(this,c,!0)},CKEDITOR.styleCommand.prototype.exec=function(b){b.focus(),this.state==CKEDITOR.TRISTATE_OFF?b.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&b.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(b,c,a){CKEDITOR.stylesSet.addExternal(b,c,""),CKEDITOR.stylesSet.load(b,a)},CKEDITOR.editor.prototype.getStylesSet=function(b){if(this._.stylesDefinitions)b(this._.stylesDefinitions);else{var c=this,a=c.config.stylesCombo_stylesSet||c.config.stylesSet;if(a===!1)b(null);else if(a instanceof Array)c._.stylesDefinitions=a,b(a);else{a||(a="default");var a=a.split(":"),f=a[0];CKEDITOR.stylesSet.addExternal(f,a[1]?a.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(f,function(a){c._.stylesDefinitions=a[f],b(c._.stylesDefinitions)})}}},CKEDITOR.dom.comment=function(b,c){"string"==typeof b&&(b=(c?c.$:document).createComment(b)),CKEDITOR.dom.domObject.call(this,b)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var c,b={};for(c in CKEDITOR.dtd.$blockLimit)c in CKEDITOR.dtd.$list||(b[c]=1);var a={};for(c in CKEDITOR.dtd.$block)c in CKEDITOR.dtd.$blockLimit||c in CKEDITOR.dtd.$empty||(a[c]=1);CKEDITOR.dom.elementPath=function(c,d){var e=null,h=null,j=[],d=d||c.getDocument().getBody(),i=c;do if(i.type==CKEDITOR.NODE_ELEMENT){if(j.push(i),!this.lastElement&&(this.lastElement=i,i.is(CKEDITOR.dtd.$object)))continue;var k=i.getName();if(!h&&(!e&&a[k]&&(e=i),b[k])){var m;if(m=!e){if(k="div"==k){a:{k=i.getChildren(),m=0;for(var q=k.count();q>m;m++){var r=k.getItem(m);if(r.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[r.getName()]){k=!0;break a}}k=!1}k=!k&&!i.equals(d)}m=k}m?e=i:h=i}if(i.equals(d))break}while(i=i.getParent());this.block=e,this.blockLimit=h,this.root=d,this.elements=j}}(),CKEDITOR.dom.elementPath.prototype={compare:function(b){var c=this.elements,b=b&&b.elements;if(!b||c.length!=b.length)return!1;for(var a=0;a<c.length;a++)if(!c[a].equals(b[a]))return!1;return!0},contains:function(b,c,a){var f;"string"==typeof b&&(f=function(a){return a.getName()==b}),b instanceof CKEDITOR.dom.element?f=function(a){return a.equals(b)}:CKEDITOR.tools.isArray(b)?f=function(a){return CKEDITOR.tools.indexOf(b,a.getName())>-1}:"function"==typeof b?f=b:"object"==typeof b&&(f=function(a){return a.getName()in b});var d=this.elements,e=d.length;for(c&&e--,a&&(d=Array.prototype.slice.call(d,0),d.reverse()),c=0;e>c;c++)if(f(d[c]))return d[c];return null},isContextFor:function(b){var c;return b in CKEDITOR.dtd.$block?(c=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!c.getDtd()[b]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(b,c){"string"==typeof b&&(b=(c?c.$:document).createTextNode(b)),this.$=b},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(b){this.$.nodeValue=b},split:function(b){var c=this.$.parentNode,a=c.childNodes.length,f=this.getLength(),d=this.getDocument(),e=new CKEDITOR.dom.text(this.$.splitText(b),d);return c.childNodes.length==a&&(b>=f?(e=d.createText(""),e.insertAfter(this)):(b=d.createText(""),b.insertAfter(e),b.remove())),e},substring:function(b,c){return"number"!=typeof c?this.$.nodeValue.substr(b):this.$.nodeValue.substring(b,c)}}),function(){function b(a,b,c){var e=a.serializable,h=b[c?"endContainer":"startContainer"],j=c?"endOffset":"startOffset",i=e?b.document.getById(a.startNode):a.startNode,a=e?b.document.getById(a.endNode):a.endNode;return h.equals(i.getPrevious())?(b.startOffset=b.startOffset-h.getLength()-a.getPrevious().getLength(),h=a.getNext()):h.equals(a.getPrevious())&&(b.startOffset=b.startOffset-h.getLength(),h=a.getNext()),h.equals(i.getParent())&&b[j]++,h.equals(a.getParent())&&b[j]++,b[c?"endContainer":"startContainer"]=h,b}CKEDITOR.dom.rangeList=function(a){return a instanceof CKEDITOR.dom.rangeList?a:(a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[],CKEDITOR.tools.extend(a,c))};var c={createIterator:function(){var e,a=this,b=CKEDITOR.dom.walker.bookmark(),c=[];return{getNextRange:function(h){e=void 0==e?0:e+1;var j=a[e];if(j&&a.length>1){if(!e)for(var i=a.length-1;i>=0;i--)c.unshift(a[i].createBookmark(!0));if(h)for(var k=0;a[e+k+1];){for(var m=j.document,h=0,i=m.getById(c[k].endNode),m=m.getById(c[k+1].startNode);;){if(i=i.getNextSourceNode(!1),m.equals(i))h=1;else if(b(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary())continue;break}if(!h)break;k++}for(j.moveToBookmark(c.shift());k--;)i=a[++e],i.moveToBookmark(c.shift()),j.setEnd(i.endContainer,i.endOffset)}return j}}},createBookmarks:function(a){for(var d,c=[],e=0;e<this.length;e++){c.push(d=this[e].createBookmark(a,!0));for(var h=e+1;h<this.length;h++)this[h]=b(d,this[h]),this[h]=b(d,this[h],!0)}return c},createBookmarks2:function(a){for(var b=[],c=0;c<this.length;c++)b.push(this[c].createBookmark2(a));return b},moveToBookmarks:function(a){for(var b=0;b<this.length;b++)this[b].moveToBookmark(a[b])}}}(),function(){function b(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function c(a){var c=CKEDITOR.skin["ua_"+a],d=CKEDITOR.env;if(c)for(var f,c=c.split(",").sort(function(a,b){return a>b?-1:1}),e=0;e<c.length;e++)if(f=c[e],d.ie&&(f.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==f)&&(f="ie"),d[f]){a+="_"+c[e];break}return CKEDITOR.getUrl(b()+a+".css")}function a(a,b){e[a]||(CKEDITOR.document.appendStyleSheet(c(a)),e[a]=1),b&&b()}function f(a){var b=a.getById(h);return b||(b=a.getHead().append("style"),b.setAttribute("id",h),b.setAttribute("type","text/css")),b}function d(a,b,c){var d,e,f;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var h=0;h<a.length;h++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){for(f=b[e][1],d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);a[h].$.sheet.addRule(b[e][0],f)}else{for(f=b,d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);CKEDITOR.env.ie?a[h].$.styleSheet.cssText=a[h].$.styleSheet.cssText+f:a[h].$.innerHTML=a[h].$.innerHTML+f}}var e={};CKEDITOR.skin={path:b,loadPart:function(c,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b()+"skin.js"),function(){a(c,d)}):a(c,d)},getPath:function(a){return CKEDITOR.getUrl(c(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase(),this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var f;return a&&(a=a.toLowerCase(),b&&(f=this.icons[a+"-rtl"]),f||(f=this.icons[a])),a=c||f&&f.path||"",d=d||f&&f.offset,e=e||f&&f.bgsize||"16px",a&&"background-image:url("+CKEDITOR.getUrl(a)+");background-position:0 "+d+"px;background-size:"+e+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=f(CKEDITOR.document);return(this.setUiColor=function(a){var c=CKEDITOR.skin.chameleon,e=[[i,a]];this.uiColor=a,d([b],c(this,"editor"),e),d(j,c(this,"panel"),e)}).call(this,a)}});var h="cke_ui_color",j=[],i=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor,a=function(a){if(a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!a.getById("cke_ui_color")){a=f(a),j.push(a);var c=b.getUiColor();c&&d([a],CKEDITOR.skin.chameleon(b,"panel"),[[i,c]])}};b.on("panelShow",a),b.on("menuShow",a),b.config.uiColor&&b.setUiColor(b.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var b=CKEDITOR.dom.element.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;border: 1px solid;border-color: red blue;"></div>',CKEDITOR.document);b.appendTo(CKEDITOR.document.getHead());try{CKEDITOR.env.hc=b.getComputedStyle("border-top-color")==b.getComputedStyle("border-right-color")}catch(c){CKEDITOR.env.hc=!1}b.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),b=CKEDITOR._.pending){delete CKEDITOR._.pending;for(var a=0;a<b.length;a++)CKEDITOR.editor.prototype.constructor.apply(b[a][0],b[a][1]),CKEDITOR.add(b[a][0])}}(),
CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=function(){var b=function(){return function(b,e){for(var a=b.match(/[^#]./g),c=0;3>c;c++){var d,f=a,h=c;d=parseInt(a[c],16),d=("0"+(0>e?0|d*(1+e):0|d+(255-d)*e).toString(16)).slice(-2),f[h]=d}return"#"+a.join("")}}(),c=function(){var b=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(c,a){return b.output({from:c,to:a})}}(),f={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(g,e){var a=g.uiColor,a={id:"."+g.id,defaultBorder:b(a,-.1),defaultGradient:c(b(a,.9),a),lightGradient:c(b(a,1),b(a,.7)),mediumGradient:c(b(a,.8),b(a,.5)),ckeButtonOn:c(b(a,.6),b(a,.7)),ckeResizer:b(a,-.4),ckeToolbarSeparator:b(a,.5),ckeColorauto:b(a,.8),dialogBody:b(a,.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:b(a,-.6),elementsPathBg:a,menubuttonIcon:b(a,.5),menubuttonIconHover:b(a,.3)};return f[e].output(a).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var i=function(b){this._||(this._={}),this._["default"]=this._.initValue=b["default"]||"",this._.required=b.required||!1;for(var a=[this._],d=1;d<arguments.length;d++)a.push(arguments[d]);return a.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,a),this._},r={build:function(b,a,d){return new CKEDITOR.ui.dialog.textInput(b,a,d)}},l={build:function(b,a,d){return new CKEDITOR.ui.dialog[a.type](b,a,d)}},n={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(b){this.setValue(this.getInitValue(),b)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(b,a){this._.domOnChangeRegistered||(b.on("load",function(){this.getInputElement().on("change",function(){b.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",a)}},!0),s=/^on([A-Z]\w+)/,p=function(b){for(var a in b)(s.test(a)||"title"==a||"type"==a)&&delete b[a];return b};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,a,d,e){if(!(4>arguments.length)){var c=i.call(this,a);c.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[],CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"div",null,{role:"presentation"},function(){var f=[],d=a.required?" cke_required":"";return"horizontal"!=a.labelLayout?f.push('<label class="cke_dialog_ui_labeled_label'+d+'" ',' id="'+c.labelId+'"',c.inputId?' for="'+c.inputId+'"':"",(a.labelStyle?' style="'+a.labelStyle+'"':"")+">",a.label,"</label>",'<div class="cke_dialog_ui_labeled_content"'+(a.controlStyle?' style="'+a.controlStyle+'"':"")+' role="presentation">',e.call(this,b,a),"</div>"):(d={type:"hbox",widths:a.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+d+'" id="'+c.labelId+'" for="'+c.inputId+'"'+(a.labelStyle?' style="'+a.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(a.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(a.controlStyle?' style="'+a.controlStyle+'"':"")+">"+e.call(this,b,a)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,d,f)),f.join("")})}},textInput:function(b,a,d){if(!(3>arguments.length)){i.call(this,a);var e=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",c={"class":"cke_dialog_ui_input_"+a.type,id:e,type:a.type};a.validate&&(this.validate=a.validate),a.maxLength&&(c.maxlength=a.maxLength),a.size&&(c.size=a.size),a.inputStyle&&(c.style=a.inputStyle);var f=this,h=!1;b.on("load",function(){f.getInputElement().on("keydown",function(a){13==a.data.getKeystroke()&&(h=!0)}),f.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&h&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),h=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var b=['<div class="cke_dialog_ui_input_',a.type,'" role="presentation"'];a.width&&b.push('style="width:'+a.width+'" '),b.push("><input "),c["aria-labelledby"]=this._.labelId,this._.required&&(c["aria-required"]=this._.required);for(var d in c)b.push(d+'="'+c[d]+'" ');return b.push(" /></div>"),b.join("")})}},textarea:function(b,a,d){if(!(3>arguments.length)){i.call(this,a);var e=this,c=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",f={};a.validate&&(this.validate=a.validate),f.rows=a.rows||5,f.cols=a.cols||20,f["class"]="cke_dialog_ui_input_textarea "+(a["class"]||""),"undefined"!=typeof a.inputStyle&&(f.style=a.inputStyle),a.dir&&(f.dir=a.dir),CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){f["aria-labelledby"]=this._.labelId,this._.required&&(f["aria-required"]=this._.required);var b,a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',c,'" '];for(b in f)a.push(b+'="'+CKEDITOR.tools.htmlEncode(f[b])+'" ');return a.push(">",CKEDITOR.tools.htmlEncode(e._["default"]),"</textarea></div>"),a.join("")})}},checkbox:function(b,a,d){if(!(3>arguments.length)){var e=i.call(this,a,{"default":!!a["default"]});a.validate&&(this.validate=a.validate),CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"span",null,null,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),d=[],h=CKEDITOR.tools.getNextId()+"_label",g={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":h};return p(c),a["default"]&&(g.checked="checked"),"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle),e.checkbox=new CKEDITOR.ui.dialog.uiElement(b,c,d,"input",null,g),d.push(' <label id="',h,'" for="',g.id,'"'+(a.labelStyle?' style="'+a.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(a.label),"</label>"),d.join("")})}},radio:function(b,a,d){if(!(3>arguments.length)){i.call(this,a),this._["default"]||(this._["default"]=this._.initValue=a.items[0][1]),a.validate&&(this.validate=a.valdiate);var e=[],c=this;CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){for(var d=[],h=[],g=a.id?a.id+"_radio":CKEDITOR.tools.getNextId()+"_radio",k=0;k<a.items.length;k++){var j=a.items[k],i=void 0!==j[2]?j[2]:j[0],l=void 0!==j[1]?j[1]:j[0],m=CKEDITOR.tools.getNextId()+"_radio_input",n=m+"_label",m=CKEDITOR.tools.extend({},a,{id:m,title:null,type:null},!0),i=CKEDITOR.tools.extend({},m,{title:i},!0),o={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:l,"aria-labelledby":n},q=[];c._["default"]==l&&(o.checked="checked"),p(m),p(i),"undefined"!=typeof m.inputStyle&&(m.style=m.inputStyle),e.push(new CKEDITOR.ui.dialog.uiElement(b,m,q,"input",null,o)),q.push(" "),new CKEDITOR.ui.dialog.uiElement(b,i,q,"label",null,{id:n,"for":o.id},j[0]),d.push(q.join(""))}return new CKEDITOR.ui.dialog.hbox(b,e,d,h),h.join("")}),this._.children=e}},button:function(b,a,d){if(arguments.length){"function"==typeof a&&(a=a(b.getParentEditor())),i.call(this,a,{disabled:a.disabled||!1}),CKEDITOR.event.implementOn(this);var e=this;b.on("load",function(){var a=this.getElement();!function(){a.on("click",function(a){e.click(),a.data.preventDefault()}),a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(e.click(),a.data.preventDefault())})}(),a.unselectable()},this);var c=CKEDITOR.tools.extend({},a);delete c.style;var f=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"a",null,{style:a.style,href:"javascript:void(0)",title:a.label,hidefocus:"true","class":a["class"],role:"button","aria-labelledby":f},'<span id="'+f+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(a.label)+"</span>")}},select:function(b,a,d){if(!(3>arguments.length)){var e=i.call(this,a);a.validate&&(this.validate=a.validate),e.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),d=[],h=[],g={id:e.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};d.push('<div class="cke_dialog_ui_input_',a.type,'" role="presentation"'),a.width&&d.push('style="width:'+a.width+'" '),d.push(">"),void 0!=a.size&&(g.size=a.size),void 0!=a.multiple&&(g.multiple=a.multiple),p(c);for(var j,k=0;k<a.items.length&&(j=a.items[k]);k++)h.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==j[1]?j[1]:j[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(j[0]));return"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle),e.select=new CKEDITOR.ui.dialog.uiElement(b,c,d,"select",null,g,h.join("")),d.push("</div>"),d.join("")})}},file:function(b,a,d){if(!(3>arguments.length)){void 0===a["default"]&&(a["default"]="");var e=CKEDITOR.tools.extend(i.call(this,a),{definition:a,buttons:[]});a.validate&&(this.validate=a.validate),b.on("load",function(){CKEDITOR.document.getById(e.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){e.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var b=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',e.frameId,'" title="',a.label,'" src="javascript:void('];return b.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),b.push(')"></iframe>'),b.join("")})}},fileButton:function(b,a,d){if(!(3>arguments.length)){i.call(this,a);var e=this;a.validate&&(this.validate=a.validate);var c=CKEDITOR.tools.extend({},a),f=c.onClick;c.className=(c.className?c.className+" ":"")+"cke_dialog_ui_button",c.onClick=function(c){var d=a["for"];f&&f.call(this,c)===!1||(b.getContentElement(d[0],d[1]).submit(),this.disable())},b.on("load",function(){b.getContentElement(a["for"][0],a["for"][1])._.buttons.push(e)}),CKEDITOR.ui.dialog.button.call(this,b,c,d)}},html:function(){var b=/^\s*<[\w:]+\s+([^>]*)?>/,a=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,d=/\/$/;return function(e,c,f){if(!(3>arguments.length)){var h=[],g=c.html;"<"!=g.charAt(0)&&(g="<span>"+g+"</span>");var k=c.focus;if(k){var j=this.focus;this.focus=function(){("function"==typeof k?k:j).call(this),this.fire("focus")},c.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,e,c,h,"span",null,null,""),h=h.join("").match(b),g=g.match(a)||["","",""],d.test(g[1])&&(g[1]=g[1].slice(0,-1),g[2]="/"+g[2]),f.push([g[1]," ",h[1]||"",g[2]].join(""))}}}(),fieldset:function(b,a,d,e,c){var f=c.label;this._={children:a},CKEDITOR.ui.dialog.uiElement.call(this,b,c,e,"fieldset",null,null,function(){var a=[];f&&a.push("<legend"+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+f+"</legend>");for(var b=0;b<d.length;b++)a.push(d[b]);return a.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(b){var a=CKEDITOR.document.getById(this._.labelId);return 1>a.getChildCount()?new CKEDITOR.dom.text(b,CKEDITOR.document).appendTo(a):a.getChild(0).$.nodeValue=b,this},getLabel:function(){var b=CKEDITOR.document.getById(this._.labelId);return!b||1>b.getChildCount()?"":b.getChild(0).getText()},eventProcessors:o},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var b=this.getElement();b&&b.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(b,a){this.on("click",function(){a.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&a.$.focus()},0)},select:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&(a.$.focus(),a.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(b){return!b&&(b=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(b,a,d){var e=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),c=this.getInputElement().$;return e.$.text=b,e.$.value=void 0===a||null===a?b:a,void 0===d||null===d?CKEDITOR.env.ie?c.add(e.$):c.add(e.$,null):c.add(e.$,d),this},remove:function(b){return this.getInputElement().$.remove(b),this},clear:function(){for(var b=this.getInputElement().$;0<b.length;)b.remove(0);return this},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(b,a){this.getInputElement().$.checked=b,!a&&this.fire("change",{value:b})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(b,a){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(b.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",a),null)}},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(b,a){for(var e,d=this._.children,c=0;c<d.length&&(e=d[c]);c++)e.getElement().$.checked=e.getValue()==b;!a&&this.fire("change",{value:b})},getValue:function(){for(var b=this._.children,a=0;a<b.length;a++)if(b[a].getElement().$.checked)return b[a].getValue();return null},accessKeyUp:function(){var a,b=this._.children;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked)return void b[a].getElement().focus();b[0].getElement().focus()},eventProcessors:{onChange:function(b,a){return CKEDITOR.env.ie?(b.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",a),null):o.onChange.apply(this,arguments)}},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,n,{getInputElement:function(){var b=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<b.$.forms.length?new CKEDITOR.dom.element(b.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(b){var d,c,a=/^on([A-Z]\w+)/,e=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(c in b)(d=c.match(a))&&(this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,b[c]):e(this,this._.dialog,d[1].toLowerCase(),b[c]));return this},reset:function(){function b(){d.$.open();var b="";e.size&&(b=e.size-(CKEDITOR.env.ie?7:0));var i=a.frameId+"_input";for(d.$.write(['<html dir="'+g+'" lang="'+k+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+g+'" lang="'+k+'" action="',CKEDITOR.tools.htmlEncode(e.action),'"><label id="',a.labelId,'" for="',i,'" style="display:none">',CKEDITOR.tools.htmlEncode(e.label),'</label><input id="',i,'" aria-labelledby="',a.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(e.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(b>0?b:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+f+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+h+")}","</script>"].join("")),d.$.close(),b=0;b<c.length;b++)c[b].enable()}var a=this._,d=CKEDITOR.document.getById(a.frameId).getFrameDocument(),e=a.definition,c=a.buttons,f=this.formLoadedNumber,h=this.formUnloadNumber,g=a.dialog._.editor.lang.dir,k=a.dialog._.editor.langCode;f||(f=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),h=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(f),CKEDITOR.tools.removeFunction(h)})),CKEDITOR.env.gecko?setTimeout(b,500):b()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(b,a){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",a)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",r),CKEDITOR.dialog.addUIElement("password",r),CKEDITOR.dialog.addUIElement("textarea",l),CKEDITOR.dialog.addUIElement("checkbox",l),CKEDITOR.dialog.addUIElement("radio",l),CKEDITOR.dialog.addUIElement("button",l),CKEDITOR.dialog.addUIElement("select",l),CKEDITOR.dialog.addUIElement("file",l),CKEDITOR.dialog.addUIElement("fileButton",l),CKEDITOR.dialog.addUIElement("html",l),CKEDITOR.dialog.addUIElement("fieldset",{build:function(b,a,d){for(var c,e=a.children,f=[],h=[],g=0;g<e.length&&(c=e[g]);g++){var i=[];f.push(i),h.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(b,c,i))}return new CKEDITOR.ui.dialog[a.type](b,h,f,d,a)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function p(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function u(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;b+a>c;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function q(a,b){for(var c=a.$.getElementsByTagName("input"),d=0,e=c.length;e>d;d++){var g=new CKEDITOR.dom.element(c[d]);"text"==g.getAttribute("type").toLowerCase()&&(b?(g.setAttribute("value",g.getCustomData("fake_value")||""),g.removeCustomData("fake_value")):(g.setCustomData("fake_value",g.getAttribute("value")),g.setAttribute("value","")))}}function P(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0)),a||(this.select?this.select():this.focus()),b&&alert(b),this.fire("validated",{valid:a,msg:b})}function Q(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function R(a){var a=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",S).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),b=a.getChild([0,0,0,0,0]),c=b.getChild(0),d=b.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.ie6Compat){var e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(b.getParent())}return c.unselectable(),d.unselectable(),{element:a,parts:{dialog:a.getChild(0),title:c,close:d,tabs:b.getChild(2),contents:b.getChild([3,0,0,0]),footer:b.getChild([3,0,1,0])}}}function H(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function T(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();c.on("resize",b),a.on("hide",function(){c.removeListener("resize",b)})}function I(a,b){this._={dialog:a},CKEDITOR.tools.extend(this,b)}function U(a){function b(b){var c=a.getSize(),h=CKEDITOR.document.getWindow().getViewPaneSize(),o=b.data.$.screenX,i=b.data.$.screenY,n=o-d.x,l=i-d.y;d={x:o,y:i},e.x+=n,e.y+=l,a.move(e.x+k[3]<f?-k[3]:e.x-k[1]>h.width-c.width-f?h.width-c.width+("rtl"==g.lang.dir?0:k[1]):e.x,e.y+k[0]<f?-k[0]:e.y-k[2]>h.height-c.height-f?h.height-c.height+k[2]:e.y,1),b.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mousemove",b),CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.env.ie6Compat){var a=r.getChild(0).getFrameDocument();a.removeListener("mousemove",b),a.removeListener("mouseup",c)}}var d=null,e=null;a.getElement().getFirst();var g=a.getParentEditor(),f=g.config.dialog_magnetDistance,k=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof f&&(f=20),a.parts.title.on("mousedown",function(f){if(d={x:f.data.$.screenX,y:f.data.$.screenY},CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),e=a.getPosition(),CKEDITOR.env.ie6Compat){var j=r.getChild(0).getFrameDocument();j.on("mousemove",b),j.on("mouseup",c)}f.data.preventDefault()},a)}function V(a){function d(e){var d="rtl"==k.lang.dir,i=o.width,D=o.height,E=i+(e.data.$.screenX-b)*(d?-1:1)*(a._.moved?1:2),n=D+(e.data.$.screenY-c)*(a._.moved?1:2),x=a._.element.getFirst(),x=d&&x.getComputedStyle("right"),y=a.getPosition();y.y+n>h.height&&(n=h.height-y.y),(d?x:y.x)+E>h.width&&(E=h.width-(d?x:y.x)),(f==CKEDITOR.DIALOG_RESIZE_WIDTH||f==CKEDITOR.DIALOG_RESIZE_BOTH)&&(i=Math.max(g.minWidth||0,E-m)),(f==CKEDITOR.DIALOG_RESIZE_HEIGHT||f==CKEDITOR.DIALOG_RESIZE_BOTH)&&(D=Math.max(g.minHeight||0,n-j)),a.resize(i,D),a._.moved||a.layout(),e.data.preventDefault()}function e(){if(CKEDITOR.document.removeListener("mouseup",e),CKEDITOR.document.removeListener("mousemove",d),i&&(i.remove(),i=null),CKEDITOR.env.ie6Compat){var a=r.getChild(0).getFrameDocument();a.removeListener("mouseup",e),a.removeListener("mousemove",d)}}var b,c,g=a.definition,f=g.resizable;if(f!=CKEDITOR.DIALOG_RESIZE_NONE){var m,j,h,o,i,k=a.getParentEditor(),n=CKEDITOR.tools.addFunction(function(f){o=a.getSize();var g=a.parts.contents;g.$.getElementsByTagName("iframe").length&&(i=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),g.append(i)),j=o.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),m=o.width-a.parts.contents.getSize("width",1),b=f.screenX,c=f.screenY,h=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",d),CKEDITOR.document.on("mouseup",e),CKEDITOR.env.ie6Compat&&(g=r.getChild(0).getFrameDocument(),g.on("mousemove",d),g.on("mouseup",e)),f.preventDefault&&f.preventDefault()});a.on("load",function(){var b="";f==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":f==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical"),b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+k.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(k.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event )">'+("ltr"==k.lang.dir?"":"")+"</div>"),a.parts.footer.append(b,1)}),k.on("destroy",function(){CKEDITOR.tools.removeFunction(n)})}}function F(a){a.data.preventDefault(1)}function J(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,g=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,e,g),f=w[c];f?f.show():(g=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",g,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(d="<html><body style=\\'background-color:"+d+";\\'></body></html>",g.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),g.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),g.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),g.push("</div>"),f=CKEDITOR.dom.element.createFromHtml(g.join("")),f.setOpacity(void 0!=e?e:.5),f.on("keydown",F),f.on("keypress",F),f.on("keyup",F),f.appendTo(CKEDITOR.document.getBody()),w[c]=f),a.focusManager.add(f),r=f;var a=function(){var a=b.getViewPaneSize();f.setStyles({width:a.width+"px",height:a.height+"px"})},k=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;if(f.setStyles({left:a.x+"px",top:a.y+"px"}),c)do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)};if(G=a,b.on("resize",a),a(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&f.focus(),CKEDITOR.env.ie6Compat){var m=function(){k(),arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){m.prevScrollHandler=window.onscroll||function(){},window.onscroll=m},0),k()}}function K(a){r&&(a.focusManager.remove(r),a=CKEDITOR.document.getWindow(),r.hide(),a.removeListener("resize",G),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),G=null)}var s=CKEDITOR.tools.cssLength,S='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(a,b){function c(){var a=l._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;b>c;c++)a[c].focusIndex=c}function d(a){var b=l._.focusList,a=a||0;if(!(1>b.length)){var c=l._.currentFocusIndex;try{b[c].getInputElement().$.blur()}catch(f){}for(var d=c=(c+a+b.length)%b.length;a&&!b[d].isFocusable()&&(d=(d+a+b.length)%b.length,!(d==c)););b[d].focus(),"text"==b[d].type&&b[d].select()}}function e(b){if(l==CKEDITOR.dialog._.currentTop){var c=b.data.getKeystroke(),f="rtl"==a.lang.dir;if(o=i=0,9==c||c==CKEDITOR.SHIFT+9)c=c==CKEDITOR.SHIFT+9,l._.tabBarMode?(c=c?p.call(l):u.call(l),l.selectPage(c),l._.tabs[c][0].focus()):d(c?-1:1),o=1;else if(c==CKEDITOR.ALT+121&&!l._.tabBarMode&&1<l.getPageCount())l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),o=1;else if(37!=c&&39!=c||!l._.tabBarMode)if(13!=c&&32!=c||!l._.tabBarMode)if(13==c)c=b.data.getTarget(),c.is("a","button","select","textarea")||c.is("input")&&"button"==c.$.type||((c=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(c.click,0,c),o=1),i=1;else{if(27!=c)return;(c=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(c.click,0,c):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),i=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1),o=1;else c=c==(f?39:37)?p.call(l):u.call(l),l.selectPage(c),l._.tabs[c][0].focus(),o=1;g(b)}}function g(a){o?a.data.preventDefault(1):i&&a.data.stopPropagation()}var o,i,f=CKEDITOR.dialog._.dialogDefinitions[b],k=CKEDITOR.tools.clone(W),m=a.config.dialog_buttonsOrder||"OS",j=a.lang.dir,h={};if(("OS"==m&&CKEDITOR.env.mac||"rtl"==m&&"ltr"==j||"ltr"==m&&"rtl"==j)&&k.buttons.reverse(),f=CKEDITOR.tools.extend(f(a),k),
f=CKEDITOR.tools.clone(f),f=new L(this,f),k=R(a),this._={editor:a,element:k.element,name:b,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=k.parts,CKEDITOR.tools.setTimeout(function(){a.fire("ariaWidget",this.parts.contents)},0,this),k={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},k["rtl"==j?"right":"left"]=0,this.parts.dialog.setStyles(k),CKEDITOR.event.call(this),this.definition=f=CKEDITOR.fire("dialogDefinition",{name:b,definition:f},a).definition,!("removeDialogTabs"in a._)&&a.config.removeDialogTabs){for(k=a.config.removeDialogTabs.split(";"),j=0;j<k.length;j++)if(m=k[j].split(":"),2==m.length){var n=m[0];h[n]||(h[n]=[]),h[n].push(m[1])}a._.removeDialogTabs=h}if(a._.removeDialogTabs&&(h=a._.removeDialogTabs[b]))for(j=0;j<h.length;j++)f.removeContents(h[j]);f.onLoad&&this.on("load",f.onLoad),f.onShow&&this.on("show",f.onShow),f.onHide&&this.on("hide",f.onHide),f.onOk&&this.on("ok",function(b){a.fire("saveSnapshot"),setTimeout(function(){a.fire("saveSnapshot")},0),!1===f.onOk.call(this,b)&&(b.data.hide=!1)}),f.onCancel&&this.on("cancel",function(a){!1===f.onCancel.call(this,a)&&(a.data.hide=!1)});var l=this,C=function(a){var d,b=l._.contents,c=!1;for(d in b)for(var f in b[d])if(c=a.call(this,b[d][f]))return};this.on("ok",function(a){C(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;return d&&(a.data.hide=!1,a.stop()),P.call(b,!d,"string"==typeof c?c:void 0),d}})},this,null,0),this.on("cancel",function(b){C(function(c){return c.isChanged()?(confirm(a.lang.common.confirmCancel)||(b.data.hide=!1),!0):void 0})},this,null,0),this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),a.data.preventDefault()},this),this.changeFocus=d;var v=this._.element;for(a.focusManager.add(v,1),this.on("show",function(){v.on("keydown",e,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&v.on("keypress",g,this)}),this.on("hide",function(){v.removeListener("keydown",e),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&v.removeListener("keypress",g),C(function(a){Q.apply(a)})}),this.on("iframeAdded",function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",e,this,null,0)}),this.on("show",function(){if(c(),a.config.dialog_startupFocusTab&&1<l._.pageCount)l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus();else if(!this._.hasFocus)if(this._.currentFocusIndex=-1,f.onFocus){var b=f.onFocus.call(this);b&&b.focus()}else d(1)},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove(),b.appendTo(a)},this),U(this),V(this),new CKEDITOR.dom.text(f.title,CKEDITOR.document).appendTo(this.parts.title),j=0;j<f.contents.length;j++)(h=f.contents[j])&&this.addPage(h);for(this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1)),a.data.preventDefault())},this),j=[],h=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:f.buttons},j).getChild(),this.parts.footer.setHtml(j.join("")),j=0;j<h.length;j++)this._.buttons[h[j].id]=h[j]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,g="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%"),g&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},g||(g=CKEDITOR.document.getWindow().getScrollPosition(),a+=g.x,b+=g.y),e&&(g=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-g.width-a),b={top:(b>0?b:0)+"px"},b[e?"right":"left"]=(a>0?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;if(a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody()),CKEDITOR.env.gecko&&10900>CKEDITOR.env.version){var c=this.parts.dialog;c.setStyle("position","absolute"),setTimeout(function(){c.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,J(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),a.on("keydown",M),a.on(CKEDITOR.env.opera?"keypress":"keyup",N),this._.hasFocus=!1,CKEDITOR.tools.setTimeout(function(){this.layout(),T(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(e>0?e:0)>c.height||b.width+(d>0?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var a=this._.element;for(a.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),X(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else K(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,a.removeListener("keydown",M),a.removeListener(CKEDITOR.env.opera?"keypress":"keyup",N);var c=this._.editor;c.focus(),setTimeout(function(){c.focusManager.unlock()},0)}delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()})}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},g=d.getChild(),f=0;d=g.shift();)!d.notAllowed&&"hbox"!=d.type&&"vbox"!=d.type&&f++,e[d.id]=d,"function"==typeof d.getChild&&g.push.apply(g,d.getChild());f||(a.hidden=!0),b=CKEDITOR.dom.element.createFromHtml(b.join("")),b.setAttribute("role","tabpanel"),d=CKEDITOR.env,e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber(),c=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style="display:none"':"",' id="',e,'"',d.gecko&&10900<=d.version&&!d.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join("")),b.setAttribute("aria-labelledby",e),this._.tabs[a.id]=[c,b],this._.tabIdList.push(a.id),!a.hidden&&this._.pageCount++,this._.lastTab=c,this.updateStyle(),b.setAttribute("name",a.id),b.appendTo(this.parts.contents),c.unselectable(),this.parts.tabs.append(c),a.accessKey&&(O(this,this,"CTRL+"+a.accessKey,Y,Z),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!0!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var c=this._.tabs[b][0],d=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),d.hide()),d.setAttribute("aria-hidden",b!=a)}var e=this._.tabs[a];e[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(q(e[1]),e[1].show(),setTimeout(function(){q(e[1],1)},0)):e[1].show(),this._.currentTabId=a,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(p.call(this)),b.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&(a.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new H(this,a,b));else{this._.focusList.splice(b,0,new H(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){return a=a.config.removeDialogTabs,!(a&&a.match(RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,c){return c=c||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog,!1!==a.fire("ok",{hide:!0}).hide&&a.hide()}},c,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,c){return c=c||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog,!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},c,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var W={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},z=function(a,b,c){for(var e,d=0;e=a[d];d++)if(e.id==b||c&&e[c]&&(e=z(e[c],b,c)))return e;return null},A=function(a,b,c,d,e){if(c){for(var f,g=0;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(d&&f[d]&&(f=A(f[d],b,c,d,!0)))return f}if(e)return null}return a.push(b),b},B=function(a,b,c){for(var e,d=0;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=B(e[c],b,c)))return e}return null},L=function(a,b){this.dialog=a;for(var e,c=b.contents,d=0;e=c[d];d++)c[d]=e&&new I(a,e);CKEDITOR.tools.extend(this,b)};L.prototype={getContents:function(a){return z(this.contents,a)},getButton:function(a){return z(this.buttons,a)},addContents:function(a,b){return A(this.contents,a,b)},addButton:function(a,b){return A(this.buttons,a,b)},removeContents:function(a){B(this.contents,a)},removeButton:function(a){B(this.buttons,a)}},I.prototype={get:function(a){return z(this.elements,a,"children")},add:function(a,b){return A(this.elements,a,b,"children")},remove:function(a){B(this.elements,a,"children")}};var G,r,w={},t={},M=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=t[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},N=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=t[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault()))},O=function(a,b,c,d,e){(t[c]||(t[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},X=function(a){for(var b in t){for(var c=t[b],d=c.length-1;d>=0;d--)(c[d].dialog==a||c[d].uiElement==a)&&c.splice(d,1);0===c.length&&delete t[b]}},Z=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},Y=function(){};!function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,g,f){if(!(4>arguments.length)){var k=(d.call?d(b):d)||"div",m=["<",k," "],j=(e&&e.call?e(b):e)||{},h=(g&&g.call?g(b):g)||{},o=(f&&f.call?f.call(this,a,b):f)||"",i=this.domId=h.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=b.id,b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(j.display="none",this.notAllowed=!0),h.id=i;var n={};b.type&&(n["cke_dialog_ui_"+b.type]=1),b.className&&(n[b.className]=1),b.disabled&&(n.cke_disabled=1);for(var l=h["class"]&&h["class"].split?h["class"].split(" "):[],i=0;i<l.length;i++)l[i]&&(n[l[i]]=1);l=[];for(i in n)l.push(i);h["class"]=l.join(" "),b.title&&(h.title=b.title),n=(b.style||"").split(";"),b.align&&(l=b.align,j["margin-left"]="left"==l?0:"auto",j["margin-right"]="right"==l?0:"auto");for(i in j)n.push(i+":"+j[i]);for(b.hidden&&n.push("display:none"),i=n.length-1;i>=0;i--)""===n[i]&&n.splice(i,1);0<n.length&&(h.style=(h.style?h.style+"; ":"")+n.join("; "));for(i in h)m.push(i+'="'+CKEDITOR.tools.htmlEncode(h[i])+'" ');m.push(">",o,"</",k,">"),c.push(m.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}})),"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(b),this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&O(this,a,"CTRL+"+b.accessKey);var p=this;a.on("load",function(){var b=p.getInputElement();if(b){var c=p.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1,a._.hasFocus=!0,p.fire("focus"),c&&this.addClass(c)}),b.on("blur",function(){p.fire("blur"),c&&this.removeClass(c)})}}),this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=p.focusIndex})),CKEDITOR.tools.extend(this,b)}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});var m,g=this._.children=b,f=e&&e.widths||null,k=e&&e.height||null,j={role:"presentation"};e&&e.align&&(j.align=e.align),CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},j,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(m=0;m<c.length;m++){var b="cke_dialog_ui_hbox_child",d=[];0===m&&(b="cke_dialog_ui_hbox_first"),m==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),f?f[m]&&d.push("width:"+s(f[m])):d.push("width:"+Math.floor(100/c.length)+"%"),k&&d.push("height:"+s(k)),e&&void 0!=e.padding&&d.push("padding:"+s(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[m].align&&d.push("text-align:"+g[m].align),0<d.length&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[m],"</td>")}return a.push("</tr></tbody>"),a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});var g=this._.children=b,f=e&&e.width||null,k=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+s(f||"100%"),";"),CKEDITOR.env.webkit&&b.push("float:none;"),b.push('"'),b.push('align="',CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var h=[];b.push('<tr><td role="presentation" '),f&&h.push("width:"+s(f||"100%")),k?h.push("height:"+s(k[d])):e&&e.expand&&h.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!=e.padding&&h.push("padding:"+s(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[d].align&&h.push("text-align:"+g[d].align),0<h.length&&b.push('style="',h.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););return a?(a=a.getAttribute("name"),this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var c,e,b=/^on([A-Z]\w+)/,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(e in a)(c=e.match(b))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){return 1>arguments.length?this._.children.concat():(a.splice||(a=[a]),2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var a={build:function(a,c,d){for(var g,e=c.children,f=[],k=[],m=0;m<e.length&&(g=e[m]);m++){var j=[];f.push(j),k.push(CKEDITOR.dialog._.uiElementBuilders[g.type].build(a,g,j))}return new CKEDITOR.ui.dialog[c.type](a,k,f,d,c)}};CKEDITOR.dialog.addUIElement("hbox",a),CKEDITOR.dialog.addUIElement("vbox",a)}(),CKEDITOR.dialogCommand=function(a,b){this.dialogName=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.dialogCommand.prototype={exec:function(a){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){a.openDialog(this.dialogName)},0,this):a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,g=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var g,b=this&&this.getValue?this.getValue():a[0],c=void 0,d=CKEDITOR.VALIDATE_AND,e=[];for(g=0;g<a.length&&"function"==typeof a[g];g++)e.push(a[g]);g<a.length&&"string"==typeof a[g]&&(c=a[g],g++),g<a.length&&"number"==typeof a[g]&&(d=a[g]);var i=d==CKEDITOR.VALIDATE_AND?!0:!1;for(g=0;g<e.length;g++)i=d==CKEDITOR.VALIDATE_AND?i&&e[g](b):i||e[g](b);return i?!0:c}},regex:function(a,b){return function(c){return c=this&&this.getValue?this.getValue():c,a.test(c)?!0:b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return g.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in w)w[c].remove();w={}}var d,a=a.editor._.storedDialogs;for(d in a)a[d].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];if(null===CKEDITOR.dialog._.currentTop&&J(this),"function"==typeof d)c=this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw K(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed"),this.openDialog(a,b)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),c}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(p){p.on("contentDom",function(){var u=p.editable();u.attachListener(u,"dblclick",function(q){return p.readOnly?!1:(q={element:q.data.getTarget()},p.fire("doubleclick",q),q.dialog&&p.openDialog(q.dialog),1)})})}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1},b.canUndo=!1,b.readOnly=1,a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1},init:function(b){var c=this;b.addCommand("a11yHelp",{exec:function(){var a=b.langCode,a=c.availableLangs[a]?a:c.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+a+".js"),function(){b.lang.a11yhelp=c.langEntries[a],b.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),b.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js")}})}(),CKEDITOR.plugins.add("basicstyles",{init:function(c){var e=0,d=function(g,d,b,a){if(a){var a=new CKEDITOR.style(a),f=h[b];f.unshift(a),c.attachStyleStateChange(a,function(a){!c.readOnly&&c.getCommand(b).setState(a)}),c.addCommand(b,new CKEDITOR.styleCommand(a,{contentForms:f})),c.ui.addButton&&c.ui.addButton(g,{label:d,command:b,toolbar:"basicstyles,"+(e+=10)})}},h={bold:["strong","b",["span",function(a){return a=a.styles["font-weight"],"bold"==a||+a>=700}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},b=c.config,a=c.lang.basicstyles;d("Bold",a.bold,"bold",b.coreStyles_bold),d("Italic",a.italic,"italic",b.coreStyles_italic),d("Underline",a.underline,"underline",b.coreStyles_underline),d("Strike",a.strike,"strike",b.coreStyles_strike),d("Subscript",a.subscript,"subscript",b.coreStyles_subscript),d("Superscript",a.superscript,"superscript",b.coreStyles_superscript),c.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var k={exec:function(g){var a=g.getCommand("blockquote").state,i=g.getSelection(),c=i&&i.getRanges(!0)[0];if(c){var h=i.createBookmarks();if(CKEDITOR.env.ie){var d,e=h[0].startNode,b=h[0].endNode;if(e&&"blockquote"==e.getParent().getName())for(d=e;d=d.getNext();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){e.move(d,!0);break}if(b&&"blockquote"==b.getParent().getName())for(d=b;d=d.getPrevious();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){b.move(d);break}}var f=c.createIterator();if(f.enlargeBr=g.config.enterMode!=CKEDITOR.ENTER_BR,a==CKEDITOR.TRISTATE_OFF){for(e=[];a=f.getNextParagraph();)e.push(a);for(1>e.length&&(a=g.document.createElement(g.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),b=h.shift(),c.insertNode(a),a.append(new CKEDITOR.dom.text("",g.document)),c.moveToBookmark(b),c.selectNodeContents(a),c.collapse(!0),b=c.createBookmark(),e.push(a),h.unshift(b)),d=e[0].getParent(),c=[],b=0;b<e.length;b++)a=e[b],d=d.getCommonAncestor(a.getParent());for(a={table:1,tbody:1,tr:1,ol:1,ul:1};a[d.getName()];)d=d.getParent();for(b=null;0<e.length;){for(a=e.shift();!a.getParent().equals(d);)a=a.getParent();a.equals(b)||c.push(a),b=a}for(;0<c.length;)if(a=c.shift(),"blockquote"==a.getName()){for(b=new CKEDITOR.dom.documentFragment(g.document);a.getFirst();)b.append(a.getFirst().remove()),e.push(b.getLast());b.replace(a)}else e.push(a);for(c=g.document.createElement("blockquote"),c.insertBefore(e[0]);0<e.length;)a=e.shift(),c.append(a)}else if(a==CKEDITOR.TRISTATE_ON){for(b=[],d={};a=f.getNextParagraph();){for(e=c=null;a.getParent();){if("blockquote"==a.getParent().getName()){c=a.getParent(),e=a;break}a=a.getParent()}c&&e&&!e.getCustomData("blockquote_moveout")&&(b.push(e),CKEDITOR.dom.element.setMarker(d,e,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(d),a=[],e=[],d={};0<b.length;)f=b.shift(),c=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),e.push(f.getNext())):f.remove().insertAfter(c):f.remove().insertBefore(c),c.getCustomData("blockquote_processed")||(e.push(c),CKEDITOR.dom.element.setMarker(d,c,"blockquote_processed",!0)),a.push(f);for(CKEDITOR.dom.element.clearAllMarkers(d),b=e.length-1;b>=0;b--){c=e[b];a:{d=c;for(var f=0,k=d.getChildCount(),j=void 0;k>f&&(j=d.getChild(f));f++)if(j.type==CKEDITOR.NODE_ELEMENT&&j.isBlockBoundary()){d=!1;break a}d=!0}d&&c.remove()}if(g.config.enterMode==CKEDITOR.ENTER_BR)for(c=!0;a.length;)if(f=a.shift(),"div"==f.getName()){for(b=new CKEDITOR.dom.documentFragment(g.document),c&&f.getPrevious()&&!(f.getPrevious().type==CKEDITOR.NODE_ELEMENT&&f.getPrevious().isBlockBoundary())&&b.append(g.document.createElement("br")),c=f.getNext()&&!(f.getNext().type==CKEDITOR.NODE_ELEMENT&&f.getNext().isBlockBoundary());f.getFirst();)f.getFirst().remove().appendTo(b);c&&b.append(g.document.createElement("br")),b.replace(f),c=!1}}i.selectBookmarks(h),g.focus()}},refresh:function(g,a){this.setState(g.elementPath(a.block||a.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(g){g.blockless||(g.addCommand("blockquote",k),g.ui.addButton&&g.ui.addButton("Blockquote",{label:g.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function w(a){function b(){var d=a.editable();d.on(q,function(a){(!CKEDITOR.env.ie||!m)&&u(a)}),CKEDITOR.env.ie&&d.on("paste",function(d){r||(f(),d.data.preventDefault(),u(d),k("paste")||a.openDialog("paste"))}),CKEDITOR.env.ie&&(d.on("contextmenu",h,null,null,0),d.on("beforepaste",function(a){a.data&&!a.data.$.ctrlKey&&h()},null,null,0)),d.on("beforecut",function(){!m&&l(a)});var v;d.attachListener(CKEDITOR.env.ie?d:a.document.getDocumentElement(),"mouseup",function(){v=setTimeout(function(){s()},0)}),a.on("destroy",function(){clearTimeout(v)}),d.on("keyup",s)}function e(d){return{type:d,canUndo:"cut"==d,startDisabled:!0,exec:function(){"cut"==this.type&&l();var d,b=this.type;if(CKEDITOR.env.ie)d=k(b);else try{d=a.document.$.execCommand(b,!1,null)}catch(c){d=!1}return d||alert(a.lang.clipboard[this.type+"Error"]),d}}}function c(){return{canUndo:!1,async:!0,exec:function(a,b){var c=function(b,c){b&&g(b.type,b.dataValue,!!c),a.fire("afterCommandExec",{name:"paste",command:e,returnValue:!!b})},e=this;"string"==typeof b?c({type:"auto",dataValue:b},1):a.getClipboardData(c)}}}function f(){r=1,setTimeout(function(){r=0},100)}function h(){m=1,setTimeout(function(){m=0},10)}function k(d){var b=a.document,c=b.getBody(),e=!1,l=function(){e=!0};return c.on(d,l),(7<CKEDITOR.env.version?b.$:b.$.selection.createRange()).execCommand(d),c.removeListener(d,l),e}function g(d,b,c){return d={type:d},c&&!a.fire("beforePaste",d)||!b?!1:(d.dataValue=b,
a.fire("paste",d))}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var b,c,e,d=a.getSelection();d.getType()==CKEDITOR.SELECTION_ELEMENT&&(b=d.getSelectedElement())&&(c=d.getRanges()[0],e=a.document.createText(""),e.insertBefore(b),c.setStartBefore(e),c.setEndAfter(b),d.selectRanges([c]),setTimeout(function(){b.getParent()&&(e.remove(),d.selectElement(b))},0))}}function i(d,b){var f,c=a.document,e=a.editable(),l=function(a){a.cancel()},i=CKEDITOR.env.gecko&&10902>=CKEDITOR.env.version;if(!c.getById("cke_pastebin")){var h=a.getSelection(),o=h.createBookmarks(),j=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie||CKEDITOR.env.opera?"div":"body",c);j.setAttribute("id","cke_pastebin"),CKEDITOR.env.opera&&j.appendBogus();var g=0,c=c.getWindow();i?(j.insertAfter(o[0].startNode),j.setStyle("display","inline")):(CKEDITOR.env.webkit?(e.append(j),j.addClass("cke_editable"),e.is("body")||(i="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),g=i.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie||CKEDITOR.env.opera?"body":"html",1).append(j),j.setStyles({position:"absolute",top:c.getScrollPosition().y-g+10+"px",width:"1px",height:Math.max(1,c.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0})),(i=j.getParent().isReadOnly())?(j.setOpacity(0),j.setAttribute("contenteditable",!0)):j.setStyle("ltr"==a.config.contentsLangDirection?"left":"right","-1000px"),a.on("selectionChange",l,null,null,0),CKEDITOR.env.webkit&&(f=e.once("blur",l,null,null,-100)),i&&j.focus(),i=new CKEDITOR.dom.range(j),i.selectNodeContents(j);var k=i.select();CKEDITOR.env.ie&&(f=e.once("blur",function(){a.lockSelection(k)}));var m=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(CKEDITOR.document[CKEDITOR.env.webkit?"getBody":"getDocumentElement"]().$.scrollTop=m),f&&f.removeListener(),CKEDITOR.env.ie&&e.focus(),h.selectBookmarks(o),j.remove();var d;CKEDITOR.env.webkit&&(d=j.getFirst())&&d.is&&d.hasClass("Apple-style-span")&&(j=d),a.removeListener("selectionChange",l),b(j.getHtml())},0)}}function o(){if(CKEDITOR.env.ie){a.focus(),f();var d=a.focusManager;if(d.lock(),a.editable().fire(q)&&!k("paste"))return d.unlock(),!1;d.unlock()}else try{if(a.editable().fire(q)&&!a.document.$.execCommand("Paste",!1,null))throw 0}catch(b){return!1}return!0}function p(d){if("wysiwyg"==a.mode)switch(d.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:d=a.editable(),f(),!CKEDITOR.env.ie&&d.fire("beforepaste"),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&10900>CKEDITOR.env.version)&&d.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:a.fire("saveSnapshot"),setTimeout(function(){a.fire("saveSnapshot")},0)}}function u(d){var b={type:"auto"},c=a.fire("beforePaste",b);i(d,function(a){a=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),c&&g(b.type,a,0,1)})}function s(){if("wysiwyg"==a.mode){var b=n("Paste");a.getCommand("cut").setState(n("Cut")),a.getCommand("copy").setState(n("Copy")),a.getCommand("paste").setState(b),a.fire("pasteState",b)}}function n(b){var c;if(t&&b in{Paste:1,Cut:1})return CKEDITOR.TRISTATE_DISABLED;if("Paste"==b){CKEDITOR.env.ie&&(m=1);try{c=a.document.$.queryCommandEnabled(b)||CKEDITOR.env.webkit}catch(e){}m=0}else b=a.getSelection(),c=b.getRanges(),c=b.getType()!=CKEDITOR.SELECTION_NONE&&!(1==c.length&&c[0].collapsed);return c?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}var m=0,r=0,t=0,q=CKEDITOR.env.ie?"beforepaste":"paste";!function(){a.on("key",p),a.on("contentDom",b),a.on("selectionChange",function(a){t=a.data.selection.getRanges()[0].checkReadOnly(),s()}),a.contextMenu&&a.contextMenu.addListener(function(a,b){return t=b.getRanges()[0].checkReadOnly(),{cut:n("Cut"),copy:n("Copy"),paste:n("Paste")}})}(),function(){function b(c,e,d,l,i){var f=a.lang.clipboard[e];a.addCommand(e,d),a.ui.addButton&&a.ui.addButton(c,{label:f,command:e,toolbar:"clipboard,"+l}),a.addMenuItems&&a.addMenuItem(e,{label:f,command:e,group:"clipboard",order:i})}b("Cut","cut",e("cut"),10,1),b("Copy","copy",e("copy"),20,4),b("Paste","paste",c(),30,8)}(),a.getClipboardData=function(b,c){function e(a){a.removeListener(),a.cancel(),c(a.data)}function l(a){a.removeListener(),a.cancel(),g=!0,c({type:h,dataValue:a.data})}function i(){this.customTitle=b&&b.title}var f=!1,h="auto",g=!1;c||(c=b,b=null),a.on("paste",e,null,null,0),a.on("beforePaste",function(a){a.removeListener(),f=!0,h=a.data.type},null,null,1e3),!1===o()&&(a.removeListener("paste",e),f&&a.fire("pasteDialog",i)?(a.on("pasteDialogCommit",l),a.on("dialogHide",function(a){a.removeListener(),a.data.removeListener("pasteDialogCommit",l),setTimeout(function(){g||c(null)},10)})):c(null))}}function x(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko&&!CKEDITOR.env.opera)return"html";if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function y(a,b){function e(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(1==a%2?"<br>":"")}return b=b.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),b=b.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()}),b.match(/^[^<]$/)?b:(CKEDITOR.env.webkit&&-1<b.indexOf("<div>")&&(b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),b.match(/<div>(<br>|)<\/div>/)&&(b="<p>"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return e(a.split("</div><div>").length+1)})+"</p>"),b=b.replace(/<\/div><div>/g,"<br>"),b=b.replace(/<\/?div>/g,"")),(CKEDITOR.env.gecko||CKEDITOR.env.opera)&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"<br>")),-1<b.indexOf("<br><br>")&&(b="<p>"+b.replace(/(<br>){2,}/g,function(a){return e(a.length/4)})+"</p>")),p(a,b))}function z(){var a=new CKEDITOR.htmlParser.filter,b={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},e=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),c={p:1,br:1,"cke:br":1},f=CKEDITOR.dtd,h=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),k=function(a){delete a.name,a.add(new CKEDITOR.htmlParser.text(" "))},g=function(a){for(var c,b=a;(b=b.next)&&b.name&&b.name.match(/^h\d$/);)for(c=new CKEDITOR.htmlParser.element("cke:br"),c.isEmpty=!0,a.add(c);c=b.children.shift();)a.add(c)};return a.addRules({elements:{h1:g,h2:g,h3:g,h4:g,h5:g,h6:g,img:function(a){var a=CKEDITOR.tools.trim(a.attributes.alt||""),b=" ";return a&&!a.match(/(^http|\.(jpe?g|gif|png))/i)&&(b=" ["+a+"] "),new CKEDITOR.htmlParser.text(b)},td:k,th:k,$:function(a){var g,i=a.name;if(h[i])return!1;if(delete a.attributes,"br"==i)return a;if(b[i])a.name="p";else if(e[i])delete a.name;else if(f[i]){if(g=new CKEDITOR.htmlParser.element("cke:br"),g.isEmpty=!0,CKEDITOR.dtd.$empty[i])return g;a.add(g,0),g=g.clone(),g.isEmpty=!0,a.add(g),delete a.name}return c[a.name]||delete a.name,a}}}),a}function A(a,b,e){var b=new CKEDITOR.htmlParser.fragment.fromHtml(b),c=new CKEDITOR.htmlParser.basicWriter;b.writeHtml(c,e);var b=c.getHtml(),b=b.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),f=0,b=b.replace(/<\/?p>/g,function(a){if("<p>"==a){if(1<++f)return"</p><p>"}else if(0<--f)return"</p><p>";return a}).replace(/<p><\/p>/g,"");return p(a,b)}function p(a,b){return a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("<br>",2*(a.length/7))}).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"<$1div>")),b}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(a){var b;w(a),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),a.on("paste",function(a){var b=a.data.dataValue,f=CKEDITOR.dtd.$block;if(-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<b.indexOf('<br class="Apple-interchange-newline">')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),b.match(/^<[^<]+cke_(editable|contents)/i)){var h,k,g=new CKEDITOR.dom.element("div");for(g.setHtml(b);1==g.getChildCount()&&(h=g.getFirst())&&h.type==CKEDITOR.NODE_ELEMENT&&(h.hasClass("cke_editable")||h.hasClass("cke_contents"));)g=k=h;k&&(b=k.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,c){return c.toLowerCase()in f?(a.data.preSniffing="html","<"+c):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,c){return c in f?(a.data.endsWithEOL=1,"</"+c+">"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1")),a.data.dataValue=b},null,null,3),a.on("paste",function(e){var h,e=e.data,c=e.type,f=e.dataValue,k=a.config.clipboard_defaultContentType||"html";h="html"==c||"html"==e.preSniffing?"html":x(f),"htmlifiedtext"==h?f=y(a.config,f):"text"==c&&"html"==h&&(f=A(a.config,f,b||(b=z(a)))),e.startsWithEOL&&(f='<br data-cke-eol="1">'+f),e.endsWithEOL&&(f+='<br data-cke-eol="1">'),"auto"==c&&(c="html"==h||"html"==k?"html":"text"),e.type=c,e.dataValue=f,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL},null,null,6),a.on("paste",function(b){b=b.data,a.insertHtml(b.dataValue,b.type),setTimeout(function(){a.fire("afterPaste")},0)},null,null,1e3),a.on("pasteDialog",function(b){setTimeout(function(){a.openDialog("paste",b.data)},0)})}})}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),f=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),g=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(a,b){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),a.write(g.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+b+");"},c))),a.getWindow().$.CKEDITOR=CKEDITOR,a.on("key"+(CKEDITOR.env.opera?"press":"down"),function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault()},this),a=a.getBody(),a.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a};var c={editorId:a.id,id:this.id,langCode:a.langCode,dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.isFramed){var d=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";c.frame=f.output({id:this.id+"_frame",src:d})}return d=e.output(c),b&&b.push(d),d},addBlock:function(a,b){return b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b),this._.currentBlock||this.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){var a=this._.blocks[a],b=this._.currentBlock,c=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return b&&(c.removeAttributes(b.attributes),b.hide()),this._.currentBlock=a,c.setAttributes(a.attributes),CKEDITOR.fire("ariaWidget",c),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabIndex:-1,"class":"cke_panel_block",role:"presentation",tabindex:0},styles:{display:"none"}})),b&&CKEDITOR.tools.extend(this,b),this.element.setAttributes({"aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),delete this.attributes["aria-label"],delete this.attributes.title,this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||!0!==this.onHide.call(this))&&this.element.setStyle("display","none")},onKeyDown:function(a){var b=this.keys[a];switch(b){case"next":for(var c,a=this._.focusIndex,b=this.element.getElementsByTag("a");c=b.getItem(++a);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=a,c.focus();break}return!1;case"prev":for(a=this._.focusIndex,b=this.element.getElementsByTag("a");a>0&&(c=b.getItem(--a));)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=a,c.focus();break}return!1;case"click":case"mouseup":return a=this._.focusIndex,(c=a>=0&&this.element.getElementsByTag("a").getItem(a))&&(c.$[b]?c.$[b]():c.$["on"+b]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function o(a,b,c,h,g){var g=CKEDITOR.tools.genKey(b.getUniqueId(),c.getUniqueId(),a.lang.dir,a.uiColor||"",h.css||"",g||""),e=i[g];return e||(e=i[g]=new CKEDITOR.ui.panel(b,h),e.element=c.append(CKEDITOR.dom.element.createFromHtml(e.render(a),b)),e.element.setStyles({display:"none",position:"absolute"})),e}var i={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(a,b,c,h){function g(){j.hide()}c.forceIFrame=1,c.toolbarRelated&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(b=CKEDITOR.document.getById("cke_"+a.name));var e=b.getDocument(),h=o(a,e,b,c,h||0),k=h.element,d=k.getFirst(),j=this;k.disableContextMenu(),this.element=k,this._={editor:a,panel:h,parentElement:b,definition:c,document:e,iframe:d,children:[],dir:a.lang.dir},a.on("mode",g),a.on("resize",g),e.getWindow().on("resize",g)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,b,c,h,g){var e=this._.panel,k=e.showBlock(a);this.allowBlur(!1),a=this._.editor.editable(),this._.returnFocus=a.hasFocus?a:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);var d=this.element,a=this._.iframe,a=CKEDITOR.env.ie?a:new CKEDITOR.dom.window(a.$.contentWindow),j=d.getDocument(),i=this._.parentElement.getPositionedAncestor(),n=b.getDocumentPosition(j),j=i?i.getDocumentPosition(j):{x:0,y:0},m="rtl"==this._.dir,f=n.x+(h||0)-j.x,l=n.y+(g||0)-j.y;!m||1!=c&&4!=c?m||2!=c&&3!=c||(f+=b.$.offsetWidth-1):f+=b.$.offsetWidth,(3==c||4==c)&&(l+=b.$.offsetHeight-1),this._.panel._.offsetParentId=b.getId(),d.setStyles({top:l+"px",left:0,display:""}),d.setOpacity(0),d.getFirst().removeStyle("width"),this._.editor.focusManager.add(a),this._.blurSet||(CKEDITOR.event.useCapture=!0,a.on("blur",function(a){this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(delete this._.returnFocus,this.hide())},this),a.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.event.useCapture=!1,this._.blurSet=1),e.onEscape=CKEDITOR.tools.bind(function(a){return this.onEscape&&this.onEscape(a)===!1?!1:void 0},this),CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){if(d.removeStyle("width"),k.autoSize){var a=k.element.getDocument(),a=(CKEDITOR.env.webkit?k.element:a.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a+=(d.$.offsetWidth||0)-(d.$.clientWidth||0)+3),d.setStyle("width",a+10+"px"),a=k.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a+=(d.$.offsetHeight||0)-(d.$.clientHeight||0)+3),d.setStyle("height",a+"px"),e._.currentBlock.element.setStyle("display","none").removeStyle("display")}else d.removeStyle("height");m&&(f-=d.$.offsetWidth),d.setStyle("left",f+"px");var b=e.element.getWindow(),a=d.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,g=a.height||a.bottom-a.top,h=m?a.right:b.width-a.left,i=m?b.width-a.right:a.left;m?c>h&&(f=i>c?f+c:b.width>c?f-a.left:f-a.right+b.width):c>h&&(f=i>c?f-c:b.width>c?f-a.right+b.width:f-a.left),c=a.top,b.height-a.top<g&&(l=c>g?l-g:b.height>g?l-a.bottom+b.height:l-a.top),CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(d.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(f=CKEDITOR.env.ie8Compat?f-2*d.getDocument().getDocumentElement().$.scrollLeft:f-(a.$.scrollWidth-a.$.clientWidth)));var j,a=d.getFirst();(j=a.getCustomData("activePanel"))&&j.onHide&&j.onHide.call(this,1),a.setCustomData("activePanel",this),d.setStyles({top:l+"px",left:f+"px"}),d.setOpacity(1)},this);e.isLoaded?a():e.onLoad=a,CKEDITOR.tools.setTimeout(function(){this.focus(),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a.is("a")&&(this._.lastFocused=a)},hide:function(a){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(a=a&&this._.returnFocus)&&(CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus()),delete this._.lastFocused,this._.editor.fire("panelHide",this))},allowBlur:function(a){var b=this._.panel;return void 0!=a&&(b.allowBlur=a),b.allowBlur},showAsChild:function(a,b,c,h,g,e){this._.activeChild==a&&a._.panel._.offsetParentId==c.getId()||(this.hideChild(),a.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,h,g,e),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var b,a=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(b in i){var c=i[b];a?c.destroy():c.element.hide()}a&&(i={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(k){for(var g=k.config.menu_groups.split(","),m=k._.menuGroups={},l=k._.menuItems={},a=0;a<g.length;a++)m[g[a]]=a+1;k.addMenuGroup=function(b,a){m[b]=a||100},k.addMenuItem=function(a,c){m[c.group]&&(l[a]=new CKEDITOR.menuItem(this,a,c))},k.addMenuItems=function(a){for(var c in a)this.addMenuItem(c,a[c])},k.getMenuItem=function(a){return l[a]},k.removeMenuItem=function(a){delete l[a]}}}),function(){function k(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0})}var g='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem" aria-haspopup="{hasPopup}" aria-disabled="{disabled}"';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(g+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(g+=' onblur="this.style.cssText = this.style.cssText;"');var g=g+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),m=CKEDITOR.addTemplate("menuItem",g+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),l=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),j=c.block.attributes=c.attributes||{};!j.role&&(j.role="menu"),this._.panelDefinition=c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),j=this._.listeners;this.removeAll();for(var e=0;e<j.length;e++){var i=j[e](b,a,c);if(i)for(var f in i){var h=this.editor.getMenuItem(f);!h||h.command&&!this.editor.getCommand(h.command).state||(h.state=i[f],this.add(h))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;return b?b._.panel.hideChild(1):27==a&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var j in c){var e=this.editor.getMenuItem(j);e&&(e.state=c[j],b.add(e))}var i=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+a));setTimeout(function(){b.show(i,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,b,c,j){if(this.parent||(this._.onShow(),this.items.length)){var b=b||("rtl"==this.editor.lang.dir?2:1),e=this.items,i=this.editor,f=this._.panel,h=this._.element;if(!f){f=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),f.onEscape=CKEDITOR.tools.bind(function(a){return!1===this._.onEscape(a)?!1:void 0},this),f.onShow=function(){f._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")},f.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),h=f.addBlock(this.id,this._.panelDefinition.block),h.autoSize=!0;var d=h.keys;d[40]="next",d[9]="next",d[38]="prev",d[CKEDITOR.SHIFT+9]="prev",d["rtl"==i.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",d[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(d[13]="mouseup"),h=this._.element=h.element,d=h.getDocument(),d.getBody().setStyle("overflow","hidden"),d.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,i.config.menu_subMenuDelay||400,this,[a])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];b.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):b.getItems?this._.showSubMenu(a):this._.onClick(b)},this)}k(e);for(var d=i.elementPath(),d=['<div class="cke_menu'+(d&&d.direction()!=i.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],g=e.length,m=g&&e[0].group,l=0;g>l;l++){var n=e[l];m!=n.group&&(d.push('<div class="cke_menuseparator" role="separator"></div>'),m=n.group),n.render(this,l,d)}d.push("</div>"),h.setHtml(d.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(f,this.id,a,b,c,j):f.showBlock(this.id,a,b,c,j),i.fire("menuShow",[f])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=b},proto:{render:function(a,b,c){var g=a.id+(""+b),e="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,i=e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off",f=this.getItems,h="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",d=this.name;this.icon&&!/\./.test(this.icon)&&(d=this.icon),a={id:g,name:this.name,iconName:d,label:this.label,cls:this.className||"",state:i,hasPopup:f?"true":"false",disabled:e==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(d,"rtl"==this.editor.lang.dir,d==this.icon?null:this.icon,this.iconOffset),arrowHtml:f?l.output({label:h}):""},m.output(a,c)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(b){this.base.call(this,b,{panel:{className:"cke_menu_panel",attributes:{"aria-label":b.lang.contextmenu.options}}})},proto:{addTarget:function(b,d){if(CKEDITOR.env.opera&&!("oncontextmenu"in document.body)){var c;b.on("mousedown",function(a){if(a=a.data,2!=a.$.button)a.getKeystroke()==CKEDITOR.CTRL+1&&b.fire("contextmenu",a);else if(!d||!(CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey)){var g=a.getTarget();c||(g=g.getDocument(),c=g.createElement("input"),c.$.type="button",g.getBody().append(c)),c.setAttribute("style","position:absolute;top:"+(a.$.clientY-2)+"px;left:"+(a.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}}),b.on("mouseup",function(a){c&&(c.remove(),c=void 0,b.fire("contextmenu",a.data))})}if(b.on("contextmenu",function(a){if(a=a.data,!d||!(CKEDITOR.env.webkit?e:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey)){a.preventDefault();var b=a.getTarget().getDocument(),c=a.getTarget().getDocument().getDocumentElement(),f=!b.equals(CKEDITOR.document),b=b.getWindow().getScrollPosition(),h=f?a.$.clientX:a.$.pageX||b.x+a.$.clientX,i=f?a.$.clientY:a.$.pageY||b.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(c,null,h,i)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.opera&&b.on("keypress",function(a){a=a.data,0===a.$.keyCode&&a.preventDefault()}),CKEDITOR.env.webkit){var e,f=function(){e=0};b.on("keydown",function(a){e=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey}),b.on("keyup",f),b.on("contextmenu",f)}},open:function(b,d,c,e){this.editor.focus(),b=b||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(b,d,c,e)}}})},beforeInit:function(b){var d=b.contextMenu=new CKEDITOR.plugins.contextMenu(b);b.on("contentDom",function(){d.addTarget(b.editable(),!1!==b.config.browserContextMenuOnCtrl)}),b.addCommand("contextMenu",{exec:function(){b.contextMenu.open(b.document.getBody())}}),b.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),b.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),CKEDITOR.plugins.add("resize",{init:function(b){var f,g,n,o,a=b.config,q=b.ui.spaceId("resizer"),h=b.element?b.element.getDirection(1):"ltr";if(!a.resize_dir&&(a.resize_dir="vertical"),void 0==a.resize_maxWidth&&(a.resize_maxWidth=3e3),void 0==a.resize_maxHeight&&(a.resize_maxHeight=3e3),void 0==a.resize_minWidth&&(a.resize_minWidth=750),void 0==a.resize_minHeight&&(a.resize_minHeight=250),!1!==a.resize_enabled){var c=null,i=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,l=("both"==a.resize_dir||"vertical"==a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,j=function(d){var e=f,m=g,c=e+(d.data.$.screenX-n)*("rtl"==h?-1:1),d=m+(d.data.$.screenY-o);i&&(e=Math.max(a.resize_minWidth,Math.min(c,a.resize_maxWidth))),l&&(m=Math.max(a.resize_minHeight,Math.min(d,a.resize_maxHeight))),b.resize(i?e:null,m)},k=function(){CKEDITOR.document.removeListener("mousemove",j),CKEDITOR.document.removeListener("mouseup",k),b.document&&(b.document.removeListener("mousemove",j),b.document.removeListener("mouseup",k))},p=CKEDITOR.tools.addFunction(function(d){c||(c=b.getResizable()),f=c.$.offsetWidth||0,g=c.$.offsetHeight||0,n=d.screenX,o=d.screenY,a.resize_minWidth>f&&(a.resize_minWidth=f),a.resize_minHeight>g&&(a.resize_minHeight=g),CKEDITOR.document.on("mousemove",j),CKEDITOR.document.on("mouseup",k),b.document&&(b.document.on("mousemove",j),b.document.on("mouseup",k)),d.preventDefault&&d.preventDefault()});b.on("destroy",function(){CKEDITOR.tools.removeFunction(p)}),b.on("uiSpace",function(a){if("bottom"==a.data.space){var e="";i&&!l&&(e=" cke_resizer_horizontal"),!i&&l&&(e=" cke_resizer_vertical");var c='<span id="'+q+'" class="cke_resizer'+e+" cke_resizer_"+h+'" title="'+CKEDITOR.tools.htmlEncode(b.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event)">'+("ltr"==h?"":"")+"</span>";"ltr"==h&&"ltr"==e?a.data.html+=c:a.data.html=c+a.data.html}},b,null,100),b.on("maximize",function(a){b.ui.space("resizer")[a.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var c='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&10900<=CKEDITOR.env.version&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}"';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(c+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"');var c=c+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);"  onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),c=c+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',m=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),n=CKEDITOR.addTemplate("button",c);

CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},CKEDITOR.ui.button.prototype={render:function(a,b){var l,c=CKEDITOR.env,i=this._.id=CKEDITOR.tools.getNextId(),f="",e=this.command;this._.editor=a;var d={id:i,button:this,editor:a,focus:function(){CKEDITOR.document.getById(i).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},o=CKEDITOR.tools.addFunction(function(a){return d.onkey?(a=new CKEDITOR.dom.event(a),!1!==d.onkey(d,a.getKeystroke())):void 0}),p=CKEDITOR.tools.addFunction(function(a){var b;return d.onfocus&&(b=!1!==d.onfocus(d,new CKEDITOR.dom.event(a))),CKEDITOR.env.gecko&&10900>CKEDITOR.env.version&&a.preventBubble(),b}),j=0,q=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var b=a.editable();b.isInline()&&b.hasFocus&&(a.lockSelection(),j=1)}});if(d.clickFn=l=CKEDITOR.tools.addFunction(function(){j&&(a.unlockSelection(1),j=0),d.execute()}),this.modes){var k={},g=function(){var b=a.mode;b&&(b=this.modes[b]?void 0!=k[b]?k[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,this.setState(a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b))};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(k[a.mode]=this._.state)},this),a.on("mode",g,this),!this.readOnly&&a.on("readOnly",g,this)}else e&&(e=a.getCommand(e))&&(e.on("state",function(){this.setState(e.state)},this),f+=e.state==CKEDITOR.TRISTATE_ON?"on":e.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst(),b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl"),d.setAttribute("style",CKEDITOR.skin.getIconStyle(h,"rtl"==b,this.icon,this.iconOffset))},this),e||(f+="off");var h=g=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(h=this.icon,this.icon=null),c={id:i,name:g,iconName:h,label:this.label,cls:this.className||"",state:f,title:this.title,titleJs:c.gecko&&10900<=c.version&&!c.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:o,mousedownFn:q,focusFn:p,clickFn:l,style:CKEDITOR.skin.getIconStyle(h,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?m.output():""},n.output(c,b),this.onRender&&this.onRender(),d},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),a==CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(b=a.getCommand(this.command)||b),this._.feature=b}},CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}}(),function(){function w(a){function d(){for(var b=i(),e=CKEDITOR.tools.clone(a.config.toolbarGroups)||n(a),f=0;f<e.length;f++){var k=e[f];if("/"!=k){"string"==typeof k&&(k=e[f]={name:k});var j,d=k.groups;if(d)for(var h=0;h<d.length;h++)j=d[h],(j=b[j])&&c(k,j);(j=b[k.name])&&c(k,j)}}return e}function i(){var c,f,e,b={};for(c in a.ui.items)f=a.ui.items[c],e=f.toolbar||"others",e=e.split(","),f=e[0],e=parseInt(e[1]||-1,10),b[f]||(b[f]=[]),b[f].push({name:c,order:e});for(f in b)b[f]=b[f].sort(function(b,a){return b.order==a.order?0:0>a.order?-1:0>b.order?1:b.order<a.order?-1:1});return b}function c(c,e){if(e.length){c.items?c.items.push(a.ui.create("-")):c.items=[];for(var f;f=e.shift();)f="string"==typeof f?f:f.name,b&&-1!=CKEDITOR.tools.indexOf(b,f)||(f=a.ui.create(f))&&a.addFeature(f)&&c.items.push(f)}}function h(b){var e,d,h,a=[];for(e=0;e<b.length;++e)d=b[e],h={},"/"==d?a.push(d):CKEDITOR.tools.isArray(d)?(c(h,CKEDITOR.tools.clone(d)),a.push(h)):d.items&&(c(h,CKEDITOR.tools.clone(d.items)),h.name=d.name,a.push(h));return a}var b=a.config.removeButtons,b=b&&b.split(","),e=a.config.toolbar;return"string"==typeof e&&(e=a.config["toolbar_"+e]),a.toolbar=e?h(e):d()}function n(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var t=function(){this.toolbars=[],this.focusCommandExecuted=!1};t.prototype.focus=function(){for(var d,a=0;d=this.toolbars[a++];)for(var c,i=0;c=d.items[i++];)if(c.focus)return void c.focus()};var x={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(a){var d,i=function(c,h){var b,e="rtl"==a.lang.dir,g=a.config.toolbarGroupCycling,g=void 0===g||g;switch(h){case 9:case CKEDITOR.SHIFT+9:for(;!b||!b.items.length;)if(b=9==h?(b?b.next:c.toolbar.next)||a.toolbox.toolbars[0]:(b?b.previous:c.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1],b.items.length)for(c=b.items[d?b.items.length-1:0];c&&!c.focus;)(c=d?c.previous:c.next)||(b=0);return c&&c.focus(),!1;case e?37:39:case 40:b=c;do b=b.next,!b&&g&&(b=c.toolbar.items[0]);while(b&&!b.focus);return b?b.focus():i(c,9),!1;case e?39:37:case 38:b=c;do b=b.previous,!b&&g&&(b=c.toolbar.items[c.toolbar.items.length-1]);while(b&&!b.focus);return b?b.focus():(d=1,i(c,CKEDITOR.SHIFT+9),d=0),!1;case 27:return a.focus(),!1;case 13:case 32:return c.execute(),!1}return!0};a.on("uiSpace",function(c){if(c.data.space==a.config.toolbarLocation){c.removeListener(),a.toolbox=new t;var e,g,d=CKEDITOR.tools.getNextId(),b=['<span id="',d,'" class="cke_voice_label">',a.lang.toolbar.toolbars,"</span>",'<span id="'+a.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',d,'" onmousedown="return false;">'],d=!1!==a.config.toolbarStartupExpanded;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&b.push('<span class="cke_toolbox_main"'+(d?">":' style="display:none">'));for(var n=a.toolbox.toolbars,f=w(a),k=0;k<f.length;k++){var j,q,r,l=0,m=f[k];if(m)if(e&&(b.push("</span>"),g=e=0),"/"===m)b.push('<span class="cke_toolbar_break"></span>');else{r=m.items||m;for(var s=0;s<r.length;s++){var u,o=r[s];if(o)if(o.type==CKEDITOR.UI_SEPARATOR)g=e&&o;else{if(u=!1!==o.canGroup,!l){j=CKEDITOR.tools.getNextId(),l={id:j,items:[]},q=m.name&&(a.lang.toolbar.toolbarGroups[m.name]||m.name),b.push('<span id="',j,'" class="cke_toolbar"',q?' aria-labelledby="'+j+'_label"':"",' role="toolbar">'),q&&b.push('<span id="',j,'_label" class="cke_voice_label">',q,"</span>"),b.push('<span class="cke_toolbar_start"></span>');var p=n.push(l)-1;p>0&&(l.previous=n[p-1],l.previous.next=l)}u?e||(b.push('<span class="cke_toolgroup" role="presentation">'),e=1):e&&(b.push("</span>"),e=0),j=function(c){c=c.render(a,b),p=l.items.push(c)-1,p>0&&(c.previous=l.items[p-1],c.previous.next=c),c.toolbar=l,c.onkey=i,c.onfocus=function(){a.toolbox.focusCommandExecuted||a.focus()}},g&&(j(g),g=0),j(o)}}e&&(b.push("</span>"),g=e=0),l&&b.push('<span class="cke_toolbar_end"></span></span>')}}if(a.config.toolbarCanCollapse&&b.push("</span>"),a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var v=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse")});a.on("destroy",function(){CKEDITOR.tools.removeFunction(v)}),a.addCommand("toolbarCollapse",{readOnly:1,exec:function(b){var a=b.ui.space("toolbar_collapser"),c=a.getPrevious(),e=b.ui.space("contents"),d=c.getParent(),f=parseInt(e.$.style.height,10),h=d.$.offsetHeight,g=a.hasClass("cke_toolbox_collapser_min");g?(c.show(),a.removeClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarCollapse)):(c.hide(),a.addClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarExpand)),a.getFirst().setText(g?"":""),e.setStyle("height",f-(d.$.offsetHeight-h)+"px"),b.fire("resize")},modes:{wysiwyg:1,source:1}}),a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),b.push('<a title="'+(d?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id="'+a.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),d||b.push(" cke_toolbox_collapser_min"),b.push('" onclick="CKEDITOR.tools.callFunction('+v+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}b.push("</span>"),c.data.html+=b.join("")}}),a.on("destroy",function(){if(this.toolbox){var a,b,e,g,d=0;for(a=this.toolbox.toolbars;d<a.length;d++)for(e=a[d].items,b=0;b<e.length;b++)g=e[b],g.clickFn&&CKEDITOR.tools.removeFunction(g.clickFn),g.keyDownFn&&CKEDITOR.tools.removeFunction(g.keyDownFn)}}),a.on("uiReady",function(){var c=a.ui.space("toolbox");c&&a.focusManager.add(c,1)}),a.addCommand("toolbarFocus",x),a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),a.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,d){return d.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,d,i){var c=n(this.editor),h=0===d,b={name:a};if(i){if(i=CKEDITOR.tools.search(c,function(a){return a.name==i}))return!i.groups&&(i.groups=[]),d&&(d=CKEDITOR.tools.indexOf(i.groups,d),d>=0)?void i.groups.splice(d+1,0,a):void(h?i.groups.splice(0,0,a):i.groups.push(a));d=null}d&&(d=CKEDITOR.tools.indexOf(c,function(a){return a.name==d})),h?c.splice(0,0,a):"number"==typeof d?c.splice(d+1,0,b):c.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function m(a,d){function o(b){if(b=a._.elementsPath.list[b],b.equals(a.editable())){var e=a.createRange();e.selectNodeContents(b),e.select()}else a.getSelection().selectElement(b);a.focus()}function p(){i&&i.setHtml(n),delete a._.elementsPath.list}var i,l=a.ui.spaceId("path"),q="cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_";a._.elementsPath={idBase:q,filters:[]},d.html+='<span id="'+l+'_label" class="cke_voice_label">'+a.lang.elementspath.eleLabel+'</span><span id="'+l+'" class="cke_path" role="group" aria-labelledby="'+l+'_label">'+n+"</span>",a.on("uiReady",function(){var b=a.ui.space("path");b&&a.focusManager.add(b,1)});var m=CKEDITOR.tools.addFunction(o),r=CKEDITOR.tools.addFunction(function(b,e){var f,c=a._.elementsPath.idBase,e=new CKEDITOR.dom.event(e);switch(f="rtl"==a.lang.dir,e.getKeystroke()){case f?39:37:case 9:return(f=CKEDITOR.document.getById(c+(b+1)))||(f=CKEDITOR.document.getById(c+"0")),f.focus(),!1;case f?37:39:case CKEDITOR.SHIFT+9:return(f=CKEDITOR.document.getById(c+(b-1)))||(f=CKEDITOR.document.getById(c+(a._.elementsPath.list.length-1))),f.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return o(b),!1}return!0});a.on("selectionChange",function(b){for(var e=a.editable(),c=b.data.selection.getStartElement(),b=[],f=a._.elementsPath.list=[],d=a._.elementsPath.filters;c;){var g,j=0;g=c.data("cke-display-name")?c.data("cke-display-name"):c.data("cke-real-element-type")?c.data("cke-real-element-type"):c.getName();for(var k=0;k<d.length;k++){var h=d[k](c,g);if(!1===h){j=1;break}g=h||g}if(j||(j=f.push(c)-1,k=a.lang.elementspath.eleTitle.replace(/%1/,g),g=s.output({id:q+j,label:k,text:g,jsTitle:"javascript:void('"+g+"')",index:j,keyDownFn:r,clickFn:m}),b.unshift(g)),c.equals(e))break;c=c.getParent()}i||(i=CKEDITOR.document.getById(l)),e=i,e.setHtml(b.join("")+n),a.fire("elementsPathUpdate",{space:e})}),a.on("readOnly",p),a.on("contentDomUnload",p),a.addCommand("elementsPathFocus",h),a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var h;h={editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var n='<span class="cke_path_empty">&nbsp;</span>',d="";(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(d+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(d+=' onblur="this.style.cssText = this.style.cssText;"');var s=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+(CKEDITOR.env.gecko&&10900>CKEDITOR.env.version?' onfocus="event.preventBubble();"':"")+d+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(a){a.on("uiSpace",function(d){"bottom"==d.data.space&&m(a,d.data)})}})}(),function(){function l(e,c,b){return b=e.config.forceEnterMode||b,"wysiwyg"!=e.mode?!1:(c||(c=e.config.enterMode),e.elementPath().isContextFor("p")||(c=CKEDITOR.ENTER_BR,b=1),e.fire("saveSnapshot"),c==CKEDITOR.ENTER_BR?o(e,c,null,b):p(e,c,null,b),e.fire("saveSnapshot"),!0)}function q(e){for(var e=e.getSelection().getRanges(!0),c=e.length-1;c>0;c--)e[c].deleteContents();return e[0]}CKEDITOR.plugins.add("enterkey",{init:function(e){e.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(c){l(c)}}),e.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(c){"wysiwyg"==c.mode&&l(c,c.config.shiftEnterMode,1)}}),e.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var t=CKEDITOR.dom.walker.whitespaces(),u=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,c,b,i){if(b=b||q(e)){var d,f=b.document,j=b.checkStartOfBlock(),h=b.checkEndOfBlock(),a=e.elementPath(b.startContainer).block,k=c==CKEDITOR.ENTER_DIV?"div":"p";if(j&&h){if(a&&(a.is("li")||a.getParent().is("li"))){b=a.getParent(),d=b.getParent();var i=!a.hasPrevious(),m=!a.hasNext(),k=e.getSelection(),g=k.createBookmarks(),j=a.getDirection(1),h=a.getAttribute("class"),n=a.getAttribute("style"),l=d.getDirection(1)!=j,e=e.config.enterMode!=CKEDITOR.ENTER_BR||l||n||h;if(d.is("li"))i||m?a[i?"insertBefore":"insertAfter"](d):a.breakParent(d);else{if(e)d=f.createElement(c==CKEDITOR.ENTER_P?"p":"div"),l&&d.setAttribute("dir",j),n&&d.setAttribute("style",n),h&&d.setAttribute("class",h),a.moveChildren(d),i||m?d[i?"insertBefore":"insertAfter"](b):(a.breakParent(b),d.insertAfter(b));else if(a.appendBogus(),i||m)for(;f=a[i?"getFirst":"getLast"]();)f[i?"insertBefore":"insertAfter"](b);else for(a.breakParent(b);f=a.getLast();)f.insertAfter(b);a.remove()}return void k.selectBookmarks(g)}if(a&&a.getParent().is("blockquote"))return a.breakParent(a.getParent()),a.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||a.getPrevious().remove(),a.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||a.getNext().remove(),b.moveToElementEditStart(a),void b.select()}else if(a&&a.is("pre")&&!h)return void o(e,c,b,i);if(h=b.splitBlock(k)){if(c=h.previousBlock,a=h.nextBlock,e=h.wasStartOfBlock,j=h.wasEndOfBlock,a?(g=a.getParent(),g.is("li")&&(a.breakParent(g),a.move(a.getNext(),1))):c&&(g=c.getParent())&&g.is("li")&&(c.breakParent(g),g=c.getNext(),b.moveToElementEditStart(g),c.move(c.getPrevious())),e||j){if(c?(c.is("li")||!r.test(c.getName())&&!c.is("pre"))&&(d=c.clone()):a&&(d=a.clone()),d?i&&!d.is("li")&&d.renameNode(k):g&&g.is("li")?d=g:(d=f.createElement(k),c&&(m=c.getDirection())&&d.setAttribute("dir",m)),f=h.elementPath)for(i=0,k=f.elements.length;k>i&&(g=f.elements[i],!g.equals(f.block)&&!g.equals(f.blockLimit));i++)CKEDITOR.dtd.$removeEmpty[g.getName()]&&(g=g.clone(),d.moveChildren(g),d.append(g));CKEDITOR.env.ie||d.appendBogus(),d.getParent()||b.insertNode(d),d.is("li")&&d.removeAttribute("value"),!CKEDITOR.env.ie||!e||j&&c.getChildCount()||(b.moveToElementEditStart(j?c:d),b.select()),b.moveToElementEditStart(e&&!j?a:d)}else a.is("li")&&(d=b.clone(),d.selectNodeContents(a),d=new CKEDITOR.dom.walker(d),d.evaluator=function(a){return!(u(a)||t(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(g=d.next())&&g.type==CKEDITOR.NODE_ELEMENT&&g.is("ul","ol")&&(CKEDITOR.env.ie?f.createText(""):f.createElement("br")).insertBefore(g)),a&&b.moveToElementEditStart(a);b.select(),b.scrollIntoView()}}},enterBr:function(e,c,b,i){if(b=b||q(e)){var f=b.document,j=b.checkEndOfBlock(),h=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),a=h.block,h=a&&h.block.getName();i||"li"!=h?(!i&&j&&r.test(h)?(j=a.getDirection())?(f=f.createElement("div"),f.setAttribute("dir",j),f.insertAfter(a),b.setStart(f,0)):(f.createElement("br").insertAfter(a),CKEDITOR.env.gecko&&f.createText("").insertAfter(a),b.setStartAt(a.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(a="pre"==h&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?f.createText("\r"):f.createElement("br"),b.deleteContents(),b.insertNode(a),CKEDITOR.env.ie?b.setStartAt(a,CKEDITOR.POSITION_AFTER_END):(f.createText("").insertAfter(a),j&&a.getParent().appendBogus(),a.getNext().$.nodeValue="",b.setStartAt(a.getNext(),CKEDITOR.POSITION_AFTER_START))),b.collapse(!0),b.select(),b.scrollIntoView()):p(e,c,b,i)}}};var s=CKEDITOR.plugins.enterkey,o=s.enterBr,p=s.enterBlock,r=/^h[1-6]$/}(),function(){function j(a,b){var d={},e=[],f={nbsp:"",shy:"",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,h){var c=b?"&"+h+";":f[h];return d[c]=b?f[h]:"&"+h+";",e.push(c),""});if(!b&&a){var g,a=a.split(","),c=document.createElement("div");for(c.innerHTML="&"+a.join(";&")+";",g=c.innerHTML,c=null,c=0;c<g.length;c++){var i=g.charAt(c);d[i]="&"+a[c]+";",e.push(i)}}return d.regex=e.join(b?"|":""),d}CKEDITOR.plugins.add("entities",{afterInit:function(a){var b=a.config;if(a=(a=a.dataProcessor)&&a.htmlFilter){var d=[];!1!==b.basicEntities&&d.push("nbsp,gt,lt,amp"),b.entities&&(d.length&&d.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),b.entities_latin&&d.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),b.entities_greek&&d.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),b.entities_additional&&d.push(b.entities_additional));var e=j(d.join(",")),f=e.regex?"["+e.regex+"]":"a^";delete e.regex,b.entities&&b.entities_processNumerical&&(f="[^ -~]|"+f);var f=RegExp(f,"g"),c=function(a){return"force"!=b.entities_processNumerical&&e[a]?e[a]:"&#"+a.charCodeAt(0)+";"},g=j("nbsp,gt,lt,amp,shy",!0),i=RegExp(g.regex,"g"),k=function(a){return g[a]};a.addRules({text:function(a){return a.replace(i,k).replace(f,c)}})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,a,b,d){a=a||"80%",b=b||"70%","string"==typeof a&&1<a.length&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a,10)/100,10)),"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10)),640>a&&(a=640),420>b&&(b=420);var f=parseInt((window.screen.height-b)/2,10),g=parseInt((window.screen.width-a)/2,10),d=(d||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+a+",height="+b+",top="+f+",left="+g,c=window.open("",null,d,!0);if(!c)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(c.moveTo(g,f),c.resizeTo(a,b)),c.focus(),c.location.href=e}catch(h){window.open(e,null,d,!0)}return!0}}),function(){function g(a,c){var d=[];if(!c)return a;for(var b in c)d.push(b+"="+encodeURIComponent(c[b]));return a+(-1!=a.indexOf("?")?"&":"?")+d.join("&")}function i(a){return a+="",a.charAt(0).toUpperCase()+a.substr(1)}function k(){var a=this.getDialog(),c=a.getParentEditor();c._.filebrowserSe=this;var d=c.config["filebrowser"+i(a.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",a=c.config["filebrowser"+i(a.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||"70%",b=this.filebrowser.params||{};b.CKEditor=c.name,b.CKEditorFuncNum=c._.filebrowserFn,b.langCode||(b.langCode=c.langCode),b=g(this.filebrowser.url,b),c.popup(b,d,a,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures)}function l(){var a=this.getDialog();return a.getParentEditor()._.filebrowserSe=this,a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function m(a,c,d){var b=d.params||{};b.CKEditor=a.name,b.CKEditorFuncNum=a._.filebrowserFn,b.langCode||(b.langCode=a.langCode),c.action=g(d.url,b),c.filebrowser=d}function j(a,c,d,b){if(b&&b.length)for(var e,g=b.length;g--;)if(e=b[g],("hbox"==e.type||"vbox"==e.type||"fieldset"==e.type)&&j(a,c,d,e.children),e.filebrowser)if("string"==typeof e.filebrowser&&(e.filebrowser={action:"fileButton"==e.type?"QuickUpload":"Browse",target:e.filebrowser}),"Browse"==e.filebrowser.action){var f=e.filebrowser.url;void 0===f&&(f=a.config["filebrowser"+i(c)+"BrowseUrl"],void 0===f&&(f=a.config.filebrowserBrowseUrl)),f&&(e.onClick=k,e.filebrowser.url=f,e.hidden=!1)}else if("QuickUpload"==e.filebrowser.action&&e["for"]&&(f=e.filebrowser.url,void 0===f&&(f=a.config["filebrowser"+i(c)+"UploadUrl"],void 0===f&&(f=a.config.filebrowserUploadUrl)),f)){var h=e.onClick;e.onClick=function(a){var b=a.sender;return h&&h.call(b,a)===!1?!1:l.call(b,a)},e.filebrowser.url=f,e.hidden=!1,m(a,d.getContents(e["for"][0]).get(e["for"][1]),e.filebrowser)}}function h(a,c,d){if(-1!==d.indexOf(";")){for(var d=d.split(";"),b=0;b<d.length;b++)if(h(a,c,d[b]))return!0;return!1}return(a=a.getContents(c).get(d).filebrowser)&&a.url}function n(a,c){var d=this._.filebrowserSe.getDialog(),b=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;b&&d.getContentElement(b[0],b[1]).reset(),"function"==typeof c&&!1===c.call(this._.filebrowserSe)||e&&!1===e.call(this._.filebrowserSe,a,c)||("string"==typeof c&&c&&alert(c),!(a&&(b=this._.filebrowserSe,d=b.getDialog(),b=b.filebrowser.target||null)))||(b=b.split(":"),(e=d.getContentElement(b[0],b[1]))&&(e.setValue(a),d.selectPage(b[0])))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(n,a),a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(a){for(var d,c=a.data.definition,b=0;b<c.contents.length;++b)(d=c.contents[b])&&(j(a.editor,a.data.name,c,d.elements),d.hidden&&d.filebrowser&&(d.hidden=!h(c,d.id,d.filebrowser)))})}(),function(){function q(a){var i=a.config,l=a.fire("uiSpace",{space:"top",html:""}).html,o=function(){function f(a,c,e){b.setStyle(c,t(e)),b.setStyle("position",a)}function e(a){var b=r.getDocumentPosition();switch(a){case"top":f("absolute","top",b.y-m-n);break;case"pin":f("fixed","top",q);break;case"bottom":f("absolute","top",b.y+(c.height||c.bottom-c.top)+n)}j=a}var j,r,k,c,h,m,s,l=i.floatSpaceDockedOffsetX||0,n=i.floatSpaceDockedOffsetY||0,p=i.floatSpacePinnedOffsetX||0,q=i.floatSpacePinnedOffsetY||0;return function(d){if(r=a.editable())if(d&&"focus"==d.name&&b.show(),b.removeStyle("left"),b.removeStyle("right"),k=b.getClientRect(),c=r.getClientRect(),h=g.getViewPaneSize(),m=k.height,s="pageXOffset"in g.$?g.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,j){e(m+n<=c.top?"top":m+n>h.height-c.bottom?"pin":"bottom");var f,d=h.width/2,d=0<c.left&&c.right<h.width&&c.width>k.width?"rtl"==a.config.contentsLangDirection?"right":"left":d-c.left>c.right-d?"left":"right";k.width>h.width?(d="left",f=0):(f="left"==d?0<c.left?c.left:0:c.right<h.width?h.width-c.right:0,f+k.width>h.width&&(d="left"==d?"right":"left",f=0)),b.setStyle(d,t(("pin"==j?p:l)+f+("pin"==j?0:"left"==d?s:-s)))}else j="pin",e("pin"),o(d)}}();if(l){var b=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(u.output({content:l,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(i.baseFloatZIndex-1),topId:a.ui.spaceId("top")}))),p=CKEDITOR.tools.eventsBuffer(500,o),e=CKEDITOR.tools.eventsBuffer(100,o);b.unselectable(),b.on("mousedown",function(a){a=a.data,a.getTarget().hasAscendant("a",1)||a.preventDefault()}),a.on("focus",function(b){o(b),a.on("change",p.input),g.on("scroll",e.input),g.on("resize",e.input)}),a.on("blur",function(){b.hide(),a.removeListener("change",p.input),g.removeListener("scroll",e.input),g.removeListener("resize",e.input)}),a.on("destroy",function(){g.removeListener("scroll",e.input),g.removeListener("resize",e.input),b.clearCustomData(),b.remove()}),a.focusManager.hasFocus&&b.show(),a.focusManager.add(b,1)}}var u=CKEDITOR.addTemplate("floatcontainer",'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),g=CKEDITOR.document.getWindow(),t=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){q(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),f=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),g=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>');CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){var b=b||{},c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0),!c.role&&(c.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",c.role),c=this.keys,c[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var a=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(a),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);this.onClick&&this.onClick(a,b)},this)),this._.click}},proto:{add:function(a,b,c){var d=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[a]=d,a={id:d,val:a,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:c||a,text:b||a},this._.pendingList.push(f.output(a))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b,this._.pendingHtml.push(g.output({id:b,label:a}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var d,a=this._.items,b=this._.groups,c=this.element.getDocument();for(d in a)c.getById(a[d]).setStyle("display","");for(var e in b)a=c.getById(b[e]),d=a.getNext(),a.setStyle("display",""),d&&"ul"==d.getName()&&d.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();var a=this._.items[a],b=this.element.getDocument().getById(a);b.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(b)},unmark:function(a){var b=this.element.getDocument(),a=this._.items[a],c=b.getById(a);c.removeClass("cke_selected"),b.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var c,a=this._.items,b=this.element.getDocument();for(c in a){var d=a[c];b.getById(d).removeClass("cke_selected"),b.getById(d+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var c,b=this.element.getElementsByTag("a"),d=-1;if(a){for(c=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++d);)if(a.equals(c)){this._.focusIndex=d;break}}else b=CKEDITOR.document.getWindow().getScrollPosition().y,this.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document[CKEDITOR.env.webkit?"getBody":"getDocumentElement"]().$.scrollTop=b);c&&setTimeout(function(){c.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(c){c.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var c='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&10900<=CKEDITOR.env.version&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(c+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"');var c=c+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);"  onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),h=CKEDITOR.addTemplate("combo",c);

CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1}),a=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document,a.className="cke_combopanel",a.block={multiSelect:a.multiSelect,attributes:a.attributes},a.toolbarRelated=!0,this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(a,b){function j(){var d=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;this.setState(a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:d),this.setValue("")}var c=CKEDITOR.env,g="cke_"+this.id,e=CKEDITOR.tools.addFunction(function(b){i&&(a.unlockSelection(1),i=0),d.execute(b)},this),f=this,d={id:g,combo:this,focus:function(){CKEDITOR.document.getById(g).getChild(1).focus()},execute:function(d){var b=f._;if(b.state!=CKEDITOR.TRISTATE_DISABLED)if(f.createPanel(a),b.on)b.panel.hide();else{f.commit();var c=f.getValue();c?b.list.mark(c):b.list.unmarkAll(),b.panel.showBlock(f.id,new CKEDITOR.dom.element(d),4)}},clickFn:e};a.on("mode",j,this),!this.readOnly&&a.on("readOnly",j,this);var k=CKEDITOR.tools.addFunction(function(a,b){var a=new CKEDITOR.dom.event(a),c=a.getKeystroke();switch(c){case 13:case 32:case 40:CKEDITOR.tools.callFunction(e,b);break;default:d.onkey(d,c)}a.preventDefault()}),l=CKEDITOR.tools.addFunction(function(){d.onfocus&&d.onfocus()}),i=0,m=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var b=a.editable();b.isInline()&&b.hasFocus&&(a.lockSelection(),i=1)}});return d.keyDownFn=k,c={id:g,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:c.gecko&&10900<=c.version&&!c.hc?"":(this.title||"").replace("'",""),keydownFn:k,mousedownFn:m,focusFn:l,clickFn:e},h.output(c,b),this.onRender&&this.onRender(),d},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,c=this._.panelDefinition.block,h=b.parent||CKEDITOR.document.getBody(),g="cke_combopanel__"+this.name,e=new CKEDITOR.ui.floatPanel(a,h,b),f=e.addListBlock(this.id,c),d=this;e.onShow=function(){this.element.addClass(g),d.setState(CKEDITOR.TRISTATE_ON),d._.on=1,d.editorFocus&&a.focus(),d.onOpen&&d.onOpen(),f.focus(!f.multiSelect&&d.getValue())},e.onHide=function(b){this.element.removeClass(g),d.setState(d.modes&&d.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d._.on=0,!b&&d.onClose&&d.onClose()},e.onEscape=function(){e.hide(1)},f.onClick=function(a,b){d.onClick&&d.onClick.call(d,a,b),e.hide()},this._.panel=e,this._.list=f,e.getBlock(this.id).onHide=function(){d._.on=0,d.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(a,b){this._.value=a;var c=this.document.getById("cke_"+this.id+"_text");c&&(a||b?c.removeClass("cke_combo_inlinelabel"):(b=this.label,c.addClass("cke_combo_inlinelabel")),c.setText("undefined"!=typeof b?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a,this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this._.state=a}},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var g=a.config,c=a.lang.format,k=g.format_tags.split(";"),d={},l=0,m=[],h=0;h<k.length;h++){var i=k[h],j=new CKEDITOR.style(g["format_"+i]);(!a.filter.customConfig||a.filter.check(j))&&(l++,d[i]=j,d[i]._.enterMode=a.config.enterMode,m.push(j))}0!==l&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:m,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(g.contentsCss),multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in d){var e=c["tag_"+a];this.add(a,d[a].buildPreview(e),e)}},onClick:function(b){a.focus(),a.fire("saveSnapshot");var b=d[b],e=a.elementPath();a[b.checkActive(e)?"removeStyle":"applyStyle"](b),setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var e=this.getValue(),b=b.data.path,c=!a.readOnly&&b.isContextFor("p");if(this[c?"enable":"disable"](),c){for(var f in d)if(d[f].checkActive(b))return void(f!=e&&this.setValue(f,a.lang.format["tag_"+f]));this.setValue("")}},this)}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var b={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(a){a.blockless||(a.addCommand("horizontalrule",b),a.ui.addButton&&a.ui.addButton("HorizontalRule",{label:a.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(b){var a=new CKEDITOR.htmlWriter;a.forceSimpleAmpersand=b.config.forceSimpleAmpersand,a.indentationChars=b.config.dataIndentationChars||"	",b.dataProcessor.writer=a}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var a,b=CKEDITOR.dtd;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in b.$block&&!(a in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(b){var a=this._.rules[b];this._.afterCloser&&a&&a.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():a&&a.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",b),this._.afterCloser=0},openTagClose:function(b,a){var c=this._.rules[b];a?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push(">"),c&&c.indent&&(this._.indentation+=this.indentationChars)),c&&c.breakAfterOpen&&this.lineBreak(),"pre"==b&&(this._.inPre=1)},attribute:function(b,a){"string"==typeof a&&(this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"&")),a=CKEDITOR.tools.htmlEncodeAttr(a)),this._.output.push(" ",b,'="',a,'"')},closeTag:function(b){var a=this._.rules[b];a&&a.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():a&&a.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",b,">"),"pre"==b&&(this._.inPre=0),a&&a.breakAfterClose&&(this.lineBreak(),this._.needsSpace=a.needsSpace),this._.afterCloser=1},text:function(b){this._.indent&&(this.indentation(),!this._.inPre&&(b=CKEDITOR.tools.ltrim(b))),this._.output.push(b)},comment:function(b){this._.indent&&this.indentation(),this._.output.push("<!--",b,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(b,a){var c=this._.rules[b];c?CKEDITOR.tools.extend(c,a,!0):this._.rules[b]=a}}}),function(){function k(a){var d=this.editor,b=a.document,c=b.body;(a=b.getElementById("cke_actscrpt"))&&a.parentNode.removeChild(a),(a=b.getElementById("cke_shimscrpt"))&&a.parentNode.removeChild(a),CKEDITOR.env.gecko&&(c.contentEditable=!1,2e4>CKEDITOR.env.version&&(c.innerHTML=c.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var a=new CKEDITOR.dom.range(new CKEDITOR.dom.document(b));a.setStart(new CKEDITOR.dom.node(c),0),d.getSelection().selectRanges([a])},0))),c.contentEditable=!0,CKEDITOR.env.ie&&(c.hideFocus=!0,c.disabled=!0,c.removeAttribute("disabled")),delete this._.isLoadingData,this.$=c,b=new CKEDITOR.dom.document(b),this.setup(),CKEDITOR.env.ie&&(b.getDocumentElement().addClass(b.$.compatMode),d.config.enterMode!=CKEDITOR.ENTER_P&&b.on("selectionchange",function(){var a=b.getBody(),c=d.getSelection(),e=c&&c.getRanges()[0];e&&a.getHtml().match(/^<p>&nbsp;<\/p>$/i)&&e.startContainer.equals(a)&&setTimeout(function(){e=d.getSelection().getRanges()[0],e.startContainer.equals("body")||(a.getFirst().remove(1),e.moveToElementEditEnd(a),e.select())},0)}));try{d.document.$.execCommand("2D-position",!1,!0)}catch(e){}try{d.document.$.execCommand("enableInlineTableEditing",!1,!d.config.disableNativeTableHandles)}catch(g){}if(d.config.disableObjectResizing)try{this.getDocument().$.execCommand("enableObjectResizing",!1,!1)}catch(f){this.attachListener(this,CKEDITOR.env.ie?"resizestart":"resize",function(a){a.data.preventDefault()})}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==d.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var b=a.data.getKeystroke();if(33==b||34==b)if(CKEDITOR.env.ie)setTimeout(function(){d.getSelection().scrollIntoView()},0);else if(d.window.$.innerHeight>this.$.offsetHeight){var c=d.createRange();c[33==b?"moveToElementEditStart":"moveToElementEditEnd"](this),c.select(),a.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(b,"blur",function(){try{b.$.selection.empty()}catch(a){}}),d.document.getElementsByTag("title").getItem(0).data("cke-title",d.document.$.title),CKEDITOR.env.ie&&(d.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){d.fire("contentDom"),this._.isPendingFocus&&(d.focus(),this._.isPendingFocus=!1),setTimeout(function(){d.fire("dataReady")},0),CKEDITOR.env.ie&&setTimeout(function(){if(d.document){var a=d.document.$.body;a.runtimeStyle.marginBottom="0px",a.runtimeStyle.marginBottom=""}},1e3)},0,this)}function l(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var b,d=[];for(b in CKEDITOR.dtd.$removeEmpty)d.push("html.CSS1Compat "+b+"[contenteditable=false]");a.push(d.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(d){function b(b){b&&b.removeListener(),a.editable(new j(a,e.$.contentWindow.document.body)),a.setData(a.getData(1),d)}var c="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",c=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(c)+"}())":"",e=CKEDITOR.dom.element.createFromHtml('<iframe src="'+c+'" frameBorder="0"></iframe>');e.setStyles({width:"100%",height:"100%"}),e.addClass("cke_wysiwyg_frame cke_reset");var g=a.ui.space("contents");g.append(e),(c=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&e.on("load",b);var f=a.title,h=a.lang.common.editorHelp;f&&(CKEDITOR.env.ie&&(f+=", "+h),e.setAttribute("title",f));var f=CKEDITOR.tools.getNextId(),i=CKEDITOR.dom.element.createFromHtml('<span id="'+f+'" class="cke_voice_label">'+h+"</span>");g.append(i,1),a.on("beforeModeUnload",function(a){a.removeListener(),i.remove()}),e.setAttributes({"aria-describedby":f,tabIndex:a.tabIndex,allowTransparency:"true"}),!c&&b(),CKEDITOR.env.webkit&&(c=function(){g.setStyle("width","100%"),e.hide(),e.setSize("width",g.getSize("width")),g.removeStyle("width"),e.show()},e.setCustomData("onResize",c),CKEDITOR.document.getWindow().on("resize",c)),a.fire("ariaWidget",e)})}});var j=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(k,0,this,a)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,d){var b=this.editor;if(d)this.setHtml(a),b.fire("dataReady");else{this._.isLoadingData=!0,b._.dataStore={id:1};var c=b.config,e=c.fullPage,g=c.docType,f=CKEDITOR.tools.buildStyleHtml(l()).replace(/<style>/,'<style data-cke-temp="1">');e||(f+=CKEDITOR.tools.buildStyleHtml(b.config.contentsCss));var h=c.baseHref?'<base href="'+c.baseHref+'" data-cke-temp="1" />':"";e&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return b.docType=g=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){return b.xmlDeclaration=a,""})),b.dataProcessor&&(a=b.dataProcessor.toHtml(a)),e?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),h&&(a=a.replace(/<head>/,"$&"+h)),a=a.replace(/<\/head\s*>/,f+"$&"),a=g+a):a=c.docType+'<html dir="'+c.contentsLangDirection+'" lang="'+(c.contentsLanguage||b.langCode)+'"><head><title>'+this._.docTitle+"</title>"+h+f+"</head><body"+(c.bodyId?' id="'+c.bodyId+'"':"")+(c.bodyClass?' class="'+c.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),c='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(c+='<script id="cke_shimscrpt">(function(){var e="abbr,article,aside,audio,bdi,canvas,data,datalist,details,figcaption,figure,footer,header,hgroup,mark,meter,nav,output,progress,section,summary,time,video".split(","),i=e.length;while(i--){document.createElement(e[i])}})()</script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,c),this.clearCustomData(),this.clearListeners(),b.fire("contentDomUnload");var i=this.getDocument();try{i.write(a)}catch(j){setTimeout(function(){i.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();var a=this.editor,d=a.config,b=d.fullPage,c=b&&a.docType,e=b&&a.xmlDeclaration,g=this.getDocument(),b=b?g.getDocumentElement().getOuterHtml():g.getBody().getHtml();return CKEDITOR.env.gecko&&d.enterMode!=CKEDITOR.ENTER_BR&&(b=b.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),a.dataProcessor&&(b=a.dataProcessor.toDataFormat(b)),e&&(b=e+"\n"+b),c&&(b=c+"\n"+b),b},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:j.baseProto.focus.call(this)},detach:function(){var a=this.editor,d=a.document,b=a.window.getFrame();j.baseProto.detach.call(this),this.clearCustomData(),d.getDocumentElement().clearCustomData(),b.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(d=b.removeCustomData("onResize"))&&d.removeListener(),a.fire("contentDomUnload"),b.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.basePath+"contents.css",function(){function e(b,a){return a||(a=b.getSelection().getSelectedElement()),a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly()?a:void 0}function f(b){var a=b.getStyle("float");return("inherit"==a||"none"==a)&&(a=0),a||(a=b.getAttribute("align")),a}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&!b.data("cke-realelement")&&!b.isReadOnly()&&(a.data.dialog="image")}),b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(a){return e(b,a)?{image:CKEDITOR.TRISTATE_OFF}:void 0})},afterInit:function(b){function a(a){var d=b.getCommand("justify"+a);d&&(("left"==a||"right"==a)&&d.on("exec",function(d){var g,c=e(b);c&&(g=f(c),g==a?(c.removeStyle("float"),a==f(c)&&c.removeAttribute("align")):c.setStyle("float",a),d.cancel())}),d.on("refresh",function(d){var c=e(b);c&&(c=f(c),this.setState(c==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d.cancel())}))}a("left"),a("right"),a("center"),a("block")}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function k(a,b){var e,f;b.on("refresh",function(a){var c,b=[j];for(c in a.data.states)b.push(a.data.states[c]);this.setState(CKEDITOR.tools.search(b,m)?m:j)},b,null,100),b.on("exec",function(b){e=a.getSelection(),f=e.createBookmarks(1),b.data||(b.data={}),b.data.done=!1},b,null,0),b.on("exec",function(){a.forceNextSelectionCheck(),e.selectBookmarks(f)},b,null,100)}var j=CKEDITOR.TRISTATE_DISABLED,m=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var b=CKEDITOR.plugins.indent.genericDefinition;k(a,a.addCommand("indent",new b(!0))),k(a,a.addCommand("outdent",new b)),a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),a.on("dirChanged",function(b){var f=a.createRange(),i=b.data.node;f.setStartBefore(i),f.setEndAfter(i);for(var c,l=new CKEDITOR.dom.walker(f);c=l.next();)if(c.type==CKEDITOR.NODE_ELEMENT)if(!c.equals(i)&&c.getDirection())f.setStartAfter(c),l=new CKEDITOR.dom.walker(f);else{var d=a.config.indentClasses;if(d)for(var g="ltr"==b.data.dir?["_rtl",""]:["","_rtl"],h=0;h<d.length;h++)c.hasClass(d[h]+g[0])&&(c.removeClass(d[h]+g[0]),c.addClass(d[h]+g[1]));d=c.getStyle("margin-right"),g=c.getStyle("margin-left"),d?c.setStyle("margin-left",d):c.removeStyle("margin-left"),g?c.setStyle("margin-right",g):c.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,b,e){this.name=b,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!e,this.relatedGlobal=e?"indent":"outdent",this.indentKey=e?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var c,e=a.getCommand(b.relatedGlobal);for(c in b.jobs)e.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,c),e.on("refresh",function(d){d.data.states||(d.data.states={}),d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path)},this,null,c);a.addFeature(b)})(this,b[a])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var e=this.jobs[b];return e.state!=j?e.exec.call(this,a):void 0},refreshJob:function(a,b,e){return b=this.jobs[b],b.state=b.refresh.call(this,a,e),b.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function s(e){function g(b){for(var f=d.startContainer,a=d.endContainer;f&&!f.getParent().equals(b);)f=f.getParent();for(;a&&!a.getParent().equals(b);)a=a.getParent();if(!f||!a)return!1;for(var h=f,f=[],c=!1;!c;)h.equals(a)&&(c=!0),f.push(h),h=h.getNext();if(1>f.length)return!1;for(h=b.getParents(!0),a=0;a<h.length;a++)if(h[a].getName&&k[h[a].getName()]){b=h[a];break}for(var h=n.isIndent?1:-1,a=f[0],f=f[f.length-1],c=CKEDITOR.plugins.list.listToArray(b,o),g=c[f.getCustomData("listarray_index")].indent,a=a.getCustomData("listarray_index");a<=f.getCustomData("listarray_index");a++)if(c[a].indent+=h,h>0){var l=c[a].parent;c[a].parent=new CKEDITOR.dom.element(l.getName(),l.getDocument())}for(a=f.getCustomData("listarray_index")+1;a<c.length&&c[a].indent>g;a++)c[a].indent+=h;if(f=CKEDITOR.plugins.list.arrayToList(c,o,null,e.config.enterMode,b.getDirection()),!n.isIndent){var i;if((i=b.getParent())&&i.is("li"))for(var j,h=f.listNode.getChildren(),m=[],a=h.count()-1;a>=0;a--)(j=h.getItem(a))&&j.is&&j.is("li")&&m.push(j)}if(f&&f.listNode.replace(b),m&&m.length)for(a=0;a<m.length;a++){for(j=b=m[a];(j=j.getNext())&&j.is&&j.getName()in k;)CKEDITOR.env.ie&&!b.getFirst(function(a){return t(a)&&u(a)})&&b.append(d.document.createText("")),b.append(j);b.insertAfter(i)}return!0}for(var d,n=this,o=this.database,k=this.context,l=e.getSelection(),l=(l&&l.getRanges(1)).createIterator();d=l.getNextRange();){for(var b=d.getCommonAncestor();b&&(b.type!=CKEDITOR.NODE_ELEMENT||!k[b.getName()]);)b=b.getParent();if(b||(b=d.startPath().contains(k))&&d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END),!b){var c=d.getEnclosedNode();c&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in k&&(d.setStartAt(c,CKEDITOR.POSITION_AFTER_START),d.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),b=c)}if(b&&d.startContainer.type==CKEDITOR.NODE_ELEMENT&&d.startContainer.getName()in k&&(c=new CKEDITOR.dom.walker(d),c.evaluator=i,d.startContainer=c.next()),b&&d.endContainer.type==CKEDITOR.NODE_ELEMENT&&d.endContainer.getName()in k&&(c=new CKEDITOR.dom.walker(d),c.evaluator=i,d.endContainer=c.previous()),b)return g(b)}return 0}function p(e,g){return g||(g=e.contains(this.context)),g&&e.block&&e.block.equals(g.getFirst(i))}function i(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}var t=CKEDITOR.dom.walker.whitespaces(!0),u=CKEDITOR.dom.walker.bookmark(!1,!0),q=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(e){function g(e){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],e.on("key",function(g){if("wysiwyg"==e.mode&&g.data.keyCode==this.indentKey){var d=this.getContext(e.elementPath());!d||this.isIndent&&p.call(this,e.elementPath(),d)||(e.execCommand(this.relatedGlobal),g.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,d){var b=this.getContext(d),c=p.call(this,d,b);return b&&this.isIndent&&!c?r:q}:function(e,d){return!this.getContext(d)||this.isIndent?q:r},exec:CKEDITOR.tools.bind(s,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(e,{indentlist:new g(e,"indentlist",!0),outdentlist:new g(e,"outdentlist")}),CKEDITOR.tools.extend(g.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}})}(),function(){function g(a,b){var c=j.exec(a),d=j.exec(b);if(c){if(!c[2]&&"px"==d[2])return d[1];if("px"==c[2]&&!d[2])return d[1]+"px"}return b}var i=CKEDITOR.htmlParser.cssStyle,h=CKEDITOR.tools.cssLength,j=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,l={elements:{$:function(a){var b=a.attributes;if((b=(b=(b=b&&b["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes["data-cke-resizable"]){var c=new i(a).rules,a=b.attributes,d=c.width,c=c.height;d&&(a.width=g(a.width,d)),c&&(a.height=g(a.height,c))}return b}}},k=CKEDITOR.plugins.add("fakeobjects",{afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(l)}});CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown,b={"class":b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.getAttribute("align")||""};return CKEDITOR.env.hc||(b.src=CKEDITOR.getUrl(k.path+"images/spacer.gif")),c&&(b["data-cke-real-element-type"]=c),d&&(b["data-cke-resizable"]=d,c=new i,d=a.getAttribute("width"),a=a.getAttribute("height"),d&&(c.rules.width=h(d)),a&&(c.rules.height=h(a)),c.populate(b)),this.document.createElement("img",{attributes:b})},CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,d){var f,e=this.lang.fakeobjects,e=e[c]||e.unknown;return f=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(f),f=f.getHtml(),b={"class":b,"data-cke-realelement":encodeURIComponent(f),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.attributes.align||""},CKEDITOR.env.hc||(b.src=CKEDITOR.getUrl(k.path+"images/spacer.gif")),c&&(b["data-cke-real-element-type"]=c),d&&(b["data-cke-resizable"]=d,d=a.attributes,a=new i,c=d.width,d=d.height,void 0!=c&&(a.rules.width=h(c)),void 0!=d&&(a.rules.height=h(d)),a.populate(b)),new CKEDITOR.htmlParser.element("img",b)},CKEDITOR.editor.prototype.restoreRealElement=function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var b=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width"),a=a.getStyle("height");c&&b.setAttribute("width",g(b.getAttribute("width"),c)),a&&b.setAttribute("height",g(b.getAttribute("height"),a))}return b}}(),CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function b(b){return d.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var a="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",d=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+a+"padding-%1:18px;cursor:auto;}"+(CKEDITOR.env.ie?"a.cke_anchor_empty{display:inline-block;}":"")+".%2 img.cke_anchor{"+a+"width:16px;min-height:15px;height:1.15em;vertical-align:"+(CKEDITOR.env.opera?"middle":"text-bottom")+";}";CKEDITOR.addCss(b("ltr")+b("rtl"))},init:function(b){var a="a[!href]";CKEDITOR.dialog.isTabEnabled(b,"link","advanced")&&(a=a.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(b,"link","target")&&(a=a.replace("]",",target,onclick]")),b.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:a,requiredContent:"a[href]"})),b.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),b.addCommand("unlink",new CKEDITOR.unlinkCommand),b.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),b.setKeystroke(CKEDITOR.CTRL+76,"link"),b.ui.addButton&&(b.ui.addButton("Link",{label:b.lang.link.toolbar,command:"link",toolbar:"links,10"}),b.ui.addButton("Unlink",{label:b.lang.link.unlink,command:"unlink",toolbar:"links,20"}),b.ui.addButton("Anchor",{label:b.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),b.on("doubleclick",function(a){var c=CKEDITOR.plugins.link.getSelectedLink(b)||a.data.element;c.isReadOnly()||(c.is("a")?(a.data.dialog=!c.getAttribute("name")||c.getAttribute("href")&&c.getChildCount()?"link":"anchor",b.getSelection().selectElement(c)):CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,c)&&(a.data.dialog="anchor"))}),b.addMenuItems&&b.addMenuItems({anchor:{label:b.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:b.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:b.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:b.lang.link.unlink,command:"unlink",group:"link",order:5}}),b.contextMenu&&b.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;if(a=CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,a),!a&&!(a=CKEDITOR.plugins.link.getSelectedLink(b)))return null;var c={};return a.getAttribute("href")&&a.getChildCount()&&(c={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),a&&a.hasAttribute("name")&&(c.anchor=c.removeAnchor=CKEDITOR.TRISTATE_OFF),c})},afterInit:function(b){var a=b.dataProcessor,d=a&&a.dataFilter,a=a&&a.htmlFilter,c=b._.elementsPath&&b._.elementsPath.filters;d&&d.addRules({elements:{a:function(a){var c=a.attributes;if(!c.name)return null;var d=!a.children.length;if(CKEDITOR.plugins.link.synAnchorSelector){var a=d?"cke_anchor_empty":"cke_anchor",e=c["class"];c.name&&(!e||0>e.indexOf(a))&&(c["class"]=(e||"")+" "+a),d&&CKEDITOR.plugins.link.emptyAnchorFix&&(c.contenteditable="false",c["data-cke-editable"]=1)}else if(CKEDITOR.plugins.link.fakeAnchor&&d)return b.createFakeParserElement(a,"cke_anchor","anchor");return null}}}),CKEDITOR.plugins.link.emptyAnchorFix&&a&&a.addRules({elements:{a:function(a){delete a.attributes.contenteditable}}}),c&&c.push(function(a,c){return"a"!=c||!CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,a)&&(!a.getAttribute("name")||a.getAttribute("href")&&a.getChildCount())?void 0:"anchor"})}}),CKEDITOR.plugins.link={getSelectedLink:function(b){var a=b.getSelection(),d=a.getSelectedElement();return d&&d.is("a")?d:(a=a.getRanges(!0)[0])?(a.shrink(CKEDITOR.SHRINK_TEXT),b.elementPath(a.getCommonAncestor()).contains("a",1)):null},fakeAnchor:CKEDITOR.env.opera||CKEDITOR.env.webkit,synAnchorSelector:CKEDITOR.env.ie,emptyAnchorFix:CKEDITOR.env.ie&&8>CKEDITOR.env.version,tryRestoreFakeAnchor:function(b,a){if(a&&a.data("cke-real-element-type")&&"anchor"==a.data("cke-real-element-type")){var d=b.restoreRealElement(a);if(d.data("cke-saved-name"))return d}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(b){var a=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});b.removeStyle(a)},refresh:function(b,a){var d=a.lastElement&&a.lastElement.getAscendant("a",!0);this.setState(d&&"a"==d.getName()&&d.getAttribute("href")&&d.getChildCount()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(b){var c,a=b.getSelection(),d=a.createBookmarks();a&&(c=a.getSelectedElement())&&(CKEDITOR.plugins.link.fakeAnchor&&!c.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(b,c):c.is("a"))?c.remove(1):(c=CKEDITOR.plugins.link.getSelectedLink(b))&&(c.hasAttribute("href")?(c.removeAttributes({
name:1,"data-cke-saved-name":1}),c.removeClass("cke_anchor")):c.remove(1)),a.selectBookmarks(d)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function C(c,j,f){function b(b){!(d=a[b?"getFirst":"getLast"]())||d.is&&d.isBlockBoundary()||!(m=j.root[b?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||m.is&&m.isBlockBoundary({br:1})||c.document.createElement("br")[b?"insertBefore":"insertAfter"](d)}for(var i=CKEDITOR.plugins.list.listToArray(j.root,f),e=[],h=0;h<j.contents.length;h++){var g=j.contents[h];(g=g.getAscendant("li",!0))&&!g.getCustomData("list_item_processed")&&(e.push(g),CKEDITOR.dom.element.setMarker(f,g,"list_item_processed",!0))}for(g=null,h=0;h<e.length;h++)g=e[h].getCustomData("listarray_index"),i[g].indent=-1;for(h=g+1;h<i.length;h++)if(i[h].indent>i[h-1].indent+1){for(e=i[h-1].indent+1-i[h].indent,g=i[h].indent;i[h]&&i[h].indent>=g;)i[h].indent+=e,h++;h--}var d,m,a=CKEDITOR.plugins.list.arrayToList(i,f,null,c.config.enterMode,j.root.getAttribute("dir")).listNode;b(!0),b(),a.replace(j.root)}function x(c,j){this.name=c,this.context=this.type=j,this.allowedContent=j+" li",this.requiredContent=j}function y(c,j,f,b){for(var i,e;i=c[b?"getLast":"getFirst"](D);)(e=i.getDirection(1))!==j.getDirection(1)&&i.setAttribute("dir",e),i.remove(),f?i[b?"insertBefore":"insertAfter"](f):j.append(i,b)}function A(c){var j;(j=function(f){var b=c[f?"getPrevious":"getNext"](q);b&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(c.getName())&&(y(c,b,null,!f),c.remove(),c=b)})(),j(1)}function B(c){return c.type==CKEDITOR.NODE_ELEMENT&&(c.getName()in CKEDITOR.dtd.$block||c.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[c.getName()]["#"]}function v(c,j,f){c.fire("saveSnapshot"),f.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var b=f.extractContents();j.trim(!1,!0);var i=j.createBookmark(),e=new CKEDITOR.dom.elementPath(j.startContainer),h=e.block,e=e.lastElement.getAscendant("li",1)||h,g=new CKEDITOR.dom.elementPath(f.startContainer),a=g.contains(CKEDITOR.dtd.$listItem),g=g.contains(CKEDITOR.dtd.$list);for(h?(h=h.getBogus())&&h.remove():g&&(h=g.getPrevious(q))&&u(h)&&h.remove(),(h=b.getLast())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br")&&h.remove(),(h=j.startContainer.getChild(j.startOffset))?b.insertBefore(h):j.startContainer.append(b),a&&(b=w(a))&&(e.contains(a)?(y(b,a.getParent(),a),b.remove()):e.append(b));f.checkStartOfBlock()&&f.checkEndOfBlock();)g=f.startPath(),b=g.block,b.is("li")&&(e=b.getParent(),b.equals(e.getLast(q))&&b.equals(e.getFirst(q))&&(b=e)),f.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START),b.remove();f=f.clone(),b=c.editable(),f.setEndAt(b,CKEDITOR.POSITION_BEFORE_END),f=new CKEDITOR.dom.walker(f),f.evaluator=function(a){return q(a)&&!u(a)},(f=f.next())&&f.type==CKEDITOR.NODE_ELEMENT&&f.getName()in CKEDITOR.dtd.$list&&A(f),j.moveToBookmark(i),j.select(),c.fire("saveSnapshot")}function w(c){return(c=c.getLast(q))&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in r?c:null}var r={ol:1,ul:1},E=CKEDITOR.dom.walker.whitespaces(),F=CKEDITOR.dom.walker.bookmark(),q=function(c){return!(E(c)||F(c))},u=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(c,j,f,b,i){if(!r[c.getName()])return[];b||(b=0),f||(f=[]);for(var e=0,h=c.getChildCount();h>e;e++){var g=c.getChild(e);if(g.type==CKEDITOR.NODE_ELEMENT&&g.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(g,j,f,b+1),"li"==g.$.nodeName.toLowerCase()){var a={parent:c,indent:b,element:g,contents:[]};i?a.grandparent=i:(a.grandparent=c.getParent(),a.grandparent&&"li"==a.grandparent.$.nodeName.toLowerCase()&&(a.grandparent=a.grandparent.getParent())),j&&CKEDITOR.dom.element.setMarker(j,g,"listarray_index",f.length),f.push(a);for(var k,d=0,m=g.getChildCount();m>d;d++)k=g.getChild(d),k.type==CKEDITOR.NODE_ELEMENT&&r[k.getName()]?CKEDITOR.plugins.list.listToArray(k,j,f,b+1,a.grandparent):a.contents.push(k)}}return f},arrayToList:function(c,j,f,b,i){if(f||(f=0),!c||c.length<f+1)return null;for(var e,n,l,h=c[f].parent.getDocument(),g=new CKEDITOR.dom.documentFragment(h),a=null,d=f,m=Math.max(c[f].indent,0),k=null,p=b==CKEDITOR.ENTER_P?"p":"div";;){var o=c[d];if(e=o.grandparent,n=o.element.getDirection(1),o.indent==m){for(a&&c[d].parent.getName()==a.getName()||(a=c[d].parent.clone(!1,1),i&&a.setAttribute("dir",i),g.append(a)),k=a.append(o.element.clone(0,1)),n!=a.getDirection(1)&&k.setAttribute("dir",n),e=0;e<o.contents.length;e++)k.append(o.contents[e].clone(1,1));d++}else if(o.indent==Math.max(m,0)+1)l=c[d-1].element.getDirection(1),d=CKEDITOR.plugins.list.arrayToList(c,null,d,b,l!=n?n:null),!k.getChildCount()&&CKEDITOR.env.ie&&!(7<h.$.documentMode)&&k.append(h.createText("")),k.append(d.listNode),d=d.nextIndex;else{if(-1!=o.indent||f||!e)return null;r[e.getName()]?(k=o.element.clone(!1,!0),n!=e.getDirection(1)&&k.setAttribute("dir",n)):k=new CKEDITOR.dom.documentFragment(h);var t,a=e.getDirection(1)!=n,s=o.element,z=s.getAttribute("class"),u=s.getAttribute("style"),w=k.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(b!=CKEDITOR.ENTER_BR||a||u||z),x=o.contents.length;for(e=0;x>e;e++){if(t=o.contents[e],t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()){a&&!t.getDirection()&&t.setAttribute("dir",n);var v=t,y=s.getAttribute("style");y&&v.setAttribute("style",y.replace(/([^;])$/,"$1;")+(v.getAttribute("style")||"")),z&&t.addClass(z)}else w&&(l||(l=h.createElement(p),a&&l.setAttribute("dir",n)),u&&l.setAttribute("style",u),z&&l.setAttribute("class",z),l.append(t.clone(1,1)));k.append(l||t.clone(1,1))}k.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&d!=c.length-1&&((n=k.getLast())&&n.type==CKEDITOR.NODE_ELEMENT&&"_moz"==n.getAttribute("type")&&n.remove(),(!k.getLast(q)||!(n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in CKEDITOR.dtd.$block))&&k.append(h.createElement("br"))),n=k.$.nodeName.toLowerCase(),!CKEDITOR.env.ie&&("div"==n||"p"==n)&&k.appendBogus(),g.append(k),a=null,d++}if(l=null,c.length<=d||Math.max(c[d].indent,0)<m)break}if(j)for(c=g.getFirst();c;){if(c.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(j,c),c.getName()in CKEDITOR.dtd.$listItem&&(f=c,h=i=b=void 0,b=f.getDirection()))){for(i=f.getParent();i&&!(h=i.getDirection());)i=i.getParent();b==h&&f.removeAttribute("dir")}c=c.getNextSourceNode()}return{listNode:g,nextIndex:d}}};var G=/^h[1-6]$/,D=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);x.prototype={exec:function(c){this.refresh(c,c.elementPath());var j=c.config,f=c.getSelection(),b=f&&f.getRanges(!0);if(this.state==CKEDITOR.TRISTATE_OFF){var i=c.editable();if(i.getFirst(q)){var e=1==b.length&&b[0];(j=e&&e.getEnclosedNode())&&j.is&&this.type==j.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else j.enterMode==CKEDITOR.ENTER_BR?i.appendBogus():b[0].fixBlock(1,j.enterMode==CKEDITOR.ENTER_P?"p":"div"),f.selectRanges(b)}for(var j=f.createBookmarks(!0),i=[],h={},b=b.createIterator(),g=0;(e=b.getNextRange())&&++g;){var a=e.getBoundaryNodes(),d=a.startNode,m=a.endNode;for(d.type==CKEDITOR.NODE_ELEMENT&&"td"==d.getName()&&e.setStartAt(a.startNode,CKEDITOR.POSITION_AFTER_START),m.type==CKEDITOR.NODE_ELEMENT&&"td"==m.getName()&&e.setEndAt(a.endNode,CKEDITOR.POSITION_BEFORE_END),e=e.createIterator(),e.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;a=e.getNextParagraph();)if(!a.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(h,a,"list_block",1);for(var n,k=c.elementPath(a),d=k.elements,m=0,k=k.blockLimit,l=d.length-1;l>=0&&(n=d[l]);l--)if(r[n.getName()]&&k.contains(n)){k.removeCustomData("list_group_object_"+g),(d=n.getCustomData("list_group_object"))?d.contents.push(a):(d={root:n,contents:[a]},i.push(d),CKEDITOR.dom.element.setMarker(h,n,"list_group_object",d)),m=1;break}m||(m=k,m.getCustomData("list_group_object_"+g)?m.getCustomData("list_group_object_"+g).contents.push(a):(d={root:m,contents:[a]},CKEDITOR.dom.element.setMarker(h,m,"list_group_object_"+g,d),i.push(d)))}}for(n=[];0<i.length;)if(d=i.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(r[d.root.getName()]){for(a=c,b=d,d=h,g=n,m=CKEDITOR.plugins.list.listToArray(b.root,d),k=[],e=0;e<b.contents.length;e++)l=b.contents[e],(l=l.getAscendant("li",!0))&&!l.getCustomData("list_item_processed")&&(k.push(l),CKEDITOR.dom.element.setMarker(d,l,"list_item_processed",!0));for(var l=b.root.getDocument(),p=void 0,o=void 0,e=0;e<k.length;e++){var s=k[e].getCustomData("listarray_index"),p=m[s].parent;p.is(this.type)||(o=l.createElement(this.type),p.copyAttributes(o,{start:1,type:1}),o.removeStyle("list-style-type"),m[s].parent=o)}for(a=CKEDITOR.plugins.list.arrayToList(m,d,null,a.config.enterMode),d=void 0,m=a.listNode.getChildCount(),e=0;m>e&&(d=a.listNode.getChild(e));e++)d.getName()==this.type&&g.push(d);a.listNode.replace(b.root)}else{for(m=c,a=d,e=n,k=a.contents,b=a.root.getDocument(),g=[],1==k.length&&k[0].equals(a.root)&&(d=b.createElement("div"),k[0].moveChildren&&k[0].moveChildren(d),k[0].append(d),k[0]=d),a=a.contents[0].getParent(),l=0;l<k.length;l++)a=a.getCommonAncestor(k[l].getParent());for(p=m.config.useComputedState,m=d=void 0,p=void 0===p||p,l=0;l<k.length;l++)for(o=k[l];s=o.getParent();){if(s.equals(a)){g.push(o),!m&&o.getDirection()&&(m=1),o=o.getDirection(p),null!==d&&(d=d&&d!=o?null:o);break}o=s}if(!(1>g.length)){for(k=g[g.length-1].getNext(),l=b.createElement(this.type),e.push(l),p=e=void 0;g.length;)e=g.shift(),p=b.createElement("li"),e.is("pre")||G.test(e.getName())?e.appendTo(p):(e.copyAttributes(p),d&&e.getDirection()&&(p.removeStyle("direction"),p.removeAttribute("dir")),e.moveChildren(p),e.remove()),p.appendTo(l);d&&m&&l.setAttribute("dir",d),k?l.insertBefore(k):l.appendTo(a)}}else this.state==CKEDITOR.TRISTATE_ON&&r[d.root.getName()]&&C.call(this,c,d,h);for(l=0;l<n.length;l++)A(n[l]);CKEDITOR.dom.element.clearAllMarkers(h),f.selectBookmarks(j),c.focus()},refresh:function(c,j){var f=j.contains(r,1),b=j.blockLimit||j.root;this.setState(f&&b.contains(f)&&f.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(c){c.blockless||(c.addCommand("numberedlist",new x("numberedlist","ol")),c.addCommand("bulletedlist",new x("bulletedlist","ul")),c.ui.addButton&&(c.ui.addButton("NumberedList",{label:c.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),c.ui.addButton("BulletedList",{label:c.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),c.on("key",function(j){var f=j.data.keyCode;if("wysiwyg"==c.mode&&f in{8:1,46:1}){var b=c.getSelection().getRanges()[0],i=b.startPath();if(b.collapsed){var i=new CKEDITOR.dom.elementPath(b.startContainer),e=8==f,h=c.editable(),g=new CKEDITOR.dom.walker(b.clone());if(g.evaluator=function(a){return q(a)&&!u(a)},g.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))},f=b.clone(),e){var a,d;(a=i.contains(r))&&b.checkBoundaryOfElement(a,CKEDITOR.START)&&(a=a.getParent())&&a.is("li")&&(a=w(a))?(d=a,a=a.getPrevious(q),f.moveToPosition(a&&u(a)?a:d,CKEDITOR.POSITION_BEFORE_START)):(g.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),g.range.setEnd(b.startContainer,b.startOffset),(a=g.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in r||a.is("li"))&&(a.is("li")||(g.range.selectNodeContents(a),g.reset(),g.evaluator=B,a=g.previous()),d=a,f.moveToElementEditEnd(d))),d?(v(c,f,b),j.cancel()):(f=i.contains(r))&&b.checkBoundaryOfElement(f,CKEDITOR.START)&&(d=f.getFirst(q),b.checkBoundaryOfElement(d,CKEDITOR.START)&&(a=f.getPrevious(q),w(d)?a&&(b.moveToElementEditEnd(a),b.select()):c.execCommand("outdent"),j.cancel()))}else(d=i.contains("li"))?(g.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),h=(i=d.getLast(q))&&B(i)?i:d,d=0,(a=g.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in r&&a.equals(i)?(d=1,a=g.next()):b.checkBoundaryOfElement(h,CKEDITOR.END)&&(d=1),d&&a&&(b=b.clone(),b.moveToElementEditStart(a),v(c,f,b),j.cancel())):(g.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(a=g.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(r)&&(a=a.getFirst(q),i.block&&b.checkStartOfBlock()&&b.checkEndOfBlock()?(i.block.remove(),b.moveToElementEditStart(a),b.select()):w(a)?(b.moveToElementEditStart(a),b.select()):(b=b.clone(),b.moveToElementEditStart(a),v(c,f,b)),j.cancel()));setTimeout(function(){c.selectionChange(1)})}}}))}})}(),function(){function O(a,b,d){return m(b)&&m(d)&&d.equals(b.getNext(function(a){return!(z(a)||A(a)||p(a))}))}function u(a){this.upper=a[0],this.lower=a[1],this.set.apply(this,a.slice(2))}function I(a){var d,b=a.element;return b&&m(b)?!(d=b.getAscendant(a.triggers,!0))||d.contains(a.editable)||d.equals(a.editable)?null:d:null}function ca(a,b,d){return o(a,b),o(a,d),a=b.size.bottom,d=d.size.top,a&&d?0|(a+d)/2:a||d}function r(a,b,d){return b=b[d?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!z(b)||m(b)&&!p(b)&&!v(a,b)})}function da(a){var b=a.doc,d=B('<span contenteditable="false" style="'+J+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',b),e=this.path+"images/"+(n.hidpi?"hidpi/":"")+"icon.png";for(q(d,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(a.editable,!0),this},lineChildren:[q(B('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',b),{base:J+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+e+") center no-repeat "+a.boxColor+";cursor:pointer;"+(n.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(n.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),q(B(P,b),{base:Q+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),q(B(P,b),{base:Q+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){o(a,this);var b=a.holdDistance,c=this.size;return c&&a.mouse.y>c.top-b&&a.mouse.y<c.bottom+b&&a.mouse.x>c.left-b&&a.mouse.x<c.right+b?!0:!1},place:function(){var b=a.view,c=a.editable,d=a.trigger,e=d.upper,g=d.lower,i=e||g,l=i.getParent(),k={};this.trigger=d,e&&o(a,e,!0),g&&o(a,g,!0),o(a,l,!0),a.inInlineMode&&C(a,!0),l.equals(c)?(k.left=b.scroll.x,k.right=-b.scroll.x,k.width=""):(k.left=i.size.left-i.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),k.width=i.size.outerWidth+i.size.margin.left+i.size.margin.right+b.scroll.x,k.right=""),e&&g?k.top=e.size.margin.bottom===g.size.margin.top?0|e.size.bottom+e.size.margin.bottom/2:e.size.margin.bottom<g.size.margin.top?e.size.bottom+e.size.margin.bottom:e.size.bottom+e.size.margin.bottom-g.size.margin.top:e?g||(k.top=e.size.bottom+e.size.margin.bottom):k.top=g.size.top-g.size.margin.top,d.is(x)||k.top>b.scroll.y-15&&k.top<b.scroll.y+5?(k.top=a.inInlineMode?0:b.scroll.y,this.look(x)):d.is(y)||k.top>b.pane.bottom-5&&k.top<b.pane.bottom+15?(k.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(y)):(a.inInlineMode&&(k.top-=b.editable.top+b.editable.border.top),this.look(s)),a.inInlineMode&&(k.top--,k.top+=b.editable.scroll.top,k.left+=b.editable.scroll.left);for(var R in k)k[R]=CKEDITOR.tools.cssLength(k[R]);this.setStyles(k)},look:function(a){if(this.oldLook!=a){for(var d,b=this.lineChildren.length;b--;)(d=this.lineChildren[b]).setAttribute("style",d.base+d.looks[0|a/2]);this.oldLook=a}},wrap:new K("span",a.doc)}),b=d.lineChildren.length;b--;)d.lineChildren[b].appendTo(d);d.look(s),d.appendTo(d.wrap),d.unselectable(),d.lineChildren[0].on("mouseup",function(b){d.detach(),L(a,function(b){var d=a.line.trigger;b[d.is(D)?"insertBefore":"insertAfter"](d.is(D)?d.lower:d.upper)},!0),a.editor.focus(),!n.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),b.data.preventDefault(!0)}),d.on("mousedown",function(a){a.data.preventDefault(!0)}),a.line=d}function L(a,b,d){var c,e=new CKEDITOR.dom.range(a.doc),f=a.editor;n.ie&&a.enterMode==CKEDITOR.ENTER_BR?c=a.doc.createText(E):(c=new K(a.enterBehavior,a.doc),a.enterMode!=CKEDITOR.ENTER_BR&&a.doc.createText(E).appendTo(c)),d&&f.fire("saveSnapshot"),b(c),e.moveToPosition(c,CKEDITOR.POSITION_AFTER_START),f.getSelection().selectRanges([e]),a.hotNode=c,d&&f.fire("saveSnapshot")}function S(a,b){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(d){var f=n.ie&&9>n.version?" ":E,c=a.hotNode&&a.hotNode.getText()==f&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!b;L(a,function(f){c&&a.hotNode&&a.hotNode.remove(),f[b?"insertAfter":"insertBefore"](d),f.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!b}),a.lastCmdDirection=!!b}),!n.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),a.line.detach()}return function(e){if(e=e.getSelection().getStartElement(),(e=e.getAscendant(T,1))&&!e.equals(a.editable)&&!e.contains(a.editable)){a.element=e;var c,f=r(a,e,!b);m(f)&&f.is(a.triggers)&&f.is(ea)&&(!r(a,f,!b)||(c=r(a,f,!b))&&m(c)&&c.is(a.triggers))?d(f):(c=I(a,e),m(c)&&(r(a,c,!b)?(e=r(a,c,!b))&&m(e)&&e.is(a.triggers)&&d(c):d(c)))}}}()}}function v(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var d=a.line;return d.wrap.equals(b)||d.wrap.contains(b)}function m(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function p(a){if(!m(a))return!1;var b;return(b=U(a))||(m(a)?(b={left:1,right:1,center:1},b=!(!b[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])):b=!1),b}function U(a){return!!{absolute:1,fixed:1,relative:1}[a.getComputedStyle("position")]}function F(a,b){return m(b)?b.is(a.triggers):null}function fa(a,b,d){return(b=b[d?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(ga)}))?(o(a,b),d?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y):!1}function V(a){var b=a.editable,d=a.mouse,e=a.view,f=a.triggerOffset;C(a);var c=d.y>(a.inInlineMode?e.editable.top+e.editable.height/2:Math.min(e.editable.height,e.pane.height)/2),b=b[c?"getLast":"getFirst"](function(a){return!(z(a)||A(a))});return b?(v(a,b)&&(b=a.line.wrap[c?"getPrevious":"getNext"](function(a){return!(z(a)||A(a))})),m(b)&&!p(b)&&F(a,b)?(o(a,b),!c&&0<=b.size.top&&0<d.y&&d.y<b.size.top+f?(a=a.inInlineMode||0===e.scroll.y?x:s,new u([null,b,D,G,a])):c&&b.size.bottom<=e.pane.height&&d.y>b.size.bottom-f&&d.y<e.pane.height?(a=a.inInlineMode||b.size.bottom>e.pane.height-f&&b.size.bottom<e.pane.height?y:s,new u([b,null,W,G,a])):null):null):null}function X(a){var b=a.mouse,d=a.view,e=a.triggerOffset,f=I(a);if(!f)return null;o(a,f);var h,j,e=Math.min(e,0|f.size.outerHeight/2),c=[];if(b.y>f.size.top-1&&b.y<f.size.top+e)j=!1;else{if(!(b.y>f.size.bottom-e&&b.y<f.size.bottom+1))return null;j=!0}if(p(f)||fa(a,f,j)||f.getParent().is(Y))return null;var g=r(a,f,!j);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(m(g)){if(p(g)||!F(a,g)||g.getParent().is(Y))return null;c=[g,f][j?"reverse":"concat"]().concat([M,G])}}else f.equals(a.editable[j?"getLast":"getFirst"](a.isRelevant))?(C(a),j&&b.y>f.size.bottom-e&&b.y<d.pane.height&&f.size.bottom>d.pane.height-e&&f.size.bottom<d.pane.height?h=y:0<b.y&&b.y<f.size.top+e&&(h=x)):h=s,c=[null,f][j?"reverse":"concat"]().concat([j?W:D,G,h,f.equals(a.editable[j?"getLast":"getFirst"](a.isRelevant))?j?y:x:s]);return 0 in c?new u(c):null}function N(a,b,d,e){for(var f=function(){var d=n.ie?b.$.currentStyle:a.win.$.getComputedStyle(b.$,"");return n.ie?function(a){return d[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){return d.getPropertyValue(a)}}(),c=b.getDocumentPosition(),h={},j={},g={},i={},l=t.length;l--;)h[t[l]]=parseInt(f("border-"+t[l]+"-width"),10)||0,g[t[l]]=parseInt(f("padding-"+t[l]),10)||0,j[t[l]]=parseInt(f("margin-"+t[l]),10)||0;return(!d||e)&&H(a,e),i.top=c.y-(d?0:a.view.scroll.y),i.left=c.x-(d?0:a.view.scroll.x),i.outerWidth=b.$.offsetWidth,i.outerHeight=b.$.offsetHeight,i.height=i.outerHeight-(g.top+g.bottom+h.top+h.bottom),i.width=i.outerWidth-(g.left+g.right+h.left+h.right),i.bottom=i.top+i.outerHeight,i.right=i.left+i.outerWidth,a.inInlineMode&&(i.scroll={top:b.$.scrollTop,left:b.$.scrollLeft}),q({border:h,padding:g,margin:j,ignoreScroll:d},i,!0)}function o(a,b,d){if(!m(b))return b.size=null;if(b.size){if(b.size.ignoreScroll==d&&b.size.date>new Date-Z)return null}else b.size={};return q(b.size,N(a,b,d),{date:+new Date},!0)}function C(a,b){a.view.editable=N(a,a.editable,b,!0)}function H(a,b){a.view||(a.view={});var d=a.view;if(b||!(d&&d.date>new Date-Z)){var e=a.win,d=e.getScrollPosition(),e=e.getViewPaneSize();q(a.view,{scroll:{x:d.x,y:d.y,width:a.doc.$.documentElement.scrollWidth-e.width,height:a.doc.$.documentElement.scrollHeight-e.height},pane:{width:e.width,height:e.height,bottom:e.height+d.y},date:+new Date},!0)}}function ha(a,b,d,e){for(var f=e,c=e,h=0,j=!1,g=!1,i=a.view.pane.height,l=a.mouse;l.y+h<i&&0<l.y-h&&(j||(j=b(f,e)),g||(g=b(c,e)),!j&&0<l.y-h&&(f=d(a,{x:l.x,y:l.y-h})),!g&&l.y+h<i&&(c=d(a,{x:l.x,y:l.y+h})),!j||!g);)h+=2;return new u([f,c,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var b={};b[CKEDITOR.ENTER_BR]="br",b[CKEDITOR.ENTER_P]="p",b[CKEDITOR.ENTER_DIV]="div";var h,j,g,d=a.config,e=d.magicline_triggerOffset||30,f=d.enterMode,c={editor:a,enterBehavior:b[f],enterMode:f,triggerOffset:e,holdDistance:0|e*(d.magicline_holdDistance||.5),boxColor:d.magicline_color||"#ff0000",rtl:"rtl"==d.contentsLangDirection,triggers:d.magicline_everywhere?T:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};c.isRelevant=function(a){return m(a)&&!v(c,a)&&!p(a)},a.on("contentDom",function(){var b=a.editable(),e=a.document,f=a.window;q(c,{editable:b,inInlineMode:b.isInline(),doc:e,win:f},!0),c.boundary=c.inInlineMode?c.editable:c.doc.getDocumentElement(),b.is(w.$inline)||(c.inInlineMode&&!U(b)&&b.setStyles({position:"relative",top:null,left:null}),da.call(this,c),H(c),b.attachListener(a,"beforeUndoImage",function(){c.line.detach()}),b.attachListener(a,"beforeGetData",function(){c.line.wrap.getParent()&&(c.line.detach(),a.once("getData",function(){c.line.attach()},null,null,1e3))},null,null,0),b.attachListener(c.inInlineMode?e:e.getWindow().getFrame(),"mouseout",function(b){if("wysiwyg"==a.mode)if(c.inInlineMode){var d=b.data.$.clientX,b=b.data.$.clientY;H(c),C(c,!0);var e=c.view.editable,f=c.view.scroll;d>e.left-f.x&&d<e.right-f.x&&b>e.top-f.y&&b<e.bottom-f.y||(clearTimeout(g),g=null,c.line.detach())}else clearTimeout(g),g=null,c.line.detach()}),b.attachListener(b,"keyup",function(){c.hiddenMode=0}),b.attachListener(b,"keydown",function(b){if("wysiwyg"==a.mode)switch(b=b.data.getKeystroke(),a.getSelection().getStartElement(),b){case 2228240:case 16:c.hiddenMode=1,c.line.detach()}}),b.attachListener(c.inInlineMode?b:e,"mousemove",function(b){if(j=!0,"wysiwyg"==a.mode&&!a.readOnly&&!g){var d={x:b.data.$.clientX,y:b.data.$.clientY};g=setTimeout(function(){c.mouse=d,g=c.trigger=null,H(c),j&&!c.hiddenMode&&a.focusManager.hasFocus&&!c.line.mouseNear()&&(c.element=$(c,!0))&&((c.trigger=V(c)||X(c)||aa(c))?c.line.attach().place():(c.trigger=null,c.line.detach()),j=!1)},30)}}),b.attachListener(f,"scroll",function(){"wysiwyg"==a.mode&&(c.line.detach(),n.webkit&&(c.hiddenMode=1,clearTimeout(h),h=setTimeout(function(){c.hiddenMode=0},50)))}),b.attachListener(f,"mousedown",function(){"wysiwyg"==a.mode&&(c.line.detach(),c.hiddenMode=1)}),b.attachListener(f,"mouseup",function(){c.hiddenMode=0}),a.addCommand("accessPreviousSpace",S(c)),a.addCommand("accessNextSpace",S(c,!0)),a.setKeystroke([[d.magicline_keystrokePrevious,"accessPreviousSpace"],[d.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){for(var d,b=a.document.getElementsByTag(c.enterBehavior),e=b.count();e--;)if((d=b.getItem(e)).hasAttribute("data-cke-magicline-hot")){c.hotNode=d,c.lastCmdDirection="true"===d.getAttribute("data-cke-magicline-dir")?!0:!1;break}}),this.backdoor={accessFocusSpace:L,boxTrigger:u,isLine:v,getAscendantTrigger:I,getNonEmptyNeighbour:r,getSize:N,that:c,triggerEdge:X,triggerEditable:V,triggerExpand:aa})},this)}});var q=CKEDITOR.tools.extend,K=CKEDITOR.dom.element,B=K.createFromHtml,n=CKEDITOR.env,w=CKEDITOR.dtd,D=128,W=64,M=32,G=16,ba=8,x=4,y=2,s=1,E="",Y=w.$listItem,ga=w.$tableContent,ea=q({},w.$nonEditable,w.$empty),T=w.$block,Z=100,J="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",Q=J+"border-color:transparent;display:block;border-style:solid;",P="<span>"+E+"</span>";u.prototype={set:function(a,b,d){return this.properties=a+b+(d||s),this},is:function(a){return(this.properties&a)==a}};var $=function(){return function(a,b,d){if(!a.mouse)return null;var e=a.doc,f=a.line.wrap,d=d||a.mouse,c=new CKEDITOR.dom.element(e.$.elementFromPoint(d.x,d.y));return b&&v(a,c)&&(f.hide(),c=new CKEDITOR.dom.element(e.$.elementFromPoint(d.x,d.y)),f.show()),!c||c.type!=CKEDITOR.NODE_ELEMENT||!c.$||n.ie&&9>n.version&&!a.boundary.equals(c)&&!a.boundary.contains(c)?null:c}}(),z=CKEDITOR.dom.walker.whitespaces(),A=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),aa=function(){function a(a){var f,c,h,e=a.element;if(!m(e)||e.contains(a.editable))return null;if(h=ha(a,function(a,b){return!b.equals(a)},function(a,b){return $(a,!0,b)},e),f=h.upper,c=h.lower,O(a,f,c))return h.set(M,ba);if(f&&e.contains(f))for(;!f.getParent().equals(e);)f=f.getParent();else f=e.getFirst(function(c){return b(a,c)});if(c&&e.contains(c))for(;!c.getParent().equals(e);)c=c.getParent();else c=e.getLast(function(c){return b(a,c)});if(!f||!c)return null;if(o(a,f),o(a,c),!(a.mouse.y>f.size.top&&a.mouse.y<c.size.bottom))return null;for(var j,g,i,l,e=Number.MAX_VALUE;c&&!c.equals(f)&&(g=f.getNext(a.isRelevant));)j=Math.abs(ca(a,f,g)-a.mouse.y),e>j&&(e=j,i=f,l=g),f=g,o(a,f);return i&&l&&a.mouse.y>i.size.top&&a.mouse.y<l.size.bottom?(h.upper=i,h.lower=l,h.set(M,ba)):null}function b(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||A(b)||p(b)||v(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(b){var f,e=a(b);if(f=e){f=e.upper;var c=e.lower;f=!f||!c||p(c)||p(f)||c.equals(f)||f.equals(c)||c.contains(f)||f.contains(c)?!1:F(b,f)&&F(b,c)&&O(b,f,c)?!0:!1}return f?e:null}}(),t=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+219,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+221,function(){function l(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var e=[],f=["style","className"],b=0;b<f.length;b++){var d=a.$.elements.namedItem(f[b]);d&&(d=new CKEDITOR.dom.element(d),e.push([d,d.nextSibling]),d.remove())}return e}function o(a,e){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<e.length)for(var f=e.length-1;f>=0;f--){var b=e[f][0],d=e[f][1];d?b.insertBefore(d):b.appendTo(a)}}function n(a,e){var f=l(a),b={},d=a.$;return e||(b["class"]=d.className||"",d.className=""),b.inline=d.style.cssText||"",e||(d.style.cssText="position: static; overflow: visible"),o(f),b}function p(a,e){var f=l(a),b=a.$;"class"in e&&(b.className=e["class"]),"inline"in e&&(b.style.cssText=e.inline),o(f)}function q(a){if(!a.editable().isInline()){var f,e=CKEDITOR.instances;for(f in e){var b=e[f];"wysiwyg"==b.mode&&!b.readOnly&&(b=b.document.getBody(),b.setAttribute("contentEditable",!1),b.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=d.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var j,k,m,f=a.lang,b=CKEDITOR.document,d=b.getWindow(),l=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=a.container.getChild(1),g=a.ui.space("contents");if("wysiwyg"==a.mode){var c=a.getSelection();j=c&&c.getRanges(),k=d.getScrollPosition()}else{var i=a.editable().$;j=!CKEDITOR.env.ie&&[i.selectionStart,i.selectionEnd],k=[i.scrollLeft,i.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(d.on("resize",e),m=d.getScrollPosition(),c=a.container;c=c.getParent();)c.setCustomData("maximize_saved_styles",n(c)),c.setStyle("z-index",a.config.baseFloatZIndex-5);g.setCustomData("maximize_saved_styles",n(g,!0)),h.setCustomData("maximize_saved_styles",n(h,!0)),g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},b.getDocumentElement().setStyles(g),!CKEDITOR.env.gecko&&b.getDocumentElement().setStyle("position","fixed"),(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&b.getBody().setStyles(g),CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(0,0)},0):d.$.scrollTo(0,0),h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),h.$.offsetLeft,h.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"}),h.addClass("cke_maximized"),e(),g=h.getDocumentPosition(),h.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"}),CKEDITOR.env.gecko&&q(a)}else if(this.state==CKEDITOR.TRISTATE_ON){for(d.removeListener("resize",e),g=[g,h],c=0;c<g.length;c++)p(g[c],g[c].getCustomData("maximize_saved_styles")),g[c].removeCustomData("maximize_saved_styles");for(c=a.container;c=c.getParent();)p(c,c.getCustomData("maximize_saved_styles")),c.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(m.x,m.y)},0):d.$.scrollTo(m.x,m.y),h.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0)),a.fire("resize")}this.toggleState(),(c=this.uiItems[0])&&(g=this.state==CKEDITOR.TRISTATE_OFF?f.maximize.maximize:f.maximize.minimize,c=CKEDITOR.document.getById(c._.id),c.getChild(1).setHtml(g),c.setAttribute("title",g),c.setAttribute("href",'javascript:void("'+g+'");')),"wysiwyg"==a.mode?j?(CKEDITOR.env.gecko&&q(a),a.getSelection().selectRanges(j),(i=a.getSelection().getStartElement())&&i.scrollIntoView(!0)):d.$.scrollTo(k.x,k.y):(j&&(i.selectionStart=j[0],i.selectionEnd=j[1]),i.scrollLeft=k[0],i.scrollTop=k[1]),j=k=null,l=this.state,a.fire("maximize",this.state)},canUndo:!1}),a.ui.addButton&&a.ui.addButton("Maximize",{label:f.maximize.maximize,command:"maximize",toolbar:"tools,10"}),a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:l)},null,null,100)}}})}(),function(){var c={canUndo:!1,async:!0,exec:function(a){a.getClipboardData({title:a.lang.pastetext.title},function(b){b&&a.fire("paste",{type:"text",dataValue:b.dataValue}),a.fire("afterCommandExec",{name:"pastetext",command:c,returnValue:!!b})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(a){a.addCommand("pastetext",c),a.ui.addButton&&a.ui.addButton("PasteText",{label:a.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),a.config.forcePasteAsPlainText&&a.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")}),a.on("pasteState",function(b){a.getCommand("pastetext").setState(b.data)})}})}(),function(){function h(a,d,f){var b=CKEDITOR.cleanWord;return b?f():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||d+"filter/default.js"),CKEDITOR.scriptLoader.load(a,f,null,!0)),!b}function i(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(a){var d=0,f=this.path;a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var e=this;d=1,a.once("beforePaste",i),a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",{type:"html",dataValue:c.dataValue}),a.fire("afterCommandExec",{name:"pastefromword",command:e,returnValue:!!c})})}}),a.ui.addButton&&a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),a.on("pasteState",function(b){a.getCommand("pastefromword").setState(b.data);

}),a.on("paste",function(b){var e=b.data,c=e.dataValue;if(c&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(c))){var g=h(a,f,function(){g?a.fire("paste",e):(!a.config.pasteFromWordPromptCleanup||d||confirm(a.lang.pastefromword.confirmCleanup))&&(e.dataValue=CKEDITOR.cleanWord(c,a))});g&&b.cancel()}},null,null,3)}})}(),CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var c,h=a._.removeFormatRegex||(a._.removeFormatRegex=RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),e=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=CKEDITOR.plugins.removeformat.filter,k=a.getSelection().getRanges(1),l=k.createIterator();c=l.getNextRange();){c.collapsed||c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var i=c.createBookmark(),b=i.startNode,j=i.endNode,d=function(b){for(var g,c=a.elementPath(b),e=c.elements,d=1;(g=e[d])&&!g.equals(c.block)&&!g.equals(c.blockLimit);d++)h.test(g.getName())&&f(a,g)&&b.breakParent(g)};if(d(b),j)for(d(j),b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);b&&!b.equals(j);)d=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),!("img"==b.getName()&&b.data("cke-realelement"))&&f(a,b)&&(h.test(b.getName())?b.remove(1):(b.removeAttributes(e),a.fire("removeFormatCleanup",b))),b=d;c.moveToBookmark(i)}a.forceNextSelectionCheck(),a.getSelection().selectRanges(k)}}},filter:function(a,h){for(var e=a._.removeFormatFilters||[],f=0;f<e.length;f++)if(!1===e[f](h))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(a)},CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){CKEDITOR.plugins.add("sourcearea",{init:function(a){function d(){this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show()}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var e=CKEDITOR.plugins.sourcearea;a.addMode("source",function(e){var b=a.ui.space("contents").getDocument().createElement("textarea");b.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4))),b.setAttribute("dir","ltr"),b.addClass("cke_source cke_reset cke_enable_context_menu"),a.ui.space("contents").append(b),b=a.editable(new c(a,b)),b.setData(a.getData(1)),CKEDITOR.env.ie&&(b.attachListener(a,"resize",d,b),b.attachListener(CKEDITOR.document.getWindow(),"resize",d,b),CKEDITOR.tools.setTimeout(d,0,b)),a.fire("ariaWidget",this),e()}),a.addCommand("source",e.commands.source),a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),a.on("mode",function(){a.getCommand("source").setState("source"==a.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}}});var c=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a),this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){c.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(c){"wysiwyg"==c.mode&&c.fire("saveSnapshot"),c.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),c.setMode("source"==c.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1},requires:"dialog",init:function(a){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),a.addCommand("specialchar",{exec:function(){var b=a.langCode,b=c.availableLangs[b]?b:c.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,c.langEntries[b]),a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var d=function(a){var b=this._;if(b.state!==CKEDITOR.TRISTATE_DISABLED){b.previousState=b.state;var c=b.menu;c||(c=b.menu=new CKEDITOR.menu(a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.common.options}}}),c.onHide=CKEDITOR.tools.bind(function(){this.setState(this.modes&&this.modes[a.mode]?b.previousState:CKEDITOR.TRISTATE_DISABLED)},this),this.onMenu&&c.addListener(this.onMenu)),b.on?c.hide():(this.setState(CKEDITOR.TRISTATE_ON),setTimeout(function(){c.show(CKEDITOR.document.getById(b.id),4)},0))}};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(a){delete a.panel,this.base(a),this.hasArrow=!0,this.click=d},statics:{handler:{create:function(a){return new CKEDITOR.ui.menuButton(a)}}}})},beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",function(){function k(a,c){var d,b=0;for(d in c)if(c[d]==a){b=1;break}return b}var i="",r=function(){function a(){b.once("focus",f),b.once("blur",c)}function c(b){var b=b.editor,c=d.getScayt(b),f=b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;c&&(d.setPaused(b,!c.disabled),d.setControlId(b,c.id),c.destroy(!0),delete d.instances[b.name],f&&a())}var b=this,f=function(){if("undefined"==typeof d.instances[b.name]&&null==d.instances[b.name]){var a=b.config,c={};if(c.srcNodeRef="BODY"==b.editable().$.nodeName?b.document.getWindow().$.frameElement:b.editable().$,c.assocApp="CKEDITOR."+CKEDITOR.version+"@"+CKEDITOR.revision,c.customerid=a.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",c.customDictionaryIds=a.scayt_customDictionaryIds||"",c.userDictionaryName=a.scayt_userDictionaryName||"",c.sLang=a.scayt_sLang||"en_US",c.onLoad=function(){CKEDITOR.env.ie&&8>CKEDITOR.env.version||this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;"),b.editable().hasFocus&&!d.isControlRestored(b)&&this.focus()},c.onBeforeChange=function(){d.getScayt(b)&&!b.checkDirty()&&setTimeout(function(){b.resetDirty()},0)},a=window.scayt_custom_params,"object"==typeof a)for(var f in a)c[f]=a[f];d.getControlId(b)&&(c.id=d.getControlId(b));var o=new window.scayt(c);o.afterMarkupRemove.push(function(a){new CKEDITOR.dom.element(a,o.document).mergeSiblings()}),(c=d.instances[b.name])&&(o.sLang=c.sLang,o.option(c.option()),o.paused=c.paused),d.instances[b.name]=o;try{o.setDisabled(!1===d.isPaused(b))}catch(e){}b.fire("showScaytState")}};b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a():b.on("contentDom",f),b.on("contentDomUnload",function(){for(var a=CKEDITOR.document.getElementsByTag("script"),b=/^dojoIoScript(\d+)$/i,c=/^https?:\/\/svc\.webspellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i,d=0;d<a.count();d++){var f=a.getItem(d),e=f.getId(),h=f.getAttribute("src");e&&h&&e.match(b)&&h.match(c)&&f.remove()}}),b.on("beforeCommandExec",function(a){"source"==a.data.name&&"source"==b.mode&&d.markControlRestore(b)}),b.on("afterCommandExec",function(a){d.isScaytEnabled(b)&&"wysiwyg"==b.mode&&("undo"==a.data.name||"redo"==a.data.name)&&window.setTimeout(function(){d.getScayt(b).refresh()},10)}),b.on("destroy",c),b.on("setData",c),b.on("insertElement",function(){var a=d.getScayt(b);d.isScaytEnabled(b)&&(CKEDITOR.env.ie&&b.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),b.on("insertHtml",function(){var a=d.getScayt(b);d.isScaytEnabled(b)&&(CKEDITOR.env.ie&&b.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),b.on("scaytDialog",function(a){a.data.djConfig=window.djConfig,a.data.scayt_control=d.getScayt(b),a.data.tab=i,a.data.scayt=window.scayt});var e=b.dataProcessor;(e=e&&e.htmlFilter)&&e.addRules({elements:{span:function(a){return a.attributes["data-scayt_word"]&&a.attributes["data-scaytid"]?(delete a.name,a):void 0}}}),e=CKEDITOR.plugins.undo.Image.prototype,e="function"==typeof e.equalsContent?e.equalsContent:e.equals,e=CKEDITOR.tools.override(e,function(a){return function(b){var c=this.contents,f=b.contents,e=d.getScayt(this.editor);return e&&d.isScaytReady(this.editor)&&(this.contents=e.reset(c)||"",b.contents=e.reset(f)||""),e=a.apply(this,arguments),this.contents=c,b.contents=f,e}}),b.document&&(b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||b.focusManager.hasFocus)&&f()};CKEDITOR.plugins.scayt={engineLoaded:!1,instances:{},controlInfo:{},setControlInfo:function(a,c){a&&a.name&&"object"!=typeof this.controlInfo[a.name]&&(this.controlInfo[a.name]={});for(var b in c)this.controlInfo[a.name][b]=c[b]},isControlRestored:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].restored:!1},markControlRestore:function(a){this.setControlInfo(a,{restored:!0})},setControlId:function(a,c){this.setControlInfo(a,{id:c})},getControlId:function(a){return a&&a.name&&this.controlInfo[a.name]&&this.controlInfo[a.name].id?this.controlInfo[a.name].id:null},setPaused:function(a,c){this.setControlInfo(a,{paused:c})},isPaused:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].paused:void 0},getScayt:function(a){return this.instances[a.name]},isScaytReady:function(a){return!0===this.engineLoaded&&"undefined"!=typeof window.scayt&&this.getScayt(a)},isScaytEnabled:function(a){return(a=this.getScayt(a))?!1===a.disabled:!1},getUiTabs:function(a){var c=[],b=a.config.scayt_uiTabs||"1,1,1",b=b.split(",");b[3]="1";for(var d=0;4>d;d++)c[d]="undefined"!=typeof window.scayt&&"undefined"!=typeof window.scayt.uiTags?parseInt(b[d],10)&&window.scayt.uiTags[d]:parseInt(b[d],10);return c.push("object"==typeof a.plugins.wsc?1:0),c},loadEngine:function(a){if(CKEDITOR.env.gecko&&10900>CKEDITOR.env.version||CKEDITOR.env.opera||CKEDITOR.env.air)return a.fire("showScaytState");if(!0===this.engineLoaded)return r.apply(a);if(-1==this.engineLoaded)return CKEDITOR.on("scaytReady",function(){r.apply(a)});CKEDITOR.on("scaytReady",r,a),CKEDITOR.on("scaytReady",function(){this.engineLoaded=!0},this,null,0),this.engineLoaded=-1;var c=document.location.protocol,c=-1!=c.search(/https?:/)?c:"http:",c=a.config.scayt_srcUrl||c+"//svc.webspellchecker.net/scayt26/loader__base.js",b=d.parseUrl(c).path+"/";return void 0==window.scayt?(CKEDITOR._djScaytConfig={baseUrl:b,addOnLoad:[function(){CKEDITOR.fireOnce("scaytReady")}],isDebug:!1},CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",async:"true",src:c}}))):CKEDITOR.fireOnce("scaytReady"),null},parseUrl:function(a){var c;return a.match&&(c=a.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:c[1],file:c[2]}:a}};var d=CKEDITOR.plugins.scayt,s=function(a,c,b,d,e,k,g){a.addCommand(d,e),a.addMenuItem(d,{label:b,command:d,group:k,order:g})},v={preserveState:!0,editorFocus:!1,canUndo:!1,exec:function(a){if(d.isScaytReady(a)){var c=d.isScaytEnabled(a);this.setState(c?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_ON),a=d.getScayt(a),a.focus(),a.setDisabled(c)}else!a.config.scayt_autoStartup&&0<=d.engineLoaded&&(a.focus(),this.setState(CKEDITOR.TRISTATE_DISABLED),d.loadEngine(a))}};CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",beforeInit:function(a){var c=a.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",b="";if((c=c.split("|"))&&c.length)for(var d=0;d<c.length;d++)b+="scayt_"+c[d]+(c.length!=parseInt(d,10)+1?",":"");a.config.menu_groups=b+","+a.config.menu_groups},checkEnvironment:function(){return CKEDITOR.env.opera||CKEDITOR.env.air?0:1},init:function(a){var c=a.dataProcessor&&a.dataProcessor.dataFilter,b={elements:{span:function(a){var b=a.attributes;b&&b["data-scaytid"]&&delete a.name}}};c&&c.addRules(b);var f={},e={},p=a.addCommand("scaytcheck",v);CKEDITOR.dialog.add("scaytcheck",CKEDITOR.getUrl(this.path+"dialogs/options.js")),c=d.getUiTabs(a),a.addMenuGroup("scaytButton"),a.addMenuGroup("scayt_suggest",-10),a.addMenuGroup("scayt_moresuggest",-9),a.addMenuGroup("scayt_control",-8);var b={},g=a.lang.scayt;b.scaytToggle={label:g.enable,command:"scaytcheck",group:"scaytButton"},1==c[0]&&(b.scaytOptions={label:g.options,group:"scaytButton",onClick:function(){i="options",a.openDialog("scaytcheck")}}),1==c[1]&&(b.scaytLangs={label:g.langs,group:"scaytButton",onClick:function(){i="langs",a.openDialog("scaytcheck")}}),1==c[2]&&(b.scaytDict={label:g.dictionariesTab,group:"scaytButton",onClick:function(){i="dictionaries",a.openDialog("scaytcheck")}}),b.scaytAbout={label:a.lang.scayt.about,group:"scaytButton",onClick:function(){i="about",a.openDialog("scaytcheck")}},1==c[4]&&(b.scaytWSC={label:a.lang.wsc.toolbar,group:"scaytButton",command:"checkspell"}),a.addMenuItems(b),a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:g.title,title:CKEDITOR.env.opera?g.opera_title:g.title,modes:{wysiwyg:this.checkEnvironment()},toolbar:"spellchecker,20",onRender:function(){p.on("state",function(){this.setState(p.state)},this)},onMenu:function(){var b=d.isScaytEnabled(a);a.getMenuItem("scaytToggle").label=g[b?"disable":"enable"];var c=d.getUiTabs(a);return{scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b&&c[0]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:b&&c[1]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b&&c[2]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b&&c[3]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytWSC:c[4]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}}),a.contextMenu&&a.addMenuItems&&a.contextMenu.addListener(function(b,c){if(!d.isScaytEnabled(a)||c.getRanges()[0].checkReadOnly())return null;var l=d.getScayt(a),q=l.getScaytNode();if(!q)return null;var h=l.getWord(q);if(!h)return null;var n,i=l.getLang(),m=a.config.scayt_contextCommands||"all",h=window.scayt.getSuggestion(h,i),m=m.split("|");for(n in f)delete a._.menuItems[n],delete a.commands[n];for(n in e)delete a._.menuItems[n],delete a.commands[n];if(h&&h.length){f={},e={},n=a.config.scayt_moreSuggestions||"on";var i=!1,u=a.config.scayt_maxSuggestions;"number"!=typeof u&&(u=5),!u&&(u=h.length);for(var j=0,p=h.length;p>j;j+=1){var t="scayt_suggestion_"+h[j].replace(" ","_"),r=function(a,b){return{exec:function(){l.replace(a,b)}}}(q,h[j]);u>j?(s(a,"button_"+t,h[j],t,r,"scayt_suggest",j+1),e[t]=CKEDITOR.TRISTATE_OFF):"on"==n&&(s(a,"button_"+t,h[j],t,r,"scayt_moresuggest",j+1),f[t]=CKEDITOR.TRISTATE_OFF,i=!0)}i&&(a.addMenuItem("scayt_moresuggest",{label:g.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return f}}),e.scayt_moresuggest=CKEDITOR.TRISTATE_OFF)}else s(a,"no_sugg",g.noSuggestions,"scayt_no_sugg",{exec:function(){}},"scayt_control",1,!0),e.scayt_no_sugg=CKEDITOR.TRISTATE_OFF;return(k("all",m)||k("ignore",m))&&(s(a,"ignore",g.ignore,"scayt_ignore",{exec:function(){l.ignore(q)}},"scayt_control",2),e.scayt_ignore=CKEDITOR.TRISTATE_OFF),(k("all",m)||k("ignoreall",m))&&(s(a,"ignore_all",g.ignoreAll,"scayt_ignore_all",{exec:function(){l.ignoreAll(q)}},"scayt_control",3),e.scayt_ignore_all=CKEDITOR.TRISTATE_OFF),(k("all",m)||k("add",m))&&(s(a,"add_word",g.addWord,"scayt_add_word",{exec:function(){window.scayt.addWordToUserDictionary(q)}},"scayt_control",4),e.scayt_add_word=CKEDITOR.TRISTATE_OFF),l.fireOnContextMenu&&l.fireOnContextMenu(a),e}),c=function(b){b.removeListener(),p.setState(CKEDITOR.env.opera||CKEDITOR.env.air?CKEDITOR.TRISTATE_DISABLED:d.isScaytEnabled(a)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},a.on("showScaytState",c),a.on("instanceReady",c),a.config.scayt_autoStartup&&a.on("instanceReady",function(){d.loadEngine(a)})},afterInit:function(a){var c,b=function(a){return a.hasAttribute("data-scaytid")?!1:void 0};a._.elementsPath&&(c=a._.elementsPath.filters)&&c.push(b),a.addRemoveFormatFilter&&a.addRemoveFormatFilter(b)}})}(),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(c){var j=c.config,f=c.lang.stylescombo,g={},i=[],k=[];c.on("stylesSet",function(b){if(b=b.data.styles){for(var a,h,d=0,e=b.length;e>d;d++)a=b[d],c.blockless&&a.element in CKEDITOR.dtd.$block||(h=a.name,a=new CKEDITOR.style(a),c.filter.customConfig&&!c.filter.check(a))||(a._name=h,a._.enterMode=j.enterMode,a._.weight=d+1e3*(a.type==CKEDITOR.STYLE_OBJECT?1:a.type==CKEDITOR.STYLE_BLOCK?2:3),g[h]=a,i.push(a),k.push(a));i.sort(function(a,b){return a._.weight-b._.weight})}}),c.ui.addRichCombo("Styles",{label:f.label,title:f.panelTitle,toolbar:"styles,10",allowedContent:k,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(j.contentsCss),multiSelect:!0,attributes:{"aria-label":f.panelTitle}},init:function(){var b,a,c,d,e,g;for(e=0,g=i.length;g>e;e++)b=i[e],a=b._name,d=b.type,d!=c&&(this.startGroup(f["panelTitle"+d]),c=d),this.add(a,b.type==CKEDITOR.STYLE_OBJECT?a:b.buildPreview(),a);this.commit()},onClick:function(b){c.focus(),c.fire("saveSnapshot");var b=g[b],a=c.elementPath();c[b.checkActive(a)?"removeStyle":"applyStyle"](b),c.fire("saveSnapshot")},onRender:function(){c.on("selectionChange",function(b){for(var e,a=this.getValue(),b=b.data.path.elements,c=0,d=b.length;d>c;c++){e=b[c];for(var f in g)if(g[f].checkElementRemovable(e,!0))return void(f!=a&&this.setValue(f))}this.setValue("")},this)},onOpen:function(){var b=c.getSelection().getSelectedElement(),b=c.elementPath(b),a=[0,0,0,0];this.showAll(),this.unmarkAll();for(var h in g){var d=g[h],e=d.type;e!=CKEDITOR.STYLE_BLOCK||b.isContextFor(d.element)?(d.checkActive(b)?this.mark(h):e==CKEDITOR.STYLE_OBJECT&&!d.checkApplicable(b)&&(this.hideItem(h),a[e]--),a[e]++):this.hideItem(h)}a[CKEDITOR.STYLE_BLOCK]||this.hideGroup(f["panelTitle"+CKEDITOR.STYLE_BLOCK]),a[CKEDITOR.STYLE_INLINE]||this.hideGroup(f["panelTitle"+CKEDITOR.STYLE_INLINE]),a[CKEDITOR.STYLE_OBJECT]||this.hideGroup(f["panelTitle"+CKEDITOR.STYLE_OBJECT])},reset:function(){g={},i=[]}})}})}(),function(){function i(c){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(d){if(d.editable().hasFocus){var b,e=d.getSelection();if(b=new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root).contains({td:1,th:1},1)){var e=d.createRange(),a=CKEDITOR.tools.tryThese(function(){var a=b.getParent().$.cells[b.$.cellIndex+(c?-1:1)];return a.parentNode.parentNode,a},function(){var a=b.getParent(),a=a.getAscendant("table").$.rows[a.$.rowIndex+(c?-1:1)];return a.cells[c?a.cells.length-1:0]});if(a||c){if(!a)return!0;a=new CKEDITOR.dom.element(a),e.moveToElementEditStart(a),(!e.checkStartOfBlock()||!e.checkEndOfBlock())&&e.selectNodeContents(a)}else{for(var f=b.getAscendant("table").$,a=b.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),d.document),g=0,h=a.length;h>g;g++){var i=f.append(new CKEDITOR.dom.element(a[g],d.document).clone(!1,!1));!CKEDITOR.env.ie&&i.appendBogus()}e.moveToElementEditStart(f)}return e.select(!0),!0}}return!1}}}var h={editorFocus:!1,modes:{wysiwyg:1,source:1}},g={exec:function(c){c.container.focusNext(!0,c.tabIndex)}},f={exec:function(c){c.container.focusPrevious(!0,c.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(c){for(var d=!1!==c.config.enableTabKeyTools,e=c.config.tabSpaces||0,b="";e--;)b+="";b&&c.on("key",function(a){9==a.data.keyCode&&(c.insertHtml(b),a.cancel())}),d&&c.on("key",function(a){(9==a.data.keyCode&&c.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&c.execCommand("selectPreviousCell"))&&a.cancel()}),c.addCommand("blur",CKEDITOR.tools.extend(g,h)),c.addCommand("blurBack",CKEDITOR.tools.extend(f,h)),c.addCommand("selectNextCell",i()),c.addCommand("selectPreviousCell",i(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(i,h){var f,c,d,e,b,a,g=void 0===h?this.getTabIndex():h;if(0>=g)for(b=this.getNextSourceNode(i,CKEDITOR.NODE_ELEMENT);b;){if(b.isVisible()&&0===b.getTabIndex()){d=b;break}b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(b=this.getDocument().getBody().getFirst();b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&b.equals(this)){if(c=!0,i){if(!(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(b)&&(f=1);if(b.isVisible()&&!(0>(a=b.getTabIndex()))){if(f&&a==g){d=b;break}a>g&&(!d||!e||e>a)?(d=b,e=a):!d&&0===a&&(d=b,e=a)}}d&&d.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(i,h){for(var f,c,d,b,g=void 0===h?this.getTabIndex():h,e=0,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&a.equals(this)){if(c=!0,i){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(a)&&(f=1);if(a.isVisible()&&!(0>(b=a.getTabIndex())))if(0>=g){if(f&&0===b){d=a;break}b>e&&(d=a,e=b)}else{if(f&&b==g){d=a;break}g>b&&(!d||b>e)&&(d=a,e=b)}}d&&d.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,e){this.setState(e.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var b=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",d())),a.addCommand("tableDelete",d({exec:function(a){var c=a.elementPath().contains("table",1);if(c){var b=c.getParent();1==b.getChildCount()&&!b.is("body","td","th")&&(c=b),a=a.createRange(),a.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c.remove(),a.select()}}})),a.ui.addButton&&a.ui.addButton("Table",{label:b.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),a.addMenuItems&&a.addMenuItems({table:{label:b.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:b.deleteTable,command:"tableDelete",group:"table",order:1}}),a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")}),a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function p(e){function d(a){!(0<b.length)&&a.type==CKEDITOR.NODE_ELEMENT&&y.test(a.getName())&&!a.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(c,a,"selected_cell",!0),b.push(a))}for(var e=e.getRanges(),b=[],c={},a=0;a<e.length;a++){var f=e[a];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&b.push(f);else{var g,f=new CKEDITOR.dom.walker(f);for(f.guard=d;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(c,g,"selected_cell",!0),b.push(g))}}return CKEDITOR.dom.element.clearAllMarkers(c),b}function o(e,d){for(var b=p(e),c=b[0],a=c.getAscendant("table"),c=c.getDocument(),f=b[0].getParent(),g=f.$.rowIndex,b=b[b.length-1],h=b.getParent().$.rowIndex+b.$.rowSpan-1,b=new CKEDITOR.dom.element(a.$.rows[h]),g=d?g:h,f=d?f:b,b=CKEDITOR.tools.buildTableMap(a),a=b[g],g=d?b[g-1]:b[g+1],b=b[0].length,c=c.createElement("tr"),h=0;a[h]&&b>h;h++){var i;1<a[h].rowSpan&&g&&a[h]==g[h]?(i=a[h],i.rowSpan+=1):(i=new CKEDITOR.dom.element(a[h]).clone(),i.removeAttribute("rowSpan"),!CKEDITOR.env.ie&&i.appendBogus(),c.append(i),i=i.$),h+=i.colSpan-1}d?c.insertBefore(f):c.insertAfter(f)}function q(e){if(e instanceof CKEDITOR.dom.selection){for(var d=p(e),b=d[0].getAscendant("table"),c=CKEDITOR.tools.buildTableMap(b),e=d[0].getParent().$.rowIndex,d=d[d.length-1],a=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],f=e;a>=f;f++){for(var g=c[f],h=new CKEDITOR.dom.element(b.$.rows[f]),i=0;i<g.length;i++){var j=new CKEDITOR.dom.element(g[i]),l=j.getParent().$.rowIndex;1==j.$.rowSpan?j.remove():(j.$.rowSpan-=1,l==f&&(l=c[f+1],l[i-1]?j.insertAfter(new CKEDITOR.dom.element(l[i-1])):new CKEDITOR.dom.element(b.$.rows[f+1]).append(j,1))),i+=j.$.colSpan-1}d.push(h)}for(c=b.$.rows,b=new CKEDITOR.dom.element(c[a+1]||(e>0?c[e-1]:null)||b.$.parentNode),f=d.length;f>=0;f--)q(d[f]);return b}return e instanceof CKEDITOR.dom.element&&(b=e.getAscendant("table"),1==b.$.rows.length?b.remove():e.remove()),null}function r(e,d){for(var b=d?1/0:0,c=0;c<e.length;c++){var a;a=e[c];for(var f=d,g=a.getParent().$.cells,h=0,i=0;i<g.length;i++){var j=g[i],h=h+(f?1:j.colSpan);if(j==a.$)break}a=h-1,(d?b>a:a>b)&&(b=a)}return b}function k(e,d){for(var b=p(e),c=b[0].getAscendant("table"),a=r(b,1),b=r(b),a=d?a:b,f=CKEDITOR.tools.buildTableMap(c),c=[],b=[],g=f.length,h=0;g>h;h++)c.push(f[h][a]),b.push(d?f[h][a-1]:f[h][a+1]);for(h=0;g>h;h++)c[h]&&(1<c[h].colSpan&&b[h]==c[h]?(a=c[h],a.colSpan+=1):(a=new CKEDITOR.dom.element(c[h]).clone(),a.removeAttribute("colSpan"),!CKEDITOR.env.ie&&a.appendBogus(),a[d?"insertBefore":"insertAfter"].call(a,new CKEDITOR.dom.element(c[h])),a=a.$),h+=a.rowSpan-1)}function u(e,d){var b=e.getStartElement();if(b=b.getAscendant("td",1)||b.getAscendant("th",1)){var c=b.clone();CKEDITOR.env.ie||c.appendBogus(),d?c.insertBefore(b):c.insertAfter(b)}}function t(e){if(e instanceof CKEDITOR.dom.selection){var b,e=p(e),d=e[0]&&e[0].getAscendant("table");a:{var c=0;b=e.length-1;for(var f,g,a={};f=e[c++];)CKEDITOR.dom.element.setMarker(a,f,"delete_cell",!0);for(c=0;f=e[c++];)if((g=f.getPrevious())&&!g.getCustomData("delete_cell")||(g=f.getNext())&&!g.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(a),b=g;break a}CKEDITOR.dom.element.clearAllMarkers(a),g=e[0].getParent(),(g=g.getPrevious())?b=g.getLast():(g=e[b].getParent(),b=(g=g.getNext())?g.getChild(0):null)}for(g=e.length-1;g>=0;g--)t(e[g]);b?m(b,!0):d&&d.remove()}else e instanceof CKEDITOR.dom.element&&(d=e.getParent(),1==d.getChildCount()?d.remove():e.remove())}function m(e,d){var b=new CKEDITOR.dom.range(e.getDocument());b["moveToElementEdit"+(d?"End":"Start")](e)||(b.selectNodeContents(e),b.collapse(d?!1:!0)),b.select(!0)}function v(e,d,b){if(e=e[d],"undefined"==typeof b)return e;for(d=0;e&&d<e.length;d++){if(b.is&&e[d]==b.$)return d;if(d==b)return new CKEDITOR.dom.element(e[d])}return b.is?-1:null}function s(e,d,b){var a,c=p(e);if((d?1!=c.length:2>c.length)||(a=e.getCommonAncestor())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))return!1;var f,e=c[0];a=e.getAscendant("table");var g=CKEDITOR.tools.buildTableMap(a),h=g.length,i=g[0].length,j=e.getParent().$.rowIndex,l=v(g,j,e);if(d){var n;try{var m=parseInt(e.getAttribute("rowspan"),10)||1;f=parseInt(e.getAttribute("colspan"),10)||1,n=g["up"==d?j-m:"down"==d?j+m:j]["left"==d?l-f:"right"==d?l+f:l]}catch(z){return!1}if(!n||e.$==n)return!1;c["up"==d||"left"==d?"unshift":"push"](new CKEDITOR.dom.element(n))}for(var d=e.getDocument(),o=j,m=n=0,q=!b&&new CKEDITOR.dom.documentFragment(d),s=0,d=0;d<c.length;d++){f=c[d];var k=f.getParent(),t=f.getFirst(),r=f.$.colSpan,u=f.$.rowSpan,k=k.$.rowIndex,w=v(g,k,f),s=s+r*u,m=Math.max(m,w-l+r);n=Math.max(n,k-j+u),b||(r=f,(u=r.getBogus())&&u.remove(),r.trim(),f.getChildren().count()&&(k==o||!t||t.isBlockBoundary&&t.isBlockBoundary({br:1})||(o=q.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!o.is||!o.is("br"))&&q.append("br"),f.moveChildren(q)),d?f.remove():f.setHtml("")),o=k}if(b)return n*m==s;for(q.moveChildren(e),CKEDITOR.env.ie||e.appendBogus(),m>=i?e.removeAttribute("rowSpan"):e.$.rowSpan=n,n>=h?e.removeAttribute("colSpan"):e.$.colSpan=m,b=new CKEDITOR.dom.nodeList(a.$.rows),c=b.count(),d=c-1;d>=0;d--)a=b.getItem(d),a.$.cells.length||(a.remove(),c++);return e}function w(e,d){var b=p(e);if(1<b.length)return!1;if(d)return!0;var j,b=b[0],c=b.getParent(),a=c.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(a),g=c.$.rowIndex,h=v(f,g,b),i=b.$.rowSpan;if(i>1){j=Math.ceil(i/2);for(var l,i=Math.floor(i/2),c=g+j,a=new CKEDITOR.dom.element(a.$.rows[c]),f=v(f,c),c=b.clone(),g=0;g<f.length;g++){if(l=f[g],l.parentNode==a.$&&g>h){c.insertBefore(new CKEDITOR.dom.element(l));break}l=null}l||a.append(c,!0)}else for(i=j=1,a=c.clone(),a.insertAfter(c),a.append(c=b.clone()),l=v(f,g),h=0;h<l.length;h++)l[h].rowSpan++;return CKEDITOR.env.ie||c.appendBogus(),b.$.rowSpan=j,c.$.rowSpan=i,1==j&&b.removeAttribute("rowSpan"),1==i&&c.removeAttribute("rowSpan"),c}function x(e,d){var b=p(e);if(1<b.length)return!1;if(d)return!0;var b=b[0],c=b.getParent(),a=c.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(a),f=v(a,c.$.rowIndex,b),g=b.$.colSpan;if(g>1)c=Math.ceil(g/2),g=Math.floor(g/2);else{for(var g=c=1,h=[],i=0;i<a.length;i++){var j=a[i];h.push(j[f]),1<j[f].rowSpan&&(i+=j[f].rowSpan-1)}for(a=0;a<h.length;a++)h[a].colSpan++}return a=b.clone(),a.insertAfter(b),CKEDITOR.env.ie||a.appendBogus(),b.$.colSpan=c,a.$.colSpan=g,1==c&&b.removeAttribute("colSpan"),1==g&&a.removeAttribute("colSpan"),a}var y=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(e){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function b(a,b){var c=e.addCommand(a,b);e.addFeature(c)}var c=e.lang.table;b("cellProperties",new CKEDITOR.dialogCommand("cellProperties",d({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),b("rowDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection(),m(q(a))}})),b("rowInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection(),o(a,!0)}})),b("rowInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection(),o(a)}})),b("columnDelete",d({requiredContent:"table",exec:function(a){for(var e,j,a=a.getSelection(),a=p(a),b=a[0],c=a[a.length-1],a=b.getAscendant("table"),d=CKEDITOR.tools.buildTableMap(a),l=[],n=0,o=d.length;o>n;n++)for(var k=0,q=d[n].length;q>k;k++)d[n][k]==b.$&&(e=k),
d[n][k]==c.$&&(j=k);for(n=e;j>=n;n++)for(k=0;k<d.length;k++)c=d[k],b=new CKEDITOR.dom.element(a.$.rows[k]),c=new CKEDITOR.dom.element(c[n]),c.$&&(1==c.$.colSpan?c.remove():c.$.colSpan-=1,k+=c.$.rowSpan-1,b.$.cells.length||l.push(b));j=a.$.rows[0]&&a.$.rows[0].cells,e=new CKEDITOR.dom.element(j[e]||(e?j[e-1]:a.$.parentNode)),l.length==o&&a.remove(),e&&m(e,!0)}})),b("columnInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection(),k(a,!0)}})),b("columnInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection(),k(a)}})),b("cellDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection(),t(a)}})),b("cellMerge",d({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){m(s(a.getSelection()),!0)}})),b("cellMergeRight",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){m(s(a.getSelection(),"right"),!0)}})),b("cellMergeDown",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){m(s(a.getSelection(),"down"),!0)}})),b("cellVerticalSplit",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){m(w(a.getSelection()))}})),b("cellHorizontalSplit",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){m(x(a.getSelection()))}})),b("cellInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection(),u(a,!0)}})),b("cellInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection(),u(a)}})),e.addMenuItems&&e.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var a=e.getSelection(),b=p(a);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:s(a,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:s(a,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:s(a,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:w(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:x(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<b.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:c.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:c.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),e.contextMenu&&e.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:p},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(p){for(var p=p.$.rows,o=-1,q=[],r=0;r<p.length;r++){o++,!q[o]&&(q[o]=[]);for(var k=-1,u=0;u<p[r].cells.length;u++){var t=p[r].cells[u];for(k++;q[o][k];)k++;for(var m=isNaN(t.colSpan)?1:t.colSpan,t=isNaN(t.rowSpan)?1:t.rowSpan,v=0;t>v;v++){q[o+v]||(q[o+v]=[]);for(var s=0;m>s;s++)q[o+v][k+s]=p[r].cells[u]}k+=m-1}}return q},function(){function g(a){this.editor=a,this.reset()}CKEDITOR.plugins.add("undo",{init:function(a){function c(a){b.enabled&&!1!==a.data.command.canUndo&&b.save()}function d(){b.enabled=a.readOnly?!1:"wysiwyg"==a.mode,b.onChange()}var b=new g(a),e=a.addCommand("undo",{exec:function(){b.undo()&&(a.selectionChange(),this.fire("afterUndo"))},state:CKEDITOR.TRISTATE_DISABLED,canUndo:!1}),f=a.addCommand("redo",{exec:function(){b.redo()&&(a.selectionChange(),this.fire("afterRedo"))},state:CKEDITOR.TRISTATE_DISABLED,canUndo:!1});a.setKeystroke([[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"]]),b.onChange=function(){e.setState(b.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),f.setState(b.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},a.on("beforeCommandExec",c),a.on("afterCommandExec",c),a.on("saveSnapshot",function(a){b.save(a.data&&a.data.contentOnly)}),a.on("contentDom",function(){a.editable().on("keydown",function(a){a=a.data.getKey(),(8==a||46==a)&&b.type(a,0)}),a.editable().on("keypress",function(a){b.type(a.data.getKey(),1)})}),a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&b.save(!0)}),a.on("mode",d),a.on("readOnly",d),a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"})),a.resetUndo=function(){b.reset(),a.fire("saveSnapshot")},a.on("updateSnapshot",function(){b.currentImage&&b.update()}),a.on("lockSnapshot",b.lock,b),a.on("unlockSnapshot",b.unlock,b)}}),CKEDITOR.plugins.undo={};var f=CKEDITOR.plugins.undo.Image=function(a){this.editor=a,a.fire("beforeUndoImage");var c=a.getSnapshot(),d=c&&a.getSelection();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=c,this.bookmarks=d&&d.createBookmarks2(!0),a.fire("afterUndoImage")},h=/\b(?:href|src|name)="[^"]*?"/gi;f.prototype={equalsContent:function(a){var c=this.contents,a=a.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&(c=c.replace(h,""),a=a.replace(h,"")),c!=a?!1:!0},equalsSelection:function(a){var c=this.bookmarks,a=a.bookmarks;if(c||a){if(!c||!a||c.length!=a.length)return!1;for(var d=0;d<c.length;d++){var b=c[d],e=a[d];if(b.startOffset!=e.startOffset||b.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(b.start,e.start)||!CKEDITOR.tools.arrayCompare(b.end,e.end))return!1}}return!0}},g.prototype={type:function(a,c){var d=!c&&a!=this.lastKeystroke,b=this.editor;if(!this.typing||c&&!this.wasCharacter||d){var e=new f(b),g=this.snapshots.length;CKEDITOR.tools.setTimeout(function(){var a=b.getSnapshot();CKEDITOR.env.ie&&(a=a.replace(/\s+data-cke-expando=".*?"/g,"")),e.contents!=a&&g==this.snapshots.length&&(this.typing=!0,this.save(!1,e,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1),this.hasUndo=!0,this.hasRedo=!1,this.modifiersCount=this.typesCount=1,this.onChange())},0,this)}this.lastKeystroke=a,(this.wasCharacter=c)?(this.modifiersCount=0,this.typesCount++,25<this.typesCount?(this.save(!1,null,!1),this.typesCount=1):setTimeout(function(){b.fire("change")},0)):(this.typesCount=0,this.modifiersCount++,25<this.modifiersCount?(this.save(!1,null,!1),this.modifiersCount=1):setTimeout(function(){b.fire("change")},0))},reset:function(){this.lastKeystroke=0,this.snapshots=[],this.index=-1,this.limit=this.editor.config.undoStackSize||20,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.typing=!1,delete this.lastKeystroke,this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(a,c,d){if(this.locked)return!1;var b=this.snapshots;if(c||(c=new f(this.editor)),!1===c.contents)return!1;if(this.currentImage)if(c.equalsContent(this.currentImage)){if(a||c.equalsSelection(this.currentImage))return!1}else this.editor.fire("change");return b.splice(this.index+1,b.length-this.index-1),b.length==this.limit&&b.shift(),this.index=b.push(c)-1,this.currentImage=c,!1!==d&&this.fireChange(),!0},restoreImage:function(a){var d,c=this.editor;a.bookmarks&&(c.focus(),d=c.getSelection()),this.locked=1,this.editor.loadSnapshot(a.contents),a.bookmarks?d.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(d=this.editor.document.getBody().$.createTextRange(),d.collapse(!0),d.select()),this.locked=0,this.index=a.index,this.update(),this.fireChange(),c.fire("change")},getNextImage:function(a){var b,c=this.snapshots,d=this.currentImage;if(d)if(a){for(b=this.index-1;b>=0;b--)if(a=c[b],!d.equalsContent(a))return a.index=b,a}else for(b=this.index+1;b<c.length;b++)if(a=c[b],!d.equalsContent(a))return a.index=b,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(){this.locked||this.snapshots.splice(this.index,1,this.currentImage=new f(this.editor))},lock:function(){if(this.locked)this.locked.level++;else{var a=new f(this.editor);this.locked={update:this.currentImage&&this.currentImage.equalsContent(a)?a:null,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;this.locked=null,a&&!a.equalsContent(new f(this.editor))&&this.update()}}}}(),CKEDITOR.config.wsc_removeGlobalVariable=!0,CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"==typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){},a.config.wsc_onClose="function"==typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version=CKEDITOR.version+" | %Rev%"},init:function(a){this.parseConfig(a),this.parseApi(a),a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname},"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,command:"checkspell",toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&8>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,resize,button,toolbar,elementspath,enterkey,entities,popup,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,image,indent,indentlist,fakeobjects,link,list,magicline,maximize,pastetext,pastefromword,removeformat,sourcearea,specialchar,menubutton,scayt,stylescombo,tab,table,tabletools,undo,wsc",CKEDITOR.config.skin="moono",function(){var setIcons=function(icons,strip){var path=CKEDITOR.getUrl("plugins/"+strip);icons=icons.split(",");for(var i=0;i<icons.length;i++)CKEDITOR.skin.icons[icons[i]]={path:path,offset:-icons[++i],bgsize:icons[++i]}};CKEDITOR.env.hidpi?setIcons("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,blockquote,168,,copy-rtl,192,,copy,216,,cut-rtl,240,,cut,264,,paste-rtl,288,,paste,312,,horizontalrule,336,,image,360,,indent-rtl,384,,indent,408,,outdent-rtl,432,,outdent,456,,anchor-rtl,480,,anchor,504,,link,528,,unlink,552,,bulletedlist-rtl,576,,bulletedlist,600,,numberedlist-rtl,624,,numberedlist,648,,maximize,672,,pastetext-rtl,696,,pastetext,720,,pastefromword-rtl,744,,pastefromword,768,,removeformat,792,,source-rtl,816,,source,840,,specialchar,864,,scayt,888,,table,912,,redo-rtl,936,,redo,960,,undo-rtl,984,,undo,1008,,spellchecker,1032,","icons_hidpi.png"):setIcons("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,blockquote,168,auto,copy-rtl,192,auto,copy,216,auto,cut-rtl,240,auto,cut,264,auto,paste-rtl,288,auto,paste,312,auto,horizontalrule,336,auto,image,360,auto,indent-rtl,384,auto,indent,408,auto,outdent-rtl,432,auto,outdent,456,auto,anchor-rtl,480,auto,anchor,504,auto,link,528,auto,unlink,552,auto,bulletedlist-rtl,576,auto,bulletedlist,600,auto,numberedlist-rtl,624,auto,numberedlist,648,auto,maximize,672,auto,pastetext-rtl,696,auto,pastetext,720,auto,pastefromword-rtl,744,auto,pastefromword,768,auto,removeformat,792,auto,source-rtl,816,auto,source,840,auto,specialchar,864,auto,scayt,888,auto,table,912,auto,redo-rtl,936,auto,redo,960,auto,undo-rtl,984,auto,undo,1008,auto,spellchecker,1032,auto","icons.png")}(),CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1})}();var increment=function($el){var number=parseInt($el.html());$el.html(number+1)},getScreenSize=function(){var windowWidth=$(window).width();return windowWidth>1199?"desktop":windowWidth>979?"tablet_landscape":windowWidth>768?"tablet_portrait":"mobile"},determineLeftOffset=function(){var $coursePageContent=$("#course-page-content"),coursePageContentRight=$coursePageContent.offset().left+$coursePageContent[0].getBoundingClientRect().width,unassignedContentWidth=$("#unassignedContentArea")[0].getBoundingClientRect().width,coursePageContentPadding=20,leftOffset=coursePageContentRight-unassignedContentWidth-coursePageContentPadding;return leftOffset},ScheduleModule=new JS.Class({initialize:function(moduleJSON){var module;if("string"==typeof moduleJSON)module=JSON.parse(moduleJSON);else{if("object"!=typeof moduleJSON)return!1;module=moduleJSON}this.uiID=module.uiID,this.title=module.title,this.path=module.path,this.url=module.url,this.startDate=module.startDate,this.endDate=module.endDate,this.content=module.content,this.summary=module.summary,this.activityCategories=module.activityCategories},addContent:function(content,pos){void 0==pos&&(pos=this.content.length),this.content=[].concat(this.content.slice(0,pos),[content],this.content.slice(pos,this.content.length))},addActivity:function(activity,activityCategory,pos){void 0==pos&&(pos=this.activityCategories[activityCategory].activities.length),this.activityCategories[activityCategory].activities=[].concat(this.activityCategories[activityCategory].activities.slice(0,pos),[activity],this.activityCategories[activityCategory].activities.slice(pos,this.activityCategories[activityCategory].activities.length))},addActivityCategory:function(activityCategory,pos){void 0==pos&&(pos=this.activities.length),this.activityCategories=[].concat(this.activityCategories.slice(0,pos),[activityCategory],this.activityCategories.slice(pos,this.activityCategories.length))},toJSON:function(){return{title:this.title,path:this.path,url:this.url,uiID:this.uiID,startDate:this.startDate,endDate:this.endDate,content:this.content,summary:this.summary,activityCategories:this.activityCategories,deletedContent:this.deletedContent}}}),UISchedule=new JS.Class({constants:{},cohortDateFormat:"%d %b %Y %H:%M",activityDateFormat:"%d %b %Y %H:%M",moduleDateFormat:"%d %b %Y %H:%M",emptySummaryText:'<span class="emptySummaryText">(click to edit summary)</span>',states:{LOADING:-1,RENDERING:1,NORMAL:2,SUMMARY_EDIT:3,REARRANGE_MODULES:4},initialize:function(scheduleJSON,constants){this.changeState(this.states.LOADING),this.$window=$(window),this.$scheduleLoader=$("#scheduleLoader"),this.$scheduleArea=$("#scheduleArea"),this.$scheduleOptions=$("#scheduleOptions"),this.$scheduleContent=$("#scheduleContent"),this.$moduleList=$("#moduleList"),this.$moduleActivityCategories=$("#moduleActivityCategories"),this.$pageAccordionList=$("#pageAccordionList"),this.$mediaAccordionList=$("#mediaAccordionList"),this.$videoAccordionList=$("#videoAccordionList"),this.$activityAccordionList=$("#activityAccordionList"),this.$numUnassignedPages=$("#numUnassignedPages"),this.$numUnassignedMedia=$("#numUnassignedMedia"),this.$numUnassignedVideos=$("#numUnassignedVideos"),this.$numUnassignedActivities=$("#numUnassignedActivities"),this.$unassignedContentArea=$("#unassignedContentArea"),this.$trashCan=$("#trashCan"),this.$trashCanTotal=$("#trashCanTotal"),this.$removeDatesButton=$("#removeDates"),this.$recalculateDatesButton=$("#recalculateDates"),this.$noCohortDatesMessage=$("#noCohortDatesMessage"),this.$recalculateDatesRow=$("#recalculateDatesRow"),this.$removeDatesRow=$("#removeDatesRow"),this.$timezone=$("#timezone"),this.$cohortStartDate=$("#cohortStartDate"),this.$pageEditorModal=$("#pageEditorModal"),this.$pageEditorPageLink=$("#pageEditorPageLink"),this.$pageEditorIFrame=$("#pageEditorIFrame"),this.$pageEditorLoadingMessage=$("#pageEditorLoadingMessage"),this.$firstModuleMessage=$("#firstModuleMessage"),this.uiIDCount=0,this.uiIDHash={},this.constants=constants,this.modules=[],CKEDITOR.disableAutoInline=!0,this.ckeditorOptions={extraPlugins:"autogrow,hoverlink",removePlugins:"about,pastetext,pastefromword,undo,clipboard,specialchar,stylescombo,paragraph,tabletools,table,maximize,scayt,horizontalrule,format,wsc,elementspath",removeButtons:"Strike,Subscript,Superscript,Anchor,Indent,Outdent,Blockquote",resize_enabled:!1,autoGrow_minHeight:"150",autoGrow_onStartup:!0,toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"list",groups:["list"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},{name:"document",groups:["mode"]}],fullPage:!1,SITE_URL:constants.SITE_URL,MEDIA_URL:constants.MEDIA_URL},this.loadAndRefresh(!0),this.changeState(this.states.NORMAL)},setUIID:function($element,optionalID){$element instanceof jQuery||$element instanceof HTMLElement&&($element=$($element));var uiID;optionalID?uiID=optionalID:(uiID=this.uiIDCount,this.uiIDCount+=1),$element.attr("data-ui-id",uiID),this.uiIDHash[uiID]=$element},getElementByUIID:function(uiID){return this.uiIDHash[uiID]},getNextUIID:function(){return this.uiIDCount++},loadAndRefresh:function(initialLoad){function temporaryModuleDataConverter(moduleData){for(var convertedModuleData=[],i=0;i<moduleData.length;i++){for(var module=moduleData[i],convertedModule={title:module.name,path:module.link,url:this.constants.SITE_URL+"/"+module.link,startDate:module.startDate,endDate:module.endDate},convertedContentList=[],j=0;j<module.content.length;j++){var content=module.content[j],convertedContent={type:content.type,title:content.title,path:content.path,url:content.url,thumbnail:content.thumbnail,affectsProgress:content.affectsProgress};convertedContentList[convertedContentList.length]=convertedContent}for(var convertedActivityCategories=[],coreActivityCategory={title:schedule.getCoreActivitiesTitle(),affectsProgress:!0},coreActivities=[],j=0;j<module.activityListing.core[0].activities.length;j++){var activity=module.activityListing.core[0].activities[j],convertedCoreActivity=activity;coreActivities[coreActivities.length]=convertedCoreActivity}coreActivityCategory.activities=coreActivities;for(var extraActivityCategory={title:schedule.getExtraActivitiesTitle(),affectsProgress:!1},extraActivities=[],j=0;j<module.activityListing.extra[0].activities.length;j++){var activity=module.activityListing.extra[0].activities[j],convertedExtraActivity=activity;extraActivities[extraActivities.length]=convertedExtraActivity}extraActivityCategory.activities=extraActivities,convertedActivityCategories[convertedActivityCategories.length]=coreActivityCategory,convertedActivityCategories[convertedActivityCategories.length]=extraActivityCategory,convertedModule.content=convertedContentList,convertedModule.activityCategories=convertedActivityCategories,convertedModule.summary=module.summary,convertedModuleData[convertedModuleData.length]=convertedModule}return{modules:convertedModuleData}}var schedule=this;API.get("courses/"+schedule.constants.COURSE_PATH+"/EditingContent",{cohort:schedule.constants.COHORT_PATH}).done(function(res){var moduleData=JSON.parse(res.moduleData),scheduleJSON={cohort:{title:res.title,path:schedule.constants.COHORT_PATH,url:schedule.constants.SITE_URL+schedule.constants.COHORT_PATH,startDate:res.startDate,coreActivitiesTitle:res.coreActivitiesTitle,extraActivitiesTitle:res.extraActivitiesTitle}};$.extend(scheduleJSON.cohort,temporaryModuleDataConverter.call(schedule,moduleData));var unassignedActivityData=JSON.parse(res.unassignedActivities);$.extend(scheduleJSON.cohort,{unassignedActivities:unassignedActivityData});var unassignedContentData=JSON.parse(res.unassignedContent);$.extend(scheduleJSON.cohort,{unassignedContent:unassignedContentData}),schedule.fromJSON(scheduleJSON),schedule.staticEventsSet||(schedule.setStaticEventHandlers(),schedule.setAllUIIDs()),schedule.staticEventsSet=!0,CourseContentWidget.apply("#manageCourseContentButton",{constants:{MEDIA_URL:schedule.constants.MEDIA_URL}}),initialLoad&&(schedule.initialJSON={},$.extend(!0,schedule.initialJSON,schedule.toJSON())),schedule.$scheduleLoader.fadeOut(500,function(){schedule.$scheduleContent.fadeIn(500),schedule.render()})}).fail(function(){alert("There was a problem loading the data for the schedule editor. Please try again later.")})},addModule:function(module,pos){void 0==pos&&(pos=this.modules.length),this.modules=[].concat(this.modules.slice(0,pos),[module],this.modules.slice(pos,this.modules.length))},getModules:function(){return this.modules},fromJSON:function(scheduleJSON){var schedule;if("string"==typeof scheduleJSON)schedule=JSON.parse(scheduleJSON).cohort;else{if("object"!=typeof scheduleJSON)return!1;schedule=scheduleJSON.cohort?scheduleJSON.cohort:scheduleJSON}this.title=schedule.title,this.path=schedule.path,this.url=schedule.url,this.startDate=schedule.startDate,this.modules=$.map(schedule.modules,function(module){return new ScheduleModule(module)})||[],this.unassignedContent=schedule.unassignedContent||[],this.unassignedActivities=schedule.unassignedActivities||[],this.deletedContent=schedule.deletedContent||[],this.coreActivitiesTitle=schedule.coreActivitiesTitle,this.extraActivitiesTitle=schedule.extraActivitiesTitle},toJSON:function(){var modules=this.getModules(),scheduleJSON={title:this.title,path:this.path,url:this.url,startDate:this.startDate,modules:$.map(modules,function(module){return module.toJSON()}),unassignedContent:this.unassignedContent,unassignedActivities:this.unassignedActivities,deletedContent:this.deletedContent,coreActivitiesTitle:this.coreActivitiesTitle,extraActivitiesTitle:this.extraActivitiesTitle};return scheduleJSON},removeByUIID:function(uiID){var data=this.getByUIID(uiID);data.parent.splice(data.index,1)},getByUIID:function(uiID){var uiID=parseInt(uiID),dataObject=!1,unassignedContent=this.unassignedContent,unassignedActivities=this.unassignedActivities,deletedContent=this.deletedContent;if($.each(unassignedContent,function(k){return this.uiID===uiID?(dataObject={ref:unassignedContent[k],parent:unassignedContent,index:k},!1):void 0}),$.each(deletedContent,function(k){return this.uiID===uiID?(dataObject={ref:deletedContent[k],parent:deletedContent,index:k},!1):void 0}),!dataObject&&($.each(unassignedActivities,function(k){return this.uiID===uiID?(dataObject={ref:unassignedActivities[k],parent:unassignedActivities,index:k},!1):void 0}),!dataObject)){var modules=this.modules;$.each(modules,function(k){if(this.uiID===uiID)return dataObject={ref:modules[k],parent:modules,index:k},!1;var content=this.content;if($.each(content,function(k){return this.uiID===uiID?(dataObject={ref:content[k],parent:content,index:k},!1):void 0}),!dataObject){var activityCategories=this.activityCategories;$.each(activityCategories,function(k){if(this.uiID===uiID)return dataObject={ref:activityCategories[k],parent:activityCategories,index:k},!1;if(dataObject)return!1;var activities=this.activities;return $.each(activities,function(k){return this.uiID===uiID?(dataObject={ref:activities[k],parent:activities,index:k},!1):void 0}),dataObject?!1:void 0})}return dataObject?!1:void 0})}return dataObject},removeContentFromModules:function(uiID){var schedule=this,content=schedule.getByUIID(uiID);schedule.removeByUIID(uiID),schedule.unassignedContent.push(content.ref),schedule.render(),schedule.updateSubmissionForm()},deleteItem:function($helper){var schedule=this,contentType=$helper.attr("data-type");if("activity"==contentType){var activity={type:contentType,title:$helper.attr("data-title"),path:$helper.attr("data-path"),url:$helper.attr("data-url"),startDate:$helper.attr("data-startdate"),endDate:$helper.attr("data-enddate"),pageIconSmall:$helper.attr("data-pageiconsmall"),uiID:parseInt($helper.attr("data-ui-id"))};schedule.removeUnassignedActivity(activity.uiID),schedule.deletedContent.push(activity)}else{var content={type:contentType,title:$helper.attr("data-title"),path:$helper.attr("data-path"),url:$helper.attr("data-url"),thumbnail:$helper.attr("data-thumbnail"),affectsProgress:"true"===$helper.attr("data-affects-progress"),uiID:parseInt($helper.attr("data-ui-id"))};schedule.removeUnassignedContent(content.uiID),schedule.deletedContent.push(content)}schedule.render(),schedule.updateSubmissionForm()},removeUnassignedContent:function(uiID){this.removeUnassigned(uiID)},removeUnassignedActivity:function(uiID){this.removeUnassigned(uiID)},removeUnassigned:function(uiID){if(this.unassignedContent.length)for(var i=0,len=this.unassignedContent.length;len>i;i++)if(this.unassignedContent[i].uiID==uiID){this.unassignedContent.splice(i,1);break}if(this.unassignedActivities.length)for(var i=0,len=this.unassignedActivities.length;len>i;i++)if(this.unassignedActivities[i].uiID==uiID){this.unassignedActivities.splice(i,1);break}},move:function($helper,$droppedContainer){var schedule=this;if("unassignedContentArea"===$droppedContainer.attr("id")){var contentType=$helper.attr("data-type");if("activity"==contentType){var activity={type:contentType,title:$helper.attr("data-title"),path:$helper.attr("data-path"),url:$helper.attr("data-url"),uiID:parseInt($helper.attr("data-ui-id")),pageIconSmall:$helper.attr("data-pageiconsmall")};schedule.removeByUIID(activity.uiID),schedule.unassignedActivities.push(activity)}else{var content={type:contentType,title:$helper.attr("data-title"),path:$helper.attr("data-path"),url:$helper.attr("data-url"),uiID:parseInt($helper.attr("data-ui-id")),thumbnail:$helper.attr("data-thumbnail"),affectsProgress:"true"===$helper.attr("data-affects-progress")};schedule.removeByUIID(content.uiID),schedule.unassignedContent.push(content)}schedule.render(),schedule.updateSubmissionForm()}else if($droppedContainer.hasClass("moduleContentList")){var moduleIndex=$helper.closest(".module").index();if(-1!==moduleIndex){var content={type:$helper.attr("data-type"),title:$helper.attr("data-title"),path:$helper.attr("data-path"),url:$helper.attr("data-url"),uiID:parseInt($helper.attr("data-ui-id")),thumbnail:$helper.attr("data-thumbnail"),affectsProgress:"true"===$helper.attr("data-affects-progress")},helperIndex=$helper.index();schedule.removeByUIID(content.uiID),schedule.getModules()[moduleIndex].addContent(content,helperIndex),schedule.render(),schedule.updateSubmissionForm()}}else if($droppedContainer.hasClass("moduleActivityList")){var moduleIndex=$helper.closest(".module").index();if(-1!==moduleIndex){var activityStartDate=$helper.attr("data-startdate")?$helper.attr("data-startdate"):$helper.closest(".module").attr("data-start"),activityEndDate=$helper.attr("data-enddate")?$helper.attr("data-enddate"):$helper.closest(".module").attr("data-end"),activity={type:$helper.attr("data-type"),title:$helper.attr("data-title"),path:$helper.attr("data-path"),url:$helper.attr("data-url"),uiID:parseInt($helper.attr("data-ui-id")),pageIconSmall:$helper.attr("data-pageiconsmall"),startDate:activityStartDate,endDate:activityEndDate},helperIndex=$helper.index();schedule.removeByUIID(activity.uiID);var activityCategoryPosition=$helper.closest("div").index();schedule.getModules()[moduleIndex].addActivity(activity,activityCategoryPosition,helperIndex),schedule.render(),schedule.updateSubmissionForm()}}schedule.updateSubmissionForm()},updateSubmissionForm:function(){var schedule=this;$("#scheduleJSON").val(JSON.stringify(schedule.toJSON())),this.$window.trigger("scheduleEditorDirty")},clearSubmissionForm:function(){$("#scheduleJSON").removeAttr("value"),this.$window.trigger("scheduleEditorClean")},changeState:function(newState){this.state=newState},render:function(){var schedule=this;this.changeState(this.states.RENDERING),$(".accordionList").empty(),schedule.$numUnassignedVideos.html("0"),schedule.$numUnassignedPages.html("0"),schedule.$numUnassignedMedia.html("0"),schedule.$numUnassignedActivities.html("0"),schedule.uiIDHash={};var scheduleJSON=this.toJSON();$(".emptyModuleContentList, .emptyModuleActivityList").hide();var $moduleList=$("<ul>");$.each(scheduleJSON.modules,function(){var $moduleHtml,moduleTemplateData={title:this.title,path:this.path,url:this.url,summary:this.summary,uiID:parseInt(this.uiID)};this.startDate?$.extend(moduleTemplateData,{startDate:this.startDate,endDate:this.endDate,startDateProcessed:Utilities.formatTimestamp(this.startDate,schedule.moduleDateFormat),endDateProcessed:Utilities.formatTimestamp(this.endDate,schedule.moduleDateFormat)}):$.extend(moduleTemplateData,{hideDates:!0}),dust.render("scheduleEditorModule",moduleTemplateData,function(moduleError,moduleHtml){$moduleHtml=$(moduleHtml),""==$moduleHtml.find(".moduleSummary").html()?$moduleHtml.find(".moduleSummary").attr("data-empty","1").html(schedule.emptySummaryText):$moduleHtml.find(".moduleSummary").attr("data-empty","0")});var scheduleContent=this.content,$moduleContent=$moduleHtml.find(".moduleContentList");scheduleContent&&scheduleContent.length?$.each(scheduleContent,function(){var contentTemplateData=this;switch(this.type){case"video":contentTemplateData.thumbnailClass="contentVideo",contentTemplateData.pageTypeTitle="Media";break;case"page":contentTemplateData.thumbnailClass="contentOther",contentTemplateData.pageTypeTitle="Wiki Pages";break;case"media":contentTemplateData.thumbnailClass="contentOther",contentTemplateData.pageTypeTitle="Media"}dust.render("scheduleEditorContentItem",contentTemplateData,function(pageError,pageHtml){var $pageHtml=$(pageHtml);$moduleContent.append($pageHtml),
schedule.uiIDHash[contentTemplateData.uiID]={$element:$pageHtml},$pageHtml.find(".scheduleEditor-removeFromModule").on("click",function(){schedule.removeContentFromModules(contentTemplateData.uiID)})})}):$moduleContent.siblings(".emptyModuleContentList").show();var scheduleActivityCategories=this.activityCategories,$moduleActivityCategories=$moduleHtml.find(".moduleActivityCategories").empty();scheduleActivityCategories&&$.each(scheduleActivityCategories,function(){var activityCategoryTemplateData=this;activityCategoryTemplateData.title=activityCategoryTemplateData.affectsProgress?schedule.getCoreActivitiesTitle():schedule.getExtraActivitiesTitle();var $activityCategory;dust.render("activityCategory",activityCategoryTemplateData,function(error,html){$activityCategory=$("<div>").html(html),$activityCategory.find(".moduleActivityTitle").tooltip({title:function(){return $(this).attr("data-affects-progress")+""=="true"?"These activities contribute towards course progress":"These activities do not contribute towards course progress"}})});var $activityList=$activityCategory.find(".moduleActivityList").empty();this.activities&&this.activities.length?$.each(this.activities,function(){var activityTemplateData=this;activityTemplateData.startDate?(activityTemplateData.showDates=!0,activityTemplateData.startDateProcessed=Utilities.formatTimestamp(activityTemplateData.startDate,schedule.activityDateFormat),activityTemplateData.endDateProcessed=Utilities.formatTimestamp(activityTemplateData.endDate,schedule.activityDateFormat)):activityTemplateData.showDates=!1;var $activity;dust.render("activity",activityTemplateData,function(error,html){$activity=$(html),schedule.uiIDHash[activityTemplateData.uiID]={$element:$activity}}),$activityList.append($activity)}):$activityCategory.find(".emptyModuleActivityList").show(),$moduleActivityCategories.append($activityCategory)}),$moduleList.append($moduleHtml)}),schedule.$moduleList.html($moduleList.contents()),scheduleJSON.unassignedContent&&$.each(scheduleJSON.unassignedContent,function(){var title=this.title||this.path,path=this.path,url=this.url,type=this.type,uiID=this.uiID,thumbnail=this.thumbnail,affectsProgress=this.affectsProgress,$trashHover=$('<span class="returnMessage"><div><i class="icon icon-remove"></i></div>Delete </span>');switch(this.type){case"page":var $unassignedPageItem=$("<li>").attr({"class":"accordionListItem","data-ui-id":uiID,"data-type":"page","data-title":title,"data-path":path,"data-url":url,"data-type":type,"data-thumbnail":thumbnail,"data-affects-progress":affectsProgress}).append($("<a>").attr({href:url,target:"_blank"}).text(title));$unassignedPageItem.prepend($trashHover),schedule.uiIDHash[uiID]={$element:$unassignedPageItem},schedule.$pageAccordionList.append($unassignedPageItem),increment(schedule.$numUnassignedPages);break;case"media":var $unassignedMediaItem=$("<li>").attr({"class":"accordionListItem","data-ui-id":uiID,"data-type":"media","data-title":title,"data-path":path,"data-url":url,"data-type":type,"data-thumbnail":thumbnail,"data-affects-progress":affectsProgress}).append($("<a>").attr({href:url,target:"_blank"}).text(title));$unassignedMediaItem.prepend($trashHover),schedule.uiIDHash[uiID]={$element:$unassignedMediaItem},schedule.$mediaAccordionList.append($unassignedMediaItem),increment(schedule.$numUnassignedMedia);break;case"video":var $unassignedVideoItem=$("<li>").attr({"class":"accordionListItem","data-ui-id":uiID,"data-type":"video","data-title":title,"data-path":path,"data-url":url,"data-type":type,"data-thumbnail":thumbnail,"data-affects-progress":affectsProgress}).append($("<a>").attr({href:url,target:"_blank"}).text(title));$unassignedVideoItem.prepend($trashHover),schedule.uiIDHash[uiID]={$element:$unassignedVideoItem},schedule.$mediaAccordionList.append($unassignedVideoItem),increment(schedule.$numUnassignedMedia)}}),scheduleJSON.unassignedActivities&&$.each(scheduleJSON.unassignedActivities,function(){var $trashHover=$('<span class="returnMessage"><div><i class="icon icon-remove"></i></div>Delete </span>'),title=this.title||this.path,path=this.path,url=this.url,startDate=this.startDate,endDate=this.endDate,pageIconSmall=this.pageIconSmall,uiID=this.uiID,unassignedActivityAttributes={"class":"accordionListItem","data-ui-id":uiID,"data-type":"activity","data-title":title,"data-path":path,"data-url":url,"data-pageiconsmall":pageIconSmall};startDate&&$.extend(unassignedActivityAttributes,{"data-startdate":startDate,"data-enddate":endDate});var $unassignedActivityItem=$("<li>").attr(unassignedActivityAttributes).append($("<a>").attr({href:url,target:"_blank"}).text(title));$unassignedActivityItem.prepend($trashHover),schedule.uiIDHash[uiID]={$element:$unassignedActivityItem},schedule.$activityAccordionList.append($unassignedActivityItem),increment(schedule.$numUnassignedActivities)}),schedule.startDate?(schedule.$noCohortDatesMessage.hide(),schedule.$recalculateDatesRow.show(),schedule.$removeDatesRow.show()):(schedule.$noCohortDatesMessage.show(),schedule.$recalculateDatesRow.hide(),schedule.$removeDatesRow.hide()),schedule.$timezone.text(schedule.constants.TIMEZONE),scheduleJSON.startDate&&schedule.$cohortStartDate.attr("data-value",scheduleJSON.startDate).val(Utilities.formatTimestamp(scheduleJSON.startDate,schedule.cohortDateFormat)),$("#cohortStartDate").datetimepicker().on("changeDate hide",function(e){var $input=$(e.currentTarget);$input.val(Utilities.formatTimestamp(e.date,schedule.activityDateFormat)),$input.attr("data-value",e.date.toISOString())}),schedule.$moduleList.find("li.module").length?schedule.$firstModuleMessage.hide():schedule.$firstModuleMessage.show(),schedule.fixScrollbar(),schedule.refreshTrash(),schedule.setEventHandlers(),schedule.changeState(schedule.states.NORMAL)},fixScrollbar:function(){var schedule=this;schedule.$scheduleArea.css("min-height","");var scheduleAreaHeight=schedule.$scheduleArea.height(),unassignedContentAreaHeight=schedule.$unassignedContentArea.height(),maxHeight=Math.max(scheduleAreaHeight,unassignedContentAreaHeight);schedule.$scheduleArea.css("min-height",maxHeight+20)},refreshTrash:function(){var self=this;self.$trashCanTotal.html("0"),self.deletedContent.length&&self.$trashCanTotal.html(self.deletedContent.length);var trashContents=self.deletedContent;if(trashContents.length){$("#trashInfo").hide();for(var $trashContentTable=$('<table id="trashContentTable"></table>'),$tbody=$("<tbody>").appendTo($trashContentTable),i=0,len=trashContents.length;len>i;i++){var trashDetails=trashContents[i];trashDetails.typeCapped=trashDetails.type.substr(0,1).toUpperCase()+trashDetails.type.substr(1),dust.render("trashItem",trashDetails,function(error,html){$tbody.append(html)})}$("#trashContentTable").replaceWith($trashContentTable)}else $("#trashContentTable").html(""),$("#trashInfo").show()},moveModule:function(uiID,movedPosition){for(var tmpModule,schedule=this,i=0,len=schedule.modules.length;len>i;i++)if(schedule.modules[i].uiID===uiID){tmpModule=schedule.modules.splice(i,1);break}tmpModule&&schedule.modules.splice(movedPosition,0,tmpModule[0])},eventHandlers:{showAddNewContentModal:function(e,self){var moduleIndex,moduleTitle,moduleObject=self.getByUIID($(this).closest(".module").attr("data-ui-id")),$contentModal=$("#addNewContentModal");moduleObject?(moduleIndex=parseInt(moduleObject.index),moduleTitle=moduleObject.ref.title,$("#addNewContentModuleTitle").html(moduleTitle),$contentModal.attr("data-module",moduleIndex).find(".module-section").show()):$contentModal.removeAttr("data-module").find(".module-section").hide(),$contentModal.find("#content-title-input").removeClass("invalid"),$contentModal.find("#select-content-label").removeClass("invalid"),$contentModal.find("#assistance-arrow").hide().css({left:"10px"}),$contentModal.modal("show")},showAddNewActivityModal:function(e,self){var $this=$(this),$activityModal=$("#addNewActivityModal"),moduleObject=self.getByUIID($(this).closest(".module").attr("data-ui-id"));if(moduleObject){var moduleActivityList=self.getByUIID($this.prev(".moduleActivityList").attr("data-ui-id")),currentUIID=moduleActivityList&&moduleActivityList.ref.uiID,moduleIndex=parseInt(moduleObject.index),moduleTitle=moduleObject.ref.title,activityCategories=function(){for(var activityCategories=[],moduleActivityCategories=self.modules[moduleIndex].activityCategories,numActivityCategories=moduleActivityCategories.length,i=0;numActivityCategories>i;i++)activityCategories.push({title:moduleActivityCategories[i].title,selected:moduleActivityCategories[i].uiID===currentUIID,affectsProgress:moduleActivityCategories[i].affectsProgress});return activityCategories}(),activityCategoriesHtml=$.map(activityCategories,function(element,index){return'<option value="'+index+'"'+(element.selected?"selected":"")+">"+element.title+" ("+(element.affectsProgress?"affects":"does not affect")+" progress)</option>"});$("#addNewActivityCategory").empty().append(activityCategoriesHtml),$("#addNewActivityModuleTitle").html(moduleTitle),$activityModal.attr("data-module",moduleIndex).find(".module-section").show()}else $activityModal.removeAttr("data-module").find(".module-section").hide();$activityModal.modal("show"),$activityModal.find("#activity-title-input").removeClass("invalid")}},setAllUIIDs:function(){for(var schedule=this,modules=schedule.getModules(),i=0,moduleLength=modules.length;moduleLength>i;i++){var module=modules[i];module.uiID=schedule.getNextUIID();for(var j=0,contentLength=module.content.length;contentLength>j;j++)module.content[j].uiID=schedule.getNextUIID();for(var j=0,activityCategoryLength=module.activityCategories.length;activityCategoryLength>j;j++){var activityCategory=module.activityCategories[j];activityCategory.uiID=schedule.getNextUIID();for(var k=0,activitiesLength=activityCategory.activities.length;activitiesLength>k;k++)activityCategory.activities[k].uiID=schedule.getNextUIID()}}for(var i=0,unassignedContentLength=schedule.unassignedContent.length;unassignedContentLength>i;i++)schedule.unassignedContent[i].uiID=schedule.getNextUIID();for(var i=0,unassignedActivitiesLength=schedule.unassignedActivities.length;unassignedActivitiesLength>i;i++)schedule.unassignedActivities[i].uiID=schedule.getNextUIID()},resetAddNewContentModal:function(){$("#addNewContentModal input[type=text]").val(""),$("#addNewContentType > li.highlight").removeClass("highlight"),$(".addNewContentDetails").hide(),$(".addNewContentDetails[data-id=file] button").text("Select File"),$("#currentMediaFileUploaded").text("(none)")},resetAddNewActivityModal:function(){$("#addNewActivityModal input[type=text]").val("")},setStaticEventHandlers:function(){var schedule=this;schedule.$window.on("scroll resize",schedule.refreshSidebar),schedule.$window.on("resize",{schedule:schedule},schedule.resizeModals),$(".addContentButton").click(function(){var $this=$(this),state=$this.attr("data-state"),deferred=$.Deferred();"closed"===state?($this.attr("data-state","open"),$this.closest(".accordion-group").find(".addContentBox").show(100,function(){deferred.resolve()}),$this.find(".icon-plus").removeClass("icon-plus").addClass("icon-minus"),$this.siblings(".accordion-toggle").trigger("click")):($this.attr("data-state","closed"),$this.closest(".accordion-group").find(".addContentBox").hide(100,function(){deferred.resolve()}),$this.find(".icon-minus").removeClass("icon-minus").addClass("icon-plus"),$this.siblings(".accordion-toggle").trigger("click")),deferred.done(schedule.refreshSidebar)}),$("#addActivityForm input").keyup(function(e){var ENTER_KEY=13;e.which===ENTER_KEY&&schedule.eventHandlers.submitAddNewActivityForm.call(this,e,schedule)}),$("#addPageForm input").keyup(function(e){var ENTER_KEY=13;e.which===ENTER_KEY&&schedule.eventHandlers.submitAddNewPageForm.call(this,e,schedule)}),$("#addMediaForm input").keyup(function(e){var ENTER_KEY=13;e.which===ENTER_KEY&&schedule.eventHandlers.submitAddNewMediaForm.call(this,e,schedule)}),$("#addVideoForm input").keyup(function(e){var ENTER_KEY=13;e.which===ENTER_KEY&&schedule.eventHandlers.submitAddNewVideoForm.call(this,e,schedule)}),$("#newModuleName").keyup(function(e){var ENTER_KEY=13;e.which===ENTER_KEY&&$("#addModuleButton").trigger("click")}),$("#submitActivityButton").click(function(e){schedule.eventHandlers.showAddNewActivityModal.call(this,e,schedule)}),$("#submitContentButton").click(function(e){schedule.eventHandlers.showAddNewContentModal.call(this,e,schedule)}),$("#editor-form").keypress(function(e){return 13==e.which?!1:void 0}),$("#trashCan").click(function(){schedule.refreshTrash(),$("#trashContentModal").modal("show")}),$("#trashContentModal").on("click",".removeFromTrash",function(){var $item=$(this).closest("tr");schedule.move($item,schedule.$unassignedContentArea);for(var i=schedule.deletedContent.length-1;i>=0;i--)schedule.deletedContent[i].path==$item.attr("data-path")&&schedule.deletedContent.splice(i,1);$item.remove(),schedule.refreshTrash()}),$("#trashCan").droppable({accept:"#pageAccordionList li, #videoAccordionList li, #mediaAccordionList li, #activityAccordionList li",drop:function(event,ui){$("#trashCan").removeClass("highlight"),schedule.deleteItem(ui.helper),schedule.refreshSidebar(),schedule.removeAllDroppableHighlights()},tolerance:"pointer",over:function(event,ui){$(event.target).addClass("highlight"),ui.helper.addClass("hoverDrop")},out:function(event,ui){$(event.target).removeClass("highlight"),ui.helper.removeClass("hoverDrop")}}),$("#rearrangeModules").click(function(){var moveList=[],$rearrangeModulesModal=$("#rearrangeModulesModal"),$rearrangeModulesArea=$("#rearrangeModulesArea");$rearrangeModulesArea.empty();var $moduleListClone=schedule.$moduleList.clone();$moduleListClone.attr("id","moduleListClone").addClass("rearrangeModules"),$moduleListClone.find(".moduleDetails, .moduleDateRange").remove(),$moduleListClone.sortable({axis:"y",scroll:!1}).on("sortupdate",function(event,ui){var uiID=parseInt(ui.item.attr("data-ui-id")),movedPosition=ui.item.index();moveList.push({uiID:uiID,position:movedPosition}),$("#rearrangeModulesModal").data("moveList",moveList)}),$moduleListClone.appendTo($rearrangeModulesArea),$rearrangeModulesModal.modal("show")}),$(".addRemoveModules").click(function(){var $addRemoveModulesModal=$("#addRemoveModulesModal");$addRemoveModulesModal.data("addRemoveData",{add:[],remove:[]});var $addRemoveModulesArea=$("#addRemoveModulesArea");$addRemoveModulesArea.empty();var $moduleListClone=schedule.$moduleList.clone();$moduleListClone.attr("id","moduleListClone").addClass("addRemoveModules"),$moduleListClone.find(".moduleDetails, .moduleDateRange").remove(),$moduleListClone.find(".moduleTitle").each(function(){var $removeModuleButton=$('<a class="removeModuleButton btn btn-danger btn-small">Remove Module</a>');$(this).prepend($removeModuleButton)}),$moduleListClone.appendTo($addRemoveModulesArea);var $moduleListClone=$("#moduleListClone");0!=$moduleListClone.find("li").length?$moduleListClone.hasClass("populated")||$moduleListClone.addClass("populated"):$moduleListClone.removeClass("populated"),$addRemoveModulesModal.modal("show").on("shown",function(){$("#newModuleName").focus()})}),$("#addModuleButton").click(function(){var $addRemoveModulesModal=$("#addRemoveModulesModal"),$newModuleName=$("#newModuleName"),newModuleName=$.trim($newModuleName.val());if(""===newModuleName)alert("Please specify a valid module name.");else{var addRemoveData=$addRemoveModulesModal.data("addRemoveData");addRemoveData.add.push(newModuleName);var $newModulePreview=$('<li class="module"><div class="moduleTitle"><a class="removeModuleButton btn btn-danger btn-small">Remove Module</a><h6><span class="newModuleName">'+newModuleName+'</span> <span class="newModuleStar">NEW</span></h6></div></li>'),$moduleListClone=$("#moduleListClone");$moduleListClone.append($newModulePreview),$newModuleName.val(""),0!=$moduleListClone.find("li").length?$moduleListClone.hasClass("populated")||$moduleListClone.addClass("populated"):$moduleListClone.removeClass("populated")}}),$("#addRemoveModulesModal").on("click",".removeModuleButton",function(){var $this=$(this),addRemoveData=$("#addRemoveModulesModal").data("addRemoveData"),uiID=$this.closest(".module").attr("data-ui-id");if(void 0!=uiID){var index=$.inArray(parseInt(uiID),addRemoveData.remove);-1!==index?($this.closest(".module").find(".moduleTitle h6 .removeModuleStar").remove(),addRemoveData.remove.splice(index,1),$this.html("Remove Module")):($this.closest(".module").find(".moduleTitle h6").append(' <span class="removeModuleStar">REMOVE</span>'),addRemoveData.remove.push(parseInt(uiID)),$this.html("Unremove Module"))}else{var newModuleName=$this.closest(".module").find(".newModuleName").text();addRemoveData.add.splice($.inArray(newModuleName,addRemoveData.add),1),$this.closest(".module").remove()}var $moduleListClone=$("#moduleListClone");0!=$moduleListClone.find("li").length?$moduleListClone.hasClass("populated")||$moduleListClone.addClass("populated"):$moduleListClone.removeClass("populated")}),$("#saveAddRemoveModules").click(function(){var $this=$(this);$this.attr("disabled","disabled");var addRemoveData=$("#addRemoveModulesModal").data("addRemoveData");if(addRemoveData.add.length||addRemoveData.remove.length){if(addRemoveData.add.length)for(var i=0,len=addRemoveData.add.length;len>i;i++){var moduleJSON={uiID:schedule.getNextUIID(),title:addRemoveData.add[i],path:"",url:"",startDate:"",endDate:"",content:[],summary:"",activityCategories:[{title:schedule.getCoreActivitiesTitle(),affectsProgress:!0,activities:[]},{title:schedule.getExtraActivitiesTitle(),affectsProgress:!1,activities:[]}]},newModule=new ScheduleModule(moduleJSON);schedule.modules.push(newModule)}if(addRemoveData.remove.length)for(var i=0,len=addRemoveData.remove.length;len>i;i++)schedule.removeByUIID(addRemoveData.remove[i]);schedule.render(),schedule.updateSubmissionForm()}$this.removeAttr("disabled"),$("#addRemoveModulesModal").modal("hide")}),$("#saveRearrangeModules").click(function(){var moveList=$("#rearrangeModulesModal").data("moveList");if(moveList&&moveList.length){for(var i=0,len=moveList.length;len>i;i++)schedule.moveModule(moveList[i].uiID,moveList[i].position);schedule.render(),schedule.updateSubmissionForm()}$("#rearrangeModulesModal").modal("hide")}),$("#resetSchedule").click(function(){confirm("This will discard any changes you have made. Are you sure you want to reset the schedule?")&&(schedule.fromJSON(schedule.initialJSON),schedule.render(),schedule.clearSubmissionForm())}),$("#submitModuleTitle").click(function(){var moduleUIID=parseInt($("#oldModuleUIID").val()),newModuleTitle=$.trim($("#newModuleTitle").val());if(""==newModuleTitle)alert("You must specify a module title.");else{var data=schedule.getByUIID(moduleUIID);data.ref.title=newModuleTitle,$("#moduleTitleModal").modal("hide"),schedule.render(),schedule.updateSubmissionForm()}}),$("#newModuleTitle").keyup(function(e){var ENTER_KEY=13;e.which==ENTER_KEY&&$("#submitModuleTitle").trigger("click")}),dust.render("mediaUpload",{},function(error,html){var $uploadMediaModal=$(html),$form=$uploadMediaModal.find("form");$("body").append($uploadMediaModal),$form.fileupload({url:schedule.constants.SITE_URL+"/api/courses/"+schedule.constants.COURSE_PATH+"/UploadMedia",dataType:"json",fileInput:null}),$("#uploadMediaButton").click(function(){$("#uploadMediaFile").val(""),$("#uploadMediaTable input[type=text]").val(""),$("#uploadMediaModal").modal("show")}),$("#submitUploadMedia").click(function(){var $this=$(this);$this.attr("disabled","disabled");var $form=$("#uploadMediaForm");$form.find("input[type=file]").val()&&$form.fileupload("add",{fileInput:$form.find("input[type=file]"),success:function(res){res.success&&(res.createdPage.uiID=schedule.getNextUIID(),schedule.unassignedContent.push(res.createdPage),schedule.render(),$("#uploadMediaModal").modal("hide"),$("#addMediaButton").trigger("click"))},error:function(){alert("Media upload failed.")},complete:function(){$this.removeAttr("disabled")}})})}),$("#removeDates").click(function(){if(confirm("Are you sure you want to remove all dates?")){var $this=$(this);$this.attr("disabled","disabled");var handleError=function(){alert("There was an error with the operation.")};$.ajax({url:"/cohorts/admin/?course="+schedule.constants.COURSE_PATH+"&cohort="+schedule.constants.COHORT_PATH+"&action=timeline",type:"post",data:{actionType:"removeCohortDates"},success:function(){window.location.reload()},error:handleError,complete:function(){$this.removeAttr("disabled")}})}}),$("#recalculateDates").click(function(){if(confirm("This will recalculate all dates based off the start date and throwaway any date overrides that exist. Are you sure you want to proceed?")){var $this=$(this);$this.attr("disabled","disabled");var handleError=function(){alert("There was an error with the operation.")};$.ajax({url:"/cohorts/admin/?course="+schedule.constants.COURSE_PATH+"&cohort="+schedule.constants.COHORT_PATH+"&action=timeline",type:"post",data:{actionType:"recalculateDates",cohortStartDate:schedule.startDate},success:function(){window.location.reload()},error:handleError,complete:function(){$this.removeAttr("disabled")}})}}),$("#submitCohortDateSettings").click(function(){var $this=$(this);$this.attr("disabled","disabled");var cohortStartDate=schedule.$cohortStartDate.attr("data-value"),handleError=function(){alert("There was an error with the operation.")},setCohortStartDate=!0;setCohortStartDate&&$.ajax({url:"/cohorts/admin/?course="+schedule.constants.COURSE_PATH+"&cohort="+schedule.constants.COHORT_PATH+"&action=timeline",type:"post",data:{actionType:"setCohortStartDate",cohortStartDate:cohortStartDate},success:function(){window.location.reload()},error:handleError,complete:function(){$this.removeAttr("disabled")}})}),$("#cohortDateSettingsButton, #setCohortStartDate").click(function(){$("#cohortDateSettingsModal").modal("show")}),$("#activityCategoriesButton").click(function(){var coreActivitiesTitle=schedule.getCoreActivitiesTitle(),extraActivitiesTitle=schedule.getExtraActivitiesTitle();$("#coreActivityCategory").val(coreActivitiesTitle),$("#extraActivityCategory").val(extraActivitiesTitle),$("#activityCategoriesModal").modal("show")}),$("#saveActivityCategories").click(function(){var coreActivitiesTitle=$.trim($("#coreActivityCategory").val()),extraActivitiesTitle=$.trim($("#extraActivityCategory").val());""===coreActivitiesTitle||""===extraActivitiesTitle?alert("Category Names can not be blank."):(schedule.setCoreActivitiesTitle(coreActivitiesTitle),schedule.setExtraActivitiesTitle(extraActivitiesTitle),schedule.render(),schedule.updateSubmissionForm(),$("#activityCategoriesModal").modal("hide"))}),$("#modalMediaFileUploadInput").change(function(e){var fileData=e.originalEvent.fpfile,filename=fileData.filename,filenameFormatted=filename.length>60?filename.substr(0,54)+"...["+filename.substr(filename.lastIndexOf("."))+"]":filename,fileSize=Utilities.size_format(fileData.size),fileDataText=fileData.size?filenameFormatted+" ("+fileSize+")":filenameFormatted;$("#currentMediaFileUploaded").text(fileDataText),$(this).siblings("button").text("Change File")}),schedule.$window.on("schedulePresubmit",function(){schedule.state===schedule.states.SUMMARY_EDIT&&schedule.updateSubmissionForm(),$(window).off("beforeunload")}),schedule.$window.on("message",function(e){var data,dataJSON=e.originalEvent.data;try{data=JSON.parse(dataJSON)}catch(err){data=null}if(data&&data.HTMLData){var newTitle=data.HTMLData.title,editingPageLinkHtml=schedule.$pageEditorModal.data("page"),$pageListItem=$(editingPageLinkHtml).closest("li"),uiID=parseInt($pageListItem.attr("data-ui-id")),dataReference=schedule.getByUIID(uiID).ref,oldTitle=dataReference.title;newTitle!==oldTitle&&(dataReference.title=newTitle,schedule.render(),schedule.updateSubmissionForm())}schedule.$pageEditorModal.modal("hide")}),schedule.$pageEditorModal.on("hidden",function(){schedule.$pageEditorIFrame.attr("src","about:blank"),schedule.$pageEditorLoadingMessage.show(),schedule.$pageEditorPageLink.hide()}),$(".highlightTopBar").hover(function(){schedule.$scheduleOptions.addClass("highlight"),$(this).addClass("highlight")},function(){schedule.$scheduleOptions.removeClass("highlight"),$(this).removeClass("highlight")}),$(".highlightRightBar").hover(function(){schedule.$unassignedContentArea.addClass("highlight"),$(this).addClass("highlight")},function(){schedule.$unassignedContentArea.removeClass("highlight"),$(this).removeClass("highlight")}),$(".accordion-body").on("show",function(){$(this).siblings(".addContentBox").show(200,function(){schedule.fixScrollbar()})}).on("hide",function(){$(this).siblings(".addContentBox").hide(200,function(){schedule.fixScrollbar()})}),$("#modalAddNewActivitySave").click(function(){var $this=$(this);$this.attr("disabled","disabled").button("saving");var deferred=$.Deferred(),$inputField=$(".addNewActivityDetails input[name=activity]"),activityType=$("#activitySelectionInput").val(),appId=$("#activityAppInput").val();if(""==activityType)deferred.reject(),alert("A type of activity needs to be selected, before an activity can be created.");else if(""==$.trim($inputField.val()))alert("An activity requires a title before it can be created."),$("#activity-title-input").addClass("invalid"),deferred.reject();else{var formData={activity:$inputField.val(),submissionType:activityType,appId:appId};API.post("courses/"+schedule.constants.COURSE_PATH+"/Activities",formData).done(function(res){res.createdPage.uiID=schedule.getNextUIID();var moduleIndex=$("#addNewActivityModal").attr("data-module");if(void 0!==moduleIndex){var activityCategoryIndex=$("#addNewActivityCategory").val();schedule.modules[moduleIndex].activityCategories[activityCategoryIndex].activities.push(res.createdPage)}else schedule.unassignedActivities.unshift(res.createdPage);schedule.initialJSON.unassignedActivities.unshift(res.createdPage),schedule.render(),deferred.resolve()}).fail(function(res){alert(res),deferred.reject()})}deferred.done(function(){schedule.updateSubmissionForm(),$("#addNewActivityModal").modal("hide"),schedule.resetAddNewActivityModal()}).fail(function(){}).always(function(){$this.removeAttr("disabled").button("reset")})}),$("#modalAddNewContentSave").click(function(){var $this=$(this);$this.attr("disabled","disabled").button("saving");var addContentType=$("#addNewContentType > li.highlight").attr("data-id"),addContentItem=function(contentType,moduleIndex,res){void 0!==moduleIndex?schedule.modules[moduleIndex].content.push(res.createdPage):schedule.unassignedContent.unshift(res.createdPage)},deferred=$.Deferred();switch(addContentType){case"page":var $inputField=$(".addNewContentDetails input[name=page]");if(""==$.trim($inputField.val()))alert("This content needs to have a title before it can be added."),$("#content-title-input").addClass("invalid"),deferred.reject();else{var formData={page:$inputField.val()};API.post("courses/"+schedule.constants.COURSE_PATH+"/Pages",formData).done(function(res){res.createdPage.uiID=schedule.getNextUIID();var moduleIndex=$("#addNewContentModal").attr("data-module");addContentItem("content",moduleIndex,res),schedule.initialJSON.unassignedContent.unshift(res.createdPage),schedule.render(),deferred.resolve()}).fail(function(res){alert(res),deferred.reject()})}break;case"file":var $inputField=$(".addNewContentDetails input[name=mediaTitle]"),$inputFileField=$(".addNewContentDetails input[name=mediaFile]");if(""==$.trim($inputField.val()))alert("A title needs to be specified before this can be added."),deferred.reject();else if(""==$.trim($inputFileField.val()))alert("Please select a file to upload."),deferred.reject();else{var formData={name:$inputField.val(),mediaFileURL:$inputFileField.val()};API.post("courses/"+schedule.constants.COURSE_PATH+"/UploadMedia",formData).done(function(res){res.createdPage.uiID=schedule.getNextUIID();var moduleIndex=$("#addNewContentModal").attr("data-module");addContentItem("file",moduleIndex,res),schedule.initialJSON.unassignedContent.unshift(res.createdPage),schedule.render(),deferred.resolve()}).fail(function(res){alert(res),deferred.reject()})}break;case"video":var $videoTitleField=$(".addNewContentDetails input[name=videoTitle]"),$videoURLField=$(".addNewContentDetails input[name=videoURL]");if(""==$.trim($videoTitleField.val()))alert("A title needs to be added for this video before it can be added."),deferred.reject();else if(""==$.trim($videoURLField.val()))alert("Please type in a valid video URL."),deferred.reject();else{var formData={videoTitle:$videoTitleField.val(),videoURL:$videoURLField.val()};API.post("courses/"+schedule.constants.COURSE_PATH+"/Videos",formData).done(function(res){res.createdPage.uiID=schedule.getNextUIID();var moduleIndex=$("#addNewContentModal").attr("data-module");addContentItem("video",moduleIndex,res),schedule.initialJSON.unassignedContent.unshift(res.createdPage),schedule.render(),deferred.resolve()}).fail(function(res){alert(res),deferred.reject()})}break;case"vzaar":var $uploadVideoForm=$("#uploadVideoForm"),title=$.trim($("#videoTitle").val()),$uploadFile=$uploadVideoForm.find("input[type=file]");$uploadFile.val()||(alert("Please select a video file to upload."),deferred.reject()),""===title&&(alert("Videos need to have a title before they can be added. Please enter a title."),deferred.reject());var coursePath=schedule.constants.COURSE_PATH;API.get("vzaar/"+coursePath+"/key",{title:title}).done(function(res){var uri="https://"+res.bucket+".s3.amazonaws.com/",$form=$("<form>").attr({enctype:"multipart/form-data",method:"post",action:uri}),formCredentials=[$("<input>").attr({type:"hidden",name:"key",value:res.key}),$("<input>").attr({type:"hidden",name:"AWSAccessKeyId",value:res.accessKeyId}),$("<input>").attr({type:"hidden",name:"acl",value:res.acl}),$("<input>").attr({type:"hidden",name:"policy",value:res.policy}),$("<input>").attr({type:"hidden",name:"success_action_status",value:201}),$("<input>").attr({type:"hidden",name:"signature",value:res.signature})];$form.append(formCredentials);var $uploadFileClone=$uploadFile.clone(!0);$uploadFile.after($uploadFileClone),$form.append($uploadFile),$form.appendTo($("body")),$form.fileupload({url:uri,dataType:"xml",fileInput:null}),$form.fileupload("add",{fileInput:$form.find("input[type=file]"),success:function(res){var resultArray=$(res).find("Key").text().split("/"),guid=resultArray.slice(-2)[0],videoTitle=resultArray.slice(-1)[0],resultObject={guid:guid,videoTitle:videoTitle,coursePath:coursePath};API.post("vzaar/"+guid+"/process",resultObject).done(function(res){var videoId=res.videoId,videoTitle=res.videoTitle;API.post("courses/"+coursePath+"/Videos",{videoTitle:videoTitle,videoId:videoId}).done(function(res){$("#videoTitle").val(""),res.createdPage.uiID=schedule.getNextUIID();var moduleIndex=$("#addNewContentModal").attr("data-module");addContentItem("video",moduleIndex,res),schedule.initialJSON.unassignedContent.unshift(res.createdPage),schedule.render(),deferred.resolve()})}).fail(function(res){alert(res),deferred.reject()})},error:function(){alert("Video upload failed."),deferred.reject()}})});break;default:deferred.reject(),alert("Select the type of content you wish to add."),$("#select-content-label").addClass("invalid"),$("#assistance-arrow").show().animate({left:"50px"},function(){$(this).animate({left:"40px"})})}deferred.done(function(){schedule.updateSubmissionForm(),$("#addNewContentModal").modal("hide"),schedule.resetAddNewContentModal()}).fail(function(){}).always(function(){$this.removeAttr("disabled").button("reset")})}),schedule.constants.VZAAR_ENABLED&&($("#submitVideoButton").hide(),$("#uploadVideoButton").hide(),$("#addVideoBox input[name=videoURL], #addVideoBox input[name=videoTitle]").hide(),$("#uploadVideoRadio").change(function(){var $this=$(this);$this.is(":checked")&&($("#addVideoForm input[name=videoTitle]").hide(),$("#addVideoForm input[name=videoURL]").hide(),$("#submitVideoButton").hide(),$("#uploadVideoButton").show());

}),$("#externalVideoRadio").change(function(){var $this=$(this);$this.is(":checked")&&($("#addVideoForm input[name=videoURL]").show(),$("#addVideoForm input[name=videoTitle]").show(),$("#submitVideoButton").show(),$("#uploadVideoButton").hide())}))},resizeModals:function(e){var schedule=e.data.schedule;if("true"!==schedule.$pageEditorModal.attr("aria-hidden")){var windowHeight=schedule.$window.height(),modalBodyHeight=.75*windowHeight;schedule.$pageEditorModal.find(".modal-body").stop().animate({height:modalBodyHeight+"px"}),$("#pageEditorIFrame").height(modalBodyHeight-39)}},getCoreActivitiesTitle:function(){return this.coreActivitiesTitle||"Activities"},getExtraActivitiesTitle:function(){return this.extraActivitiesTitle||"Further Study"},setCoreActivitiesTitle:function(title){var schedule=this;schedule.coreActivitiesTitle=title;for(var i=0,len=schedule.modules.length;len>i;i++)schedule.modules[i].activityCategories[0].title=title},setExtraActivitiesTitle:function(title){var schedule=this;schedule.extraActivitiesTitle=title;for(var i=0,len=schedule.modules.length;len>i;i++)schedule.modules[i].activityCategories[1].title=title},refreshSidebar:function(){var INCLUDE_MARGIN=!0,headerBarHeight=$("header").outerHeight(),$editScheduleArea=$("#edit-schedule"),editScheduleTop=$editScheduleArea.offset().top,editScheduleHeight=$editScheduleArea.outerHeight(INCLUDE_MARGIN),$unassignedContentArea=$("#unassignedContentArea"),unassignedContentAreaHeight=$unassignedContentArea.outerHeight(INCLUDE_MARGIN),$window=$(window),TOP_MARGIN=10,trashCanHeight=70,windowScrollTop=$window.scrollTop(),unassignedContentHeadersHeight=184,userBarHeight=46,topOptionsHeight=$("#scheduleOptions").outerHeight(INCLUDE_MARGIN),$noCohortDatesMessage=$("#noCohortDatesMessage");$noCohortDatesMessage.is(":visible")&&(topOptionsHeight+=$noCohortDatesMessage.outerHeight(INCLUDE_MARGIN));var activeAddContentBoxHeight=$("#unassignedContentArea .accordion-body.in").siblings(".addContentBox").outerHeight();$("#unassignedContentArea .accordion-inner").css("max-height",$window.height()-headerBarHeight-userBarHeight-trashCanHeight-unassignedContentHeadersHeight-activeAddContentBoxHeight-20+"px");var sidebarWidth=$unassignedContentArea[0].getBoundingClientRect().width,screenSize=getScreenSize();if("mobile"==screenSize)$unassignedContentArea.removeClass("fixed affixBottom").addClass("affixTop").css({width:""});else{var leftOffset=determineLeftOffset(),shouldSnapToBottom=windowScrollTop+headerBarHeight+userBarHeight+unassignedContentAreaHeight+TOP_MARGIN>editScheduleTop+editScheduleHeight,shouldAffix=windowScrollTop+headerBarHeight+userBarHeight+TOP_MARGIN>editScheduleTop+topOptionsHeight;if(shouldSnapToBottom){var cssPositioning={top:editScheduleHeight-topOptionsHeight-unassignedContentAreaHeight,left:0,width:""};$unassignedContentArea.removeClass("fixed affixTop").addClass("affixBottom").css(cssPositioning)}else if(shouldAffix){var cssPositioning={top:headerBarHeight+userBarHeight+TOP_MARGIN+"px",left:leftOffset,width:sidebarWidth+"px"};$unassignedContentArea.removeClass("affixTop affixBottom").addClass("fixed").css(cssPositioning)}else $unassignedContentArea.removeClass("fixed affixBottom").addClass("affixTop").css({width:""})}},highlightContentDroppables:function(ignoreUnassignedArea){$(".moduleContentList").addClass("highlightDroppable"),ignoreUnassignedArea||$("#unassignedContentArea").addClass("highlightDroppable")},highlightActivityDroppables:function(ignoreUnassignedArea){$(".moduleActivityList").addClass("highlightDroppable"),ignoreUnassignedArea||$("#unassignedContentArea").addClass("highlightDroppable")},highlightTrashCan:function(){$("#trashCan").addClass("highlightDroppable")},removeAllDroppableHighlights:function(){$(".highlightDroppable").removeClass("highlightDroppable")},hideElementsDuringDrag:function(){$(".moduleAddActivityButton, .moduleAddContentButton").addClass("visibilityHidden")},showElementsAfterDrag:function(){$(".moduleAddActivityButton, .moduleAddContentButton").removeClass("visibilityHidden")},updateDate:function(uiID,type,date){var isoDate,processedDate,schedule=this;if(!(date instanceof Date))return!1;isoDate=date.toISOString(),processedDate=Utilities.formatTimestamp(date,schedule.activityDateFormat);var data=schedule.getByUIID(uiID);if("start"==type)$.extend(data.ref,{startDate:isoDate,startDateProcessed:processedDate});else{if("end"!=type)return!1;$.extend(data.ref,{endDate:isoDate,endDateProcessed:processedDate})}return!0},setEventHandlers:function(){var schedule=this;$(".moduleContentList").sortable({placeholder:"ui-state-highlight",connectWith:"#contentArea, .moduleContentList",cursorAt:{left:50},dropOnEmpty:!0,update:function(event,ui){schedule.move(ui.item,$(this)),schedule.removeAllDroppableHighlights()},helper:"clone",scroll:!1}).on("sortstart",function(){schedule.highlightContentDroppables()}).on("sortstop",function(){schedule.removeAllDroppableHighlights()}),$(".moduleActivityList").sortable({placeholder:"ui-state-highlight",connectWith:"#contentArea, .moduleActivityList",cursorAt:{left:50},dropOnEmpty:!0,helper:"clone",scroll:!1}).on("sortupdate",function(event,ui){schedule.move(ui.item,$(this)),schedule.removeAllDroppableHighlights()}).on("sortstart",function(){schedule.highlightActivityDroppables()}).on("sortstop",function(){schedule.removeAllDroppableHighlights()}),$("#unassignedContentArea").droppable({accept:".moduleContentList li, .moduleActivityList li",drop:function(event,ui){schedule.move(ui.helper,$(this)),schedule.refreshSidebar(),schedule.removeAllDroppableHighlights()},tolerance:"pointer",over:function(event,ui){ui.helper.addClass("hoverDrop")},out:function(event,ui){ui.helper.removeClass("hoverDrop")}}),$("#pageAccordionList li, #videoAccordionList li, #mediaAccordionList li").draggable({connectToSortable:".moduleContentList",revert:"invalid",revertDuration:0,helper:function(e){var $clone=$(e.currentTarget).clone();return $clone.appendTo($("body")).addClass("hover"),$clone},zIndex:1e4}).on("dragstart",function(event){schedule.highlightContentDroppables(!0),schedule.highlightTrashCan(),schedule.hideElementsDuringDrag(),$(event.currentTarget).hide()}).on("dragstop",function(event){$(event.currentTarget).show(),schedule.removeAllDroppableHighlights(),schedule.showElementsAfterDrag()}),$("#activityAccordionList li").draggable({connectToSortable:".moduleActivityList",revert:"invalid",revertDuration:0,helper:function(e){var $clone=$(e.currentTarget).clone();return $clone.appendTo($("body")).addClass("hover"),$clone},zIndex:1e4}).on("dragstart",function(event){$(event.currentTarget).hide(),schedule.highlightActivityDroppables(!0),schedule.highlightTrashCan(),schedule.hideElementsDuringDrag()}).on("dragstop",function(event){$(event.currentTarget).show(),schedule.removeAllDroppableHighlights(),schedule.showElementsAfterDrag()}),$(".activityStartDate, .activityEndDate, .moduleStartDate, .moduleEndDate").focus(function(){$(this).blur()}),$(".activityStartDate, .activityEndDate").datetimepicker().on("changeDate hide",function(e){var $input=$(e.currentTarget);$input.val(Utilities.formatTimestamp(e.date,schedule.activityDateFormat)),$input.attr("data-value",e.date.toISOString());var uiID=$input.closest("li").attr("data-ui-id"),type="start";$input.hasClass("activityEndDate")&&(type="end"),schedule.updateDate(uiID,type,e.date),schedule.updateSubmissionForm()}),$(".moduleStartDate, .moduleEndDate").datetimepicker().on("changeDate hide",function(e){var $input=$(e.currentTarget);$input.val(Utilities.formatTimestamp(e.date,schedule.activityDateFormat)),$input.attr("data-value",e.date.toISOString());var uiID=$input.closest("li").attr("data-ui-id"),type="start";$input.hasClass("moduleEndDate")&&(type="end"),schedule.updateDate(uiID,type,e.date),schedule.updateSubmissionForm()}),$(".moduleSummary").each(function(){var summary=this,modulePath=$(this).closest(".module").attr("data-path"),editor=CKEDITOR.inline(this,$.extend({},schedule.ckeditorOptions,{path:modulePath}));editor.on("focus",function(e){schedule.changeState(schedule.states.SUMMARY_EDIT);var summary=e.listenerData.summary,$summary=$(summary);"1"==$summary.attr("data-empty")&&$summary.html("")},null,{summary:summary}),editor.on("blur",function(e){schedule.changeState(schedule.states.NORMAL);var summary=e.listenerData.summary,$summary=$(summary),htmlText=$.trim($summary.text()),$module=$summary.closest("li.module"),moduleUIID=parseInt($module.attr("data-ui-id")),moduleData=schedule.getByUIID(moduleUIID);moduleData.ref.summary=$summary.html(),""==htmlText?($summary.html(schedule.emptySummaryText),$summary.attr("data-empty","1")):$summary.attr("data-empty","0"),schedule.updateSubmissionForm()},null,{summary:summary})}),$(".moduleTitleButton").click(function(){var $this=$(this),oldModuleTitle=$this.closest(".module").attr("data-title"),moduleURL=$this.closest(".module").attr("data-url"),oldModulePath=$this.closest(".module").attr("data-path"),oldModuleUIID=$this.closest(".module").attr("data-ui-id");$("#oldModuleUIID").val(oldModuleUIID),$("#oldModuleTitle").val(oldModuleTitle),$("#oldModulePath").val(oldModulePath),$("#moduleTitleLink").attr("href",moduleURL),$("#newModuleTitle").removeAttr("value"),$("#moduleTitleModal").modal("show").on("shown",function(){$("#newModuleTitle").focus()})}),$(".moduleActivityTitle").click(function(){$("#activityCategoriesButton").trigger("click")}),$(".moduleAddContentButton").click(function(e){schedule.eventHandlers.showAddNewContentModal.call(this,e,schedule)}),$(".moduleAddActivityButton").click(function(e){schedule.eventHandlers.showAddNewActivityModal.call(this,e,schedule)}),$("#addNewContentType li").click(function(){var $this=$(this);$("#modalAddNewContentSave").show(),$("#addNewContentType li").removeClass("highlight"),$this.addClass("highlight"),$(".addNewContentDetails").hide(),$('.addNewContentDetails[data-id="'+$this.attr("data-id")+'"]').show()}),$(".pageEditLink").click(function(e){e.preventDefault();var url=$(this).attr("href"),hiddenElementUrl=Utilities.updateQueryStringParameter(url,"embeddedEdit","1");schedule.$pageEditorIFrame.attr("src",hiddenElementUrl),schedule.$pageEditorIFrame.load(function(){-1===schedule.$pageEditorIFrame.attr("src").indexOf("about:blank")&&(schedule.$pageEditorPageLink.attr("href",url).show(),schedule.$pageEditorLoadingMessage.hide(),schedule.$pageEditorIFrame.contents().find("#page-container").css("padding",0))}),schedule.$pageEditorModal.data("page",this),schedule.$pageEditorModal.modal("show").on("shown",$.proxy(schedule.resizeModals,this,{data:{schedule:schedule}}))}),$("input.progress-toggle").change(function(){var $this=$(this),$listItem=$this.closest("li"),affectsProgress=$this.is(":checked"),uiID=parseInt($listItem.attr("data-ui-id"));$listItem.attr("data-affects-progress",affectsProgress),schedule.getByUIID(uiID).ref.affectsProgress=affectsProgress,schedule.updateSubmissionForm()})}}),ScheduleEditorComponent=new JS.Class(EditorComponent,{initialize:function(scheduleEditorDataSelector){this.scheduleEditorDataSelector=scheduleEditorDataSelector},getSaveData:function(){$(window).trigger("schedulePresubmit");var scheduleEditorData=$(this.scheduleEditorDataSelector).val();return{ScheduleEditor:scheduleEditorData}}}),BadgeStyles={Shield:{parameters:["Base","Top Bend"],shape:function(param1,param2){"undefined"==typeof param1&&(param1=.5),"undefined"==typeof param2&&(param2=.5);var top=this.y+.1*param2;this.y=top,this.plot(),this.x+=.4,this.y=-.45,this.plot(this.x-.15,top);var cpx=this.x;this.y+=.7*param1,this.plot(),this.x=0,this.y=.5,this.plot(cpx,.4)},options:{stroke:.06}},"Shield Inset Corners":{parameters:["Base","Inset"],shape:function(param1,param2){"undefined"==typeof param1&&(param1=.5),"undefined"==typeof param2&&(param2=.5),this.plot(),this.x+=.35-.1*param2,this.plot(),this.x+=.05+.1*param2,this.y+=.05+.1*param2,this.plot(this.x-(.05+.1*param2),this.y);var cpx=this.x;this.y+=.5*param1,this.plot(),this.x=0,this.y=.5,this.plot(cpx,.4)},options:{stroke:.06}},"Fancy Shield":{parameters:["Base","Top Bend"],shape:function(param1,param2){"undefined"==typeof param1&&(param1=.5),"undefined"==typeof param2&&(param2=.5),this.plot(),this.x+=.3,this.y+=.05,this.plot(this.x-.1-.05*param2,this.y+.05*param2),this.x=.4,this.y+=.15,this.plot(),this.y+=.25,this.plot(this.x-.1,this.y-.15);var cpx=this.x+.1*(1.5+.8*param1),cpy=this.y+.15*(1.5+.8*param1);this.x=0,this.y=.5,this.plot(cpx,cpy)},options:{stroke:.06}},Seal:{parameters:["Number of Points","Smoothness","Pointiness"],shape:function(param1,param2,param3){"undefined"==typeof param1&&(param1=.5),"undefined"==typeof param2&&(param2=.5),"undefined"==typeof param3&&(param3=param1);for(var rad,cp1x,cp1y,cp2x,cp2y,angle=Math.atan2(this.y,this.x),divisions=Math.floor(3+7*param1),smallRad=.45-.1*(1-param3),step=TAU/2/divisions/2,curviness=.15+.3*param2,i=0;i!==2*divisions+1;++i)i%2==0?(rad=smallRad,cp1x=.5*Math.cos(angle-step*(1-curviness)),cp1y=.5*Math.sin(angle-step*(1-curviness)),cp2x=Math.cos(angle-step*curviness)*rad,cp2y=Math.sin(angle-step*curviness)*rad):(rad=.5,cp1x=Math.cos(angle-step*(1-curviness))*smallRad,cp1y=Math.sin(angle-step*(1-curviness))*smallRad,cp2x=Math.cos(angle-step*curviness)*rad,cp2y=Math.sin(angle-step*curviness)*rad),this.x=Math.cos(angle)*rad,this.y=Math.sin(angle)*rad,this.plot(cp1x,cp1y,cp2x,cp2y),angle+=step},options:{stroke:.02,detail:function(ctx,x,y,w,h,param1,param2,param3){ctx.save();var smallRad=.45-.1*(1-param3);smallRad*=h,ctx.beginPath(),ctx.arc(x,y,.9*smallRad,0,TAU),ctx.lineWidth=.005*h,ctx.stroke(),ctx.beginPath(),ctx.arc(x,y,.8*smallRad,0,TAU),ctx.lineWidth=.005*h,ctx.stroke(),ctx.beginPath(),ctx.arc(x,y,.85*smallRad,0,TAU),ctx.lineWidth=.005*h,ctx.setLineDash([2,3]),ctx.stroke(),ctx.restore()}}}},TAU=2*Math.PI;!function($){$.badgemaker={init:function(options){var ctx,$tools=$("<div>").addClass("jq-badgemaker-tools"),$canvas=$("<canvas>").addClass("jq-badgemaker-canvas"),$loader=$("<img>").attr("src",options.loaderImg).css({position:"absolute",left:options.height/2-options.loaderWidth/2+"px",top:options.height/2-options.loaderHeight/2+"px"}).hide(),img=new Image;this.css("position","relative").addClass("jq-badgemaker").width(options.width).height(options.height).append($canvas).append($loader).append($tools),$canvas.attr("width",options.height).width(options.height),$canvas.attr("height",options.height).height(options.height),$canvas.on("click",options.click),$tools.width(options.width-options.height),ctx=$canvas[0].getContext("2d"),ctx.setLineDash||(ctx.setLineDash=function(){}),this.data("canvas",$canvas[0]),this.data("ctx",ctx),this.data("image",img),this.data("tools",$tools),this.data("options",options),this.data("loader",$loader);{var style=options.style,size=options.height,posX=size/2,posY=size/2,params=options.params;options.scale}$.badgemaker.drawBadge(options,ctx,style,posX,posY,size,params);var elt=this;img.onload=function(){$loader.hide(),$.badgemaker.redraw(elt),$tools.find(".jq-badgemaker-slider").slider("option","disabled",!1),options.onLoad&&options.onLoad()},$loader.show(),img.src=options.placeholderImg,$.badgemaker.buildTools(this,style)},setImage:function(url){this.badgemaker("redraw",this,!0);var img=this.data("image");img.src=url,img.complete?this.badgemaker("redraw",this):(this.data("loader").show(),this.find(".jq-badgemaker-slider").slider("option","disabled",!0),this.data("options").onLoadStart&&this.data("options").onLoadStart())},setColors:function(lightColor,darkColor){var options=this.data("options");options.lightColor=lightColor,options.darkColor=darkColor,this.badgemaker("redraw")},setImageColor:function(color){var options=this.data("options");options.imageColor=color,this.badgemaker("redraw")},setOption:function(opt,val){var options=this.data("options");options[opt]=val},getImage:function(){return this.data("canvas").toDataURL("image/png")},redraw:function(elt,skipImage){elt||(elt=this);var options=elt.data("options"),ctx=elt.data("ctx"),img=elt.data("image"),style=options.style,size=options.height,params=options.params,imgScale=options.scale;ctx.clearRect(0,0,size,size),$.badgemaker.drawBadge(options,ctx,style,size/2,size/2,size,params),skipImage||$.badgemaker.drawImage(ctx,img,size/2,size/2,imgScale,options.imageColor),options.change&&options.change.call(elt)},buildTools:function(elt){elt||(elt=this);var options=elt.data("options"),style=options.style;if(options.showTools){var $tools=elt.data("tools");$tools.empty();var $styleMenu=$("<select>").addClass("jq-badgemaker-select"),numStyles=0;$.each(options.badgeStyles,function(title){var $opt=$("<option>").text(title);$styleMenu.append($opt),title===style&&$opt.attr("selected","selected"),numStyles++}),$styleMenu.on("change",function(){var style=$(this).find("option:selected").text();elt.data("options").style=style,$.badgemaker.redraw(elt),$.badgemaker.buildTools(elt)}),numStyles>1&&$tools.append($styleMenu);var params=options.badgeStyles[style].parameters;$.each(params,function(i,param){$tools.append($("<label>").text(param)),$tools.append($("<div>").attr("id","slider-"+i).data("index",i).slider({min:0,max:1,value:.5,step:.01,orientation:"horizontal",animate:!0,slide:function(event,ui){elt.data("options").params[$(this).data("index")]=ui.value,$.badgemaker.redraw(elt)}}).addClass("jq-badgemaker-slider"))}),$tools.append($("<label>").text("Image Size")),$tools.append($("<div>").slider({min:.25,max:.75,value:.5,step:.01,slide:function(event,ui){elt.data("options").scale=ui.value,$.badgemaker.redraw(elt)}}).addClass("jq-badgemaker-slider"))}},drawImage:function(ctx,img,posX,posY,imgScale,color){var buffer,bx;color||(color="#FFFFFF"),buffer=document.createElement("canvas"),buffer.width=img.width,buffer.height=img.height,bx=buffer.getContext("2d"),bx.fillStyle=color,bx.fillRect(0,0,buffer.width,buffer.height),bx.globalCompositeOperation="destination-atop",bx.drawImage(img,0,0),ctx.save(),ctx.globalCompositeOperation="source-atop",ctx.translate(posX,posY),ctx.scale(imgScale,imgScale),ctx.drawImage(buffer,-buffer.width/2,-buffer.height/2,buffer.width,buffer.height),ctx.restore()},drawBadge:function(options,ctx,style,posX,posY,size,params){var badgeStyle=options.badgeStyles[style],styleOptions=badgeStyle.options,lightColor=options.lightColor,darkColor=options.darkColor,shape=$.badgemaker.generateShape.apply(null,[badgeStyle].concat(params));styleOptions.stroke?(ctx.strokeStyle=lightColor,ctx.fillStyle=darkColor,size*=1-styleOptions.stroke,ctx.lineWidth=styleOptions.stroke*size):ctx.fillStyle=lightColor,$.badgemaker.drawBadgeShape(ctx,shape,posX,posY,size,size),styleOptions.stroke&&ctx.stroke(),styleOptions.detail&&(ctx.strokeStyle=lightColor,styleOptions.detail.apply(null,[ctx,posX,posY,size,size].concat(params)))},generateShape:function(badgeStyle,p1,p2,p3){var shape=[],context={x:0,y:-.5,plot:function(cx,cy,c2x,c2y){shape.push({x:this.x,y:this.y,cx:cx,cy:cy,c2x:c2x,c2y:c2y})}};badgeStyle.shape.call(context,p1,p2,p3);var nextCP,nextCP2,mirror=shape.slice(0).reverse();return $.each(mirror,function(i,point){var cx,cy,c2x,c2y;nextCP&&(cx=-nextCP.x,cy=nextCP.y),nextCP2&&(cx=-nextCP2.x,cy=nextCP2.y,c2x=-nextCP.x,c2y=nextCP.y),shape.push({x:-point.x,y:point.y,cx:cx,cy:cy,c2x:c2x,c2y:c2y}),nextCP="undefined"!=typeof point.cx?{x:point.cx,y:point.cy}:null,nextCP2="undefined"!=typeof point.c2x?{x:point.c2x,y:point.c2y}:null}),shape},drawBadgeShape:function(ctx,shape,centerX,centerY,width,height){ctx.beginPath(),$.each(shape,function(i,point){0===i?ctx.moveTo(centerX+point.x*width,centerY+point.y*height):"undefined"==typeof point.cx?ctx.lineTo(centerX+point.x*width,centerY+point.y*height):"undefined"==typeof point.c2x?ctx.quadraticCurveTo(centerX+point.cx*width,centerY+point.cy*height,centerX+point.x*width,centerY+point.y*height):ctx.bezierCurveTo(centerX+point.cx*width,centerY+point.cy*height,centerX+point.c2x*width,centerY+point.c2y*height,centerX+point.x*width,centerY+point.y*height)}),ctx.closePath(),ctx.fill()}},$.fn.badgemaker=function(){var action,args,options={loaderImg:"loader.gif",placeholderImg:"placeholder.png",loaderWidth:48,loaderHeight:64,width:512,height:256,lightColor:"#ccccff",darkColor:"#8888ff",onLoadStart:function(){},onLoad:function(){},click:function(){},style:"Shield",badgeStyles:BadgeStyles,params:[.5,.5,.5],scale:.5,showTools:!0};if("string"==typeof arguments[0]){action=arguments[0],args=Array.prototype.slice.call(arguments,1);var returnVal=null;if(this.each(function(i,elt){returnVal=$.badgemaker[action].apply($(elt),args)}),returnVal)return returnVal}else"object"==typeof arguments[0]&&(options=$.extend(options,arguments[0]),this.each(function(i,elt){$.badgemaker.init.call($(elt),options)}));return this}}(jQuery);var ImageRepo=["Application/Add-New.png","Application/Adobe-Acrobat.png","Application/Adobe-Dreamweaver.png","Application/Adobe-Illustrator.png","Application/Adobe-Photoshop.png","Application/Agreement-01.png","Application/Agreement-02.png","Application/Align-Center.png","Application/Align-Horizontal-Center.png","Application/Align-Justify.png","Application/Align-Left.png","Application/Align-Right.png","Application/Application-01.png","Application/Arrow-Expand.png","Application/Arrow.png","Application/Arrowhead-01.png","Application/Arrowhead-Down-01.png","Application/Arrowhead-Down.png","Application/Arrowhead-Left-01.png","Application/Arrowhead-Left.png","Application/Arrowhead-Right-01.png","Application/Arrowhead-Right.png","Application/Arrowhead-Top.png","Application/Arrowhead-Up.png","Application/Attach-Image.png","Application/Basket.png","Application/Blog.png","Application/Book-Close.png","Application/Book-Open.png","Application/Bookmark-Add.png","Application/Bookmark-Delete.png","Application/Bookmark-Down.png","Application/Bookmark-New.png","Application/Bookmark-Settings.png","Application/Bookmark-Up.png","Application/Braces-01.png","Application/Brackets-Square.png","Application/Bring-To-Front.png","Application/Bullets.png","Application/CCleaner.png","Application/CD-Music.png","Application/CD-New.png","Application/CD-Pause.png","Application/CD-Play.png","Application/CD-Software.png","Application/CD-Stop.png","Application/CD-Valid.png","Application/CD-View.png","Application/CD-Warning.png","Application/Certificate-01.png","Application/Certificate-02.png","Application/Check.png","Application/Clipboard-Next-Down.png","Application/Clipboard-Next.png","Application/Clipboard.png","Application/Cloud.png","Application/Column-Selection.png","Application/Command-Paste.png","Application/Command-Redo.png","Application/Command-Refresh-01.png","Application/Command-Refresh.png","Application/Command-Reset.png","Application/Command-Undo.png","Application/Computer-Desktop.png","Application/Conference-Call-01.png","Application/Conference-Call-02.png","Application/Conference-Call-03.png","Application/Conference-Call.png","Application/Connectivity-Error.png","Application/Customize-01.png","Application/Customize-02.png","Application/Data-Collapse.png","Application/Data-Defragmentation.png","Application/Data-Edit.png","Application/Data-Erase.png","Application/Data-Exchange.png","Application/Data-Export.png","Application/Data-Files.png","Application/Data-Histogram.png","Application/Data-Import.png","Application/Data-Information.png","Application/Data-Merge.png","Application/Data-Share.png","Application/Data-Split-01.png","Application/Data-Split.png","Application/Data-Synchronize.png","Application/Data-Text.png","Application/Debug.png","Application/Decrease-Indent.png","Application/Despeckle-01.png","Application/Device-Headphone.png","Application/Device-Radio.png","Application/Device-Tablet.png","Application/Dialog-Box-About.png","Application/Disc-Error.png","Application/Disc-Information.png","Application/Display-Brightness.png","Application/Display-Contrast.png","Application/Document-01.png","Application/Document-02.png","Application/Document-Add-01.png","Application/Document-Add-02.png","Application/Document-Check.png","Application/Document-Delete-01.png","Application/Document-Delete-02.png","Application/Document-Download-01.png","Application/Document-Download-02.png","Application/Document-Edit.png","Application/Document-Error-01.png","Application/Document-Error.png","Application/Document-Exchange-01.png","Application/Document-Exchange-02.png","Application/Document-Find-02.png","Application/Document-Find.png","Application/Document-Music-01.png","Application/Document-Music-02.png","Application/Document-Music-03.png","Application/Document-New.png","Application/Document-Settings-01.png","Application/Document-Settings.png","Application/Document-Share-01.png","Application/Document-Share.png","Application/Document-Warning-01.png","Application/Document-Warning-02.png","Application/Document-Zoom-In-01.png","Application/Document-Zoom-In-02.png","Application/Document-Zoom-In-03.png","Application/Document-Zoom-Out-01.png","Application/Document-Zoom-Out-02.png","Application/Document-Zoom-Out-03.png","Application/Documents-01.png","Application/Documents-02.png","Application/Documents-Add-01.png","Application/Documents-Add-02.png","Application/Documents-Close-01.png","Application/Documents-Close-02.png","Application/Documents-Delete-01.png","Application/Documents-Delete-02.png","Application/Door-Closed.png","Application/Download-Error.png","Application/Ellipse-Selection.png","Application/Expand-01.png","Application/Expand-02.png","Application/Export-RTF.png","Application/Export-Word.png","Application/Eye-Dropper.png","Application/File-Formar-SWF.png","Application/File-Format-BitMap.png","Application/File-Format-EPS.png","Application/File-Format-GIFF.png","Application/File-Format-Icon.png","Application/File-Format-JPEG.png","Application/File-Format-Mp3.png","Application/File-Format-PNG.png","Application/File-Format-PPT.png","Application/File-Format-TGA.png","Application/File-Format-TIFF.png","Application/File-Format-Wave.png","Application/File-Format-ZIP.png","Application/File-Torrent.png","Application/Find-Previous.png","Application/Find-Replace-01.png","Application/Find-Replace.png","Application/Fit-To-Size.png","Application/Flash-Player.png","Application/Folder-Add-01.png","Application/Folder-Add.png","Application/Folder-Connect.png","Application/Folder-Cube-01.png","Application/Folder-Cube.png","Application/Folder-Delete-01.png","Application/Folder-Delete.png","Application/Folder-Edit-01.png","Application/Folder-Edit.png","Application/Folder-Find-01.png","Application/Folder-Information.png","Application/Folder-Movie-01.png","Application/Folder-Movie-02.png","Application/Folder-Movie-03.png","Application/Folder-Movie.png","Application/Folder-Music-01.png","Application/Folder-Music-02.png","Application/Folder-Music.png","Application/Folder-New-01.png","Application/Folder-New.png","Application/Folder-Picture.png","Application/Folder-Share-01.png","Application/Folder-Zoom-In.png","Application/Folder-Zoom-Out-01.png","Application/Format-Bullets-01.png","Application/Format-Bullets-02.png","Application/Format-Bullets-03.png","Application/Format-Bullets.png","Application/Format-Numbering-01.png","Application/Format-Numbering.png","Application/Free-Hand-Selection.png","Application/Free-Transform.png","Application/Full-Screen-Close.png","Application/Full-Screen-Collapse.png","Application/Full-Screen-Expand.png","Application/Full-Screen.png","Application/Gantt.png","Application/Garbage-Closed.png","Application/Garbage-Full.png","Application/Garbage-Open.png","Application/Globe.png","Application/Graphics-Card.png","Application/Group-Add.png","Application/Group-Cluster.png","Application/Group-Delete.png","Application/Group-Modify.png","Application/Hook.png","Application/Horizontal-Align-Left.png","Application/Horizontal-Align-Right.png","Application/Increase-Indent.png","Application/Installation-01.png","Application/Installation-02.png","Application/Installation-03.png","Application/Inventory.png","Application/Key-Access-01.png","Application/Key-Access.png","Application/Key-Hash.png","Application/Lambda-01.png","Application/Layers-01.png","Application/Layers.png","Application/Login-01.png","Application/Login-02.png","Application/Login-Arrow.png","Application/Login-Door.png","Application/Media-Back.png","Application/Media-End.png","Application/Media-Fast-Forward.png","Application/Media-Pause.png","Application/Media-Play-01.png","Application/Media-Play-02.png","Application/Media-Play.png","Application/Media-Player-VLC.png","Application/Media-Player-Winamp.png","Application/Media-Start.png","Application/Media-Stop.png","Application/Message-Mail.png","Application/Message-Voice-Mail.png","Application/Message-Warning.png","Application/Minus.png","Application/Mobile-Phone-Message.png","Application/Mobile-Phone-Music.png","Application/Money-Coin-01.png","Application/Money-Coin.png","Application/Money-Credit-Card.png","Application/Money-Gold.png","Application/Mouse-Drag.png","Application/Mouse-Wireless.png","Application/Mug.png","Application/Navigation-Down-Right.png","Application/Navigation-Down.png","Application/Navigation-Right.png","Application/Navigation-Up-Left.png","Application/Network-01.png","Application/Network-Drives.png","Application/Network-Signal.png","Application/No-Repeat-01.png","Application/No-Repeat-02.png","Application/Numbering .png","Application/Orientation-Landscape.png","Application/Orientation-Portrait.png","Application/Outlined-Triangular-Left-Arrow.png","Application/Paragraph-Indent-Decrease-01.png","Application/Paragraph-Indent-Decrease.png","Application/Paragraph-Indent-Increase-01.png","Application/Paragraph-Indent-Increase.png","Application/Parenthesis.png","Application/Password-Text-01.png","Application/Password-Text.png","Application/Pencil.png","Application/Play-Once.png","Application/Plus.png","Application/Pointer.png","Application/Power-Off.png","Application/Product-Box-With-Disc.png","Application/Product-Box.png","Application/Publish.png","Application/Punctuation-Semicolon.png","Application/Quotation-Marks.png","Application/RSS-Feeds.png","Application/Radio-Access.png","Application/Rectangle-Selection.png","Application/Repeat-All.png","Application/Restart.png","Application/Rope-Lasso.png","Application/Rotation.png","Application/Row-Selection.png","Application/Scale-To-Fit.png","Application/Search-Find.png","Application/Send-To-Back.png","Application/Shape-Cube.png","Application/Share-01.png","Application/Share-02.png","Application/Single-Curly-Quotation-Marks.png","Application/Skew.png","Application/Slash.png","Application/Software-SAP.png","Application/Sort-Ascending.png","Application/Sort-Descending.png","Application/Submit-01.png","Application/Submit-02.png","Application/Tab-History.png","Application/Table.png","Application/Task-01.png","Application/Task-02.png","Application/Task-03.png","Application/Team-Viewer.png","Application/Text-Bold.png","Application/Text-Braille.png","Application/Text-Edit.png","Application/Text-Highlight.png","Application/Text-Italic.png","Application/Text-Mark.png","Application/Text-Normal.png","Application/Text-Protected.png","Application/Text-Read.png","Application/Text-Underline-01.png","Application/Text-Underline.png","Application/Underline.png","Application/User-Add.png","Application/User-Delete.png","Application/User-Login.png","Application/User-Modify.png","Application/User-Profile.png","Application/Vertical-Align-Bottom.png","Application/Vertical-Align-Center.png","Application/Vertical-Align-Top.png","Application/View-Details-01.png","Application/View-Details.png","Application/View-Incident.png","Application/View-List.png","Application/View-Medium-Icons-01.png","Application/View-Medium-Icons.png","Application/View-Small-Icons-01.png","Application/View-Small-Icons.png","Application/View-Tiles.png","Application/Virtual-Apps.png","Application/Visual-Studio-2011.png","Application/Visual-Studio-2012.png","Application/Visual-Studio.png","Application/Volume-Down.png","Application/Volume-Mute.png","Application/Volume-Speaker-01.png","Application/Volume-Speaker-02.png","Application/Volume-Speaker.png","Application/Volume-Up.png","Application/Warning-Shield.png","Application/Wifi.png","Application/Window-Delete.png","Application/Window-Earth.png","Application/Window-Horizontal-Split.png","Application/Window-Information.png","Application/Window-New-01.png","Application/Window-New-Open.png","Application/Window-New.png","Application/Windows-8-Login.png","Application/Windows-Environment.png","Application/Windows.png","Banking/ATM.png","Banking/Account-Payable.png","Banking/Accounts-Book.png","Banking/Accounts-Receivable.png","Banking/Afghan-Afghani.png","Banking/Agricultural-Loan.png","Banking/Albanian-Lek.png","Banking/Albanian-Qindarka.png","Banking/Algerian-Dinar.png","Banking/Angolan-Kwanza.png","Banking/Aruban-Florin.png","Banking/Australian-Dollar.png","Banking/Bahamian-Dollar.png","Banking/Bahraini-Dinar.png","Banking/Bangladeshi-Taka.png","Banking/Bank.png","Banking/Barbadian-Dollar.png","Banking/Belarusian-Ruble.png","Banking/Belize-Dollar.png","Banking/Bermudian-Dollar.png","Banking/Bhutanese-Chetrum.png","Banking/Bhutanese-Ngultrum.png","Banking/Bike-Loan.png","Banking/Bosnian-and-Herzegovina-Convertible-Mark.png","Banking/Botswana-Pula.png","Banking/Brazilian-Real.png","Banking/British-Pennies.png","Banking/British-Pounds.png","Banking/Brunei-Dollar.png","Banking/Bulgarian-Lev.png","Banking/Burundian-Franc.png","Banking/Calculator.png","Banking/Cambodian-Riel.png","Banking/Canadian-Dollar.png","Banking/Cape-Verdean-Escudo.png","Banking/Car-Loan.png","Banking/Cash.png","Banking/Cayman-Islands-Dollar.png","Banking/Cent.png","Banking/Central African-CFA Franc.png","Banking/Cheque.png","Banking/Chilean-Peso.png","Banking/Chinese-Renminbi Yuan.png","Banking/Colombian-Peso.png","Banking/Comorian-Franc.png","Banking/Complaint-Box.png","Banking/Costa-Rican-Colon.png","Banking/Counting-Machine.png","Banking/Croatian-Kuna-01.png","Banking/Croatian-Kuna-02.png","Banking/Cuban-Convertible Peso.png","Banking/Cuban-Peso.png","Banking/Currency-Sign.png","Banking/Customer.png","Banking/Czech-Haler.png","Banking/Czech-Koruna.png","Banking/Debit-Card.png","Banking/Dollar.png","Banking/Donate .png","Banking/Employee.png","Banking/Euro.png","Banking/European-Euro.png","Banking/Fund.png","Banking/Ghana-Cedi.png","Banking/Gold.png","Banking/Home-Loan.png","Banking/Hong Kong-Dollar.png","Banking/Jewel-Loan.png","Banking/Locker.png","Banking/Master-Card.png","Banking/Money-Bag.png","Banking/Money-Deposit.png","Banking/Money-Transfer.png","Banking/Money.png","Banking/Payment-01.png","Banking/Payment-02.png","Banking/Payments.png","Banking/Pending-Payment.png","Banking/Phone.png","Banking/Safety-Box-01.png","Banking/Safety-Box-02.png","Banking/Scanner.png","Banking/Settled credit record.png","Banking/Stock-Exchange-01.png","Banking/Stock-Exchange.png","Banking/Telephone.png","Banking/Transaction-Fee.png","Banking/United States-Dollar.png","Brand Identity/500 Px 01.png","Brand Identity/500 Px.png","Brand Identity/ABNAmro.png","Brand Identity/AIM.png","Brand Identity/AMD.png","Brand Identity/AOL Mail.png","Brand Identity/Adidas-01.png","Brand Identity/Adidas-02.png","Brand Identity/AirCanada.png","Brand Identity/Allvoices.png","Brand Identity/Amazon.png","Brand Identity/American Express.png","Brand Identity/Android.png","Brand Identity/Apple.png","Brand Identity/Arto.png","Brand Identity/Ask.com.png","Brand Identity/Audi-01.png","Brand Identity/Audi-02.png","Brand Identity/BMW.png","Brand Identity/Backflip.png","Brand Identity/Bebo.png","Brand Identity/BipSonomy.png","Brand Identity/Bitty Browser.png","Brand Identity/Blackberry.png","Brand Identity/Blinklist.png","Brand Identity/Blogger Post.png","Brand Identity/Blogger.png","Brand Identity/Blogmarks.png","Brand Identity/Bookmarks.fr.png","Brand Identity/Box.net.png","Brand Identity/Bridgestone.png","Brand Identity/Brightkite.png","Brand Identity/BuddyMarks.png","Brand Identity/Burger King-01.png","Brand Identity/Burger King-02.png","Brand Identity/Burger King-03.png","Brand Identity/CN.png","Brand Identity/CNBC.png","Brand Identity/Canon.png","Brand Identity/Care2 News.png","Brand Identity/Castrol.png","Brand Identity/Cheetos.png","Brand Identity/Chevroletlogo.png","Brand Identity/Chrome.png","Brand Identity/CitiBank.png","Brand Identity/CocaCola.png","Brand Identity/Connotea.png","Brand Identity/Crocs.png","Brand Identity/DZone.png","Brand Identity/Delicious.png","Brand Identity/Dell.png","Brand Identity/Design Float.png","Brand Identity/Designmoo.png","Brand Identity/DeviantART.png","Brand Identity/Digg-01.png","Brand Identity/Digg-02.png","Brand Identity/Diigo.png","Brand Identity/Discover Network.png","Brand Identity/Disney.png","Brand Identity/Dominos Pizza.png","Brand Identity/Dove-01.png","Brand Identity/Dove-02.png","Brand Identity/Ducati.png","Brand Identity/Dynamics CRM.png","Brand Identity/Ebay.png","Brand Identity/Emirates.png","Brand Identity/Evernote.png","Brand Identity/Expression.png","Brand Identity/F5 Networks .png","Brand Identity/FIAT.png","Brand Identity/Facebook.png","Brand Identity/Faves.png","Brand Identity/Ferrari.png","Brand Identity/Ferrari1.png","Brand Identity/Firefox.png","Brand Identity/Flickr.png","Brand Identity/Flickr2.png","Brand Identity/Folkd.png","Brand Identity/Ford.png","Brand Identity/Fox news.png","Brand Identity/Foxiewire.png","Brand Identity/FriendFeed.png","Brand Identity/Friendster.png","Brand Identity/GMail.png","Brand Identity/Gabbr.png","Brand Identity/Gamespot.png","Brand Identity/Goodle Checkout.png","Brand Identity/Google Buzz.png","Brand Identity/Google Chrome.png","Brand Identity/Google Plus.png","Brand Identity/Google Search.png","Brand Identity/Google-Talk.png","Brand Identity/Google.png","Brand Identity/HBO.png","Brand Identity/HP.png","Brand Identity/HSBC.png","Brand Identity/HTC.png","Brand Identity/Hero.png","Brand Identity/HindustanUnilever.png","Brand Identity/Honda-01.png","Brand Identity/Honda-02.png","Brand Identity/HondaBike.png","Brand Identity/Hotmail.png","Brand Identity/Hyundai.png","Brand Identity/HyundaiLogo.png","Brand Identity/IATA.png","Brand Identity/IBM lotus notes.png","Brand Identity/ICQ.png","Brand Identity/ILike.png","Brand Identity/Icon 19.png","Brand Identity/Icon 20.png","Brand Identity/Intel.png","Brand Identity/Internet Explorer.png","Brand Identity/Jaguar.png","Brand Identity/Jump Tags.png","Brand Identity/JustDoIt.png","Brand Identity/Kasper Sky.png","Brand Identity/Kellogg's .png","Brand Identity/Kledy.png","Brand Identity/LG.png","Brand Identity/Lamborgini.png","Brand Identity/Last.fm.png","Brand Identity/Lenovo.png","Brand Identity/Levis.png","Brand Identity/Linkatopia.png","Brand Identity/LinkedIn.png","Brand Identity/Linux.png","Brand Identity/LiveJournal.png","Brand Identity/Logo-JQuery-01.png","Brand Identity/Logo-JQuery.png","Brand Identity/MRF.png","Brand Identity/Mahindra.png","Brand Identity/Maple.png","Brand Identity/Maruthi.png","Brand Identity/Meneame.png","Brand Identity/Mercedes-Benz.png","Brand Identity/Metro Studio.png","Brand Identity/Microsoft Lync.png","Brand Identity/Microsoft PowerShell.png","Brand Identity/MindBodyGreen.png","Brand Identity/Mister-Wong.png","Brand Identity/Mitsubishi.png","Brand Identity/Mobile Me.png","Brand Identity/Motorolo.png","Brand Identity/Msn.png","Brand Identity/Mtv.png","Brand Identity/Myspace.png","Brand Identity/NBA.png","Brand Identity/National Geographic Channel .png","Brand Identity/Nestle .png","Brand Identity/Netlog.png","Brand Identity/News 4.png","Brand Identity/NewsVine.png","Brand Identity/Nike.png","Brand Identity/Nokia.png","Brand Identity/NowPublic.png","Brand Identity/Opel.png","Brand Identity/Opera.png","Brand Identity/Orkut.png","Brand Identity/Panasonic.png","Brand Identity/Paypal.png","Brand Identity/Pepsi-02.png","Brand Identity/Pepsi.png","Brand Identity/PhoneFavs.png","Brand Identity/Picasa.png","Brand Identity/Pinterest.png","Brand Identity/Pizza hut.png","Brand Identity/Plaxo Pulse.png","Brand Identity/Playboy.png","Brand Identity/Posterous.png","Brand Identity/Propeller.png","Brand Identity/Protopage.png","Brand Identity/Puma-01.png","Brand Identity/Puma-02.png","Brand Identity/Pusha.png","Brand Identity/RBS.png","Brand Identity/RSS.png","Brand Identity/Read It Later.png","Brand Identity/Readernaut.png","Brand Identity/Red Bull .png","Brand Identity/Reddit.png","Brand Identity/Reebok-01.png","Brand Identity/Reebok-02.png","Brand Identity/Renault.png","Brand Identity/Samsung.png","Brand Identity/Scribd.png","Brand Identity/Segnalo.png","Brand Identity/SharePoint.png","Brand Identity/Shoutwire.png","Brand Identity/Skoda.png","Brand Identity/Skype-01.png","Brand Identity/Skype-02.png","Brand Identity/Sony.png","Brand Identity/Squidoo.png","Brand Identity/StumbleUpon.png","Brand Identity/Stumpedia.png","Brand Identity/Subway.png","Brand Identity/Suzuki.png","Brand Identity/Syncfusion.png","Brand Identity/TATA-01.png","Brand Identity/TATA-02.png","Brand Identity/Tagza.png","Brand Identity/Talk.png","Brand Identity/Technorati.png","Brand Identity/Technotizie.png","Brand Identity/Toshiba.png","Brand Identity/Toyota-01.png","Brand Identity/Toyota-02.png","Brand Identity/Triumph.png","Brand Identity/Twitter Bird.png","Brand Identity/Twitter-Bird.png","Brand Identity/Twitter.png","Brand Identity/Ubuntu.png","Brand Identity/Vaio.png","Brand Identity/Viadeo.png","Brand Identity/Viddler.png","Brand Identity/Vimeo.png","Brand Identity/Visa.png","Brand Identity/Vodafone.png","Brand Identity/Volkswagen.png","Brand Identity/Walt Disney.png","Brand Identity/Webnews.png","Brand Identity/Windows 8.png","Brand Identity/WordPress.png","Brand Identity/Yahoo Buzz.png","Brand Identity/Yahoo-01.png","Brand Identity/Yammer.png","Brand Identity/Yelp.png","Brand Identity/Yonex.png","Brand Identity/YouTube.png","Brand Identity/YouTube1.png","Data/Book-Add.png","Data/Book-Delete.png","Data/Book-Settings.png","Data/Briefcase-Standard.png","Data/Business-Man-01.png","Data/Business-Man-Add-01.png","Data/Business-Man-Add-02.png","Data/Business-Man-Add.png","Data/Business-Man-Delete 02.png","Data/Business-Man-Delete-01.png","Data/Business-Man-Delete.png","Data/Business-Man-Find 02.png","Data/Business-Man-Find.png","Data/Business-Man-Search.png","Data/Business-Man-Settings 02.png","Data/Business-Man-Settings-01.png","Data/Business-Man-Settings.png","Data/Business-Man.png","Data/Business-Man02.png","Data/Calendar-Date.png","Data/Data-Access-Restricted.png","Data/Data-Add.png","Data/Data-Certificate.png","Data/Data-Connect.png","Data/Data-Copy.png","Data/Data-Delete.png","Data/Data-Disk.png","Data/Data-Down.png","Data/Data-Edit.png","Data/Data-Error.png","Data/Data-Find.png","Data/Data-Information.png","Data/Data-Previous.png","Data/Data-Refresh.png","Data/Data-Replace.png","Data/Data-Settings.png","Data/Data-Warning.png","Data/Fax-Machine.png","Data/Filter-Add.png","Data/Filter-Ascending.png","Data/Filter-Delete.png","Data/Filter-Descending.png","Data/Filter-Edit.png","Data/Filter-New.png","Data/Filter-Settings.png","Data/Filter-Standard.png","Data/Message-Add.png","Data/Message-Delete.png","Data/Message-Edit.png","Data/Message-Information.png","Data/Messages-Information-01.png","Data/Messages-Information.png","Data/Note-Information.png","Data/Note-Memo-01.png","Data/Note-Memo.png","Data/Sort-Ascending-01.png","Data/Sort-Ascending.png","Data/Sort-Descending-01.png","Data/Sort-Descending.png","Education/Alpha.png","Education/Award-01.png","Education/Bag-Laptop.png","Education/Bag-School.png","Education/Black-Board.png","Education/Boy-01.png","Education/Branch-Engineering.png","Education/Calculation.png","Education/Certificate.png","Education/College-01.png","Education/Conference-Podium.png","Education/Conference-Speaker.png","Education/DNA-01.png","Education/Delta.png","Education/Device-Bell.png","Education/Device-Calculator.png","Education/Device-Laptop.png","Education/Device-Touch-Screen.png","Education/Division.png","Education/Epsilon.png","Education/Gamma.png","Education/Girl.png","Education/Graduate-01.png","Education/Graduate-02.png","Education/Graduate-Cap-01.png","Education/Graduate-Cap.png","Education/Graduate-Hat.png","Education/Gradute-Degree.png","Education/Identity-Card.png","Education/Instrument-Erlenmeyer flask.png","Education/Instrument-Microscope.png","Education/Instrument-Round-Bottom-Flask.png","Education/Instrument-Scissors.png","Education/Instrument-Telescope.png","Education/Instrument-Test-Tube.png","Education/Lambda.png","Education/Library-Books.png","Education/Locker-01.png","Education/Mathematics.png","Education/Mu.png","Education/Nodes.png","Education/Projector-Screen.png","Education/Puzzles.png","Education/School-01.png","Education/Signature-01.png","Education/Spaceship-01.png","Education/Square Root.png","Education/Stationery-01.png","Education/Stationery-02.png","Education/Stationery-Pen.png","Education/Student-Laptop.png","Education/Student-Read-01.png","Education/Student-Read-02.png","Education/Student-Read-03.png","Education/Student-Read-04.png","Education/Student.png","Education/Transport-School-Bus.png","Education/Video-Conference.png","Education/Zeta.png","Election/Banner.png","Election/Billboard.png","Election/Donkey.png","Election/Eagle.png","Election/Election-Campaign.png","Election/Election-Result.png","Election/Elephant.png","Election/Mike.png","Election/News-Broadcast.png","Election/News.png","Election/Polling-Box.png","Election/Polling-Finger.png","Election/Speaker.png","Election/Thumbs-Down.png","Election/Thumbs-Up.png","Election/United States-Capitol.png","Election/Vote.png","Election/White House.png","Emotions/Angel.png","Emotions/Angry.png","Emotions/Cheeky.png","Emotions/Confused.png","Emotions/Cool.png","Emotions/Cry.png","Emotions/Devil.png","Emotions/Kiss.png","Emotions/Laugh.png","Emotions/Love.png","Emotions/Sad.png","Emotions/Sleepy.png","Emotions/Smile.png","Emotions/Speechless.png","Emotions/Surprised.png","Emotions/Wink.png","Emotions/Worried.png","Food/Bean-01.png","Food/Beverage-Alcohol.png","Food/Beverage-Beer-01.png","Food/Beverage-Beer-02.png","Food/Beverage-Cocktail-01.png","Food/Beverage-Cocktail-02.png","Food/Beverage-Coffee-01.png","Food/Beverage-Coffee-02.png","Food/Beverage-Juice-01.png","Food/Beverage-Juice-02.png","Food/Beverage-Juice-03.png","Food/Beverage-Milk-01.png","Food/Beverage-Milk-02.png","Food/Beverage-Milk-Shake.png","Food/Beverage-Tea.png","Food/Beverage-Wine.png","Food/Bread-01.png","Food/Cake-01.png","Food/Cake-02.png","Food/Cake-Cookie.png","Food/Cake-Slice-01.png","Food/Candy-Lollipop.png","Food/Cereal-Corn-01.png","Food/Cereal-Corn-02.png","Food/Cereal-Wheat.png","Food/Cheese-01.png","Food/Cheese-02.png","Food/Chicken-01.png","Food/Chicken-02.png","Food/Chicken-Egg.png","Food/Chocolate-01.png","Food/Chocolate-02.png","Food/Chocolate-03.png","Food/Chocolate-04.png","Food/Chocolate-05.png","Food/Chocolate-06.png","Food/Coffee-Bean.png","Food/Cup-Cake.png","Food/Cutlery-Fork-Knife.png","Food/Fruit-Apple-02.png","Food/Fruit-Apple.png","Food/Fruit-Banana-01.png","Food/Fruit-Banana-02.png","Food/Fruit-Cherry.png","Food/Fruit-Grapes.png","Food/Fruit-Lemon.png","Food/Fruit-Orange-01.png","Food/Fruit-Orange-02.png","Food/Fruit-Orange-03.png","Food/Fruit-Strawberry.png","Food/Fruit-Watermelon.png","Food/Ice-Cream-01.png","Food/Ice-Cream-02.png","Food/Ice-Cream-03.png","Food/Meat-Chicken-Kebab.png","Food/Milk-Bottle.png","Food/Noodles-01.png","Food/Noodles-02.png","Food/Pizza-01.png","Food/Pizza-02.png","Food/Seafood-Fish.png","Food/Seafood-Shrimp.png","Food/Snack-Burger.png","Food/Snack-Doughnut.png","Food/Snack-French-Fries.png","Food/Soup-01.png","Food/Spices-Salt-Pepper.png","Food/Strawberry1.png","Food/Tea-Bag.png","Food/Vegetable-Brinjal.png","Food/Vegetable-Cabbage.png","Food/Vegetable-Capsicum.png","Food/Vegetable-Carrot.png","Food/Vegetable-Chilly.png","Food/Vegetable-Onion.png","Food/Vegetable-Pumpkin.png","Food/Vegetable-Radish.png","Food/Vegetable-Tomato-01.png","Food/Vegetable-Tomato-02.png","Food/Water-Drop.png","Gadgets/Bread-Toaster.png","Gadgets/Briefcase.png","Gadgets/CD-01.png","Gadgets/CD-02.png","Gadgets/Camera-01.png","Gadgets/Camera-02.png","Gadgets/Dish-Antenna.png","Gadgets/Disk-HDD.png","Gadgets/Fax.png","Gadgets/Floppy-Disk.png","Gadgets/Handycam-01.png","Gadgets/Headphone-01.png","Gadgets/Headphone-02.png","Gadgets/Headphone-Mike.png","Gadgets/Headphone-Stereo.png","Gadgets/IPad.png","Gadgets/IPod.png","Gadgets/Interactive-Table.png","Gadgets/Joystick.png","Gadgets/Keyboard.png","Gadgets/Kiosk.png","Gadgets/Laptop-01.png","Gadgets/Laptop-02.png","Gadgets/Light-Bulb.png","Gadgets/Loud Speaker-02.png","Gadgets/Loud-Speaker.png","Gadgets/Memory-Card.png","Gadgets/Memory-Stick.png","Gadgets/Microwave-Oven.png","Gadgets/Mixer-Grinder.png","Gadgets/Mobile-Phone.png","Gadgets/Modem-Wireless.png","Gadgets/Monitor.png","Gadgets/Mouse.png","Gadgets/Night-Lamp.png","Gadgets/PBX.png","Gadgets/Plug-01.png","Gadgets/Plug-02.png","Gadgets/Printer.png","Gadgets/Projector.png","Gadgets/Refrigerator-01.png","Gadgets/Remote-Control.png","Gadgets/Satellite.png","Gadgets/Speaker-01.png","Gadgets/Table-Fan.png","Gadgets/Table-Lamp.png","Gadgets/Tablet.png","Gadgets/Tape-Recorder.png","Gadgets/Tools-01.png","Gadgets/Tools-02.png","Gadgets/Touch.png","Gadgets/Tv-Remote.png","Gadgets/Wacom-Tablet.png","Gadgets/Washing-Machine.png","Gadgets/Webcam.png","Gadgets/Windows-Phone.png","Landmark/Big Ben.png","Landmark/Building-Add.png","Landmark/Building-Close.png","Landmark/Building-Delete.png","Landmark/Christ the Redeemer.png","Landmark/Colosseum Of Rome.png","Landmark/Eiffel Tower.png","Landmark/Great .png","Landmark/Kremlin Palace.png","Landmark/Leaning Tower Of Pisa.png","Landmark/London Bridge.png","Landmark/Office-01.png","Landmark/Office-02.png","Landmark/Parthenon.png","Landmark/Pyramid.png","Landmark/Statue Of Liberty.png","Landmark/Taj Mahal.png","Landmark/University.png","Medical/Ambulance.png","Medical/Appointment.png","Medical/Band-Aid.png","Medical/Blood.png","Medical/Caduceus.png","Medical/Dental.png","Medical/Doctor-Nurse.png","Medical/Doctor-Surgeon.png","Medical/Doctor.png","Medical/Dropper.png","Medical/Eye-Hospital.png","Medical/First-Aid-Kit-01.png","Medical/First-Aid-Kit-02.png","Medical/Heart-ECG.png","Medical/Heart.png","Medical/Hospital-Lab.png","Medical/Hospital.png","Medical/Instrument-Microscope.png","Medical/Instrument-Thermometer.png","Medical/Insurance-Bill.png","Medical/Medicine.png","Medical/Pill.png","Medical/Stethoscope-01.png","Medical/Stethoscope-02.png","Medical/Stethoscope-03.png","Medical/Stethoscope-04.png","Medical/Syringe-01.png","Medical/Syringe-02.png","Medical/Wheelchair.png","Miscellaneous/24-7.png","Miscellaneous/Accessibility.png","Miscellaneous/Aeroplane.png","Miscellaneous/Aids.png","Miscellaneous/Alarm-Clock.png","Miscellaneous/Anchor.png","Miscellaneous/Angel.png","Miscellaneous/Apple core .png","Miscellaneous/Armor.png","Miscellaneous/Astrologer.png","Miscellaneous/Axe.png","Miscellaneous/Baby.png","Miscellaneous/Band-Aid.png","Miscellaneous/Bar.png","Miscellaneous/Barrier-01.png","Miscellaneous/Barrier-02.png","Miscellaneous/Bass-Clef.png","Miscellaneous/Bat-Man-01.png","Miscellaneous/Bat-Man.png","Miscellaneous/Battery-Charging.png","Miscellaneous/Battery.png","Miscellaneous/Beamed-Notes.png","Miscellaneous/Bed-01.png","Miscellaneous/Bed-02.png","Miscellaneous/Bell.png","Miscellaneous/Binocular.png","Miscellaneous/Bio-Hazard.png","Miscellaneous/Book-Closed.png","Miscellaneous/Book-Open.png","Miscellaneous/Book-Shelf.png","Miscellaneous/Books.png","Miscellaneous/Boot-Print.png","Miscellaneous/Bottle-01.png","Miscellaneous/Bottle.png","Miscellaneous/Bow-Arrow.png","Miscellaneous/Bowl.png","Miscellaneous/Box .png","Miscellaneous/Box-02.png","Miscellaneous/Box-03.png","Miscellaneous/Box-04.png","Miscellaneous/Box-Add.png","Miscellaneous/Box-Software.png","Miscellaneous/Box.png","Miscellaneous/Broken-Wall.png","Miscellaneous/Brush-01.png","Miscellaneous/Building.png","Miscellaneous/Bus-Side-View.png","Miscellaneous/Bus.png","Miscellaneous/Business-Man.png","Miscellaneous/CD.png","Miscellaneous/Candle.png","Miscellaneous/Cap-01.png","Miscellaneous/Cap.png","Miscellaneous/Captain.png","Miscellaneous/Car-01.png","Miscellaneous/Car-Battery.png","Miscellaneous/Car-Service.png","Miscellaneous/Car-Side-View.png","Miscellaneous/Car-Top-View.png","Miscellaneous/Car.png","Miscellaneous/Children.png","Miscellaneous/Chopper.png","Miscellaneous/Christmas-Tree.png","Miscellaneous/City.png","Miscellaneous/Clapper-Board.png","Miscellaneous/Cleaver-Knife.png","Miscellaneous/Clock-01.png","Miscellaneous/Clock-02.png","Miscellaneous/Clock.png","Miscellaneous/Closed.png","Miscellaneous/Cloud-Sun.png","Miscellaneous/Collision.png","Miscellaneous/Color.png","Miscellaneous/Compass.png","Miscellaneous/Container.png","Miscellaneous/Cooker.png","Miscellaneous/Cooking-Gloves.png","Miscellaneous/Copyright.png","Miscellaneous/Couple-01.png","Miscellaneous/Couple-02.png","Miscellaneous/Couple-03.png","Miscellaneous/Crane.png","Miscellaneous/Crop.png","Miscellaneous/Crotchet.png","Miscellaneous/Crown-King.png","Miscellaneous/Crown-Queen.png","Miscellaneous/Crutch.png","Miscellaneous/Cube-Molecule.png","Miscellaneous/Cube.png","Miscellaneous/Cupboard.png","Miscellaneous/Cycling.png","Miscellaneous/Danger.png","Miscellaneous/Date.png","Miscellaneous/Death.png","Miscellaneous/Despeckle.png","Miscellaneous/Devil-01.png","Miscellaneous/Devil.png","Miscellaneous/Diagram.png","Miscellaneous/Dice.png","Miscellaneous/Director.png","Miscellaneous/Disney.png","Miscellaneous/Doctor.png","Miscellaneous/Dotted-Half-Note.png","Miscellaneous/Dotted-Half-Rest.png","Miscellaneous/Dotted-Quarter-Note.png","Miscellaneous/Dotted-Quarter-Rest.png","Miscellaneous/Double-Decker-Bus.png","Miscellaneous/Drain.png","Miscellaneous/Drama.png","Miscellaneous/Driller.png","Miscellaneous/Driver.png","Miscellaneous/Drum.png","Miscellaneous/Egg.png","Miscellaneous/Eight-Note.png","Miscellaneous/Electric-Guitar-01.png","Miscellaneous/Electric-Guitar-02.png","Miscellaneous/Equalizer.png","Miscellaneous/Escalator.png","Miscellaneous/Explosion-01.png","Miscellaneous/Explosion.png","Miscellaneous/Factory.png","Miscellaneous/Fallen Tree.png","Miscellaneous/Feather .png","Miscellaneous/Film-Reel-01.png","Miscellaneous/Film-Reel.png","Miscellaneous/Film.png","Miscellaneous/Fire-Exit-01.png","Miscellaneous/Fire-Exit.png","Miscellaneous/Fire-Extinguisher.png","Miscellaneous/Fire-Fighter.png","Miscellaneous/Fire-Hydrant.png","Miscellaneous/Fire.png","Miscellaneous/Flag.png","Miscellaneous/Flame.png","Miscellaneous/Flooding.png","Miscellaneous/Flower-01.png","Miscellaneous/Flower.png","Miscellaneous/Foot Print.png","Miscellaneous/Forklift.png","Miscellaneous/Freight-Departure.png","Miscellaneous/Fuel-Station.png","Miscellaneous/GPS.png","Miscellaneous/Gauge.png","Miscellaneous/Gear.png","Miscellaneous/Genie-Lamp.png","Miscellaneous/Ghost-01.png","Miscellaneous/Ghost-02.png","Miscellaneous/Ghost.png","Miscellaneous/Gift.png","Miscellaneous/Glass-Handle-With-Care.png","Miscellaneous/Gloves.png","Miscellaneous/Graffiti-01.png","Miscellaneous/Graffiti-02.png","Miscellaneous/Grass.png","Miscellaneous/Guard.png","Miscellaneous/Guitar.png","Miscellaneous/Gun.png","Miscellaneous/Half-Note.png","Miscellaneous/Half-Rest.png","Miscellaneous/Hammer.png","Miscellaneous/Handcuffs.png","Miscellaneous/Handle-With-Care.png","Miscellaneous/Hanger.png","Miscellaneous/Hard-Hat.png","Miscellaneous/Hat-01.png","Miscellaneous/Hat-02.png","Miscellaneous/Hat-03.png","Miscellaneous/Hat-04.png","Miscellaneous/Hat-05.png","Miscellaneous/Hat-06.png","Miscellaneous/Helicopter.png","Miscellaneous/Helmet-01.png","Miscellaneous/Helmet-02.png","Miscellaneous/Hook.png","Miscellaneous/Horn.png","Miscellaneous/Hour-Glass.png","Miscellaneous/House.png","Miscellaneous/Houses.png","Miscellaneous/Humidity.png","Miscellaneous/Hurricane.png","Miscellaneous/Incident.png","Miscellaneous/Industry.png","Miscellaneous/Injection.png","Miscellaneous/Ink-Quill-02.png","Miscellaneous/Ink-Quill-03.png","Miscellaneous/Ink-Quill.png","Miscellaneous/Insect.png","Miscellaneous/Internet.png","Miscellaneous/Iris.png","Miscellaneous/James-Bond-007.png","Miscellaneous/Jar.png","Miscellaneous/Keep-Dry.png","Miscellaneous/Key-Signatures.png","Miscellaneous/Knife.png","Miscellaneous/Latitude.png","Miscellaneous/Leaf.png","Miscellaneous/Left.png","Miscellaneous/Like.png","Miscellaneous/Load-Man.png","Miscellaneous/Magic-Wand.png","Miscellaneous/Magnet.png","Miscellaneous/Mail-Box.png","Miscellaneous/Man-Drinking-01.png","Miscellaneous/Man-Drinking-02.png","Miscellaneous/Man-Eating.png","Miscellaneous/Man-Face.png","Miscellaneous/Man-Woman.png","Miscellaneous/Man.png","Miscellaneous/Map-Location.png","Miscellaneous/Maps.png","Miscellaneous/Market.png","Miscellaneous/Masks.png","Miscellaneous/Medal.png","Miscellaneous/Men-Work.png","Miscellaneous/Men.png","Miscellaneous/Microsoft-Windows.png","Miscellaneous/Mike.png","Miscellaneous/Military-Man.png","Miscellaneous/Milk.png","Miscellaneous/Mini-Truck-01.png","Miscellaneous/Mini-Truck-02.png","Miscellaneous/Mixer.png","Miscellaneous/Molecule.png","Miscellaneous/Moon.png","Miscellaneous/Nail.png","Miscellaneous/Navigation.png","Miscellaneous/Newspaper.png","Miscellaneous/No-Smoking.png","Miscellaneous/Oil-01.png","Miscellaneous/Oil.png","Miscellaneous/Old-Man.png","Miscellaneous/Open.png","Miscellaneous/Outlet-Plug-01.png","Miscellaneous/Outlet-Plug.png","Miscellaneous/Overcast-Weather.png","Miscellaneous/Oxidising.png","Miscellaneous/Paint-Brush-01.png","Miscellaneous/Paint-Brush-02.png","Miscellaneous/Paint-Brush-03.png","Miscellaneous/Palette.png","Miscellaneous/Palm Tree.png","Miscellaneous/Palm-Tree.png","Miscellaneous/Paper-Plane.png","Miscellaneous/Parcel.png","Miscellaneous/Parking-Sign.png","Miscellaneous/Party-Mask.png","Miscellaneous/Passenger.png","Miscellaneous/People.png","Miscellaneous/Personalize.png","Miscellaneous/Photograph.png","Miscellaneous/Piano.png","Miscellaneous/Picture-Frame.png","Miscellaneous/Pillow.png","Miscellaneous/Pine-Tree.png","Miscellaneous/Pirate-01.png","Miscellaneous/Pirate.png","Miscellaneous/Pixar.png","Miscellaneous/Planet-01.png","Miscellaneous/Planet.png","Miscellaneous/Plug-In.png","Miscellaneous/Plug.png","Miscellaneous/Poison.png","Miscellaneous/Police-01.png","Miscellaneous/Police-Badge.png","Miscellaneous/Police.png","Miscellaneous/Portrait.png","Miscellaneous/Prawn-01.png","Miscellaneous/Prawn.png","Miscellaneous/Punisher.png","Miscellaneous/Quarter-Note.png","Miscellaneous/Quarter-Rest.png","Miscellaneous/Radiation-Warning.png","Miscellaneous/Railing.png","Miscellaneous/Rainbow.png","Miscellaneous/Recorded-Media.png","Miscellaneous/Recycle-Bin.png","Miscellaneous/Restaurant.png","Miscellaneous/Road-Blocker.png","Miscellaneous/Road.png","Miscellaneous/Rocket.png","Miscellaneous/Rubber-Stamp.png","Miscellaneous/Run.png","Miscellaneous/Saloon.png","Miscellaneous/Sauna.png","Miscellaneous/Saw.png","Miscellaneous/Scoop-Shovel.png","Miscellaneous/Screw-Driver.png","Miscellaneous/Semi-Quaver-01.png","Miscellaneous/Semi-Quaver.png","Miscellaneous/Ship.png","Miscellaneous/Shipping.png","Miscellaneous/Sim-Card.png","Miscellaneous/Sixteenth-Note.png","Miscellaneous/Sixteenth-Rest.png","Miscellaneous/Sleep-01.png","Miscellaneous/Sleep-02.png","Miscellaneous/Smoke.png","Miscellaneous/Smoking-Zone.png","Miscellaneous/Smooth.png","Miscellaneous/Sofa-01.png","Miscellaneous/Sofa.png","Miscellaneous/Spa-Massage.png","Miscellaneous/Spade.png","Miscellaneous/Spanner.png","Miscellaneous/Specs.png","Miscellaneous/Spectacles.png","Miscellaneous/Spider-Man.png","Miscellaneous/Spray.png","Miscellaneous/Stapler.png","Miscellaneous/Storm.png","Miscellaneous/Sun.png","Miscellaneous/Super-Man.png","Miscellaneous/Swimming-Pool.png","Miscellaneous/Sword-02.png","Miscellaneous/Sword-03.png","Miscellaneous/Target.png","Miscellaneous/Television.png","Miscellaneous/Temperature.png","Miscellaneous/Tent-01.png","Miscellaneous/Tent-02.png","Miscellaneous/Thumbs-Down-01.png","Miscellaneous/Thumbs-Down-02.png","Miscellaneous/Thumbs-Up.png","Miscellaneous/Thunder.png","Miscellaneous/Ticket.png","Miscellaneous/Toolbox-01.png","Miscellaneous/Toolbox-02.png","Miscellaneous/Toolbox.png","Miscellaneous/Tools.png","Miscellaneous/Top.png","Miscellaneous/Torch.png","Miscellaneous/Toxins-Radioactive.png","Miscellaneous/Toy.png","Miscellaneous/Traffic-Signal.png","Miscellaneous/Traffic.png","Miscellaneous/Train-Side-View-01.png","Miscellaneous/Train-Side-View-02.png","Miscellaneous/Train.png","Miscellaneous/Tram.png","Miscellaneous/Travel-Luggage.png","Miscellaneous/Treble-Clef.png","Miscellaneous/Tree-01.png","Miscellaneous/Tree-02.png","Miscellaneous/Tree.png","Miscellaneous/Truck-01.png","Miscellaneous/Truck.png","Miscellaneous/Tulip.png","Miscellaneous/Tunnel.png","Miscellaneous/Umbrella.png","Miscellaneous/Unisex.png","Miscellaneous/User.png","Miscellaneous/Vaiking.png","Miscellaneous/Vampire.png","Miscellaneous/Video-Camera.png","Miscellaneous/Vodafone.png","Miscellaneous/Warrior.png","Miscellaneous/Wash.png","Miscellaneous/Water-Drop.png","Miscellaneous/Water-Level.png","Miscellaneous/Water-Tap.png","Miscellaneous/Way-Board.png","Miscellaneous/Weather-Rain.png","Miscellaneous/Weather-Snow.png","Miscellaneous/Wedding-Ring.png","Miscellaneous/Whole-Note.png","Miscellaneous/Whole-Rest.png","Miscellaneous/Window-Screen.png","Miscellaneous/Window.png","Miscellaneous/Wire-Stripper.png","Miscellaneous/Wrench.png","Miscellaneous/Yin-Yang.png","Miscellaneous/Yoga-01.png","Miscellaneous/Yoga-02.png","Miscellaneous/Yoga-03.png","Miscellaneous/Yoga-04.png","Miscellaneous/Yoga-05.png","Miscellaneous/Yoga-06.png","Miscellaneous/Yoga-07.png","Miscellaneous/Yoga-08.png","Miscellaneous/Yoga-09.png","Mobile Application/Add.png","Mobile Application/Alarm-Clock.png","Mobile Application/Apps.png","Mobile Application/Archive.png","Mobile Application/Audio-Disk.png","Mobile Application/Battery-Low.png","Mobile Application/Bin.png","Mobile Application/Bluetooth.png","Mobile Application/Board-Pin.png","Mobile Application/Bookmark.png","Mobile Application/Burn-Disk.png","Mobile Application/Calendar-Date-01.png","Mobile Application/Calendar-Date-02.png","Mobile Application/Calendar-Date-03.png","Mobile Application/Calendar-Date-04.png","Mobile Application/Calendar.png","Mobile Application/Camera-01.png","Mobile Application/Camera.png","Mobile Application/Cancel.png","Mobile Application/Car.png","Mobile Application/Chat.png","Mobile Application/Check-Box.png","Mobile Application/Close.png","Mobile Application/Cloud-Cyclone.png","Mobile Application/Cloud-Overcast.png","Mobile Application/Cloud-Rain.png","Mobile Application/Cloud-Snow.png","Mobile Application/Cloud-Sun.png","Mobile Application/Cloud-Swirl.png","Mobile Application/Cloud-Thunder.png","Mobile Application/Command-Redo.png","Mobile Application/Command-Refresh.png","Mobile Application/Command-Undo.png","Mobile Application/Compass.png","Mobile Application/Conference-Call.png","Mobile Application/Contact.png","Mobile Application/Copy.png","Mobile Application/Cut.png","Mobile Application/Devices.png","Mobile Application/Disc.png","Mobile Application/Document-Download.png","Mobile Application/Document-Upload.png","Mobile Application/Documents.png","Mobile Application/Download.png","Mobile Application/Edit.png","Mobile Application/Favorites.png","Mobile Application/File-Format-PDF.png","Mobile Application/Files.png","Mobile Application/Finance.png","Mobile Application/Flag-01.png","Mobile Application/Flag-02.png","Mobile Application/Flag-03.png","Mobile Application/Flag-04.png","Mobile Application/Flash-Drive.png","Mobile Application/Flash-Off.png","Mobile Application/Flash-On.png","Mobile Application/GPS-Off.png","Mobile Application/GPS-On.png","Mobile Application/GPS-Settings.png","Mobile Application/Game.png","Mobile Application/Globe.png","Mobile Application/Hard-Drive.png","Mobile Application/Headphone-01.png","Mobile Application/Headphone-02.png","Mobile Application/Heart.png","Mobile Application/Help.png","Mobile Application/Home.png","Mobile Application/Hotline.png","Mobile Application/Images.png","Mobile Application/In.png","Mobile Application/Key.png","Mobile Application/Keyboard.png","Mobile Application/Left-Arrow.png","Mobile Application/Location-Marker.png","Mobile Application/Location-Pin.png","Mobile Application/Lock.png","Mobile Application/Logout.png","Mobile Application/Mail-01.png","Mobile Application/Mail.png","Mobile Application/Mailbox.png","Mobile Application/Map.png","Mobile Application/Media-Fast-Forward.png","Mobile Application/Media-Pause.png","Mobile Application/Media-Play.png","Mobile Application/Media-Player.png","Mobile Application/Media-Rewind.png","Mobile Application/Message-Information.png","Mobile Application/Message.png","Mobile Application/Messages.png","Mobile Application/Messaging.png","Mobile Application/Minus.png","Mobile Application/Moon.png","Mobile Application/Movie.png","Mobile Application/Negative.png","Mobile Application/New.png","Mobile Application/News.png","Mobile Application/Next.png","Mobile Application/Node.png","Mobile Application/Note-01.png","Mobile Application/Note-02.png","Mobile Application/Note-03.png","Mobile Application/Note-04.png","Mobile Application/Notification.png","Mobile Application/Open.png","Mobile Application/Out.png","Mobile Application/Paste.png","Mobile Application/People.png","Mobile Application/Phone-Book.png","Mobile Application/Picture.png","Mobile Application/Positive.png","Mobile Application/Power-Button.png","Mobile Application/Power.png","Mobile Application/Preview.png","Mobile Application/Previous.png","Mobile Application/Printer.png","Mobile Application/Properties.png","Mobile Application/QR-Code.png","Mobile Application/Recycle-Bin.png","Mobile Application/Reload.png","Mobile Application/Rename.png","Mobile Application/SMS.png","Mobile Application/Save.png","Mobile Application/Screen.png","Mobile Application/Search.png","Mobile Application/Send.png","Mobile Application/Settings-01.png","Mobile Application/Settings-02.png","Mobile Application/Share-01.png","Mobile Application/Share-02.png","Mobile Application/Share-03.png","Mobile Application/Share-04.png","Mobile Application/Share-05.png","Mobile Application/Shopping-Bag.png","Mobile Application/Signal-Bars 1.png","Mobile Application/Signal-Bars.png","Mobile Application/Sky-Dive.png","Mobile Application/Speaker-Volume.png","Mobile Application/Spiral.png","Mobile Application/Sports.png","Mobile Application/Stock-Index Up.png","Mobile Application/Stock-Index-Down.png","Mobile Application/Stop.png","Mobile Application/Store.png","Mobile Application/Swap-Down.png","Mobile Application/Swap-Left.png","Mobile Application/Swap-Right.png","Mobile Application/Swap-Up.png","Mobile Application/Synchronize.png","Mobile Application/Table-of-Contents.png","Mobile Application/Tag.png","Mobile Application/Text-Document.png","Mobile Application/Trophy.png","Mobile Application/Upload.png","Mobile Application/User-Profile.png","Mobile Application/Vibrate-01.png","Mobile Application/Vibrate-02.png","Mobile Application/Video-Camera.png","Mobile Application/Video.png","Mobile Application/Voice-Search.png","Mobile Application/Voicemail.png","Mobile Application/Volume.png","Mobile Application/Warning-Message.png","Mobile Application/Weather.png","Mobile Application/Wifi-01.png","Mobile Application/Wifi-02.png","Mobile Application/Zoom-In.png","Mobile Application/Zoom-Out.png","Mobile Application/Zoom.png","Network and Security/Add-Earth.png","Network and Security/Add-Shield.png","Network and Security/Armor.png","Network and Security/Bluetooth.png","Network and Security/Bomb.png","Network and Security/Brick.png","Network and Security/Business-Card-01.png","Network and Security/Business-Card-02.png","Network and Security/CPU-01.png","Network and Security/CPU-02.png","Network and Security/Castle.png","Network and Security/Certificate-Add.png","Network and Security/Certificate-Broken.png","Network and Security/Certificate-Information.png","Network and Security/Certificate-New.png","Network and Security/Certificate.png","Network and Security/Close-Shield.png","Network and Security/Cloud-Add.png","Network and Security/Cloud-Delete.png","Network and Security/Cloud-Download.png","Network and Security/Cloud-Private-01.png","Network and Security/Cloud-Private-02.png","Network and Security/Cloud-Public-01.png","Network and Security/Cloud-Public-02.png","Network and Security/Cloud-Recycle.png","Network and Security/Cloud-Refresh.png","Network and Security/Cloud-Upload.png","Network and Security/Cookies-Delete.png","Network and Security/Cookies.png","Network and Security/Cube-Shield.png","Network and Security/Data-Network.png","Network and Security/Data-Secure.png","Network and Security/Data-Shield.png","Network and Security/Delete-Earth.png","Network and Security/Delete-Shield .png","Network and Security/Desktop.png","Network and Security/Download.png","Network and Security/Earth-Node.png","Network and Security/Earth-Shield.png","Network and Security/Finger Print.png","Network and Security/Firewall.png","Network and Security/Folder-Sharing.png","Network and Security/Help-Shield.png","Network and Security/ID-Add.png","Network and Security/ID-Card.png","Network and Security/ID-Correct.png","Network and Security/ID-Delete.png","Network and Security/ID-Information.png","Network and Security/ID-New.png","Network and Security/ID-View.png","Network and Security/ID-Wrong.png","Network and Security/Ignore-Shield.png","Network and Security/Key.png","Network and Security/Knight.png","Network and Security/LAN.png","Network and Security/Link.png","Network and Security/Lock-Add.png","Network and Security/Lock-Delete.png","Network and Security/Lock-Earth.png","Network and Security/Lock-Information.png","Network and Security/Lock-Mail.png","Network and Security/Lock-Open.png","Network and Security/Lock-Time.png","Network and Security/Lock.png","Network and Security/Mail-Attachment.png","Network and Security/Mail-Delete.png","Network and Security/Mail-Forward.png","Network and Security/Mail-Send.png","Network and Security/Mail-Server.png","Network and Security/Mail-Write.png","Network and Security/Mail.png","Network and Security/Message-Earth.png","Network and Security/Music-Earth.png","Network and Security/Network Disconnected.png","Network and Security/Network-Earth.png","Network and Security/Network-Home.png","Network and Security/Network-Sharing.png","Network and Security/Network.png","Network and Security/News-Add.png","Network and Security/News-Delete.png","Network and Security/Node-Delete.png","Network and Security/Node.png","Network and Security/Search-Shield.png","Network and Security/Sent-Mail.png","Network and Security/Server Stopped.png","Network and Security/Server Up.png","Network and Security/Server-01.png","Network and Security/Server-02.png","Network and Security/Server-Certificate.png","Network and Security/Server-Delete.png","Network and Security/Server-Virtualization.png","Network and Security/Shield-Refresh.png","Network and Security/User-Add.png","Network and Security/User-Back.png","Network and Security/User-Delete.png","Network and Security/User-Earth.png","Network and Security/User-Female.png","Network and Security/User-Find.png","Network and Security/User-Headphone.png","Network and Security/User-Information.png","Network and Security/User-Lock.png","Network and Security/User-Male.png","Network and Security/User-Message.png","Network and Security/User-Mobile-Phone.png","Network and Security/User-Monitor.png","Network and Security/User-New.png","Network and Security/User-Refresh.png","Network and Security/User-Server.png","Network and Security/User-Shield.png","Network and Security/User-Time.png","Network and Security/User.png","Network and Security/View-Cookies.png","Network and Security/View-Earth.png","Network and Security/View-Mail.png","Network and Security/View-News.png","Network and Security/Warning-Shield.png","Network and Security/Web.png","Network and Security/Window-Shield.png","Office/Access-New.png","Office/Access.png","Office/Attachment.png","Office/Attachments-Remove.png","Office/Auto-Archive.png","Office/Cancel-All.png","Office/Category.png","Office/Clean.png","Office/Close-All.png","Office/Column-Add.png","Office/Date.png","Office/Delete-All.png","Office/Delete.png","Office/Dial-Up Connection.png","Office/Document.png","Office/Download-Settings.png","Office/Email-Filter.png","Office/Expand-Collapse.png","Office/Folder-Copy.png","Office/Folder-New.png","Office/Folder-Open.png","Office/Folder-Refresh.png","Office/Folder-Settings-02.png","Office/Folder-Settings-03.png","Office/Folder.png","Office/Follow.png","Office/For-This-Week.png","Office/Forward.png","Office/From-Mail.png","Office/Garbage.png","Office/Headers-Download.png","Office/Highlighted.png","Office/Ignore.png","Office/Important.png","Office/Infopath-Designer.png","Office/Item-New.png","Office/Lync.png","Office/Mail-Filter.png","Office/Mail-New.png","Office/Mark-All-As-Read.png","Office/Mark-To-Download.png","Office/Meeting.png","Office/Microsoft-Excel-01.png","Office/Microsoft-Excel-02.png","Office/Microsoft-Excel-2013-01.png","Office/Microsoft-Excel-2013-02.png","Office/Microsoft-Offfice-2013-New.png","Office/Microsoft-Office-2013-02.png","Office/Microsoft-Office-2013-03.png","Office/Microsoft-Office.png","Office/Microsoft-OneNote-2013-01.png","Office/Microsoft-OneNote-2013-02.png","Office/Microsoft-Outlook-01.png","Office/Microsoft-Outlook-02.png","Office/Microsoft-Outlook-New.png","Office/Microsoft-PowerPoint-02.png","Office/Microsoft-PowerPoint-2013.png","Office/Microsoft-PowerPoint.png","Office/Microsoft-Word-01.png","Office/Microsoft-Word-02.png","Office/Microsoft-Word-2013-01.png","Office/Microsoft-Word-New.png","Office/Mouse-Drag.png","Office/Navigation-Pane.png","Office/Office-Complex.png","Office/Office.png","Office/OneNote.png","Office/Outlook-Add-Item.png","Office/Outlook.png","Office/Paint-Bucket.png","Office/People's Pane.png","Office/Proceed-Marked-Headers.png","Office/Project.png","Office/Publisher-New.png","Office/Read-UnRead.png","Office/Reading-Panel.png","Office/Recover-Deleted Items.png","Office/Reminder-Window.png","Office/Reply All.png","Office/Reply.png","Office/Reverse-As-Sort.png","Office/Rules.png","Office/Run-Rules-Now.png","Office/Save As.png","Office/Save-All-Attachments.png","Office/Search-All-Mails.png","Office/Search-End.png","Office/Search-Folder-New.png","Office/Search-Time.png","Office/Search-Tools.png","Office/Selection.png","Office/Send To.png","Office/Send-All.png","Office/Send-Receive-All-Folders.png","Office/Show-Progress.png","Office/Show-in-Favorites.png","Office/To-Do Bar.png","Office/Unmark-To-Download.png","Office/View-Reset.png","Office/View-Settings.png","Office/View.png","Office/Window-New.png","Office/Work-Offline.png","Office/Wrong.png","People/Bartender-Female.png","People/Bartender-Male.png","People/Beautician.png","People/Boy-01.png","People/Chef.png","People/Compose.png","People/Customer.png","People/Dentist.png","People/Doctor.png","People/Employee.png","People/Engineer.png","People/Fireman.png","People/Girl-01.png","People/Hair Stylist.png","People/Military-Medal.png","People/Nun.png","People/Nurse-01.png","People/Nurse.png","People/Painter.png","People/Police man.png","People/Principal-01.png","People/Principal-02.png","People/Surgeon.png","People/Teacher-01.png","People/Teacher-02.png","People/Teacher.png","People/User-Group.png","People/Woman-01.png","People/Woman-02.png","People/Woman-03.png","People/Woman-04.png","People/Woman-05.png","People/Woman-06.png","People/Woman-07.png","People/Woman-08.png","People/Woman-11.png","People/Woman.png","People/Worker.png","Science and Technology/24x7-Suppport.png","Science and Technology/24x7-service1.png","Science and Technology/3D-Glasses.png","Science and Technology/Abacus.png","Science and Technology/Android.png","Science and Technology/Announcement.png","Science and Technology/Antenna.png","Science and Technology/Balloon.png","Science and Technology/Battery.png","Science and Technology/Beaker.png","Science and Technology/Beep-Signal.png","Science and Technology/Bell.png","Science and Technology/Bill-Board.png","Science and Technology/Binary-Code.png","Science and Technology/Biology.png","Science and Technology/Blaster-Explosion .png","Science and Technology/Blog.png","Science and Technology/Bull-Horn.png","Science and Technology/Butterfly.png","Science and Technology/Button-New-01.png","Science and Technology/Button-New-02.png","Science and Technology/Button-New.png","Science and Technology/Button.png","Science and Technology/CCTV-Camera.png","Science and Technology/Cassette.png","Science and Technology/Chat.png","Science and Technology/Check-Mark.png","Science and Technology/Chef-Cap.png","Science and Technology/Command-Mac.png","Science and Technology/Command-Rotate.png","Science and Technology/Conversation-01.png","Science and Technology/Cooker.png","Science and Technology/Cooking-Glove.png","Science and Technology/Cooking-Pan.png","Science and Technology/Cup.png","Science and Technology/Cursor.png","Science and Technology/DVD-RW.png","Science and Technology/DVD-Video.png","Science and Technology/DVD.png","Science and Technology/Device-Microphone-02.png","Science and Technology/Device-Walkie-Talkie.png","Science and Technology/Direction-East.png","Science and Technology/Direction-North.png","Science and Technology/Direction-Sign.png","Science and Technology/Direction-South.png","Science and Technology/Direction-West.png","Science and Technology/Ear-Phone.png","Science and Technology/Ecology-01.png","Science and Technology/Ecology-02.png","Science and Technology/Ecology-03.png","Science and Technology/Electric-Vehicle.png","Science and Technology/Electricity-Transmission-Pole.png","Science and Technology/Energy-Saving-Bulb-01.png","Science and Technology/Energy-Saving-Bulb-02.png","Science and Technology/Energy-Saving-Bulb.png","Science and Technology/Film-Roll.png","Science and Technology/Firewire.png","Science and Technology/Floppy.png","Science and Technology/Fossil-Fuel-Power.png","Science and Technology/GPS-Tracking.png","Science and Technology/Game-Control.png","Science and Technology/Gameboy.png","Science and Technology/Gas-Power.png","Science and Technology/Gramaphone-01.png","Science and Technology/Gramaphone-02.png","Science and Technology/HDD.png","Science and Technology/Headphone-01.png","Science and Technology/Headphone-Jack.png","Science and Technology/Hydroelectric-Power.png","Science and Technology/I-Phone.png","Science and Technology/Incoming-Call.png","Science and Technology/Infinity.png","Science and Technology/Instrument-Barometer-01.png","Science and Technology/Instrument-Barometer-02.png","Science and Technology/Instrument-Binoculars.png","Science and Technology/Instrument-Microscope.png","Science and Technology/Instrument-Sextant.png","Science and Technology/Instument-Telescope-01.png","Science and Technology/Instument-Telescope-02.png","Science and Technology/Letter-Open.png","Science and Technology/Letter.png","Science and Technology/Linux.png","Science and Technology/Mac-PC.png","Science and Technology/Magnet.png","Science and Technology/Magnifying-Glass.png","Science and Technology/Media-Player.png","Science and Technology/Memory-Card.png","Science and Technology/Microphone-01.png","Science and Technology/Microphone-03.png","Science and Technology/Mobile-Phone-Blackberry.png","Science and Technology/Nuclear-Power-Plant.png","Science and Technology/Nuclear.png","Science and Technology/Photovoltaic-Panel.png","Science and Technology/Power.png","Science and Technology/Printer.png","Science and Technology/Radar.png","Science and Technology/Radio-BoomBox.png","Science and Technology/Robot-01.png","Science and Technology/Robot-02.png","Science and Technology/Rotate-01.png","Science and Technology/Satellite.png","Science and Technology/Shuffle.png","Science and Technology/Solar.png","Science and Technology/Source-Code.png","Science and Technology/Speech-01.png","Science and Technology/Speech.png","Science and Technology/Telephone-01.png","Science and Technology/Telephone-02.png","Science and Technology/Telephone-03.png","Science and Technology/Typewriter-01.png","Science and Technology/Typewriter-02.png","Science and Technology/USB-Plug.png","Science and Technology/USB.png","Science and Technology/Vector-Eps.png","Science and Technology/Volume-High.png","Science and Technology/Volume-Low.png","Science and Technology/Volume-Mute.png","Science and Technology/Volume-Slider.png","Science and Technology/Walkman-01.png","Science and Technology/Walkman-02.png","Science and Technology/Walkman-03.png","Science and Technology/Weight-Scale.png","Science and Technology/Weight.png","Science and Technology/Windmill-01.png","Science and Technology/Windmill-02.png","Science and Technology/Windmill-03.png","Science and Technology/Windmill-04.png","Science and Technology/Windows-Mobile.png","Science and Technology/Windows-PC.png","Science and Technology/Wine-Glass-01.png","Science and Technology/Wine-Glass-02.png","Science and Technology/Wine-Glass-03.png","Science and Technology/Wine-Glass-04.png","Science and Technology/Wine-Glass-05.png","Science and Technology/Wine-Glass-06.png","Shapes/Celtic knot 01.png","Shapes/Celtic knot 02.png","Shapes/Celtic knot 03.png","Shapes/Celtic knot 04.png","Shapes/Celtic knot 05.png","Shapes/Celtic knot 06.png","Shapes/Celtic knot 07.png","Shapes/Celtic knot 08.png","Shapes/Celtic knot 09.png","Shapes/Rectangle.png","Shapes/Shape-Callout.png","Shapes/Shape-Callout2.png","Shapes/Shape-Circle.png","Shapes/Shape-Diamond.png","Shapes/Shape-Heart.png","Shapes/Shape-Irregular.png","Shapes/Shape-Leaf.png","Shapes/Shape-Lightning.png","Shapes/Shape-Spade.png","Shapes/Shape-Square.png","Shapes/Shape-Square2.png","Shapes/Shape-Star2.png","Shapes/Shape1.png","Shapes/Shape10.png","Shapes/Shape12.png","Shapes/Shape13.png","Shapes/Shape14.png","Shapes/Shape16.png","Shapes/Shape18.png","Shapes/Shape2.png","Shapes/Shape20.png","Shapes/Shape22.png","Shapes/Shape23.png","Shapes/Shape26.png","Shapes/Shape28.png","Shapes/Shape3.png","Shapes/Shape31.png","Shapes/Shape32.png","Shapes/Shape33.png","Shapes/Shape34.png","Shapes/Shape35.png","Shapes/Shape36.png","Shapes/Shape37.png","Shapes/Shape39.png","Shapes/Shape4.png","Shapes/Shape41.png","Shapes/Shape42.png","Shapes/Shape43.png","Shapes/Shape44.png","Shapes/Shape45.png","Shapes/Shape46.png","Shapes/Shape47.png","Shapes/Shape48.png","Shapes/Shape49.png","Shapes/Shape5.png","Shapes/Shape50.png","Shapes/Shape51.png","Shapes/Shape52.png","Shapes/Shape53.png","Shapes/Shape54.png","Shapes/Shape55.png","Shapes/Shape56.png","Shapes/Shape57.png","Shapes/Shape58.png","Shapes/Shape59.png","Shapes/Shape6.png","Shapes/Shape60.png","Shapes/Shape61.png","Shapes/Shape62.png","Shapes/Shape63.png","Shapes/Shape64.png","Shapes/Shape65.png","Shapes/Shape66.png","Shapes/Shape68.png","Shapes/Shape69.png","Shapes/Shape7.png","Shapes/Shape70.png","Shapes/Shape71.png","Shapes/Shape72.png","Shapes/Shape73.png","Shapes/Shape8.png","Shapes/Shape9.png","Shopping/Add-To-Cart.png","Shopping/Auction.png","Shopping/Barcode.png","Shopping/Bid-01.png","Shopping/Bid-02.png","Shopping/Bill.png","Shopping/Bow.png","Shopping/Buy.png","Shopping/Cap.png","Shopping/Cart-Delete.png","Shopping/Credit-Card.png","Shopping/Customer.png","Shopping/Data-Synchronize.png","Shopping/Discount.png","Shopping/Dollar-Tag.png","Shopping/Euro-Tag.png","Shopping/Free.png","Shopping/Gift-01.png","Shopping/Hat.png","Shopping/Ladies Wear.png","Shopping/Men-Pant.png","Shopping/Men-Shirt-01.png","Shopping/Men-Shirt-02.png","Shopping/Men-Shirt-03.png","Shopping/Men-Shorts-01.png","Shopping/Men-Shorts-02.png","Shopping/Men-Suit.png","Shopping/Men-T-Shirt-01.png","Shopping/Men-T-Shirt-02.png","Shopping/New.png","Shopping/Paid-Invoice.png","Shopping/Pending-Invoice.png","Shopping/Product.png","Shopping/Purchase-Order.png","Shopping/QR-Code.png","Shopping/Receipt.png","Shopping/Sale.png","Shopping/Sales-Order.png","Shopping/Salesman.png","Shopping/Savings-01.png","Shopping/Savings-02.png","Shopping/Scale.png","Shopping/Sell.png","Shopping/Shoe.png","Shopping/Shop-Closed.png","Shopping/Shop-Open.png","Shopping/Shop.png","Shopping/Shopping-Bag.png","Shopping/Shopping-Basket-01.png","Shopping/Shopping-Basket-02.png","Shopping/Shopping-Basket-Add.png","Shopping/Shopping-Basket-Delete.png","Shopping/Shopping-Cart-01.png","Shopping/Shopping-Cart-02.png","Shopping/Shopping-Cart-03.png","Shopping/Shopping-Cart-04.png","Shopping/Shopping-Cart-05.png","Shopping/Socks.png","Shopping/T-Shirt-2.png","Shopping/Tie-01.png","Shopping/Tie-02.png","Shopping/Transport-Truck.png","Shopping/Transport-Van.png","Shopping/VISA.png","Signs/Astro-Aquarius.png","Signs/Astro-Aries.png","Signs/Astro-Cancer.png","Signs/Astro-Capricorn.png","Signs/Astro-Gemini.png","Signs/Astro-Leo.png","Signs/Astro-Libra.png","Signs/Astro-Pisces.png","Signs/Astro-Sagittarius.png","Signs/Astro-Scorpio.png","Signs/Astro-Taurus.png","Signs/Astro-Virgo.png","Signs/Hand-01.png","Signs/Hand-02.png","Signs/Hand-03.png","Signs/Hand-04.png","Signs/Hand-05.png","Signs/Hand-06.png","Signs/Hand-Down.png","Signs/Hand-Fork.png","Signs/Hand-Left-Diagonal.png","Signs/Hand-Left.png","Signs/Hand-Right-Diagonal.png","Signs/Hand-Right.png","Signs/Hand-Sign-01.png","Signs/Hand-Sign-02.png","Signs/Hand-Sign-03.png","Signs/Hand-Sign-04.png","Signs/Hand-Sign-05.png","Signs/Hand-Sign-06.png","Signs/Hand-Sign-07.png","Signs/Hand-Sign-08.png","Signs/Hand-Sign-09.png","Signs/Hand-Sign-10.png","Signs/Hand-Sign-11.png","Signs/Hand-Sign-12.png","Signs/Hand-Sign.png","Signs/Hand-Up.png","Signs/Hand-Wash.png","Signs/Hand.png","Signs/No-Horn.png","Signs/No-Parking.png","Signs/No-U-turn.png","Signs/Railway-Crossing.png","Signs/Road-Backward.png","Signs/Road-Forward.png","Signs/Road-Left-Curve.png","Signs/Road-Left.png","Signs/Road-Median.png","Signs/Road-Right-Curve.png","Signs/Road-Right.png","Signs/Road-Sharp-Left.png","Signs/Road-Sharp-Right.png","Signs/Speed-Braker.png","Signs/Traffic-Signal.png","Signs/Turn-Left.png","Signs/Turn-Right.png","Signs/Turn.png","Signs/U-turn.png","Sports/ATV.png","Sports/Alarm.png","Sports/Archery.png","Sports/Arm-Wrestling.png","Sports/Athletics.png","Sports/Baseball-Bat.png","Sports/Basketball.png","Sports/Bike-Racing-01.png","Sports/Bike-Racing-02.png","Sports/Bishop.png","Sports/Bowling.png","Sports/Boxing-Gloves.png","Sports/Car-Racing.png","Sports/Cheer-Leader.png","Sports/Chess-King.png","Sports/Chess-Queen.png","Sports/Clubs.png","Sports/Cricket.png","Sports/Cycle-Race.png","Sports/Darts.png","Sports/Diamond.png","Sports/Dice.png","Sports/Diving.png","Sports/Dumb-bells-01.png","Sports/Dumb-bells-02.png","Sports/Exercise-01.png","Sports/Exercise-02.png","Sports/Exercise-03.png","Sports/Exercise-04.png","Sports/Fencing.png","Sports/Football-01.png","Sports/Football-02.png","Sports/Golf-Ball.png","Sports/Golf-Court.png","Sports/Gymnastics.png","Sports/Heart.png","Sports/High-Jump-01.png","Sports/High-Jump-02.png","Sports/Hockey-01.png","Sports/Hockey-02.png","Sports/Horse-Racing.png","Sports/Hurdling.png","Sports/Javelin-Throw.png","Sports/Knight.png","Sports/Lawn-Bowls.png","Sports/Long-Jump.png","Sports/Measuring-Tape.png","Sports/Medal-01.png","Sports/Medal-02.png","Sports/MotorCycle-Racing.png","Sports/Olympic-Flame.png","Sports/Olympics-Logo.png","Sports/Pawn.png","Sports/Playing-Cards.png","Sports/Race-Flag.png","Sports/Rifle-Shooting.png","Sports/Rook.png","Sports/Shooting.png","Sports/Shuttle-Cock.png","Sports/Skating.png","Sports/Skiing.png","Sports/Snooker-Ball.png","Sports/Snooker.png","Sports/Soccer.png","Sports/Spade.png","Sports/Sports-Jersey.png","Sports/Sports-Shoe.png","Sports/Stop-Clock.png","Sports/Surfing.png","Sports/Swimming.png","Sports/Table-Tennis.png","Sports/Tennis-Ball.png","Sports/Victory-Stand.png","Sports/Water-Bottle.png","Sports/Weighing-Scale.png","Sports/Weight-Lifting.png","Transportation/Air Bag.png","Transportation/Anchor-01.png","Transportation/Anchor-02.png","Transportation/Boat.png","Transportation/Car.png","Transportation/Charging-Station.png","Transportation/Crane.png","Transportation/Driving.png","Transportation/Engine.png","Transportation/Fuel.png","Transportation/Garage.png","Transportation/Helicopter.png","Transportation/Hook-01.png","Transportation/Hook-02.png","Transportation/Hook-03.png","Transportation/Hook-04.png","Transportation/Hook-05.png","Transportation/Horn.png","Transportation/Light.png","Transportation/Meter-01.png","Transportation/Meter-02.png","Transportation/Oil.png","Transportation/Parachute.png","Transportation/Sailor-Boat-01.png","Transportation/Sailor-Boat-02.png","Transportation/Sailor-Wheel.png","Transportation/Scooter-01.png","Transportation/Scooter-02.png","Transportation/Scooter.png","Transportation/Screw-Driver-01.png","Transportation/Seat-Belt.png","Transportation/Ship's-Wheel.png","Transportation/Ship-01.png","Transportation/Ship-02.png","Transportation/Spaceship.png","Transportation/Steering.png","Transportation/Submarine.png","Transportation/Tank.png","Transportation/Tire.png","Transportation/Tube.png","Transportation/Van.png","Transportation/Wheel.png","User Interface/Adobe-PDF-Export.png","User Interface/Alpha-Blending.png","User Interface/Auto-Size-Columns.png","User Interface/AutoCompleteTextBox.png","User Interface/Automatic-Layout.png","User Interface/Bar-Chart.png","User Interface/Button.png","User Interface/CSV-Export.png","User Interface/Calendar.png","User Interface/Captcha.png","User Interface/Carousel.png","User Interface/Chart-Axes.png","User Interface/Chart-Customization.png","User Interface/Chart-Printing.png","User Interface/Chart-Series.png","User Interface/Chart-Title-Legends.png","User Interface/Chart-Type.png","User Interface/CheckBox.png","User Interface/Circular-Gauge.png","User Interface/Color Picker.png","User Interface/Column-Chooser.png","User Interface/Columns-Next.png","User Interface/Columns.png","User Interface/Command-Undo-Redo.png","User Interface/Conditional-Formatting.png","User Interface/Data-Analysis.png","User Interface/Data-Binding.png","User Interface/Data-Edit.png","User Interface/Digital Gauge.png","User Interface/Docking-Manager.png","User Interface/Double-Check.png","User Interface/Drag-and-Drop.png","User Interface/Drag.png","User Interface/DropDownCalendar.png","User Interface/Editor.png","User Interface/Excel-Export.png","User Interface/Excel-Import and Export.png","User Interface/Excel-Like-Selection.png","User Interface/Export-Chart.png","User Interface/Export.png","User Interface/Filtering.png","User Interface/Flow-Cart.png","User Interface/Formula-Support.png","User Interface/Freeze-Rows-Columns.png","User Interface/Generic-DropDown.png","User Interface/Geometry.png","User Interface/Graph-01.png","User Interface/Graph-02.png","User Interface/Graph-03.png","User Interface/Graph-Diagram.png","User Interface/Grid.png","User Interface/GroupBar.png","User Interface/Grouping.png","User Interface/Help.png","User Interface/Hierarchies.png","User Interface/Hierarchy-Navigator.png","User Interface/High-Resolution-Display.png","User Interface/Import.png","User Interface/Jquery.png","User Interface/Keyboard.png","User Interface/Layouts.png","User Interface/Linear Gauge.png","User Interface/ListBox-Selection Mode.png","User Interface/Localization.png","User Interface/Menu.png","User Interface/Mouse-Operation.png","User Interface/Multi-Column-Sorting.png","User Interface/Multi-Page.png","User Interface/MultiColumn-DropDown-ComboBox.png","User Interface/MultiSelectDropDown.png","User Interface/Navigation.png","User Interface/Page-Layout.png","User Interface/Paging.png","User Interface/Palette.png","User Interface/Pie-Chart.png","User Interface/Pop-up.png","User Interface/Print.png","User Interface/Progress Indicator.png","User Interface/Range-Slider.png","User Interface/Rating.png","User Interface/Read-Only.png","User Interface/Real-Time.png","User Interface/Reload.png","User Interface/Report-Delete.png","User Interface/Report-Editor.png","User Interface/Report-Next.png","User Interface/RichTextEditor.png","User Interface/Rolling-Gauge.png","User Interface/Row.png","User Interface/Rows-Merge.png","User Interface/Scroll.png","User Interface/Selection-Modes.png","User Interface/Serialization.png","User Interface/Slider.png","User Interface/Sorting.png","User Interface/Splitter.png","User Interface/Stacked-Headers.png","User Interface/Statistical-Analysis.png","User Interface/Tab.png","User Interface/Table.png","User Interface/Tag-Cloud.png","User Interface/TaskBar.png","User Interface/Text-Editor.png","User Interface/Toolbar.png","User Interface/Tooltip-01.png","User Interface/Tooltip-02.png","User Interface/Touch-Screen.png","User Interface/Tree.png","User Interface/Upload.png","User Interface/User-Interaction.png","User Interface/Verify.png","User Interface/View-Split.png","User Interface/View-Tiles.png","User Interface/Waiting-Popup.png","User Interface/Window-Docking.png","User Interface/Window-Properties.png","User Interface/Window.png","User Interface/Zoom-Scroll.png","User Interface/Zooming.png","Wildlife/Ant.png","Wildlife/Bat-01.png","Wildlife/Bat-02.png","Wildlife/Bat-03.png","Wildlife/Bear.png","Wildlife/Bee.png","Wildlife/Bird-Nest.png","Wildlife/Bird.png","Wildlife/Bone.png","Wildlife/Bug.png","Wildlife/Butterfly.png","Wildlife/Camel.png","Wildlife/Cat.png","Wildlife/Cow.png","Wildlife/Crab.png","Wildlife/Crocodile.png","Wildlife/Deer-01.png","Wildlife/Deer.png","Wildlife/Dog.png","Wildlife/Dolphin.png","Wildlife/Dove-01.png","Wildlife/Dove-02.png","Wildlife/Duck.png","Wildlife/Eagle.png","Wildlife/Elephant.png","Wildlife/Feather.png","Wildlife/Fish-Tank.png","Wildlife/Fish.png","Wildlife/Fly.png","Wildlife/Footprint.png","Wildlife/Frog.png","Wildlife/Giraffe.png","Wildlife/Goat.png","Wildlife/Hen-01.png","Wildlife/Hen-02.png","Wildlife/Horse.png","Wildlife/Jelly-Fish.png","Wildlife/Kangaroo.png","Wildlife/Kiwi.png","Wildlife/Lion.png","Wildlife/Monkey.png","Wildlife/No-Dogs.png","Wildlife/Octopus.png","Wildlife/Owl.png","Wildlife/Peacock-01.png","Wildlife/Peacock-02.png","Wildlife/Penguin.png","Wildlife/Pig.png","Wildlife/Rabbit-01.png","Wildlife/Rabbit-02.png","Wildlife/Rat.png","Wildlife/Scorpion.png","Wildlife/Seahorse.png","Wildlife/Snake.png","Wildlife/Squirrel.png","Wildlife/Tiger.png","Wildlife/Turtle.png","Wildlife/Web.png"],BadgeEditor=function($){
function shadeColor(color,percent){var num=parseInt(color.slice(1),16),amt=Math.round(2.55*percent),R=(num>>16)+amt,B=(num>>8&255)+amt,G=(255&num)+amt;return"#"+(16777216+65536*(255>R?1>R?0:R:255)+256*(255>B?1>B?0:B:255)+(255>G?1>G?0:G:255)).toString(16).slice(1)}var pluginName="badgeEditor",ColorPalette=[["#ED5565","#DA4453"],["#FC6E51","#E9573F"],["#FFCE54","#F6BB42"],["#A0D468","#8CC152"],["#48CFAD","#37BC9B"],["#4FC1E9","#3BAFDA"],["#5D9CEC","#4A89DC"],["#AC92EC","#967ADC"],["#EC87C0","#D770AD"],["#CCD1D9","#AAB2BD"],["#656D78","#434A54"]];$.each(ColorPalette,function(i,colors){colors[0]=shadeColor(colors[0],8)});var Constructor=function($container,options){var self=this;self.isDisabled=!1,self.$container=$container,self.options=options,$container.html($("<div>").append($("<div>").addClass("badgeEditor")).append($("<div>").addClass("badgeEditor-colors").addClass("pull-right")).append($("<div>").css("clear","both")).append($("<div>").addClass("badgeEditor-images-popover").hide().append($("<div>").addClass("badgeEditor-images"))));var loadImages=function(){var lastCategory,loadList=function($ul){$ul.data("loaded")||($.each($ul.data("imageList"),function(i,path){$ul.append($("<li>").append($("<img>").attr("src",self.options.badgeImagePath+"/thumbnails/"+path).click(function(){self.$(".badgeEditor").badgemaker("setImage",$(this).attr("src").replace("thumbnails","images"))}).css("cursor","pointer")))}),$ul.data("loaded",!0))};$.each(ImageRepo.reverse(),function(i,path){var $ul,listing=[],category=path.split(/\//g)[0];category!==lastCategory&&self.$(".badgeEditor-images").append($("<ul>").hide()),lastCategory=category,$ul=self.$(".badgeEditor-images ul").last(),listing=$ul.data("imageList"),listing||(listing=[]),listing.push(path),$ul.data("imageList",listing)});for(var $images=self.$(".badgeEditor-images");$images[0].scrollHeight===$images.height();)loadList(self.$(".badgeEditor-images ul:hidden").first().show());self.$(".badgeEditor-images").scroll(function(){var scrollHeight=$(this)[0].scrollHeight,innerHeight=$(this).innerHeight(),scrollTop=$(this).scrollTop(),tolerance=8;scrollTop+tolerance>=scrollHeight-innerHeight&&loadList(self.$(".badgeEditor-images ul:hidden").first().show())})},badgeMakerOptions={loaderImg:self.options.badgeImagePath+"loader.gif",placeholderImg:self.options.badgeImagePath+"placeholder.png",lightColor:ColorPalette[6][0],darkColor:ColorPalette[6][1],click:function(){self.$(".badgeEditor-images-popover").toggle(),self.$(".badgeEditor-images-popover").data("isLoaded")||(loadImages(),self.$(".badgeEditor-images-popover").data("isLoaded",!0)),self.options.click&&self.options.click()},onLoadStart:function(){self.isDisabled=!0},onLoad:function(){self.isDisabled=!1}};self.options.badgeStyles&&(badgeMakerOptions.badgeStyles=self.options.badgeStyles),self.options.defaultStyle&&(badgeMakerOptions.style=self.options.defaultStyle),self.$(".badgeEditor").badgemaker(badgeMakerOptions).mousedown(function(evt){$(evt.target).is("canvas")||self.$(".badgeEditor-images-popover").hide()}),self.$(".badgeEditor").css("width","532px"),$.each(ColorPalette,function(i,colors){self.$(".badgeEditor-colors").append($("<div>").addClass("color-choice").append($("<div>").addClass("color-swatch").css("background-color",colors[0])).append($("<div>").addClass("color-swatch").css("background-color",colors[1])).click(function(){self.isDisabled||self.$(".badgeEditor").badgemaker("setColors",colors[0],colors[1])}))})};$.extend(Constructor.prototype,{$:function(selector){return this.$container.find(selector)},getImage:function(){return this.$(".badgeEditor").badgemaker("getImage")}}),$.makeClassPlugin(pluginName,Constructor,{},{getImage:function($elt){var editor=$elt.data(pluginName);return editor.getImage()}})};BadgeEditor(jQuery);
//# sourceMappingURL=ol-editing.min.js.map